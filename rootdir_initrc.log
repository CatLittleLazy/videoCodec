commit 53cd1e95e7461e76ed75f946067f2d21febe8838
Author: Alexander Potapenko <glider@google.com>
Date:   Wed Sep 29 13:30:02 2021 +0000

    init.rc: disable creation of bootreceiver tracing instance for kernels >=4.9 and <= 5.4
    
    The tracing instance takes extra RAM and is not needed on devices running older kernels.
    Bug: 194156700
    Test: manual on a Pixel device
    
    Change-Id: I794062741688ebea0e4bc500723a966f8f646ee1
    Signed-off-by: Alexander Potapenko <glider@google.com>

commit 2163bbbd34fc725959d2075240cfd03dd1c189a3
Author: Christopher Ferris <cferris@google.com>
Date:   Wed Sep 8 12:36:24 2021 -0700

    Add executable bit to tests directories.
    
    In order for crashes when executables are run from the
    /data/local/tests directory, set the executable bit for that
    directory and sub-directories. Without this, neither the root
    user nor shell user can read any executables or shared libraries in
    the tests directory.
    
    Bug: 197229540
    
    Test: Used the crasher executable and copied it to /data/local/tests
    Test: and verified that running it as root and shell results in
    Test: tombstones that have full unwinds with function names.
    Change-Id: Ice669358decad9766e0496c156aa84d4ecacd124

commit 92cb2e858322fe1a1bc88144eac60cc855cf21d6
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Wed Jul 21 15:16:20 2021 -0700

    Use extra_free_kbytes.sh whenever sys.sysctl.extra_free_kbytes changes
    
    sys.sysctl.extra_free_kbytes property controls the value set to the
    /proc/sys/vm/extra_free_kbytes out-of-tree kernel knob. Replace its
    use with execution of extra_free_kbytes.sh script which calculates
    and sets corresponding value to /proc/sys/vm/watermark_scale_factor
    upstream-supported kernel knob.
    
    Bug: 109664768
    Signed-off-by: Suren Baghdasaryan <surenb@google.com>
    Change-Id: Iaece28eb858a20c8c39578a28dc6bbc6adc13c40

commit ec37ba835961d3a7e3570d5f15eaf6a7c1310fc4
Author: Alexander Potapenko <glider@google.com>
Date:   Tue Aug 3 07:47:40 2021 +0000

    Restrict creation of bootreceiver tracing instance to 64-bit systems.
    
    The main users of this instance are KFENCE and MTE-aided KASAN, which are only supported on arm64.
    Skip creation of this tracing instance on 32-bit systems to save ~6Mb memory on low-end devices.
    
    Bug: 195089948
    Bug: 194719088
    Bug: 194156700
    Change-Id: Icaf762715fed7a282b1ad738c10bcb45dc848f4d

commit 1f885aee3d69874c49c2c470251992df0d24acf2
Author: Andrew Walbran <qwandor@google.com>
Date:   Wed Jul 14 13:39:13 2021 +0000

    virtualizationservice will clear its own temporary directory.
    
    Bug: 192917795
    Bug: 193365943
    Test: flashed on a VIM3L and booted
    Change-Id: Ib9657843c4d13c428670982a3f8d0e5dfdb78211

commit 9f8b024c724951341f87dcaf995911c844f70895
Author: Martin Liu <liumartin@google.com>
Date:   Thu Jul 1 11:55:02 2021 +0800

    init: disable watermark_boost feature
    
    In newer kernel, it introduces watermark boost feature
    to enhance memory fragmentation problems. This feature
    will dynamically boost/down watermark level which conflicts
    with LMKD assumption and causing LMKD not to work properly.
    Disabling this feature first until we address it.
    
    Bug: 189938926
    Test: check vm parameter.
    Signed-off-by: Martin Liu <liumartin@google.com>
    Change-Id: I6db5163f843f1129080bb944df7cbb8c799a58e0

commit da75aa7b6bf38f685b65b8ffed80c8615d772629
Merge: c037bdbc5 bcefbb1df
Author: David Anderson <dvander@google.com>
Date:   Tue Jun 29 04:12:13 2021 +0000

    Merge "init: fix to set sd device label correctly for FS"

commit bcefbb1dfb6b02a12d08c77b036bc225a4650368
Author: Guo Weichao <guoweichao@oppo.com>
Date:   Wed May 26 11:12:11 2021 +0800

    init: fix to set sd device label correctly for FS
    
    The sysfs node of sd blk_device is /sys/fs/f2fs/sd-<num>, we shouldn't
    skip partition number at this time.
    
    Bug: 189257443
    Test: access sd-<num> sysfs correctly
    Signed-off-by: Guo Weichao <guoweichao@oppo.com>
    Signed-off-by: Huang Jianan <huangjianan@oppo.com>
    Change-Id: Ibcd7bb265f8fca9cd26f8770403f1bafad433acb

commit 7703d074cc46c6d2b6a4b480cf835386b24eaba5
Author: Wei Wang <wvw@google.com>
Date:   Thu Jun 24 14:10:15 2021 -0700

    init.rc: remove system cgroup migraion
    
    We never use CONFIG_RT_GROUP_SCHED in GKI kernel, but that could be set
    on legacy devices. Remove system cgroup migration and also RT settings
    as we should not have any task under those groups.
    
    Bug: 191925901
    Test: Build
    Signed-off-by: Wei Wang <wvw@google.com>
    Merged-In: I492833975e28e9888e412711e80670ca0901010d
    Change-Id: I492833975e28e9888e412711e80670ca0901010d
    (cherry picked from commit b4e79853cd89afcd37da7410c5f279f4f547c92f)

commit 420830f8a6e41e2bad6ebaed4eac0fbf262639d4
Author: Ricky Wai <rickywai@google.com>
Date:   Tue Jun 8 12:15:14 2021 +0100

    Isolate app profile ref data
    
    Due to aosp/1708274, ref data directory is now world accessible.
    We need to fix ref data directory so that it does not leak app
    visibility information.
    
    Bug: 189787375
    Test: AppDataIsolationTests
    Change-Id: I716852478ce0734c7038934c88c36a567c06393f

commit 2934ee0bcd619a1d2b0b4f19667098f7a9d665e6
Author: Andrew Walbran <qwandor@google.com>
Date:   Wed May 19 17:09:44 2021 +0000

    Create data directory for VirtualizationService.
    
    Bug: 184131523
    Test: Built, flashed, ran microdroid VM via virtmanager
    Change-Id: I1e6a5f7a304a02de1efb29e253d8bbd54f3f704d

commit 11197dd8a81f0640ad09184138acde22d84f602a
Author: Calin Juravle <calin@google.com>
Date:   Fri May 14 11:28:04 2021 -0700

    Allow others to read the profile ref dir
    
    ART wants to optimize the time when the profile information
    is saved for an app. To do so, it needs access to both, the current
    profile, and the reference profile. This will allow ART to access
    the ref profiles, which previously was not needed.
    
    Test: m & flash
    Bug: 185979271
    Change-Id: Ie07bce81d2fba9c0b0ae4f322418e960c024e15d

commit a2de531f2c8ebfc650bc87e6429b1c40b4d2ac6d
Merge: 6939583de 60e30a5ad
Author: Mohammad Islam <samiul@google.com>
Date:   Wed May 5 12:31:43 2021 +0000

    Merge "Add execute permission to /data/apex/decompressed directory"

commit 915b8d7194fc351a63655e255069206a70c50fcc
Author: Eric Biggers <ebiggers@google.com>
Date:   Wed Apr 28 10:15:38 2021 -0700

    init.rc: fix (re)starting apexd on FDE devices
    
    On first boot, FDE devices hang on the command
    'wait_for_prop apexd.status activated'.  This is because apexd was
    already started with the tmpfs /data, then was stopped by
    vold.decrypt=trigger_shutdown_framework.  Then when apexd is started
    again with the real /data, it sees that apexd.status="ready" already, so
    it doesn't consider itself to be starting from scratch again.  So it
    doesn't move apexd.status back to "activated" as expected.
    
    Fix the above by resetting apexd.status to its initial value of the
    empty string before trying to start apexd in the post-fs-data trigger.
    Note that this also takes care of the userspace reboot case which was
    previously handled in the userspace-reboot-requested trigger.
    
    Also, FDE devices hang at the same place on non-first boots with default
    encryption (i.e., when no PIN is set) because apexd is still running
    after having been started with the tmpfs /data.  This is because
    vold.decrypt=trigger_shutdown_framework isn't run in that case, but
    rather vold manually kills processes that have open files on /data --
    which doesn't include apexd.  But, apexd should be restarted too.
    
    Fix that by using 'restart apexd' rather than 'start apexd'.
    
    Note that these changes are needed even though FDE devices don't support
    updatable APEXes, as apexd is needed regardless.
    
    This is one of a set of changes that is needed to get FDE working again
    so that devices that launched with FDE can be upgraded to Android 12.
    
    Bug: 186165644
    Test: Tested FDE on Cuttlefish.  Also tested userspace reboot (with FBE)
    Change-Id: I4fa57cf15d77b64d1167eaf966347d2a9d6a9b72

commit 60e30a5ada0e05646e70cbcb136ae210641e6546
Author: Mohammad Samiul Islam <samiul@google.com>
Date:   Tue Apr 27 21:44:10 2021 +0100

    Add execute permission to /data/apex/decompressed directory
    
    Now that we are activating APEX directly from /data/apex/decompressed
    directory, without this permission, PackageManager fails to parse
    decompressed APEX. This permission setting is same as what we have for
    /data/apex/active.
    
    Bug: 185886528
    Test: atest ApexCompressionTests
    Change-Id: Ief36a6ddc5760faff2c390fa913984385fda99a6

commit 1acd663e96122b396e96c577c7fa62035f43935f
Author: Artur Satayev <satayev@google.com>
Date:   Tue Mar 23 15:36:53 2021 +0000

    Don't generate /etc/classpath in make.
    
    Soong generates classpaths.proto config and puts it into
    /system/etc/classpaths/ for derive_classpath to read at runtime. There
    is no need to plumb these values via make anymore.
    
    Bug: 180105615
    Test: m && launch_cvd; presubmit / DeviceBootTest
    Change-Id: I514c5036871233ae865b972effea8321dbe4aea9

commit 61abbef4e4e4635c797f6095737d83395b1f0faf
Merge: 3f4ea91c7 7583da1bc
Author: Paul Crowley <paulcrowley@google.com>
Date:   Fri Apr 16 15:51:27 2021 +0000

    Merge changes from topic "revert-1665499-revert-1660531-max-boot-level-crypto-KFMCEDKSIV-WPIHELCRFI"
    
    * changes:
      Revert^2 "Set earlyBootEnded before apex starts"
      Revert^2 "Expose AID_KEYSTORE"

commit 3f4ea91c7c8e76b1f4b422b8d9707c660fad311c
Merge: f1cb594c0 3f384a25f
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Fri Apr 16 01:54:54 2021 +0000

    Merge "Move debugfs mount/unmount to init-debug.rc"

commit 7583da1bcde50ea7a641ed8cc105f00193573858
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu Apr 8 17:04:43 2021 +0000

    Revert^2 "Set earlyBootEnded before apex starts"
    
    Revert submission revert-1660531-max-boot-level-crypto-KFMCEDKSIV
    
    Reason for revert: topic:vold-use-keystore2 has landed fixing the bug
    
    Reverted changes:
    Ibf63734a: Revert "Set earlyBootEnded before apex starts"
    Id02f63a7: Revert "Expose AID_KEYSTORE"
    Ibcedeff4: Revert "Cryptographic security for MAX_BOOT_LEVEL"
    
    Restored changes:
    Ia3b968afc:Set earlyBootEnded before apex starts
    Ia69891291:Expose AID_KEYSTORE
    I12530cd13:Cryptographic security for MAX_BOOT_LEVEL
    
    Reverted-SHA1: 82cfe66794061fcd1e2393906ba5b6d557f7b683
    
    Original commit message:
    earlyBootEnded signals to keystore2 to read the database for the first
    time, and start the MAX_BOOT_LEVEL system. It must therefore run
    after /data is mounted and /data/misc/keystore is created, but before
    apexd or odsign starts.
    
    Bug: 176450483
    Test: atest com.android.tests.odsign.OnDeviceSigningHostTest#verifyArtUpgradeSignsFiles
    Change-Id: Ib9c2b4bbdddecdf73924125f9bdc75c82e1dd257

commit abe3b42eb4fe38b3bf694e3ebcac78b12763ab15
Merge: 0bfa7c92f 44bedf6a5
Author: Orion Hodson <oth@google.com>
Date:   Thu Apr 15 08:51:01 2021 +0000

    Merge "Create directory for caching odrefresh metrics"

commit 3f384a25fad7e19f7235060ac074580e9c618730
Author: Hridya Valsaraju <hridya@google.com>
Date:   Tue Apr 13 14:27:16 2021 -0700

    Move debugfs mount/unmount to init-debug.rc
    
    Debugfs cannot be mounted in userbuilds since Android R. Since init only
    mounts/unmounts debugfs during boot for debug builds, move it to
    init-debug.rc.
    
    Bug: 184381659
    Test: build/boot
    Change-Id: Ib51e82b99ec1eb95a2647c91855f6d4d1585040a

commit 44bedf6a58341769349a2740c2eadbb639facb09
Author: Orion Hodson <oth@google.com>
Date:   Fri Apr 9 15:04:15 2021 +0100

    Create directory for caching odrefresh metrics
    
    Metrics are written to /data/misc/odrefresh by odrefresh during early
    boot, then the zygote passes them to statsd and delete the metrics
    files.
    
    Bug: 169925964
    Test: manual
    Change-Id: Ia39098109d59600ae8d7b197f46e9a6de18ca57c

commit 82cfe66794061fcd1e2393906ba5b6d557f7b683
Author: Ulyana Trafimovich <skvadrik@google.com>
Date:   Tue Apr 6 16:07:07 2021 +0000

    Revert "Set earlyBootEnded before apex starts"
    
    Revert "Cryptographic security for MAX_BOOT_LEVEL"
    
    Revert submission 1660531-max-boot-level-crypto
    
    Reason for revert: broken test com.android.tests.odsign.OnDeviceSigningHostTest#verifyArtUpgradeSignsFiles on aosp-master on aosp_cf_x86_64_phone-userdebug at 7261517
    
    Reverted Changes:
    Ia3b968afc:Set earlyBootEnded before apex starts
    Ia69891291:Expose AID_KEYSTORE
    I12530cd13:Cryptographic security for MAX_BOOT_LEVEL
    
    Bug: 184635938
    Change-Id: Ibf63734a02a2c132142671c0fae5d0177bf46079
    Test: forrest run for the broken test

commit 02e0ddcaf9ea48ce725cee09f4e796fc47961d5f
Author: Paul Crowley <paulcrowley@google.com>
Date:   Sat Apr 3 08:48:00 2021 -0700

    Set earlyBootEnded before apex starts
    
    earlyBootEnded signals to keystore2 to read the database for the first
    time, and start the MAX_BOOT_LEVEL system. It must therefore run
    after /data is mounted and /data/misc/keystore is created, but before
    apexd or odsign starts.
    
    Bug: 176450483
    Test: cuttlefish: check keystore2 logs to ensure all looks well.
    Change-Id: Ia3b968afc38edf95712480e99e545ba88ea309c3

commit 6b7311fc99b72bbc18c77282e2a3b52880c8326f
Author: Hridya Valsaraju <hridya@google.com>
Date:   Fri Apr 2 12:36:20 2021 -0700

    Use property ro.product.enforce_debugfs_restrictions to enable debugfs
    restrictions
    
    Use the property ro.product.enforce_debugfs_restrictions to enable
    debugfs restrictions instead of checking the launch API level. Vendors
    can enable build-time as well as run-time debugfs restrictions by
    setting the build flag PRODUCT_SET_DEBUGFS_RESTRICTIONS true which in
    turn sets ro.product.enforce_debugfs_restrictions true as well enables
    sepolicy neverallow restrictions that prevent debugfs access. The
    intention of the build flag is to prevent debugfs dependencies from
    creeping in during development on userdebug/eng builds.
    
    Test: build and boot
    Bug: 184381659
    Change-Id: If555037f973e6e4f35eb7312637f58e8360c3013

commit 7df79970ad54d21b61c5c59d30439179cbf52344
Author: Artur Satayev <satayev@google.com>
Date:   Tue Mar 30 11:56:40 2021 +0100

    Delay running derive_classpath.
    
    It must run before odsign; and now runs after restorecon on /data as well.
    
    Bug: 183861600
    Bug: 180105615
    Test: presubmit && cuttlefish boots
    Change-Id: Iefe59d94a7a40ed1e526c189cbc2baf69156f334

commit 441e6b91e1b24f37d83713788aa9c17fd882f6f5
Author: Artur Satayev <satayev@google.com>
Date:   Tue Mar 30 11:49:05 2021 +0100

    Attempt to fix labels on /data/system/environ/.
    
    Bug: 183861600
    Bug: 180105615
    Test: presubmit && cuttlefish boots
    Change-Id: Ic5206eb28e8028ec3c9c4b5a756c46ddb6e68b58

commit baf2168da79d939237f516c45ff1e414b06a63c0
Merge: e37b6f4f6 52cc89699
Author: satayev <satayev@google.com>
Date:   Tue Mar 23 10:10:00 2021 +0000

    Merge "Revert^2 "Exec_start derive_classpath on post-fs-data.""

commit e853d37efdf36692990650937ad1676e1a4f2ef4
Author: Michael Rosenfeld <mrosenfeld@google.com>
Date:   Wed Feb 10 18:38:05 2021 -0800

    Add a system property to init that drops caches.
    
    *   Users can't call /proc/sys/vm/drop_caches otherwise.
    *   Requires change with associated SELinux permissions.
    
    Bug: 178647679
    Test: flashed user build and dropped caches; no avc denials.
    Test: flashed userdebug build and dropped caches w/o root.
    Change-Id: Ibc91991509f0902d1c04c958fefc0966233f0b2e

commit 52cc8969978b243dfb25a6dd3a2e2824ed48b69b
Author: satayev <satayev@google.com>
Date:   Fri Mar 19 11:08:49 2021 +0000

    Revert^2 "Exec_start derive_classpath on post-fs-data."
    
    9ebc6085da8cf991e7e147a36a024bc69719d816
    
    Bug: 180105615
    Test: manual boot of cuttlefish and gphone emulator
    Change-Id: I299df6b29194fdf41fdcb2c1f59f65241b519c8d

commit 648dec66d5e714059c9fc7b0294a6ca4d6f91149
Author: Martijn Coenen <maco@google.com>
Date:   Wed Mar 17 08:44:55 2021 +0100

    Support asynchronous odsign.
    
    To improve boottime, we want to run odsign in an asynchronous fashion;
    but there are 2 places where we do need it be sync:
    1) We need to know when it's done using its key, so that we lock
    keyrings and advance the boot stage
    2) We need to know verification is complete before we start the zygote
    
    These are indicated by odsign using separate properties.
    
    Bug: 165630556
    Test: init waits for the properties, and proceeds when done
    Change-Id: I623c24a683340961b339ed19be2f577d9293b097

commit 8de8eb741ba9b8e281858d154a49a85091d2883d
Merge: 15ab143be 9ebc6085d
Author: Orion Hodson <oth@google.com>
Date:   Thu Mar 18 19:18:02 2021 +0000

    Merge "Revert "Exec_start derive_classpath on post-fs-data.""

commit 9ebc6085da8cf991e7e147a36a024bc69719d816
Author: Orion Hodson <oth@google.com>
Date:   Thu Mar 18 16:57:04 2021 +0000

    Revert "Exec_start derive_classpath on post-fs-data."
    
    Revert "Introduce derive_classpath service."
    
    Revert "Introduce derive_classpath."
    
    Revert submission 1602413-derive_classpath
    
    Bug: 180105615
    Fix: 183079517
    Reason for revert: SELinux failure leading to *CLASSPATH variables not being set in all builds
    
    Reverted Changes:
    I6e3c64e7a:Introduce derive_classpath service.
    I60c539a8f:Exec_start derive_classpath on post-fs-data.
    I4150de69f:Introduce derive_classpath.
    
    Change-Id: Iefbe057ba45091a1675326e3d5db3f39cc3e2820

commit b684856949e5b1d47574fa4801c21877b6f26158
Merge: 294167d43 f8cdebfc3
Author: Paul Hu <paulhu@google.com>
Date:   Wed Mar 17 11:24:53 2021 +0000

    Merge "Migrate net.tcp.default_init_rwnd to net.tcp_def_init_rwnd"

commit 294167d436ccc4b504c3c6203707d778a5015670
Merge: bb03b3626 1320668c5
Author: satayev <satayev@google.com>
Date:   Wed Mar 17 10:58:30 2021 +0000

    Merge "Exec_start derive_classpath on post-fs-data."

commit f8cdebfc359000f721d34156b487f249551abeeb
Author: paulhu <paulhu@google.com>
Date:   Wed Mar 17 13:59:02 2021 +0800

    Migrate net.tcp.default_init_rwnd to net.tcp_def_init_rwnd
    
    Currently, tcp receive window size is read from
    net.tcp.default_init_rwnd then set to net.tcp_def_init_rwnd. It
    should not use seperate property to read/write the value, it only
    needs one of property basically. So migrate
    net.tcp.default_init_rwnd to net.tcp_def_init_rwnd which has
    formal API.
    
    Bug: 182538166
    Test: Manually check that net.tcp_def_init_rwnd has default
          value and proc/sys/net/ipv4/tcp_default_inti_rwnd node
          is created with same value.
    Change-Id: I6748485f99198b1200c67d6595b659aac7d7e1e0

commit 43defd972f06edfeda82e738fd5300b33a8081fa
Merge: 72ad5d295 e94b36637
Author: Martijn Coenen <maco@google.com>
Date:   Thu Mar 11 09:25:40 2021 +0000

    Merge "Add some keystore boot levels."

commit 1320668c5291d9053ee3c6ac84e0ed0b7c92584d
Author: Artur Satayev <satayev@google.com>
Date:   Tue Feb 23 18:57:58 2021 +0000

    Exec_start derive_classpath on post-fs-data.
    
    The service parses and merges configs from multiple partitions, defines
    *CLASSPATH environ variables' values and writes them to file, for
    init to export.
    
    See go/updatable-classpath for more details.
    
    Bug: 180105615
    Test: manual
    Change-Id: I60c539a8fef4d690f47704e896f67949ec49db60

commit e94b36637dd2084a3a611dc45a87c5bea7408707
Author: Martijn Coenen <maco@google.com>
Date:   Tue Mar 9 10:57:00 2021 +0100

    Add some keystore boot levels.
    
    The first user of keystore boot levels is on-device signing; transition
    the boot level to 30 before running the post-fs data hook, and
    transition it to 40 right after on-device signing is done. This leaves
    some space for future boot levels to be inserted, if we wanted.
    
    Bug: 165630556
    Test: inspect logs
    Change-Id: If0a74cbe9ea8fce806020d8a42a978cfb9117ded

commit 439608bfb012c2e147afa7f79ae15d9208e9a83a
Author: Alexander Potapenko <glider@google.com>
Date:   Tue Mar 2 16:50:16 2021 +0100

    init.rc: set up a tracing instance for BootReceiver.java
    
    This instance will be used to monitor the error_report_end tracing
    events sent by kernel tools in the case of a memory corruption.
    
    Bug: 172316664
    Bug: 181778620
    Test: manual runs with KFENCE enabled
    Signed-off-by: Alexander Potapenko <glider@google.com>
    Change-Id: Ibc5cd3b60fb99030cc55db6b490d6d4bbbca3963

commit 5e53f90cdd397a9853973ab1a6ba28ed77f68d04
Author: Wonsik Kim <wonsik@google.com>
Date:   Wed Mar 3 22:47:02 2021 +0000

    Revert "init.rc: set up a tracing instance for BootReceiver.java"
    
    Revert "Selinux policy for bootreceiver tracing instance"
    
    Revert submission 1572240-kernel_bootreceiver
    
    Reason for revert: DroidMonitor: Potential culprit for Bug 181778620 - verifying through Forrest before revert submission. This is part of the standard investigation process, and does not mean your CL will be reverted.
    Reverted Changes:
    Ic1c49a695:init.rc: set up a tracing instance for BootReceive...
    I828666ec3:Selinux policy for bootreceiver tracing instance
    
    Change-Id: I5c2ccfe3eeb8863086b7cb9b3de43c6e076d995a

commit 2ec6c68ce976fc7f03a7412dc68a0f2bd3819a54
Author: Alexander Potapenko <glider@google.com>
Date:   Tue Mar 2 16:50:16 2021 +0100

    init.rc: set up a tracing instance for BootReceiver.java
    
    This instance will be used to monitor the error_report_end tracing
    events sent by kernel tools in the case of a memory corruption.
    
    Bug: 172316664
    Test: manual runs with KFENCE enabled
    Signed-off-by: Alexander Potapenko <glider@google.com>
    Change-Id: Ic1c49a695ff7df4147a7351051db7b6707c86e0a

commit 75a2bba1587ed4935aa5af4455dce99b31d21f6a
Merge: 1d9764209 95a25124c
Author: Paul Crowley <paulcrowley@google.com>
Date:   Sat Feb 27 05:05:50 2021 +0000

    Merge "Set an initial keystore.boot_level"

commit 272e7a60cb275204acb13d00ba87760497ef8172
Author: Daeho Jeong <daehojeong@google.com>
Date:   Mon Feb 15 14:37:01 2021 +0900

    bfq: set background cgroup weight to 10
    
    For better responsiveness of foreground task's io in BFQ I/O scheduler,
    set background task's weight from default 100 to 10.
    
    Test: cat /dev/blkio/background/blkio.bfq.weight
    Bug: 171739280
    Signed-off-by: Daeho Jeong <daehojeong@google.com>
    Change-Id: I6a4ea2d46c4426d3e34c7ea71a4653e0ce3ed0df

commit 95a25124c7e2c7d281f4cee93873f96b1a059c2c
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu Feb 4 17:30:56 2021 -0800

    Set an initial keystore.boot_level
    
    Keystore listens to this property and uses it to honor the
    MAX_BOOT_LEVEL key tag.
    
    Test: boot, use adb getprop to find the current value.
    Bug: 176450483
    Change-Id: If32b20f56f96afa24166188c2dd931620dcaef98

commit 40839a84697ac15a298b40c7dc4c22b105519ffd
Merge: 3e9dbccde 1f455c8df
Author: Mohammad Islam <samiul@google.com>
Date:   Tue Feb 23 10:26:26 2021 +0000

    Merge "Create apex reserved dir for update_engine"

commit 334a93381d0f903841cb056284444d2a749b1c62
Merge: acc82258c c19f99781
Author: satayev <satayev@google.com>
Date:   Tue Feb 23 04:05:14 2021 +0000

    Merge "Export *CLASSPATH variables after apexes are configured."

commit c19f99781bebc15672920fff069dcb62b827e0c8
Author: Artur Satayev <satayev@google.com>
Date:   Mon Feb 15 20:51:38 2021 +0000

    Export *CLASSPATH variables after apexes are configured.
    
    For now, export the exact same values, on `post-fs-data` instead of on
    `early-init` to soak the change. As a follow up, the actual values will
    be generated by a new oneshot service.
    
    See go/updatable-classpath for more details.
    
    Bug: 180105615
    Test: manual - device boots
    Change-Id: I5f6826a0f87a5e01233e876d820e581feb555bca

commit 73dea057c20a07f7839d43f1e2107133ec55a63b
Merge: 8c164946d 00e51a4b3
Author: Martijn Coenen <maco@google.com>
Date:   Fri Feb 19 11:31:50 2021 +0000

    Merge "Add on-device signing binary."

commit 1f455c8dfeeac2d70b16374584ec479a78d1a2ce
Author: Kelvin Zhang <zhangkelvin@google.com>
Date:   Wed Feb 10 09:32:17 2021 -0500

    Create apex reserved dir for update_engine
    
    When installing an OTA, update_engine needs to reserve some space on
    filesystem by writing to a specific directory(/data/apex/ota_reserved/),
    therefore we need to create this dir on system start up.
    
    We are also pro-actively enabling encryption on this directory so that
    we can create hard links to /data/apex/decompressed. This will be needed
    when we start decompresssing capex from post-install script before
    reboot and on boot we can then simply hard link to these files.
    
    Test: th
    Bug: 172911822
    
    Change-Id: Ia6a63efcedcfdad9817ba88b54f96683d34df6ce

commit 223902d81c842c4637a5e29c914582e40e05f942
Merge: 517d64f0c 96711052e
Author: Mohammad Islam <samiul@google.com>
Date:   Fri Feb 12 10:16:55 2021 +0000

    Merge "Create an encrypted directory for decompressing compressed APEX"

commit 87f55fe2af50f7df0ee2670ee2d92f2c291bc97e
Author: Hongming Jin <hongmingjin@google.com>
Date:   Tue Feb 9 11:54:46 2021 -0800

    Create /data/misc/a11ytrace folder to store accessibility trace data.
    
    Bug: 157601519
    Test: manual check
    Change-Id: I0a12246c8b30e8c68e1dd1fa80135f8945f343dc

commit 2e2861dbd3d74949216e22d2b75b05720d78ae72
Merge: 00fd36cde 3c5058852
Author: Andrei-Valentin Onea <andreionea@google.com>
Date:   Fri Jan 29 14:53:27 2021 +0000

    Merge "Create appcompat data dir"

commit 4356f6e98d4b6feba6ad6d123a1b1511cf91c3b2
Merge: 8d60fefae 18e4372ca
Author: Seigo Nonaka <nona@google.com>
Date:   Mon Jan 25 05:47:03 2021 +0000

    Merge "Set up /data/fonts directory for updatable system fonts"

commit 3c50588529b4c7997ef0aac19320775d33d85043
Author: Andrei Onea <andreionea@google.com>
Date:   Wed Dec 23 15:26:11 2020 +0000

    Create appcompat data dir
    
    This is currently used for persisting the compat framework overrides
    across reboots.
    
    Test: atest CompatConfigTest
    Bug: 145509340
    Change-Id: I9205388b44a337a5b56b78cb6cc78f09494a623e

commit 00e51a4b39359024909b883c47bb2fc401ac8008
Author: Martijn Coenen <maco@google.com>
Date:   Fri Nov 27 12:21:34 2020 +0100

    Add on-device signing binary.
    
    This binary checks and refreshes ART compilation artifacts that are
    necessary for the system to boot.
    
    Bug: 165630556
    Test: inspect init log output on boot
    Change-Id: I15074989a0fb6e5b1036292bc2cd824a141a0252

commit c7a26dc263a5fb1c4830f700e19ea19ae66fee54
Author: Martijn Coenen <maco@google.com>
Date:   Mon Jan 18 11:14:22 2021 +0100

    Move restorecon of /data earlier in boot sequence.
    
    A future early-boot daemon (on-device signing) needs to access
    /data/misc before fs-verity keys are locked. Therefore, move the
    restorecon of /data up a bit, to make sure the labels are correct. To be
    safe, only run it after init_user0, since that function is responsible
    for loading DE keys.
    
    Also move early boot keys and fs-verity key locking a bit later, since
    the on-device signing daemon needs to use both of these, but it also
    needs the restorecon to function correctly.
    
    Bug: 174740982
    Test: manual
    Change-Id: I9b6e44d9b547d420e1c6ba01fb3d3accc0625e20

commit 96711052eb239bdd961d331653babbcf640f83a9
Author: Mohammad Samiul Islam <samiul@google.com>
Date:   Thu Jan 14 20:07:05 2021 +0000

    Create an encrypted directory for decompressing compressed APEX
    
    We want to decompress into an encrypted directory so that it can later
    be hard linked to other encrypted directories, such as /data/rollback.
    
    Bug: 172911820
    Test: atest ApexCompressionTests#testCompressedApexIsDecompressed
    Change-Id: I98bc567ba7e8b1ea1b335830d71d1b1f38e6ea33

commit 8376d87e2da39b9a3fe1034f3ce0a5ecbc4d6369
Merge: bedae3910 fb921a1c4
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Jan 13 04:24:22 2021 +0000

    Merge "Let init mount/unmount debugfs for non-user builds"

commit fb921a1c4e48ad16af868ffa3a0fd0b02c4faa4c
Author: Hridya Valsaraju <hridya@google.com>
Date:   Sat Sep 12 15:37:57 2020 -0700

    Let init mount/unmount debugfs for non-user builds
    
    This change will help non-user builds with keeping debugfs
    disabled during run time. Instead, debugfs will be mounted by init
    to enable boot time initializations to set up vendor debug data
    collection and unmounted after boot. It will be also be mounted by
    dumpstate for bug report generation and unmounted after.
    
    This change is only intended to help vendors (who depend on debugfs to
    collect debug information from userdebug/eng builds) keep debugfs
    disabled during runtime. Platform code must not depend on debugfs at all.
    
    Test: manual
    Bug: 176936478
    Change-Id: I2e89d5b9540e3de094976563682d4b8c5c125876

commit 09494764aec1df79f549a13d745916e6efc225c6
Merge: 5266e041e badf3962b
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Fri Jan 8 08:20:45 2021 +0000

    Merge "Add /metadata/watchdog"

commit badf3962bc2ed81bde9ed16a1527ff6417f5bdf6
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Sat Dec 5 17:25:09 2020 +0000

    Add /metadata/watchdog
    
    This directory will be used to store the mitigation count
    from Package Watchdog in the case of a boot loop, in
    order to persist the value across fs-checkpointing
    rollbacks. One integer will be stored in a file in this
    directory, which will be read and then deleted at the
    next boot. No userdata is stored.
    
    See go/rescue-party-reboot for more context.
    
    Test: Manual test using debug.crash_sysui property
          and inspecting file
    Bug: 171951174
    Change-Id: I2bd5e1ebe14d7e9e4f0e0dbeb90cf76b8400752e

commit 5266e041ef19acadb6d90f43892fe39ab8336251
Merge: e3e5ae9ea e106f0aae
Author: Nicolas Geoffray <ngeoffray@google.com>
Date:   Thu Jan 7 09:23:35 2021 +0000

    Merge "Add boot animation progress system property."

commit 13d86ad6bfd6916a0b7997eb943a70fb2c925630
Author: Kevin Brodsky <kevin.brodsky@arm.com>
Date:   Thu Dec 17 15:32:50 2020 +0000

    init.rc: start tombstoned before switching mount namespace
    
    Unlike apexd, tombstoned uses the regular dynamic linker path
    (/system/bin/linker64). As a result, starting it after we have
    switched to the default mount namespace but before APEXes have been
    activated fails, because /system/bin/linker64 does not exist between
    those two events. Fix that by starting tombstoned even earlier,
    before we have switched mount namespace.
    
    To avoid reintroducing the bug fixed by 2c9c8eb5ffc1 ("init.rc:
    create /data/vendor* earlier"), also make sure that /data/vendor* is
    still created before /data/vendor/tombstones.
    
    While at it, move the creation of /data/anr before starting
    tombstoned, because tombstoned assumes that /data/anr exists.
    
    Fixes: 81c94cdce6ba ("Start tombstoned early in post-fs-data.")
    Test: boot fvp-eng and fvp_mini-eng, check that tombstoned starts
          succesfully on the first attempt
    Change-Id: Ic52383c35fb39c61c2f0e0665fd10e795895d50d

commit e106f0aaeb1f2eb2fedc04082917d954e4a5eba5
Author: Nicolas Geoffray <ngeoffray@google.com>
Date:   Tue Dec 15 18:34:47 2020 +0000

    Add boot animation progress system property.
    
    Test: m
    Bug: 175686819
    Change-Id: Ic2757054b908e2c7ff51e256e8683616df74fb33

commit 24adfede520dbcb9ed7a5bf76381a3ce620516f7
Merge: f96f8e8c7 64fe2c66e
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Dec 10 17:04:42 2020 +0000

    Merge "Add execute permission to /data/app-staging folder"

commit 64fe2c66e227a22077493f8db77344b05e45a860
Author: Mohammad Samiul Islam <samiul@google.com>
Date:   Wed Dec 9 21:05:28 2020 +0000

    Add execute permission to /data/app-staging folder
    
    Package verifiers (e.g, phonesky) needs to access the folders inside
    /data/app-staging to be able to verify them. Without the execute
    permission on app-staging folder, it cannot stat any of the sub-dirs
    inside app-staging.
    
    This also aligns with permission of /data/app folder.
    
    Bug: 175163376
    Test: manual
    Test: installed a staged session and observed that Phonesky did not log
    about not finding the apks in /data/app-staging folder
    
    Change-Id: I9774ed800da9f15401d3cee653142a37bf54ef4a

commit cd91f866180106de7e4acda2e3245d2012f36df5
Merge: f38f0fdd2 3b68bf2d3
Author: Martijn Coenen <maco@google.com>
Date:   Mon Dec 7 13:55:48 2020 +0000

    Merge "Split fsverity_init in two phases."

commit 2f3e936f729079abea763d4edf78340865876c95
Merge: 382d70e77 03b9bcabf
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Fri Dec 4 01:00:33 2020 +0000

    Merge "Use bootstrap linkerconfig from early init"

commit 673b6d47bc7bcfa31d332ed9a884b86f56e6ee81
Merge: b27b67819 aed52ef13
Author: Wei Wang <wvw@google.com>
Date:   Thu Dec 3 18:57:25 2020 +0000

    Merge changes I13c9660a,I41745e7b,I0e6722b8
    
    * changes:
      init.rc: correct the obsolete comment
      Add system-background cpu group
      init.rc: create camera-deamon stune cgroup

commit 0029d3f6c01fae14e269cde4da83840d6af716a0
Merge: 84719713c 3fe1a8c76
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Dec 2 07:49:38 2020 +0000

    Merge "Follow vdc naming convention: earlyBootEnded"

commit aed52ef138ce1927f0884ae1b401ba68e9eeac8f
Author: Wei Wang <wvw@google.com>
Date:   Mon Nov 30 11:44:23 2020 -0800

    init.rc: correct the obsolete comment
    
    system-background cpuset is mapped in tasks_profiles.json.
    
    Bug: 170507876
    Test: Build
    Change-Id: I13c9660a1288e22382ced4dd31f079f31bf7c8dc

commit ab87979a006cedd067b988d1dfd6c617270302d5
Author: Wei Wang <wvw@google.com>
Date:   Tue Nov 24 00:26:40 2020 -0800

    Add system-background cpu group
    
    Add system-background cgroup hierarchy for uclamp and cpu bandwidth
    tuning.
    
    Bug: 170507876
    Bug: 171740453
    Test: boot and check cgroup
    Change-Id: I41745e7b3ac5c1d7ea7dd77f5db39c6895047446

commit 6a28572648bb5573c44a2a33f735ad86a8deb374
Author: Wei Wang <wvw@google.com>
Date:   Mon Nov 30 10:56:29 2020 -0800

    init.rc: create camera-deamon stune cgroup
    
    camera-daemon is referred in task-profiles.json so the hierarchy should
    be created in aosp's init.rc.
    
    Bug: 170507876
    Bug: 171740453
    Test: boot and check cgroup
    Change-Id: I0e6722b88922abf4ccae3b19623d8b889a6e3cb6

commit 03b9bcabff765ea9a5ca71bf51de314960e4c1db
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Mon Nov 30 14:49:36 2020 +0900

    Use bootstrap linkerconfig from early init
    
    Linkerconfig will be moved into Runtime APEX, so
    /system/bin/linkerconfig would not be available before APEX is mounted.
    Use bootstrap linkerconfig instead during early init.
    
    Bug: 165769179
    Test: Cuttlefish boot succeeded
    Change-Id: Iae41f325bbd5f5194aaf4613141860f913dfbff1

commit 3fe1a8c76c2ca692c35eba6a5cbb8dbc1235ddc2
Author: Paul Crowley <paulcrowley@google.com>
Date:   Tue Dec 1 14:37:48 2020 -0800

    Follow vdc naming convention: earlyBootEnded
    
    vdc commands use camelCase, not kebab-case.
    
    Test: EarlyBootKeyTest.CannotCreateEarlyBootKeys
    Change-Id: I5bcc9c435c848f5054e81ffaf87ae32577548570

commit 3b68bf2d347fdba75ceae43708ccf037f75beff8
Author: Martijn Coenen <maco@google.com>
Date:   Mon Nov 30 10:05:40 2020 +0100

    Split fsverity_init in two phases.
    
    First load the verified keys, and then only lock the keyring after apexd
    has run. This is in preperation for on-device signing, which will need
    to add another key to the fs-verity keyring before it's locked.
    
    Note that I've moved loading of the verified keys up a bit; fsverity_init
    used to load keys from Keymaster, but it currently doesn't, so there's
    no need to wait for it.
    
    Bug: 165630556
    Test: boot, cat /proc/keys
    Change-Id: I077673575ae3dafcf3126d8c544fe7f8d34c0225

commit a983f8ab1e79c23806b412780066d8f99c3d8e1c
Author: Rick Yiu <rickyiu@google.com>
Date:   Tue Dec 1 15:45:01 2020 +0800

    rootdir/init.rc: Create camera-daemon groups
    
    In task_profiles.json, camera-daemon is referred for both cpu and
    cpuset controller, so create them in init.rc officially.
    
    Test: build pass
    Bug: 170507876
    Change-Id: I655154ab739ffde6fdfd2d499cbaa974597d3ee7

commit 1848e5e69cedc407fe9602cda2e7e5f1bb46d385
Author: Rick Yiu <rickyiu@google.com>
Date:   Mon Nov 23 11:57:09 2020 +0800

    rootdir/init.rc: Remove duplicated settings
    
    Bug: 170507876
    Test: build pass
    Change-Id: I2cfa886eb84982f03df9bf0db95dc1aae2117418

commit 77cb6a00152f3b48749d1637c5e3f408aa84eac2
Author: Wei Wang <wvw@google.com>
Date:   Wed Nov 18 16:04:08 2020 -0800

    init.rc: migrate tasks from root cpu cgroup to a subgroup
    
    Migrate tasks from root group to a subgroup would help us to put soft
    cpu bandwidth control correctly. There are few tasks now failed to
    migrate due to PF_NO_SETAFFINITY which is the default kernel behavior
    which we are not overriding at this moment.
    
    This CL also fixed an issue that most of RT thread lost RT attribute
    when kernel with CONFIG_RT_GROUP_SCHED enabled, as the subgroup would be
    initialized with 0 RT runtime by default. CONFIG_RT_GROUP_SCHED is not
    enabled in GKI kernels but there could be devices with
    CONFIG_RT_GROUP_SCHED enabled, so setting some budget for those devices
    to make they can still function. OEM can either set proper budget by
    themselves or remove CONFIG_RT_GROUP_SCHED completely.
    
    Bug: 171740453
    Test: boot and check cgroup
    Change-Id: I83babad2751c61d844d03383cb0af09e7513b8e9

commit 18e4372cab29af46422066aeac1ed93dd4742c33
Author: Seigo Nonaka <nona@google.com>
Date:   Tue Nov 17 20:06:49 2020 -0800

    Set up /data/fonts directory for updatable system fonts
    
    - /data/fonts/files
    The updated font files are placed this directory. This files under
    this directory are readable by any apps. Only system_server can write
    font files to this directory.
    
    - /data/fonts/config
    The font configuration used by system_server is stored in this directory.
    Only system_server can read/write this directory.
    
    Bug: 173517579
    Test: atest CtsGraphicsTestCases
    Change-Id: I3d0edd9e58b456be5f8342a4a7babd77e54e0339

commit 0de764d71606d42bd25d1804be3b3ae5d7fc138f
Merge: 7e62aa568 afe86cc08
Author: Martijn Coenen <maco@google.com>
Date:   Wed Nov 18 07:51:31 2020 +0000

    Merge "Call early-boot-ended from init."

commit 5fc74a490e6a7753b43e57ece95ac5f499f3a3d4
Author: JW Wang <wangchun@google.com>
Date:   Fri Nov 13 15:45:49 2020 +0800

    Create the rollback directories in init (1/n)
    
    /data/rollback-history is used to store deleted rollbacks
    for debugging purpose.
    
    Bug: 172644981
    Test: Boot device without this, then try to boot with it without wiping.
    Change-Id: I79da5190aad455448ccd73fe42abdc79b3649e86

commit afe86cc0884fddd22a898ff34356bb40e4cfc357
Author: Martijn Coenen <maco@google.com>
Date:   Thu Nov 12 11:01:24 2020 +0100

    Call early-boot-ended from init.
    
    To make sure it's always called after apexd has run.
    
    Bug: 168585635
    Bug: 173005594
    Test: inspect logs
    Change-Id: Iaff175dea6a658523cdedb8b6894ca23af62bcbf

commit c6baa19d6c53f94b48ada031b9ce6244e7ff2fbc
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Tue Oct 13 10:41:00 2020 -0700

    init: Add cpu controller hierarchy to use utilclamp controller
    
    For devices using utilclamp create cpu controller hierarchy. Do not
    remove schedtune hierarchy yet because init.rc is generic and should
    work with devices which still use schedtune.
    
    Bug: 170507876
    Test: cpuctl groups worked
    Signed-off-by: Suren Baghdasaryan <surenb@google.com>
    Change-Id: I8494b0b64336e0c882847d555c262814bef2ffa1

commit 253289fe07045b8140ef8fb83cfdedeb38dc7db7
Author: Primiano Tucci <primiano@google.com>
Date:   Fri Oct 9 13:59:41 2020 +0100

    Introduce security.lower_kptr_restrict property
    
    This is to allow the tracing service to temporarily
    lower kptr_restrict for the time it takes to build
    its internal symbolization map (~200ms), only on
    userdebug/eng builds.
    kptr_restrict unfortunately cannot be lowered by
    the tracing service itself. The main reason for that
    is the fact that the kernel enforces a CAP_SYS_ADMIN
    capability check at write() time, so the usual pattern
    of opening the file in init and passing the FD to the
    service won't work.
    
    For more details see the design doc go/perfetto-kallsyms.
    Bug: 136133013
    Test: perfetto_integrationtests --gtest_filter=PerfettoTest.KernelAddressSymbolization in r.android.com/1454882
    
    Change-Id: Ib2a8c69ed5348cc436223ff5e3eb8fd8df4ab860

commit 7396fed802c126cbfd3e9c87821fc002cc550cd3
Author: Chiachang Wang <chiachangwang@google.com>
Date:   Thu Oct 15 21:09:25 2020 +0800

    Prevent using abstract terms in the property name
    
    In many cases, it's a common practice to use the name of the
    domain type of a process or the type of the usage category
    instead of using ambiguous terms like sys, system, etc.
    Update the property name with net. prefix for better naming to
    fit the usage of the system property.
    
    Bug: 170917042
    Test: 1. m -j10
          2. Check if /proc/sys/net/ipv4/tcp_default_init_rwnd is
             updated as expected
    Change-Id: I0267880d62cc504a419827732780d2db97b2dfef

commit 2c9c8eb5ffc1012390b6da8614270cc09d392b04
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Oct 16 10:02:40 2020 -0700

    init.rc: create /data/vendor* earlier
    
    A recent change moved creating /data/vendor/tombstone earlier than
    /data/vendor was created, which would cause /data/vendor/tombstone to
    not be created until the second time a device boots, instead of the
    first.
    
    This change moves the creation of /data/vendor* earlier, allowing
    /data/vendor/tombstone to be created on the first boot.
    
    Bug: 169659307
    Test: boot CF for the first time and see /data/vendor/tombstone is
          created
    Change-Id: I53ee8fbc282bc533d50756ebb4cc65a5ca582088

commit b5e565d29b2185ff36d9f96f0477e397f9eb614b
Merge: b2621b05a 6097da8b7
Author: Jack Yu <jackcwyu@google.com>
Date:   Fri Oct 16 07:56:10 2020 +0000

    Merge "Create folder to store nfc snoop data"

commit f99f09eedab6de27d0484703e6ea67e9e1aa21cd
Merge: f8a89dc3a 0098201dc
Author: Mohammad Islam <samiul@google.com>
Date:   Mon Oct 5 16:01:59 2020 +0000

    Merge "Activate encryption for /data/app-staging folder"

commit 81c94cdce6baa9847f2f5fda45c885b41cf3fb3b
Author: Josh Gao <jmgao@google.com>
Date:   Thu Oct 1 13:01:15 2020 -0700

    Start tombstoned early in post-fs-data.
    
    Bug: http://b/169659307
    Test: manual
    Change-Id: Ie19de31e7e2b6cd43402cfd3a2e9274728e9e6b4

commit 0098201dc3cd2845f5cf1ac579d8fa0ce85e89d3
Author: Mohammad Samiul Islam <samiul@google.com>
Date:   Mon Sep 14 17:48:43 2020 +0100

    Activate encryption for /data/app-staging folder
    
    Without enabling the encryption on this folder, we will not be able to
    rename files from this folder to /data/app folder, since /data/app
    folder is encrypted. Trying to rename files between unencrypted folder
    to encrypted folder throws EXDEV error.
    
    Turning on encryption for /data/app-staging has the following concerns:
    
    1. Turning on the encryption will erase all of its content. But this is fine
    since during OTA we fail all staged sessions anyway.
    2. We need to create hardlinks from /data/app-staging to
    /data/apex/active. This is also fine since we will be creating link from
    encrypted folder (/data/app-staging) to non-encrypted folder and this
    does not throw EXDEV error.
    
    Bug: 163037460
    Test: atest StagedInstallTest
    Change-Id: Ie78f6df0c0e08de54a39c5e406957ad0a56b7727

commit c46c2350e5bfacd384572da23925f293efb2109a
Author: Zim <zezeozue@google.com>
Date:   Fri Sep 11 11:06:29 2020 +0100

    Remove persist.sys.fuse == false code paths
    
    Since Android R, the FUSE prop is always on and FUSE-off is no longer
    supported
    
    Test: m
    Bug: 160159282
    Change-Id: I6db20fe8cbf8d260ba21fed5da289eacd4e53ef5

commit bc2fbe9ce45cd9b5ef8d9c5ef259da9a3dc93165
Merge: 756e36155 480335dfd
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Sep 3 03:07:06 2020 +0000

    Merge "Create directories under /data/local/tests at boot" am: 480335dfd6
    
    Original change: https://android-review.googlesource.com/c/platform/system/core/+/1416432
    
    Change-Id: I3136907e6137b8045e884b9cbffbe096951b8010

commit 7201ef820f42b035216e44116890fc84dd688fe5
Author: Colin Cross <ccross@android.com>
Date:   Mon Aug 31 16:15:28 2020 -0700

    Create directories under /data/local/tests at boot
    
    Create directories under /data/local/tests at boot for atest to use
    to execute tests on the device.
    
    Bug: 138450837
    Test: atest binderVendorDoubleLoadTest memunreachable_unit_test memunreachable_binder_test
    Change-Id: Ic8e5031ad8701a063be14b6db760feb78f3eb412

commit 0a112d52f8d31718c7a2813d7f77811a2ef2f36e
Merge: ebd6a0f30 8ac68188a
Author: Xin Li <delphij@google.com>
Date:   Sat Aug 29 01:42:13 2020 -0700

    Merge Android R (rvc-dev-plus-aosp-without-vendor@6692709)
    
    Bug: 166295507
    Merged-In: Id18cb0e2d2f3e776a42b566c4a1af2e250890896
    Change-Id: Iba7cab32ab3aa6f47952c840ff6dc8492e8d0704

commit c0d11aa73a71484777443ec3ebde13b7d032c78b
Merge: 58c10b773 8c92256df
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Wed Aug 26 21:47:19 2020 +0000

    Merge "Store userspace reboot info in /metadata"

commit 8c92256df5880072f950adc28891398dce7ffe3a
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Mon May 11 14:10:09 2020 +0100

    Store userspace reboot info in /metadata
    
    Store pertinent information about userspace reboot events in the case
    of failure. This information is any services which failed to stop
    cleanly, the output of the default fstab and /proc/mounts, and
    a list of mounts which failed to unmount. This information is only
    stored as necessary (i.e. mount information will not be stored if
    everything unmounted, even if some services failed to stop).
    
    Added new /metadata/userspacereboot directory to persist this
    information. Information older than 3 days will be deleted.
    
    Test: adb reboot userspace with sigterm/sigkill timeouts set to
          very low values
    Test: Manual test of storing all other information
    Bug: 151820675
    Change-Id: I6cfbfae92a7fc6f6c984475cad2c50c559924866

commit fdc03350f44aba8abfabc9d66a6e20186cc5d8b0
Author: Marco Ballesio <balejs@google.com>
Date:   Fri Aug 21 08:00:23 2020 -0700

    init.rc: remove initializations to cg2_bpf path
    
    https://r.android.com/c/1324649/5 moves the cgroup folder to its sysfs
    path. Directory access rights are defined by kernel code and sepolicy,
    so remove the initialization lines from init.rc.
    
    Test: manually booted the device and verified access rights for
    /sys/fs/cgroup
    Bug: 154548692
    
    Change-Id: I67284dc651ed529cae69e413b66c6e1292a2d970

commit 1c755e22c8fac626aec289bff181191e6e87a237
Author: Marco Ballesio <balejs@google.com>
Date:   Tue Jun 2 15:35:30 2020 -0700

    libprocessgroup: switch freezer to cgroup v2
    
    remove cgroup v1 freezer entries from init.rc, add a new cgroup v2
    controller and modify plists to properly interact with it.
    
    Bug: 154548692
    Test: manually verified the the cgroup v1 freezer controller isn't
    created and a new controller for cgroup v2 is created under the correct
    sysfs directory.
    
    Change-Id: I1b811300ade486f88fdbd157255a7f37750cc54d

commit 76eca5b4c1be997a93a4febf3d74098c83d9f149
Author: Marco Ballesio <balejs@google.com>
Date:   Wed Mar 11 19:21:20 2020 -0700

    freezer: allow dynamic changes to freezer.state
    
    create new profiles to allowing thawing and freezing back the freezer
    cgroup
    
    Bug: 151225245
    Test: Manually verified that using the SetTaskProfiles method on the
    profiles thaws and freezes back the freezer cgroup.
    
    Change-Id: I7f3e193ebe79b49c1f6ac52b6138ff4ec26fc570

commit 6097da8b764d2b1686a434723b4e2eb3d23c898e
Author: Jack Yu <jackcwyu@google.com>
Date:   Wed Jul 8 17:08:16 2020 +0800

    Create folder to store nfc snoop data
    
    Bug: 153704838
    Test: nfc snooop could be stored in this folder
    Change-Id: I0cb8ea1844e6774d47d3804ed6ddb3b2206be8c8

commit 43dca3c8be0c35781e5c691988ae6c2a317311ba
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Mon Jul 20 17:34:47 2020 -0700

    add generic symlink to access userdata sysfs
    
    This patch adds fixed location to access sysfs entries by introducing:
    /dev/sys/fs/by-name/userdata -> /sys/fs/f2fs/dm-<num>
    /dev/sys/block/by-name/userdata -> /sys/block/dm-<num>
    
    Bug: 144277579
    Signed-off-by: Jaegeuk Kim <jaegeuk@google.com>
    Change-Id: I1b3768005fc8720694bace05292a1b1171d60e3c

commit 8d8edad4437315ad317801ef06862558c18df1a1
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Wed Apr 1 22:02:49 2020 -0700

    rootdir/init.rc: enable iostat by default
    
    Bug: 152162885
    Signed-off-by: Jaegeuk Kim <jaegeuk@google.com>
    Change-Id: If95e30c7d3bfec621dfde9452a6eda5211c64a2b
    Merged-In: If95e30c7d3bfec621dfde9452a6eda5211c64a2b

commit bf73d615f2a87311207b07eef3e99295e5eeeb9a
Merge: 56efd7b74 163548736
Author: Keun-young Park <keunyoung@google.com>
Date:   Wed Jun 24 21:39:10 2020 +0000

    Merge "Start statsd before starting zygote" into rvc-dev am: 163548736a
    
    Original change: https://googleplex-android-review.googlesource.com/c/platform/system/core/+/11975342
    
    Change-Id: I71ad1f73f19e0ddf7e856ecd981132498f538fea

commit 163548736aaecc896b73643daf32f72a7443e488
Merge: 227635182 6423ccd96
Author: Keun-young Park <keunyoung@google.com>
Date:   Wed Jun 24 21:18:18 2020 +0000

    Merge "Start statsd before starting zygote" into rvc-dev

commit a462044ac8c80141a45025ce52581ff331c771ec
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Jun 22 17:47:23 2020 +0100

    Explicitly call restorecon_recursive on /metadata/apex
    
    On some devices we see a weird in which /metadata/apex will have a wrong
    selinux label. This will effectively prevent such devices from getting
    any apex updates. Since we haven't figured out a root cause for this
    bug, it's safer to explicitly call restorecon on /metadata/apex to make
    sure it's correct.
    
    This change shouldn't affect a normal boot flow, since /metadata/apex
    will already have a correct label and restorecon_recursive will be a
    no-op.
    
    Test: rm -Rf /metadata/apex && \
        mkdir /metadata/apex &&
        mkdir /metadata/apex/sessions
    Bug: 149317789
    Merged-In: I971ffe35c93bb79d9e71106c24515ec0ee70333a
    Change-Id: I971ffe35c93bb79d9e71106c24515ec0ee70333a
    (cherry picked from commit cf7b6bad55b3c41d8289852488eb4496a4524ba5)

commit 6423ccd96be44d148466787f7419bc078b08c8b5
Author: Keun young Park <keunyoung@google.com>
Date:   Tue Jun 23 20:32:54 2020 -0700

    Start statsd before starting zygote
    
    - zygote needs statsd for logging boot time event.
    - statsd starting later leads into stats logging failure which
      is reported by all child processes of zygote later.
      This brings lots of noise in statsd error.
    
    Bug: 159664734
    Test: reboot and check if error log does not show up
      E statsd  : Found dropped events: 1 error -19 last atom tag 240 from uid 10169
    Change-Id: Ie585febb50a9668671c8fda41a872595baae8385

commit ae53160792c7a7f9c89b108a377d92f868715134
Merge: 70f1517e1 227635182
Author: Maciej Zenczykowski <maze@google.com>
Date:   Wed Jun 24 03:10:31 2020 +0000

    Merge "add a new trigger for launching the bpfloader" into rvc-dev am: 227635182f
    
    Original change: https://googleplex-android-review.googlesource.com/c/platform/system/core/+/11976442
    
    Change-Id: Iff982438e428ca5782f93a010c5ffd5ca15217ab

commit 227635182ff2acd69e6533e03144144cf7ff66b0
Merge: 8b637c882 c1ca9f75f
Author: Maciej Zenczykowski <maze@google.com>
Date:   Wed Jun 24 02:52:51 2020 +0000

    Merge "add a new trigger for launching the bpfloader" into rvc-dev

commit c1ca9f75f9da7a07fec140a669a05513648af871
Author: Maciej Żenczykowski <maze@google.com>
Date:   Mon Jun 22 01:11:24 2020 -0700

    add a new trigger for launching the bpfloader
    
    Test: built and booted
    Bug: 150040815
    Signed-off-by: Maciej Żenczykowski <maze@google.com>
    Merged-In: If80758b3d7bf499d428880efa5ed555076bfc291
    Change-Id: If80758b3d7bf499d428880efa5ed555076bfc291

commit d9469bdcd5e9915b0f3972cc655e0fc32b053975
Merge: 7fca0e79a 6a8602a8c
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Jun 22 21:52:04 2020 +0000

    Merge "Explicitly call restorecon_recursive on /metadata/apex" into rvc-dev am: 6a8602a8c9
    
    Original change: https://googleplex-android-review.googlesource.com/c/platform/system/core/+/11955299
    
    Change-Id: Ibbf598ea7aac33a50fc5c7b1cab87317284e7de5

commit cf7b6bad55b3c41d8289852488eb4496a4524ba5
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Jun 22 17:47:23 2020 +0100

    Explicitly call restorecon_recursive on /metadata/apex
    
    On some devices we see a weird in which /metadata/apex will have a wrong
    selinux label. This will effectively prevent such devices from getting
    any apex updates. Since we haven't figured out a root cause for this
    bug, it's safer to explicitly call restorecon on /metadata/apex to make
    sure it's correct.
    
    This change shouldn't affect a normal boot flow, since /metadata/apex
    will already have a correct label and restorecon_recursive will be a
    no-op.
    
    Test: rm -Rf /metadata/apex && \
        mkdir /metadata/apex &&
        mkdir /metadata/apex/sessions
    Bug: 149317789
    Change-Id: I971ffe35c93bb79d9e71106c24515ec0ee70333a

commit 6c72c16e3da9019248c8138f71612f1bc630ad7c
Author: Maciej Żenczykowski <maze@google.com>
Date:   Mon Jun 22 01:11:24 2020 -0700

    add a new trigger for launching the bpfloader
    
    Test: built and booted
    Bug: 150040815
    Signed-off-by: Maciej Żenczykowski <maze@google.com>
    Change-Id: If80758b3d7bf499d428880efa5ed555076bfc291

commit 620a7053c5f6b8f7c7c0bc6bafc5fe187956ca50
Merge: a4aeaafed f9537f222
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Tue Jun 16 08:50:38 2020 +0000

    Merge "init.rc: chmod pagetypeinfo to 440 to be captured in BRs" am: a5032be8e0 am: f9537f222b
    
    Original change: https://android-review.googlesource.com/c/platform/system/core/+/1335693
    
    Change-Id: Id9735c5b6677e25f29ea817da30a3df84bee9fed

commit 0abd0d6aa58f29680d8be4d22a8c130ea6bc1692
Author: Martin Liu <liumartin@google.com>
Date:   Sun Jun 14 17:21:13 2020 +0800

    init.rc: chmod pagetypeinfo to 440 to be captured in BRs
    
    Bug: 158928824
    Test: Try BR
    Change-Id: I2fa42780b77d86a234ae8b53d7264fbfd6a7906c

commit 11d167b57530ba5e2df1cb399d504ac44dc6732a
Author: Rick Yiu <rickyiu@google.com>
Date:   Thu Jun 4 14:28:19 2020 +0800

    Fine tune blkio setting to improve boot time
    
    Bug: 133200996
    Test: boot time test
    Change-Id: I5262c28596adb7e849b202b8a163c190818f271a
    Merged-In: I5262c28596adb7e849b202b8a163c190818f271a

commit 20570fa261101726dfb636e4db871388cfc16a95
Merge: cc32dd2ee 30ec7c391
Author: Rick Yiu <rickyiu@google.com>
Date:   Sat Jun 6 00:41:19 2020 +0000

    Merge "Fine tune blkio setting to improve boot time" am: cb63bed8b5 am: 30ec7c391c
    
    Original change: https://android-review.googlesource.com/c/platform/system/core/+/1322741
    
    Change-Id: Id247a8523cf5a2dbb53e42b77c77af5406e02051

commit ad74d8dee04015a50cf2d5117ed9a2a7740ce611
Author: Rick Yiu <rickyiu@google.com>
Date:   Thu Jun 4 14:28:19 2020 +0800

    Fine tune blkio setting to improve boot time
    
    Bug: 133200996
    Test: boot time test
    Change-Id: I5262c28596adb7e849b202b8a163c190818f271a

commit 6e51de98404fbb43b230f4b6c82f780b240f3194
Merge: b8f17f0f9 000226f1d
Author: Mohammad Samiul Islam <samiul@google.com>
Date:   Wed Jun 3 10:19:32 2020 +0000

    Merge "Create /metadata/staged-install dir to store staged install failure reasons" into rvc-dev am: 000226f1d5
    
    Original change: https://googleplex-android-review.googlesource.com/c/platform/system/core/+/11408963
    
    Change-Id: I3b8fd6a68aad1300eaeb2dd03415b90216b3fa61

commit 000226f1d52e05c331509a0b1462e298834886a9
Merge: 84db2e40e d192d5471
Author: Mohammad Samiul Islam <samiul@google.com>
Date:   Wed Jun 3 09:57:18 2020 +0000

    Merge "Create /metadata/staged-install dir to store staged install failure reasons" into rvc-dev

commit 4ff6531bc53b313cdb87f99d0d79750de65bea61
Merge: 4f82ed57b 6030f2f01
Author: Martijn Coenen <maco@google.com>
Date:   Fri May 29 14:54:54 2020 +0000

    Merge changes from topic "fusectl" into rvc-dev am: 6030f2f016
    
    Change-Id: I4888400ae48f4061e938832f49c8d1e453798244

commit 959dcf106dc0f09f8f63f23ad58e56e3a738a2ab
Author: Martijn Coenen <maco@google.com>
Date:   Tue Apr 28 22:27:10 2020 +0200

    Mount fusectl filesystem.
    
    To allow us to manually abort FUSE filesystems.
    
    Bug: 153411204
    Test: inspect /sys/fs/fuse/
    Change-Id: I150597635d62932aa70ee696b4d978c822e6ea8d

commit d192d5471c19c0f9eca7c6e1adc5cdb20d5aeee4
Author: Mohammad Samiul Islam <samiul@google.com>
Date:   Thu May 7 15:52:48 2020 +0100

    Create /metadata/staged-install dir to store staged install failure reasons
    
    Bug: 146343545
    Test: presubmit
    Change-Id: I513d403f67643929bb8f90212c1054fb3024f12a

commit ae6cab0406666fccb8e93ea4193edc590e2ac2e8
Merge: 37f45fcd3 b8591b5ac
Author: Nikita Ioffe <ioffe@google.com>
Date:   Wed May 13 20:15:12 2020 +0000

    Merge "Make /data/apex/active world readable"

commit 106d6fe7758de45232ed0c42d1d6b1bc2f4b63d1
Author: Kyle Lin <kylelin@google.com>
Date:   Thu Apr 23 23:19:25 2020 +0800

    rootdir: init.rc: mount tracefs
    
    Bug: 153849221
    Test: build and try to capture the trace by perfetto and systrace
    Change-Id: Ie8a13e12038bd66afcd264079a2c5f25daaa20ee
    Merged-In: Ie8a13e12038bd66afcd264079a2c5f25daaa20ee
    (cherry picked from commit 9d19a054224cbc7145e39f33dd52b509aa1593b2)

commit fd44bc6518bb6f4262796b454c41bd496a273b29
Merge: a82d15566 8535d1935
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Apr 30 03:16:44 2020 +0000

    Merge "rootdir: init.rc: mount tracefs" am: a5fa1ae859 am: 8535d19357
    
    Change-Id: I2770f5ef2a48f0430519c626d7d24464f93e30de

commit 9d19a054224cbc7145e39f33dd52b509aa1593b2
Author: Kyle Lin <kylelin@google.com>
Date:   Thu Apr 23 23:19:25 2020 +0800

    rootdir: init.rc: mount tracefs
    
    Bug: 153849221
    Test: build and try to capture the trace by perfetto and systrace
    Change-Id: Ie8a13e12038bd66afcd264079a2c5f25daaa20ee

commit b8591b5ace145a181a905f951df060fe0accac20
Author: Nikita Ioffe <ioffe@google.com>
Date:   Tue Apr 21 20:50:53 2020 +0100

    Make /data/apex/active world readable
    
    This will allow Phonesky to read APEXes under /data/apex/active.
    
    Test: adb shell su 10114 dd if=/data/apex/active/com.android.tzdata@300000000.apex of=/dev/null
    Bug: 154635217
    Merged-In: I5278897413ca0e32aed9d1c7f82e48138bc51404
    Change-Id: I5278897413ca0e32aed9d1c7f82e48138bc51404

commit fb4ac314ec93e34d1648e60b29b731bb642ddeb9
Merge: 202d8ba56 e343f439a
Author: Nikita Ioffe <ioffe@google.com>
Date:   Fri Apr 24 21:59:40 2020 +0000

    Merge "Make /data/apex/active world readable" into rvc-dev am: e343f439a3
    
    Change-Id: Ic976bf67ad7bb28547903cc64617b250b3c35004

commit e343f439a346caf46a820d4f17e07531dc079473
Merge: 18d239c5c 71278019d
Author: Nikita Ioffe <ioffe@google.com>
Date:   Fri Apr 24 21:44:40 2020 +0000

    Merge "Make /data/apex/active world readable" into rvc-dev

commit 7c59fc4fb40f16a231c27bb9909dfcfa414544b8
Author: Oli Lan <olilan@google.com>
Date:   Thu Feb 6 11:55:51 2020 +0000

    Observe new apexd status value of "activated" as required.
    
    - Cherry pick of aosp/1228482
    
    As of aosp/1224611, there is a new step in the preparation of APEXes
    where init calls back into apexd after DE user data is unencrypted to
    allow DE apex data to be snapshotted or restored.
    
    aosp/1228581 introduces a new apexd.status value of "activated" that
    is set once APEXes are activated but before this snapshot has occurred.
    
    init may execute "perform_apex_config" once this has occurred, so this
    CL changes init to wait for "activated" rather than "ready" before
    doing this.
    
    Bug: 148672144
    Test: build & flash, check boot completes and check in logs that init
    waits on the correct status value.
    Merged-In: I339580bf593d3b09a5dff749ac2a5d1952bcb210
    Change-Id: I71b62c9dd2f7951811606002f38612784d3d9086

commit 71278019d1d1f04b35c92389725f19c05b355296
Author: Nikita Ioffe <ioffe@google.com>
Date:   Tue Apr 21 20:50:53 2020 +0100

    Make /data/apex/active world readable
    
    This will allow Phonesky to read APEXes under /data/apex/active.
    
    Test: adb shell su 10114 dd if=/data/apex/active/com.android.tzdata@300000000.apex of=/dev/null
    Bug: 154635217
    Change-Id: I5278897413ca0e32aed9d1c7f82e48138bc51404

commit fc80e8c42bee5584351648ba88a501d0daddb980
Merge: 138985f90 418f28dbe
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Thu Apr 16 00:58:14 2020 +0000

    Merge "rootdir/init.rc: enable iostat by default" into rvc-dev am: 418f28dbe4
    
    Change-Id: I256d5b864a824c36eb77e3d767c89488876059bf

commit 418f28dbe4540df2dbb770ff21ce3d4b0e2e9090
Merge: 8c873fedc 767c723c2
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Thu Apr 16 00:48:11 2020 +0000

    Merge "rootdir/init.rc: enable iostat by default" into rvc-dev

commit 0a5ed30d7e370da7f83251958db05a9204ad96a4
Merge: f99fdbecb 6cdf64a2e
Author: Nikita Ioffe <ioffe@google.com>
Date:   Tue Apr 7 18:03:26 2020 +0000

    Merge "Manually unmount /data_mirror mounts in the right order" am: 9cd3c84dc1 am: 6cdf64a2ef
    
    Change-Id: I6d7e3f2ebf77a29c5f54ea3ad4c284df551403c2

commit a680e261e6a2b453863ad0387b01f8f70e8b2471
Author: Nikita Ioffe <ioffe@google.com>
Date:   Tue Apr 7 00:26:15 2020 +0100

    Manually unmount /data_mirror mounts in the right order
    
    Test: atest CtsUserspaceRebootHostSideTestCases
    Bug: 152823078
    Change-Id: I57ff9182807630d8cbcf3ca6374fdd6dc6379da5
    Merged-In: I57ff9182807630d8cbcf3ca6374fdd6dc6379da5
    (cherry picked from commit bf66f433d6b43322dc73bc1160ce542a7705ce00)

commit bf66f433d6b43322dc73bc1160ce542a7705ce00
Author: Nikita Ioffe <ioffe@google.com>
Date:   Tue Apr 7 00:26:15 2020 +0100

    Manually unmount /data_mirror mounts in the right order
    
    Test: atest CtsUserspaceRebootHostSideTestCases
    Bug: 152823078
    Change-Id: I57ff9182807630d8cbcf3ca6374fdd6dc6379da5

commit 767c723c25ad11af5de5a99be22ddcc082bcb29b
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Wed Apr 1 22:02:49 2020 -0700

    rootdir/init.rc: enable iostat by default
    
    Bug: 152162885
    Signed-off-by: Jaegeuk Kim <jaegeuk@google.com>
    Change-Id: If95e30c7d3bfec621dfde9452a6eda5211c64a2b

commit 701add4103af9685bf819d307f74f78398208cc4
Merge: 6df6c3127 6fa02ca30
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Tue Mar 31 16:19:48 2020 +0000

    Merge "rootdir: init.rc: use default dirty writeout policy" am: a76ee8b929 am: 6fa02ca30a
    
    Change-Id: Icec865962b9463d9303d2367b97f074b3b17e8cb

commit 58ff5075acbed907030e680fe8d8a4c1550f41e9
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Tue Apr 2 07:01:43 2019 -0700

    rootdir: init.rc: use default dirty writeout policy
    
    This patch removed the old writeout policy tune which was never touched since
    2009. In the meantime, most of Android devices are equipped with over 4GB DRAM
    and very fast flash storages like UFS, which becomes more like desktop or
    servers in 2009. So, it'd be worth to go back to use the default kernel configs.
    
    Bug: 129751503
    Change-Id: Idb58f5b01bbc4afd270cffba5b8912ea3565819f
    Signed-off-by: Jaegeuk Kim <jaegeuk@google.com>

commit c262d79974657b8cb0044f3c6ca66fedd0b29962
Author: Jeffrey Huang <jeffreyhuang@google.com>
Date:   Thu Mar 5 08:53:11 2020 -0800

    Add new directory for stats metadata
    
    Also reordered the directories in alphabetical order
    
    Test: m -j
    Bug: 149838525
    Merged-In: I1a918d189d8bcb394ec6f818d033dbf7e4518713
    Change-Id: I4b10a01ed6b3285aec6d87765f225c41ec55be96

commit ab43bfb170508a0680b8a2467f99ccf39879ddd8
Merge: e832ae047 3eb99ecf0
Author: Automerger Merge Worker <android-build-automerger-merge-worker@system.gserviceaccount.com>
Date:   Tue Mar 17 16:24:31 2020 +0000

    Merge "freezer: allow dynamic changes to freezer.state" into rvc-dev am: 3eb99ecf0f
    
    Change-Id: Ic3db6564a360117d748fabcec29106e695e737a8

commit c1e763a95b3c7b5eab5b1dbbb7638e8debbc1c9c
Author: Marco Ballesio <balejs@google.com>
Date:   Wed Mar 11 19:21:20 2020 -0700

    freezer: allow dynamic changes to freezer.state
    
    create new profiles to allowing thawing and freezing back the freezer
    cgroup
    
    Bug: 151225245
    Test: Manually verified that using the SetTaskProfiles method on the
    profiles thaws and freezes back the freezer cgroup.
    
    Change-Id: I7f3e193ebe79b49c1f6ac52b6138ff4ec26fc570

commit fcdaee48617278fb690e119087684a64e7df931f
Merge: a94047be7 b6545b80a
Author: Eric Biggers <ebiggers@google.com>
Date:   Fri Mar 13 19:10:19 2020 +0000

    Merge "init.rc: disable kernel module autoloading" into rvc-dev

commit 35cb5cc14a11b805a4a90d93e636db0ca63f700e
Merge: 5300de0e3 0cef47636
Author: Automerger Merge Worker <android-build-automerger-merge-worker@system.gserviceaccount.com>
Date:   Thu Mar 12 21:49:39 2020 +0000

    Merge "init.rc: disable kernel module autoloading" am: e7f014da9c am: 0cef47636d
    
    Change-Id: Ia597709b939a6a1699e364c448430b646a1dcd5e

commit b6545b80a0d02b680068da7e376a4fe3be80e383
Author: Eric Biggers <ebiggers@google.com>
Date:   Wed Mar 11 09:56:15 2020 -0700

    init.rc: disable kernel module autoloading
    
    There is a longstanding bug where file-based encryption causes spurious
    SELinux denials of module_request because it uses the kernel's crypto
    API, and the crypto API tries to autoload kernel modules.
    
    While this sometimes indicate missing kconfig options, it can still
    happen even if all needed kconfig options are enabled.  This is because
    a crypto algorithm can be a composition like "hmac(sha512)", and the
    crypto API will first look for the full composition before it
    instantiates it using the components like "hmac" and "sha512".  But
    often an implementation of the full composition doesn't exist.
    
    However, as far as I can tell, Android doesn't actually use kernel
    module autoloading at all.  First, Android never changes
    /proc/sys/kernel/modprobe from the default of "/sbin/modprobe", yet this
    isn't where modprobe is located on Android.  Android's SELinux policy
    contains a neverallow rule that ensures that only init (not even
    vendor_init) can write to this setting, so vendors can't be changing it.
    
    Vendors could potentially be setting CONFIG_STATIC_USERMODEHELPER_PATH,
    which overrides the path of all usermode helpers including modprobe.
    But this is a relatively new kconfig option, available only in
    android-4.14 and later.  Also, for a vendor to actually do this they'd
    also need to extend the SELinux policy with a domain_auto_trans rule to
    allow their usermode helper to be executed by the kernel.
    
    Android does increasingly use kernel modules, and GKI (Generic Kernel
    Image) will require them.  However, the modules are actually inserted by
    userspace by 'init', not autoloaded.
    
    It's possible to disable kernel module autoloading completely by setting
    /proc/sys/kernel/modprobe to an empty string.  So, let's do that.
    
    This prevents lots of spurious SELinux denials, and allows removing
    unnecessary rules to allow or dontaudit the module_request permission.
    
    Note: when the kernel doesn't have CONFIG_ANDROID_BINDERFS enabled, this
    change exposes a kernel bug that causes a WARNING in get_fs_type().  To
    avoid this WARNING, a kernel fix should be applied too -- currently
    under discussion upstream
    (https://lkml.kernel.org/r/20200310223731.126894-1-ebiggers@kernel.org).
    
    Bug: 130424539
    Bug: 132409186
    Bug: 144399145
    Bug: 146477240
    Bug: 148005188
    Bug: 149542343
    
    Test: Tested on cuttlefish and coral:
    
        - Checked that /proc/sys/kernel/modprobe contains /sbin/modprobe
          before this change, and the empty string after.
    
        - Checked that if all SELinux rules for module_request are removed,
          there are SELinux denials for module_request before this change
          but none after.
    
        - Ran lsmod both before and after and verified that the list is the
          same, i.e. checked that this change doesn't break how Android
          actually loads kernel modules.
    
    Change-Id: I4132fe1a491e7b789311afcf693c1f6493fb9dc5
    Merged-In: I4132fe1a491e7b789311afcf693c1f6493fb9dc5

commit 843f46e674e3f9d424144aa91c51777d66c9692c
Author: Eric Biggers <ebiggers@google.com>
Date:   Wed Mar 11 09:56:15 2020 -0700

    init.rc: disable kernel module autoloading
    
    There is a longstanding bug where file-based encryption causes spurious
    SELinux denials of module_request because it uses the kernel's crypto
    API, and the crypto API tries to autoload kernel modules.
    
    While this sometimes indicate missing kconfig options, it can still
    happen even if all needed kconfig options are enabled.  This is because
    a crypto algorithm can be a composition like "hmac(sha512)", and the
    crypto API will first look for the full composition before it
    instantiates it using the components like "hmac" and "sha512".  But
    often an implementation of the full composition doesn't exist.
    
    However, as far as I can tell, Android doesn't actually use kernel
    module autoloading at all.  First, Android never changes
    /proc/sys/kernel/modprobe from the default of "/sbin/modprobe", yet this
    isn't where modprobe is located on Android.  Android's SELinux policy
    contains a neverallow rule that ensures that only init (not even
    vendor_init) can write to this setting, so vendors can't be changing it.
    
    Vendors could potentially be setting CONFIG_STATIC_USERMODEHELPER_PATH,
    which overrides the path of all usermode helpers including modprobe.
    But this is a relatively new kconfig option, available only in
    android-4.14 and later.  Also, for a vendor to actually do this they'd
    also need to extend the SELinux policy with a domain_auto_trans rule to
    allow their usermode helper to be executed by the kernel.
    
    Android does increasingly use kernel modules, and GKI (Generic Kernel
    Image) will require them.  However, the modules are actually inserted by
    userspace by 'init', not autoloaded.
    
    It's possible to disable kernel module autoloading completely by setting
    /proc/sys/kernel/modprobe to an empty string.  So, let's do that.
    
    This prevents lots of spurious SELinux denials, and allows removing
    unnecessary rules to allow or dontaudit the module_request permission.
    
    Note: when the kernel doesn't have CONFIG_ANDROID_BINDERFS enabled, this
    change exposes a kernel bug that causes a WARNING in get_fs_type().  To
    avoid this WARNING, a kernel fix should be applied too -- currently
    under discussion upstream
    (https://lkml.kernel.org/r/20200310223731.126894-1-ebiggers@kernel.org).
    
    Bug: 130424539
    Bug: 132409186
    Bug: 144399145
    Bug: 146477240
    Bug: 148005188
    Bug: 149542343
    
    Test: Tested on cuttlefish and coral:
    
        - Checked that /proc/sys/kernel/modprobe contains /sbin/modprobe
          before this change, and the empty string after.
    
        - Checked that if all SELinux rules for module_request are removed,
          there are SELinux denials for module_request before this change
          but none after.
    
        - Ran lsmod both before and after and verified that the list is the
          same, i.e. checked that this change doesn't break how Android
          actually loads kernel modules.
    
    Change-Id: I4132fe1a491e7b789311afcf693c1f6493fb9dc5

commit 820ac89354c224101a9cf4c37e3a48a65ad7da4a
Merge: 4d829510c 17dd7ff06
Author: Automerger Merge Worker <android-build-automerger-merge-worker@system.gserviceaccount.com>
Date:   Mon Mar 9 20:19:08 2020 +0000

    Merge "Add new directory for stats metadata" am: 3a4e3825f4 am: 17dd7ff06c
    
    Change-Id: I6be0083e3d70c6e87d77af85dbfceec5b45be819

commit 3a4e3825f40a9dfc5b107b5d872a9abec5a0f088
Merge: 9da07506d 58c88615f
Author: Jeffrey Huang <jeffreyhuang@google.com>
Date:   Mon Mar 9 18:09:21 2020 +0000

    Merge "Add new directory for stats metadata"

commit 58c88615f2b19ff8656fe76c44d5f8fa6ef02eac
Author: Jeffrey Huang <jeffreyhuang@google.com>
Date:   Thu Mar 5 08:53:11 2020 -0800

    Add new directory for stats metadata
    
    Also reordered the directories in alphabetical order
    
    Test: m -j
    Bug: 149838525
    Change-Id: I1a918d189d8bcb394ec6f818d033dbf7e4518713

commit 8c20f9e6b5105359479d36bb916d7b053496171b
Merge: 198651c20 8dccf3ffd
Author: Jeffrey Huang <jeffreyhuang@google.com>
Date:   Thu Mar 5 16:49:39 2020 +0000

    Merge "Update init.rc for statsd setup"

commit 70b6a956194b5623b55a06fe5e73b928c7af37c3
Author: Automerger Merge Worker <android-build-automerger-merge-worker@system.gserviceaccount.com>
Date:   Thu Mar 5 10:18:24 2020 +0000

    Fix /data_mirror permission
    
    Test: Able to boot without error
    Bug: 150671726
    
    Merged-In: If366d284f4f01ebfa660e85bad57861c120ada7e
    Change-Id: I9d85c00d191dcaa46c0182b5a15cd89dcdb9ea5e
    (cherry picked from commit 1a5ae50943d84318cd01ec15099fac70c42e0824)

commit f13fd3b82d07e18ebb67074c407464a2465b672e
Merge: 5d31f5c71 b192a8111
Author: Automerger Merge Worker <android-build-automerger-merge-worker@system.gserviceaccount.com>
Date:   Thu Mar 5 10:29:49 2020 +0000

    Merge "Fix /data_mirror permission" am: 541d0d28b1 am: b192a8111a
    
    Change-Id: Id61f223d5427101f7084aa5dedbc2c29b1d0443d

commit 8dccf3ffd1e5de142987ebd3cf9ed8dfebb17f1d
Author: Jeffrey Huang <jeffreyhuang@google.com>
Date:   Wed Feb 19 10:56:17 2020 -0800

    Update init.rc for statsd setup
    
    Apexes do not support "on" macros, so we are moving
    them into the system partition
    
    Bug: 145923087
    Test: m -j
    Change-Id: Ic671a51f2ec5b91f2f631bae0f509b4aa2d057b4
    Merged-In: Ic84e77269f80097b675d6a1b0d206c2bae7d918d

commit 1a5ae50943d84318cd01ec15099fac70c42e0824
Author: Ricky Wai <rickywai@google.com>
Date:   Wed Mar 4 13:30:09 2020 +0000

    Fix /data_mirror permission
    
    Test: Able to boot without error
    Bug: 150671726
    Change-Id: If366d284f4f01ebfa660e85bad57861c120ada7e

commit 31a64ed1873eb24c9e01ffb32d68f6c23d14368a
Merge: 7b774dca8 f53cca4d2
Author: Automerger Merge Worker <android-build-automerger-merge-worker@system.gserviceaccount.com>
Date:   Mon Mar 2 10:47:07 2020 +0000

    Merge "Observe new apexd status value of "activated" as required." am: 2f11663fc9 am: f53cca4d26
    
    Change-Id: I8ea819407b50d3ce632f5b987507a7807de60bd4

commit 2f11663fc91b5f1dcdb215a2959a872b9183b871
Merge: 8d144f661 3cb185e4a
Author: Oli Lan <olilan@google.com>
Date:   Mon Mar 2 10:24:21 2020 +0000

    Merge "Observe new apexd status value of "activated" as required."

commit 78900ad658b4575dbf61ab7d6e7c632bb978547e
Author: Howard Ro <yro@google.com>
Date:   Thu Feb 20 04:57:00 2020 +0000

    Revert^2 "Update init.rc for statsd setup"
    
    77a8d9f64e1939f665b3c7ac20657a86fd06757d
    
    Change-Id: Ic8dce44e6e83323381a39682b833acf8feb714a2

commit 77a8d9f64e1939f665b3c7ac20657a86fd06757d
Author: Howard Ro <yro@google.com>
Date:   Thu Feb 20 04:19:41 2020 +0000

    Revert "Update init.rc for statsd setup"
    
    Revert "Migrate Statsd to the apex"
    
    Revert "Update statsd binary path for apex"
    
    Revert submission 10356003-statsd_apex
    
    Reason for revert: https://android-build.googleplex.com/builds/quarterdeck?branch=git_master&target=build_test&lkgb=6221366&fkbb=6221428
    Reverted Changes:
    Ic84e77269:Update init.rc for statsd setup
    I6f3fab4b4:Update statsd binary path for apex
    Ib4ea98aed:Migrate Statsd to the apex
    
    Change-Id: I0db7f3be927f379b70e0b68bcf1cfdab3f2f1ae0

commit 8dcbcf13e44116f8681028a2ff44c076565d1414
Author: Jeffrey Huang <jeffreyhuang@google.com>
Date:   Wed Feb 19 10:56:17 2020 -0800

    Update init.rc for statsd setup
    
    Apexes do not support "on" macros, so we are moving
    them into the system partition
    
    Bug: 145923087
    Test: m -j
    Change-Id: Ic84e77269f80097b675d6a1b0d206c2bae7d918d

commit cb3003c1bc1973b20c597d28774eee0517b4c91e
Merge: 15c0b798b 355db04b7
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Mon Feb 17 10:12:44 2020 +0000

    Merge "Set lowmemorykiller kernel driver parameters before lmkd is started" am: 36ef05cbde am: b3553f8963 am: 355db04b78
    
    Change-Id: I585cac23b8bfe71db2e7a649f4c815a1dd88e091

commit 15c0b798bdbf84c1c9ce4521ad124860d664a58e
Merge: d430c85c5 c0210f1d0
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Mon Feb 17 10:12:25 2020 +0000

    Merge "bootstat: enhance last reboot reason property with file backing" am: 7550e6f882 am: ffd276388f am: c0210f1d0e
    
    Change-Id: I6d953d6b9308dc46619e52f81cb5469b22df55d0

commit 36ef05cbdeba88ef73c64c4937ae7892fbd90f2d
Merge: 7550e6f88 689868227
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Sat Feb 15 01:02:08 2020 +0000

    Merge "Set lowmemorykiller kernel driver parameters before lmkd is started"

commit ee016ce0b3cecde031c1d5463edcc1473b63bc39
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Thu May 23 10:00:34 2019 -0700

    bootstat: enhance last reboot reason property with file backing
    
    Helps with support of recovery and rollback boot reason history, by
    also using /metadata/bootstat/persist.sys.boot.reason to file the
    reboot reason.
    
    Test: manual
    Bug: 129007837
    Change-Id: Id1d21c404067414847bef14a0c43f70cafe1a3e2

commit 6898682275e8cb9d6e36f245c95955cc234227e0
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Thu Feb 13 16:17:10 2020 -0800

    Set lowmemorykiller kernel driver parameters before lmkd is started
    
    When kernel lowmemorykiller driver is enabled lmkd detects it by
    checking write access to /sys/module/lowmemorykiller/parameters/minfree
    parameter. By default this file does not have write access and init
    process changes that from "on boot" section of init.rc. However
    "on boot" is never executed in the charger mode, therefore lmkd fails
    to detect the kernel driver. Fix this by setting lowmemorykiller kernel
    driver parameters before lmkd is started.
    
    Bug: 148572711
    Test: boot into charger mode with kernel lmk driver enabled
    Change-Id: Ifc3ef725b95bdb5f7d801031429dc26bae014d1f
    Signed-off-by: Suren Baghdasaryan <surenb@google.com>

commit e48a55649cdc9d699c57420d9b3de54224ec8b90
Author: Zim <zezeozue@google.com>
Date:   Thu Feb 13 19:38:06 2020 +0000

    Revert "Explicitly disable FUSE"
    
    This reverts commit a3209c5f5784b1d8442c9b6f8d852e1764917854.
    
    Should not have been merged into master
    
    Test: m
    Bug: 135341433

commit c367388849328648ed83b8f61a4da347e3919592
Merge: 09bbf6478 9345bfb0b
Author: Automerger Merge Worker <android-build-automerger-merge-worker@system.gserviceaccount.com>
Date:   Wed Feb 12 18:51:48 2020 +0000

    Merge changes from topic "snapshotctl_log" am: da8a404473 am: 6d3c0ef08c am: 9345bfb0b2
    
    Change-Id: I0cb4d5a42e43cee95614cc9397faff9b9ad34a84

commit da8a404473ec7d94c16f9ada498467fd2330e45d
Merge: 684122a26 faa49d1d0
Author: Yifan Hong <elsk@google.com>
Date:   Wed Feb 12 18:18:59 2020 +0000

    Merge changes from topic "snapshotctl_log"
    
    * changes:
      libsnapshot callstack files readable by dumpstate
      snapshotctl logs readable by dumpstate
      snapshotctl_log dir readable by dumpstate

commit 6d3fa224afd38f1ee440dbf54f3258351aa1c34c
Merge: 1d237b5b4 8dacabe6b
Author: Zimuzo Ezeozue <zezeozue@google.com>
Date:   Wed Feb 12 13:15:48 2020 +0000

    Merge "FUSE flag on by default"

commit ec9c803503c689d1bddc2d7d6c8d338c8b0cd41b
Merge: 3d6154ffe a3209c5f5
Author: Zimuzo Ezeozue <zezeozue@google.com>
Date:   Tue Feb 11 21:17:53 2020 +0000

    Merge "Explicitly disable FUSE"

commit 7d28688f960c8fde445558c6c1d4f9446d314882
Author: Yifan Hong <elsk@google.com>
Date:   Sat Feb 8 16:38:56 2020 -0800

    snapshotctl_log dir readable by dumpstate
    
    Set snapshotctl_log as 0755 so that it is
    readable by dumpstate.
    
    Test: bugreport
    Bug: 148818798
    Change-Id: I6ff52cf0a2e928c74df31aa054ae780f919d6eb0

commit a3209c5f5784b1d8442c9b6f8d852e1764917854
Author: Zim <zezeozue@google.com>
Date:   Tue Feb 11 16:55:06 2020 +0000

    Explicitly disable FUSE
    
    It is already disabled, but having an explcit value in the prop makes
    some code in the system_server, easier.
    
    Will follow up with a cl to explicitly enable it on internal master,
    aosp will remain this way since it doesn't have the additional
    components to run FUSE.
    
    Test: Freshly wiped and flashed device has persist.sys.fuse set to false
    Bug: 135341433
    Merged-In: I1493e2806823b5751794a9a17ee248dc72b857ff
    Change-Id: Ibb955a543e367aa2f4518d5c1c4d070cd084eca0

commit 8dacabe6b3ab2bd8012f769bb3866c2a5bb48075
Author: Zim <zezeozue@google.com>
Date:   Mon Feb 10 20:24:40 2020 +0000

    FUSE flag on by default
    
    This will make the FUSE filesystem the default on the build
    
    Test: https://android-build.googleplex.com/builds/forrest/run/L11100000458471772
    Bug: 135341433
    Change-Id: I1493e2806823b5751794a9a17ee248dc72b857ff

commit 9272319714c999bdf1028a0bd48e56479271f802
Merge: 770a0f078 aedac7e62
Author: Jerry Chang <chenghsiuchang@google.com>
Date:   Tue Feb 11 02:49:29 2020 +0000

    Merge "Create directory to store pre-reboot information before reboot"

commit c17c5b00e1213160ee252938c0ed17b7422b6d81
Merge: 1da736cb3 57909b4c3
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Mon Feb 10 23:10:08 2020 +0000

    Merge changes I1bf07301,I48e8ebf3
    
    * changes:
      Remove more duplicated symlinks
      Remove duplicated debugfs symlink

commit 57909b4c301550d8c333ecfeaed6dba2e516d017
Author: Luca Stefani <luca.stefani.ge1@gmail.com>
Date:   Mon Feb 10 22:23:29 2020 +0100

    Remove more duplicated symlinks
    
    They're all created in rootdir/Android.mk
    
    Test: m
    Change-Id: I1bf07301434d8cf4f2e9226071983d7aeaf149ac

commit 8c61e7da498d8a46e697e481ac91c1fbf0f28704
Author: Luca Stefani <luca.stefani.ge1@gmail.com>
Date:   Mon Feb 10 21:56:01 2020 +0100

    Remove duplicated debugfs symlink
    
    * Currently it's created at build-time in rootdir/Android.mk
    
    Test: m
    Change-Id: I48e8ebf3412dfdfc2dff3b4fcf9b72de52726865

commit c3991a7150fee5ffd81016610eb5c306d457a216
Author: Miao Wang <miaowang@google.com>
Date:   Fri Feb 7 15:01:24 2020 -0800

    Add an stune group for NNAPI HAL
    
     - schedtune.prefer_idle 1
     - schedtune.boost 1
    
    Test: mm
    Test: configure NNAPI HAL to use nnapi-hal stune
    Test: measure perf difference using MLTS benchmark
    
    Change-Id: I5f467c6a58f2c1da40ec8276e101defc808854a3
    (cherry picked from commit 1d748feaec5db7a35066f53f8e5edaf22520c02d)

commit 15e4f6fe5a20cf2b955e3e887868713ee16b42c9
Merge: 1ac1d86b7 85ff4ab9a
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Feb 10 17:22:03 2020 +0000

    Merge "Don't log userspace_reboot.started/finished properties from init"

commit c2bc1a3422769dd9e065182257935cae364abeae
Author: Nikita Ioffe <ioffe@google.com>
Date:   Fri Feb 7 17:42:27 2020 +0000

    Reset dev.bootcomplete property during userspace reboot
    
    Test: adb reboot userspace
    Bug: 135984674
    Change-Id: I7c6e433c819fc22e88820626768fe8832882386e

commit 85ff4ab9a408dfca36a2696aec2bc1476a82ecd7
Author: Nikita Ioffe <ioffe@google.com>
Date:   Thu Feb 6 23:33:42 2020 +0000

    Don't log userspace_reboot.started/finished properties from init
    
    Instead they will be logged from system_server. This CL just prepares
    grounds for logging CL to land.
    
    Test: adb reboot userspace
    Bug: 148767783
    Change-Id: Ie9482ef735344ecfb0de8a37785d314a3c0417ff

commit 3cb185e4a1fb511322980b8331feab70973b61b7
Author: Oli Lan <olilan@google.com>
Date:   Thu Feb 6 11:55:51 2020 +0000

    Observe new apexd status value of "activated" as required.
    
    As of aosp/1224611, there is a new step in the preparation of APEXes
    where init calls back into apexd after DE user data is unencrypted to
    allow DE apex data to be snapshotted or restored.
    
    aosp/1228581 introduces a new apexd.status value of "activated" that
    is set once APEXes are activated but before this snapshot has occurred.
    
    init may execute "perform_apex_config" once this has occurred, so this
    CL changes init to wait for "activated" rather than "ready" before
    doing this.
    
    Bug: 148672144
    Test: build & flash, check boot completes and check in logs that init
    waits on the correct status value.
    
    Change-Id: I339580bf593d3b09a5dff749ac2a5d1952bcb210

commit aedac7e625f6e46a1cbd8c5b0065aee4af501bf3
Author: Jerry Chang <chenghsiuchang@google.com>
Date:   Thu Jan 2 10:57:30 2020 +0800

    Create directory to store pre-reboot information before reboot
    
    Bug: 145203410
    Test: Built and flashed, checked directory was created
    Change-Id: Ic4d43fba62301bde23bec459b5b8b6332be2b6dc

commit 02e5e1ea227a6541bed9b30989ed6f3460c09410
Merge: 405d26dac ebfe359ca
Author: Daniel Rosenberg <drosen@google.com>
Date:   Tue Feb 4 23:03:38 2020 +0000

    Merge "Make /data/media case insensitive"

commit c19b08a66ac32053445dd6df9ef7890c898cff09
Merge: b34a72946 12fe03d47
Author: Yifan Hong <elsk@google.com>
Date:   Tue Feb 4 22:18:33 2020 +0000

    Merge "Make snapshotctl logging better."

commit 12fe03d47058d71e0431cbe5961bab19a5f8ad9a
Author: Yifan Hong <elsk@google.com>
Date:   Mon Feb 3 14:51:06 2020 -0800

    Make snapshotctl logging better.
    
    snapshotctl merge --logcat --log-to-file
    - If --logcat, log to logcat
    - If --log-to-file, log to /data/misc/snapshotctl_log/
    - If both, log to both
    - If none, log to stdout
    
    Test: manually test these 4 cases
    Bug: 148818798
    Change-Id: I44b52936c0d095867acc6ee781c6bec04f6ebd6b

commit b970633642b13da18129fbd4629ec2f077580dd9
Merge: d0854b339 b237d76ae
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Tue Feb 4 00:50:10 2020 +0000

    Merge "Mount binderfs"

commit b237d76ae5d4a68bc1df3c7926d25392e9740c3c
Author: Hridya Valsaraju <hridya@google.com>
Date:   Mon Feb 3 12:33:57 2020 -0800

    Mount binderfs
    
    Mount binderfs at /dev/binderfs. Also add symlinks from /dev/binder,
    /dev/hwbinder and /dev/vndbinder to /dev/binderfs/binder,
    /dev/binderfs/hwbinder and /dev/binderfs/vndbinder respectively.
    
    The symlink commands will fail harmlessly on a kernel
    which does not support binderfs since /dev/{binder,hwbinder,vndbinder}
    devices will exist on the same.
    
    Bug: 136497735
    Bug: 148696163
    
    Test: Cuttlefish boots on Android Common Kernel 4.19 with kernel config
    CONFIG_ANDROID_BINDERFS=y.
    
    Change-Id: I8e04340dc4622b0a3c1fc4aa6bbefcb24eefe00b

commit 823beae16a44883480b90bc78307a44bf6b0d1cc
Merge: 3d3165702 49a542a97
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Mon Feb 3 18:37:40 2020 +0000

    Merge "Revert "Mount binderfs""

commit 0460f65f7837af0f335baabb0123b2b3b6c6de87
Merge: ad9190e34 a466ca8ff
Author: Oli Lan <olilan@google.com>
Date:   Mon Feb 3 17:50:51 2020 +0000

    Merge "Allow apexd to snapshot and restore DE data."

commit a466ca8ff42e6d3b7b589c2acc006ce8492e1b2e
Author: Oli Lan <olilan@google.com>
Date:   Thu Jan 23 19:52:42 2020 +0000

    Allow apexd to snapshot and restore DE data.
    
    This calls into apexd to allow it to snapshot and restore DE apex data
    in the case of a rollback. See the corresponding apexd change for more
    information.
    
    Cherry-pick from (unsubmitted) internal CL: ag/10163227
    
    Bug: 141148175
    Test: atest StagedRollbackTest#testRollbackApexDataDirectories_DeSys
    Change-Id: Ia4bacc9b7b7a77038ba897acbc7db29e177a6433

commit 294c16024b581f6916bc199047f24369d3adbe56
Merge: e6acbfe55 a67b40bc2
Author: Zimuzo Ezeozue <zezeozue@google.com>
Date:   Mon Feb 3 11:34:52 2020 +0000

    Merge "Harden /mnt/pass_through paths"

commit ebfe359ca87dd79d0ab61f94a27e18e83e571e42
Author: Daniel Rosenberg <drosen@google.com>
Date:   Fri Dec 20 13:17:19 2019 -0800

    Make /data/media case insensitive
    
    Use chattr to apply +F to /data/media
    This will fail on devices who do not support casefolding on userdata.
    
    Bug: 138322712
    Test: /data/media is set to +F.
    Change-Id: Ib341c23a0992ee97b23113b3a72f33a61e583b04

commit 8fda5feb254f112120aa494fd81d203b3b399437
Merge: 60a55d91d 00a21e3d5
Author: Maciej Żenczykowski <maze@google.com>
Date:   Sat Feb 1 01:24:57 2020 +0000

    Merge "symlink /dev/net/tun -> ../tun"

commit 49a542a97975fcce5fa6b0791edbb24f788e7175
Author: Greg Kaiser <gkaiser@google.com>
Date:   Fri Jan 31 23:37:21 2020 +0000

    Revert "Mount binderfs"
    
    This reverts commit 8e50be74ae03d19c2a2c9e57bc5395905c6b94a6.
    
    Reason for revert: Several devices did not boot
    Test: Local build with this reverted had the device boot
    Bug: 148689473
    Merged-In: I97e96bd86d02a9fe70c5ef02df85c604b0cfb3c3
    
    Change-Id: Ic4a2990e7c0cb08c374a336422c08d9aad28049d

commit 938379de5bf166af0c32da9054ad6444a65f97f3
Merge: e2a1705f1 8e50be74a
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Fri Jan 31 18:46:14 2020 +0000

    Merge "Mount binderfs"

commit a67b40bc2a8d94413aa6d726bdde23563f7344d0
Author: Zim <zezeozue@google.com>
Date:   Fri Jan 31 16:26:13 2020 +0000

    Harden /mnt/pass_through paths
    
    Only the FUSE daemon (with media_rw gid) needs access to paths on
    /mnt/pass_through. And even then, it only needs execute access on the
    dirs, since there will always be a bind mount either from sdcardfs or
    the lower filesystem on it and that bind mount correctly handles ACLs
    for the FUSE daemon.
    
    Test: manual
    Bug: 135341433
    Change-Id: I999451e095da355e6247e9e18fb6fe1ab8fc45d6

commit 00a21e3d543e062006576ea50a1b998cbe7d45c3
Author: Maciej Żenczykowski <maze@google.com>
Date:   Sat Jan 25 00:34:33 2020 -0800

    symlink /dev/net/tun -> ../tun
    
    This is the expected location on Linux and this makes 'ip tuntap' work.
    
    Before:
      vsoc_x86_64:/ # ip tuntap add dev tun0 mode tun
      open: No such file or directory
      vsoc_x86_64:/ # ip tuntap add dev tap0 mode tap
      open: No such file or directory
      vsoc_x86_64:/ # ip tuntap list
    
    After:
      vsoc_x86_64:/ # ip tuntap add dev tun0 mode tun
      vsoc_x86_64:/ # ip tuntap add dev tap0 mode tap
      vsoc_x86_64:/ # ip tuntap list
      tap0: tap UNKNOWN_FLAGS:800
      tun0: tun UNKNOWN_FLAGS:800
    
      $ adbz shell ls -ldZ / /dev /dev/tun /dev/net /dev/net/tun
      drwxr-xr-x 25 root   root u:object_r:rootfs:s0         4096 2020-01-25 09:48 /
      drwxr-xr-x 21 root   root u:object_r:device:s0         1240 2020-01-25 09:48 /dev
      drwxr-xr-x  2 root   root u:object_r:device:s0           60 2020-01-25 09:48 /dev/net
      lrwxrwxrwx  1 root   root u:object_r:device:s0            6 2020-01-25 09:48 /dev/net/tun -> ../tun
      crw-rw----  1 system vpn  u:object_r:tun_device:s0  10, 200 2020-01-25 09:48 /dev/tun
    
    Test: see above
    Signed-off-by: Maciej Żenczykowski <maze@google.com>
    Change-Id: I2aa215711454ce4f8a0ef1f34c17621629060fa1

commit 8e50be74ae03d19c2a2c9e57bc5395905c6b94a6
Author: Hridya Valsaraju <hridya@google.com>
Date:   Wed Jan 29 17:59:17 2020 -0800

    Mount binderfs
    
    Mount binderfs at /dev/binderfs. Also add symlinks from /dev/binder,
    /dev/hwbinder and /dev/vndbinder to /dev/binderfs/binder,
    /dev/binderfs/hwbinder and /dev/binderfs/vndbinder respectively.
    
    Bug: 136497735
    Test: Cuttlefish boots on Android Common Kernel 4.19 with kernel config
    CONFIG_ANDROID_BINDERFS=y.
    
    Change-Id: I349face22a2e73bfd79af0188e41188c323388f7

commit 1fad2b39a3810d02677c8ac42e1db7a254804af5
Merge: 838b1a1f9 ebb5b3bd4
Author: Alistair Delva <adelva@google.com>
Date:   Thu Jan 30 00:08:02 2020 +0000

    Merge "Correct /sys/kernel/tracing permissions"

commit ebb5b3bd48b834ac9594eecaad0f543b6babd8fb
Author: Alistair Delva <adelva@google.com>
Date:   Wed Jan 29 09:10:47 2020 -0800

    Correct /sys/kernel/tracing permissions
    
    In Android kernels >4.4 we will see an empty /sys/kernel/tracing
    directory which is notionally where you should mount tracefs if you
    don't want to mount debugfs. As we move towards not mounting debugfs,
    ensure that the non-legacy location also has adequate permissions to be
    read by tracing tools.
    
    Note that this change will be OK even if the board init.rc doesn't mount
    tracefs here, because sysfs will always create this directory.
    
    Bug: 148436518
    Change-Id: I674587d0f08effdb8471a82e3b1ceec3af8588de

commit 2d88794a7d78e34563e07187f659cd51006bb858
Merge: e30aa6012 764c1ac8b
Author: Nikita Ioffe <ioffe@google.com>
Date:   Wed Jan 29 11:24:01 2020 +0000

    Merge "Trigger boot animation on userspace reboot"

commit 764c1ac8ba71122695dac9cecb80a79cf99aace2
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Jan 27 17:14:46 2020 +0000

    Trigger boot animation on userspace reboot
    
    Also reset some more properties to make bootanimation work properly.
    
    Test: adb reboot userspace
    Bug: 148172262
    Change-Id: I0154d4fe9377c019150f5b1a709c406925db584d

commit c1b53de450d59764f1ec0e3965c61f49e9772bf0
Author: Zim <zezeozue@google.com>
Date:   Fri Jan 24 22:13:58 2020 +0000

    Change gid bit of /mnt/media_rw to external_storage
    
    To allow apps with MANAGE_EXTERNAL_STORAGE permission and therefore
    external_storage gid to access unreliable volumes directly on
    /mnt/media_rw/<volume>, they need access to the /mnt/media_rw path.
    
    This change doesn't break the FUSE daemon, the only process that should
    have media_rw gid in R because the FUSE daemon accesses the lower
    filesystem from the pass_through bind mounts of the public volume mount
    itself so it doesn't need to walk the /mnt/media_rw path itself
    
    Test: With FUSE enabled, a reliably mounted public volume is accessible
    on /storage
    Bug: 144914977
    
    Change-Id: Ia3fc9e7483894402c14fb520024e2acca821a24d

commit eba798a767be4841dbf175efda2c19b876ac3299
Merge: 4169e9e47 6ca090e6b
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Jan 22 21:30:53 2020 +0000

    Merge "Harden /mnt/pass_through permission bits"

commit 6ca090e6b0e96d392cc46b305d526e1decba0547
Author: Zim <zezeozue@google.com>
Date:   Mon Jan 20 14:16:14 2020 +0000

    Harden /mnt/pass_through permission bits
    
    It previously had 0755 permission bits
    
    With such permissive bits, an unauthorized app can access a file using
    the /mnt/pass_through path for instance even if access via /storage
    would have been restricted.
    
    It is now 0700
    
    TODO: Change ACL for /mnt/user from 0755 to 0700 in vold only when
    FUSE flag is on. Changing it with FUSE off breaks accessing /sdcard
    because /sdcard is eventually a symlink to /mnt/user/0/primary
    
    Test: adb shell ls -d /mnt/pass_through
    Bug: 135341433
    Change-Id: I3ea9655c6b8c6b4f847b34a2d3b96784a8f4a160

commit cdebef1d2b825d4e296658670fdfaf3f5c6db260
Merge: 2ac625db1 f0f7e7018
Author: Ryan Savitski <rsavitski@google.com>
Date:   Tue Jan 21 20:40:50 2020 +0000

    Merge "init: add builtin check for perf_event LSM hooks"

commit 90c523b30bcaaf5096ea1136e4f2a1e5d22e7e46
Author: Oli Lan <olilan@google.com>
Date:   Fri Jan 17 11:41:04 2020 +0000

    Give x permission on apex data directories.
    
    This gives search (x) permission on the parent apex data
    directory /data/misc/apexdata so that directories below it
    may be opened. It also gives that permission on the apex
    data directories themselves.
    
    Bug: 147848983
    Test: Build & flash, check perms are correct
    Change-Id: I27c4ea01602002c89d0771a144265e3879d9041a

commit e83f38665353f0496c25fec6625491acd7e14b0c
Author: David Zeuthen <zeuthen@google.com>
Date:   Mon Oct 28 13:42:14 2019 -0400

    Add user for credstore.
    
    The credstore system daemon is running as an unprivileged user. This
    CL adds this user and also creates a directory (/data/misc/credstore/)
    where this daemon can store its data.
    
    Bug: 111446262
    Test: N/A
    Change-Id: I8da2c32dd04fef797870b8a7bbc5e499bed71f9e

commit f0f7e701861896b2ad87f82a58c9cb8d8baa78fd
Author: Ryan Savitski <rsavitski@google.com>
Date:   Tue Jan 14 22:02:53 2020 +0000

    init: add builtin check for perf_event LSM hooks
    
    Historically, the syscall was controlled by a system-wide
    perf_event_paranoid sysctl, which is not flexible enough to allow only
    specific processes to use the syscall. However, SELinux support for the
    syscall has been upstreamed recently[1] (and is being backported to
    Android R release common kernels).
    [1] https://github.com/torvalds/linux/commit/da97e18458fb42d7c00fac5fd1c56a3896ec666e
    
    As the presence of these hooks is not guaranteed on all Android R
    platforms (since we support upgrades while keeping an older kernel), we
    need to test for the feature dynamically. The LSM hooks themselves have
    no way of being detected directly, so we instead test for their effects,
    so we perform several syscalls, and look for a specific success/failure
    combination, corresponding to the platform's SELinux policy.
    
    If hooks are detected, perf_event_paranoid is set to -1 (unrestricted),
    as the SELinux policy is then sufficient to control access.
    
    This is done within init for several reasons:
    * CAP_SYS_ADMIN side-steps perf_event_paranoid, so the tests can be done
      if non-root users aren't allowed to use the syscall (the default).
    * init is already the setter of the paranoid value (see init.rc), which
      is also a privileged operation.
    * the test itself is simple (couple of syscalls), so having a dedicated
      test binary/domain felt excessive.
    
    I decided to go through a new sysprop (set by a builtin test in
    second-stage init), and keeping the actuation in init.rc. We can change
    it to an immediate write to the paranoid value if a use-case comes up
    that requires the decision to be made earlier in the init sequence.
    
    Bug: 137092007
    Change-Id: Ib13a31fee896f17a28910d993df57168a83a4b3d

commit ec7be0dc0f7293cdb19aa3c13156b513a3d43735
Merge: e2dad0a29 fdc098655
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Jan 15 19:47:52 2020 +0000

    Merge "Create /mnt/data_mirror/cur_profiles in init.rc"

commit e4505960b968b073fbd25a6aa48c02795eda4e61
Merge: f7593a9a2 9226bb304
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Jan 15 13:13:01 2020 +0000

    Merge "Disable dm-verity hash prefetching."

commit f7593a9a2ac2eca64c77630e305e5ba22c3364f3
Merge: aba02dbe6 73d9e7d66
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Jan 15 02:58:02 2020 +0000

    Merge "[incrementa;] set mode and encryption for /data/incremental"

commit 73d9e7d6668d52cb49b3b4ef3bf3950b074e8b19
Author: Songchun Fan <schfan@google.com>
Date:   Thu Dec 19 16:04:11 2019 -0800

    [incrementa;] set mode and encryption for /data/incremental
    
    To be consistent with /data/app.
    
    Test: boots
    BUG: 137855266
    Change-Id: I8aa549155367edfad158924bcf7892ac7bb76f16

commit 9226bb304aab57afa84a95ae95c3abd3ea3e8451
Author: Martijn Coenen <maco@google.com>
Date:   Mon Dec 16 09:59:08 2019 +0100

    Disable dm-verity hash prefetching.
    
    Prefetching appears to have a slightly negative effect on boot time, and
    actually makes boot time much worse when the available dm-bufio cache
    shrinks. Since we anticipate the dm-bufio cache will shrink (because of
    an increasing number of APEX dm-verity targets), disable prefetching
    completely.
    
    We've run this change on Pixel 2 since August, and haven't observed any
    negative effects. Boot time slightly decreased. With the increased
    amount of APEXes we already have, this should now result in an even more
    significant boot time decrease.
    
    Bug: 136247322
    Test: atest google/perf/boottime/boottime-test
    Change-Id: Id588669af1b0b9daaf15323dccf33411e03b8633

commit 24ccfc244bdaffd911fed13903a467dfad9ff651
Merge: 81fbcbdbd 3b2dbe9d7
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Thu Jan 2 04:18:31 2020 +0000

    Merge "Update linkerconfig to target out directory"

commit 1131a211dc0c154c6d50f6bacb4800b5a353160f
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Dec 30 16:05:11 2019 +0000

    Reset sys.shutdown.requested property
    
    Otherwise, if userspace reboot is triggered from the framework, it will
    end up in userspace reboot loop until watchdog kicks in triggers full
    reboot.
    
    Bug: 135984674
    Test: adb shell svc power reboot userspace
    Change-Id: I0de451aad4ea236a3ff1c20b317b01c6529b6231

commit 3b2dbe9d75224fa9b2c15058963f45742f297d10
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Mon Dec 30 18:44:41 2019 +0900

    Update linkerconfig to target out directory
    
    Current linkerconfig targets for specific output file. However,
    linkerconfig will generate more than 1 file based on APEX modules, so it
    should take argument for target directory rather than target file. This
    change updates linkerconfig's argument to point output directory.
    
    Bug: 146993126
    Test: m -j passed & Cuttlefish succeeded to boot
    Change-Id: I3a720a047077688582436aabd307adafeafc5398

commit 018ddd7a6f0c176909af6c4f29d6cfea3b84c82b
Author: Nikita Ioffe <ioffe@google.com>
Date:   Fri Dec 20 16:34:48 2019 +0000

    Unify logic for resetting properties before userspace reboot
    
    Since I was there, added two more properties to reset, and switched
    ordering of sys.init.updatable_crashing and
    sys.init.updatable_crashing_process_name setprops to make sure that
    process name is already set when apexd/PackageWatchdog get's notified
    about sys.init.updatable_crashing.
    
    Also fixed a typo in what HandleUserspaceReboot function.
    
    Test: adb reboot userspace
    Bug: 135984674
    Change-Id: I954ec49aae0734cda1bd833ad68f386ecd808f73

commit 80416f7a80609a57ee27c279c8957517e44f85cb
Merge: e8537ccfa e4d3f2123
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Fri Dec 20 03:30:33 2019 +0000

    Merge "Generate linkerconfig per mount namespaces"

commit e4d3f2123f8c241d457f235eb7b7b5ad401a221d
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Mon Dec 16 14:31:04 2019 +0900

    Generate linkerconfig per mount namespaces
    
    There are two namespaces from init - bootstrap and default - and those
    will have different set of APEX modules. To support difference between
    two namespaces, linker config should be generated per namespace and each
    namespace should use its own linker configuration. As a first step of
    the work, this change will create different mount point for each
    namespace, and re-generate linker config after APEX mount from each
    namespaces.
    
    Bug: 144664390
    Test: m -j passed & tested from cuttlefish
    Change-Id: Iac2e222376ec4b0ced6c29eed18b21d39ff0b1ba

commit a1344fa6d7622a4dd44e2eb91bc3455f3363d99d
Merge: 0ba784257 284962431
Author: Songchun Fan <schfan@google.com>
Date:   Thu Dec 19 18:14:06 2019 +0000

    Merge "[incremental] create /data/incremental in init.rc"

commit 284962431bc8eb0930dba17b0e0b5808f2de83a3
Author: Songchun Fan <schfan@google.com>
Date:   Tue Dec 17 12:41:34 2019 -0800

    [incremental] create /data/incremental in init.rc
    
    We use /data/incremental to keep all the directories that are mounted on
    the Incremental File System.
    
    Since system_server does not have permission to dynamically create dirs
    directly under /data, we create /data/incremental in init.rc.
    
    Test: boots
    BUG: 136132412
    Change-Id: Ic90cc8f652672a8d4459c0cd38db9c0872217af4

commit 0dbb2a75f25422bbfb624dec554d1df4df64314e
Author: Martijn Coenen <maco@google.com>
Date:   Tue Dec 17 13:45:10 2019 +0000

    Revert "Have /storage always point to sdcardfs by default."
    
    This reverts commit 5d53bfce2dfc1a48143c69182fea76be81091c37.
    
    Reason for revert: for consistency, we've decided that for now, all code will have the same view of /storage: FUSE. Will address the TODO here later.
    
    Change-Id: Ia75e23c91fb098f6309c160de2889f06507c3717

commit fdc09865545c26bd6fae2ea1bca7871e65eadf56
Author: Ricky Wai <rickywai@google.com>
Date:   Fri Dec 13 17:32:18 2019 +0000

    Create /mnt/data_mirror/cur_profiles in init.rc
    
    Also, bind mount /data/misc/profiles/cur to /mnt/data_mirror/cur_profiles
    
    Bug: 143937733
    Test: Directories are created and mounted
    Change-Id: Idcf73b84db84dc671ec5a5025f4b4ec1bc5fd1fc

commit 5d53bfce2dfc1a48143c69182fea76be81091c37
Author: Martijn Coenen <maco@google.com>
Date:   Fri Dec 13 16:16:19 2019 +0100

    Have /storage always point to sdcardfs by default.
    
    This is a partial revert of change
    Idf851b3a42910e0ce8fdd75daea1cce91dd1aa98, and brings us back to the
    state we shipped in Q.
    
    The default behavior for now is that we want native daemons to use the
    default sdcardfs view, as they did before. Zygote-spawned apps will then
    get the correct view assigned to them as they get spawned.
    
    Bug: 146189163
    Test: atest AdoptableHostTest
    Change-Id: I2248f39e029138962a41a6ead944431414c901ad

commit 3cca270e95ca8d8bc8b800e2b5d7da1825fd7100
Author: Ricky Wai <rickywai@google.com>
Date:   Thu Dec 12 12:55:03 2019 +0000

    Create /data_mirror in init.rc
    
    Mount a tmpfs on top of it, and serve as a mirror of /data/data
    and /data/user_de, which will be used when zygote forks and
    overlay its CE and DE storage to prevent app can see other applications.
    
    Also, changed /data/user/0 from symlink to bind mount, so
    /data_mirror/data_ce/null can just bind to /data/user directly.
    
    Bug: 143937733
    Test: Directories are created and mounted
    Change-Id: Ic72c47c9d3dc0ffc98510f5bb351eccf76524232

commit 597eca8a8cefc881ea44592663012ddd39a05c58
Merge: b033ea31a 99df54be9
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Wed Dec 11 02:55:06 2019 +0000

    Merge "Move linker config under /linkerconfig"

commit 4370ff58ae451368b05dc920155cfea280bd097a
Author: Oli Lan <olilan@google.com>
Date:   Mon Dec 2 18:24:12 2019 +0000

    Create directory for snapshots of DE_sys apex data.
    
    This creates the /data/misc/apexrollback directory which will
    hold snapshots of DE_sys apex data directories (i.e. it will
    hold backups of data from /data/misc/apexdata for particular
    apexes).
    
    See go/apex-data-directories for details.
    
    Bug: 141148175
    Test: Built and flashed, checked directory was created.
    Change-Id: If45377a9b29cc1f52dd08ea1339829e3bb3032e9

commit 13e51e7f0bc0419ad5463037bbe87f3789fdf9f9
Author: Oli Lan <olilan@google.com>
Date:   Tue Nov 19 18:08:45 2019 +0000

    Create DE_sys APEX data directories.
    
    This creates the directory /data/misc/apexdata, at the same time as other
    directories under /data/misc. Then, when apexd has finished activating
    APEXes, a directory is created under /data/misc/apexdata for every
    APEX, with the same name as the APEX module name.
    
    See go/apex-data-directories.
    
    APEXes are discovered by scanning the /apex directory. It may be better
    to delegate this process to a library, but it is proposed to defer that
    change to a future CL.
    
    Bug: 141148175
    Test: Built and flashed, checked directories were created.
    Change-Id: I639d6f490ae0b97f116ce38ff3ac348bd73aa20e

commit 99df54be933edf07d7949ab55c25685a00dfef43
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Fri Nov 22 16:14:10 2019 +0900

    Move linker config under /linkerconfig
    
    Currently linker config locates under /dev, but this makes some problem
    in case of using two system partitions with chroot. To match system
    image and configuration, linker config better stays under /linkerconfig
    
    Bug: 144966380
    Test: m -j passed && tested from cuttelfish
    Change-Id: Iaae5af65721eee8106311c1efb4760a9db13564a

commit 7bf14bb932efff35c52c8445b96109ec2d78ace1
Merge: 238eae173 fe9e8a3fa
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Fri Dec 6 21:59:19 2019 +0000

    Merge "rootdir: init.rc to limit discard size to 128MB"

commit fe9e8a3fa5b0bdc50ccbd9685486ef60a939fa17
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Wed Nov 27 15:42:10 2019 -0800

    rootdir: init.rc to limit discard size to 128MB
    
    In any case, UFS storage suffers from long discard latency.
    
    Change-Id: Iaa8ef6eb862934af43254bd10873a12c3d34e926
    Signed-off-by: Jaegeuk Kim <jaegeuk@google.com>

commit 3c5cc318244f3836230824afffc8b6f0354727a4
Author: Anton Hansson <hansson@google.com>
Date:   Thu Dec 5 15:38:37 2019 +0000

    Run the derive_sdk service
    
    Run this process as early as possible in the boot -- right
    after its config has been parsed from the apex. This ensures
    the sdk prop is set as early as it can be, should some other
    early process need to look at it.
    
    Note: this is unlikely to be the permanent way this gets run,
    as it's only needed when apexes update.
    
    Bug: 137191822
    Test: boot && adb shell getprop | grep sdk_info
    Change-Id: Ia48ef89435ca165333b52d653e3131f71a522747

commit 58bd37f1e32aa50222dea9535cbf584ce4825b25
Merge: 4372726af cc67ff5ad
Author: Martijn Coenen <maco@google.com>
Date:   Fri Nov 29 08:41:37 2019 +0000

    Merge "Remove bootstrapping the passthrough mount."

commit 8834223ff8b7b1f5a6a409c64d0f68e9dc4bc9fc
Merge: 217e10e3d f0e65d852
Author: Shuo Qian <shuoq@google.com>
Date:   Wed Nov 27 19:14:50 2019 +0000

    Merge "A system folder for emergency number database OTA"

commit f0e65d852ae1b49dcf747e7a185dfe6883ff4702
Author: Shuo Qian <shuoq@google.com>
Date:   Mon Oct 14 13:24:58 2019 -0700

    A system folder for emergency number database OTA
    
    Test: Manual; tested with the other CL in the same topic
    Bug: 136027884
    Change-Id: Ia5675613b9ae19927108d089955d2900d97c892c

commit cc67ff5add76f2889073bb8e1e0e9cdd02b15e1f
Author: Martijn Coenen <maco@google.com>
Date:   Fri Nov 22 13:09:00 2019 +0100

    Remove bootstrapping the passthrough mount.
    
    This will be taken care of by vold (when necessary).
    
    Bug: 135341433
    Test: device boots, passthrough mount still works
          atest AdoptableHostTest
    Change-Id: I5a144eff0e4220fa0154bfa7d62a2dec625c88bc

commit c5282e4c6b24d6c7488aba835c5488366849787d
Merge: bace5995f c0df1874a
Author: Nikita Ioffe <ioffe@google.com>
Date:   Thu Nov 14 21:50:59 2019 +0000

    Merge "Add sysprops for start & end of userspace reboot"

commit c0df1874adf45fa962d76be1049fec8d445e3134
Author: Nikita Ioffe <ioffe@google.com>
Date:   Wed Nov 13 21:47:06 2019 +0000

    Add sysprops for start & end of userspace reboot
    
    There will be useful in debugging/logging events to statsd.
    
    Also as part of this CL, sys.init.userspace_reboot.in_progress property
    is now used as a mean of synchronization. It is set directly in
    DoUserspaceReboot, to make sure that all the setprop actions triggered
    by userspace-reboot-requested were processed.
    
    Test: adb reboot userspace
    Test: adb shell getprop sys.init.userspace_reboot.last_started
    Test: adb shell getprop sys.init.userspace_reboot.last_finished
    Bug: 135984674
    Change-Id: I9debcd4f058e790855200d5295344dafb30e496a

commit 726a68cb401538da8843ee3521e7bd8f81823e48
Author: Marco Ballesio <balejs@google.com>
Date:   Tue Oct 8 09:12:22 2019 -0700

    Add support for freezer cgroup
    
    Adds the freezer cgroup to process groups
    
    Change-Id: Ib7a8dbe776ff156ff3827b9a659365384f3e6ac8
    Bug: 143308662
    Test: manual - frozen processes aren't scheduled for execution until
    unfrozen

commit 47cdf6c078767a1b62a4d6dbf371449b5ae67c99
Merge: 563a73e7f c9f5353ad
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Nov 13 14:36:47 2019 +0000

    Merge "Move init and ueventd scripts from / to /system/etc"

commit c9f5353ad369fadf5464b889a25b613f69808c4b
Author: Tom Cherry <tomcherry@google.com>
Date:   Mon Nov 4 10:30:36 2019 -0800

    Move init and ueventd scripts from / to /system/etc
    
    There is no reason for these scripts to continue to exist in /, when
    they are better suited for /system/etc.  There are problems keeping
    them at / as well, particularly that they cannot be updated with
    overlayfs.
    
    Bug: 131087886
    Bug: 140313207
    Test: build/boot
    Merged-In: I043d9a02ba588ca37ceba2c4e28ed631792b2586
    Change-Id: I043d9a02ba588ca37ceba2c4e28ed631792b2586

commit 8106c8e09ff668fc9e9d673f708edb9e6b0dcc29
Merge: be49555bc c29c2baa6
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Fri Nov 8 17:25:10 2019 +0000

    Merge changes from topic "native process registration"
    
    * changes:
      init: Add support for native service registration with lmkd
      lmkd: Support process types when registering a process
      lmkd: Add library function to unregister a process
      lmkd: Prepare lmkd to support connection from init process
      lmkd: Restrict process record modifications to the client that created it

commit 449282c02193d9f5fa3239cfe04d23e202ad842c
Merge: 7f44a83d8 68258e844
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu Nov 7 20:06:47 2019 +0000

    Merge "Make encryption action an argument to mkdir"

commit c29c2baa6907a2f4c0a4efca9fa41fc5474ec1c4
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Tue Oct 22 17:18:42 2019 -0700

    init: Add support for native service registration with lmkd
    
    init should be able to register native services with lmkd so that they
    can be killed when needed. Only processes with oom_score_adjust not
    equal to the default -1000 will be registered with lmkd because with the
    score that low the process is unkillable anyway.
    Inform lmkd when a registered process is killed so that the record can be
    removed.
    Change init.rc to start lmkd during init phase so that it is there to
    register other services.
    Replace hardcoded oom_score_adj values with appropriate definitions.
    
    Bug: 129011369
    Test: boot and verify native service registration
    Change-Id: Ie5ed62203395120d86dc1c8250fae01aa0b3c511
    Signed-off-by: Suren Baghdasaryan <surenb@google.com>

commit 42697d3f1891bc87154069e4205a94226cbe941e
Author: Nikita Ioffe <ioffe@google.com>
Date:   Tue Nov 5 23:04:17 2019 +0000

    Make remount into checkpointing for ext4 userdata a no-op
    
    We are going to teamfood userspace reboot soon, and in order to gather
    as much data as possible we are fine with ignoring checkpointing for the
    devices with ext4 (teamfood will be a very limited set of people that
    are aware what they've signed for).
    
    As result of this, we don't need to reset vold and kill zram backing
    device. Added a TODO to restore that functionality if needed.
    
    Since I was there, fixed yet another typo in userspace-reboot-resume -_-
    
    Bug: 135984674
    Test: adb reboot userspace
    Change-Id: I2b7a93aaf738fe9bec9d606d7e11aefb325550b1

commit 68258e8444e0daa967b007edf659e8bb7b38c59f
Author: Paul Crowley <paulcrowley@google.com>
Date:   Mon Oct 28 07:55:03 2019 -0700

    Make encryption action an argument to mkdir
    
    FscryptSetDirectoryPolicy no longer tries to infer the action from the
    filename. Well mostly; it still assumes top-level directories in /data
    should be encrypted unless the mkdir arguments say otherwise, but
    it warns.
    
    Bug: 26641735
    Test: boot, check log messages
    Change-Id: Id6d2cea7fb856f17323897d85cf6190c981b443c

commit ac692148e5992be5756d50754f33f5030aac78e5
Author: Nikita Ioffe <ioffe@google.com>
Date:   Fri Nov 1 20:56:33 2019 +0000

    Fix typo in userspace-reboot-requested trigger
    
    It should userspace-reboot-requested, not userspace-reboot
    
    Test: adb reboot userspace
    Bug: 135984674
    Change-Id: I1e844b7705eb70ee3702a1dc0432644592666364

commit 8a603a7f9bad35ed99ec3e06b4a6b6180d50d8af
Merge: f71ca37df 12a36076a
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Oct 28 16:28:23 2019 +0000

    Merge "Userspace reboot: Support remounting userdata for f2fs"

commit 12a36076a75350154c3a5326da1f48e96ab6b94b
Author: Nikita Ioffe <ioffe@google.com>
Date:   Wed Oct 23 20:11:32 2019 +0100

    Userspace reboot: Support remounting userdata for f2fs
    
    Test: adb reboot userspace
    Test: adb shell /system/bin/vdc startCheckpoint 1;
          adb reboot userspace
    Bug: 135984674
    Change-Id: I227f2c1cc18495d893decb2df5173fc7a7919df6

commit 0ee759cc4c7467449878bca69ce7a79831cb0b80
Merge: 66568bf4b 459223730
Author: Nikita Ioffe <ioffe@google.com>
Date:   Fri Oct 11 03:39:10 2019 -0700

    Merge "userspace reboot: stop post-data services and wait for them to be killed"
    am: 4592237300
    
    Change-Id: I0f9e4a03f883c8cf301f3f918c921e91c9612f03

commit 3f4b0d611338a772f63669bd12e792bbe43b1245
Author: Nikita Ioffe <ioffe@google.com>
Date:   Wed Oct 9 15:23:02 2019 +0100

    userspace reboot: stop post-data services and wait for them to be killed
    
    * Refactored code around stopping services a little bit to reuse it
      between full reboot and userspace reboot.
    * Add a scope_guard to fallback to full reboot in case userspace reboot
      fails.
    * In case of userspace reboot init will also wait for services to be
      terminated/killed and log the ones that didn't react to
      SIGTERM/SIGKILL in time.
    * If some of the services didn't react to SIGKILL, fail userspace reboot.
    
    Test: adb reboot userspace
    Bug: 135984674
    Change-Id: I820c7bc406169333b0f929f0eea028d8384eb2ac

commit 5e0e30db92ec39c66c18f66ad1a686b2b2f3a642
Merge: b71825ebc f1933c910
Author: Nikita Ioffe <ioffe@google.com>
Date:   Tue Oct 8 07:51:16 2019 -0700

    Merge "Add a skeleton of userspace reboot"
    am: f1933c910d
    
    Change-Id: I099d8bf703e13dacdb9717be77a3222541f02432

commit ba6968e63618ab5e37d3fb163e9ea27dc0aa3247
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Oct 7 16:26:33 2019 +0100

    Add a skeleton of userspace reboot
    
    This CL only draws boundaries between userspace and full reboots, and
    adds some functionality that will be required for userspace reboot:
    
    * Whenever device is shutting down is now controlled in reboot.cpp,
      since during userspace reboot this state can change.
    * Now it's also possible to restart handling of control messages inside
      property service. In case of userspace reboot, init will restart it
      after stopping post-data services.
    * New userspace-reboot-requested trigger is added similar to shutdown
      one for full reboot.
    
    Test: adb reboot
    Test: adb reboot userspace
    Bug: 135984674
    Change-Id: Id55a53ba781d2b90ce40449037b6d8d47e72c476

commit f8f67de2ae429c1cabc37041832aec19ddd7a6b0
Merge: e0cd965e7 ac6672d49
Author: Bill Peckham <bpeckham@google.com>
Date:   Fri Oct 4 20:24:37 2019 -0700

    Merge "Moving recovery resources from /system to /vendor"
    am: ac6672d49f
    
    Change-Id: I1ba6acff9e90520acc752b5d27d279a28b28f88f

commit dea8c9c1ac3f42e60df19f51f60cc9712b1fb341
Author: Bill Peckham <bpeckham@google.com>
Date:   Tue Sep 17 16:30:37 2019 -0700

    Moving recovery resources from /system to /vendor
    
    This change is part of a topic that moves the recovery resources from the
    system partition to the vendor partition, if it exists, or the vendor directory
    on the system partition otherwise. The recovery resources are moving from the
    system image to the vendor partition so that a single system image may be used
    with either an A/B or a non-A/B vendor image. The topic removes a delta in the
    system image that prevented such reuse in the past.
    
    The recovery resources that are moving are involved with updating the recovery
    partition after an update. In a non-A/B configuration, the system boots from
    the recovery partition, updates the other partitions (system, vendor, etc.)
    Then, the next time the system boots normally, a script updates the recovery
    partition (if necessary). This script, the executables it invokes, and the data
    files that it uses were previously on the system partition. The resources that
    are moving include the following.
    
    * install-recovery.sh
    * applypatch
    * recovery-resource.dat (if present)
    * recovery-from-boot.p (if present)
    
    This change moves the recovery resources to vendor in libcutils/fs_config.cpp
    and removes the flash_recovery service from rootdir/init.rc. This service moved
    to a vendor init.rc file in bootable/recovery/applypatch.
    
    Bug: 68319577
    Test: Ensure that recovery partition is updated correctly.
    Change-Id: I492f7989ea8042912e9d0e0eadeaa351affbee13

commit 651703706f37dc56b5dbfdbcb21da9d10bb60456
Merge: 74043e449 9a7e1eff5
Author: Victor Hsieh <victorhsieh@google.com>
Date:   Wed Oct 2 13:41:22 2019 -0700

    Merge "Move fsverity_init to after class_start core"
    am: 9a7e1eff5a
    
    Change-Id: I219b538f4d8359cb9393261954a1b8e9aebbe427

commit 9a7e1eff5a200bb04af8479e665faef33e212f3b
Merge: 6547c276f 8129f8614
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Oct 2 16:17:47 2019 +0000

    Merge "Move fsverity_init to after class_start core"

commit 4c66038ecbe5643bd9957ae8a6ee9c1c4e7588a5
Merge: 4510a688c 88f50f536
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Oct 1 15:34:55 2019 -0700

    Merge "Remove references to /sys/android_power/*"
    am: 88f50f536f
    
    Change-Id: I2be021caf617fc5f66cf5432dc0a7a5b94bbd9bd

commit 6ddce6b015e4b12867dbf764b2be013106452001
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Oct 1 13:30:03 2019 -0700

    Remove references to /sys/android_power/*
    
    It looks like these were deprecated a very long time ago.
    
    Bug: 141939924
    Test: tree-hugger
    Change-Id: I4fc098b2a45c81fe2af49c0ed4248dc14489f8b1

commit 51d8b8bf9d3740cd2aa065c06b71117d85a8bbbc
Merge: 8665bb749 993d07fc5
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Sep 25 13:21:11 2019 -0700

    Merge changes from topic "boringssl-kmsg"
    am: 993d07fc53
    
    Change-Id: I42f2122241c4f15b751a76e5989a5ffe57791920

commit 993d07fc534f96f098af5e385378e165746133fb
Merge: e7180a796 f5e872e9e
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Sep 25 19:56:03 2019 +0000

    Merge changes from topic "boringssl-kmsg"
    
    * changes:
      Redirect boringssl_self_test stdio to kmsg
      init: add stdio_to_kmsg option

commit f5e872e9e9077bf5c679bf45a4cb32838c38c0c4
Author: Tom Cherry <tomcherry@google.com>
Date:   Mon Sep 23 16:21:31 2019 -0700

    Redirect boringssl_self_test stdio to kmsg
    
    To aid in debugging if there are failures.
    
    Bug: 137267623
    Test: add prints to boringssl_self_test and see them
    Test: add failure prints to the linker and see them before
          boringssl_self_test runs
    Change-Id: I89d50c6a46df994d6ea1fadf00e3a8a796043234

commit 92241d52ecb6e3659a199dfe82e83c77b9e25373
Merge: 8eb231640 fc48a62d4
Author: Zimuzo Ezeozue <zezeozue@google.com>
Date:   Mon Sep 23 09:24:57 2019 -0700

    Merge "Prepare pass_through mounts"
    am: fc48a62d4c
    
    Change-Id: I88ef97b82e60164027c1dbc93cdebfe1cbea35c3

commit fc64dad122b64248552931fa273b5e5e79b97834
Author: Zim <zezeozue@google.com>
Date:   Mon Sep 23 14:21:27 2019 +0100

    Prepare pass_through mounts
    
    Execute mkdir -p /mnt/pass_through/0/emulated
    and bootstrap the emulated volume for user 0.
    
    The 'pass_through' paths allow us bind mount the lower
    filesystem directly into /storage, bypassing any sdcardfs
    of FUSE mounts.
    
    This change is part of enabling upcoming platform changes that are
    described in the bug linked below.
    
    Bug: 135341433
    Test: builds, boots and pass through directories are created
    Change-Id: I46ce207d06a1ec550b8bacac259387371fc0b841

commit cfd87fe5140a0a09e113bddceeecc3ac82567457
Merge: 9e61e1fed 89562f11c
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Sep 20 08:15:20 2019 -0700

    Merge changes Iff879def,I79c72346
    am: 89562f11c8
    
    Change-Id: Ibaee972370d7be10bd6ef973941365282880fb2e

commit a76bfb2d971af7ccbdf814af0b257b79f9309b20
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Sep 18 09:41:36 2019 -0700

    Simply reboot if the boringssl self test fails
    
    If this check fails and an OTA or mainline module update has recently
    happened, we want to rollback the recent change.  The easiest way to
    handle this is to reboot, which will trigger the fallback mechanisms
    that are already in place.
    
    Bug: 141082587
    Test: device reboots if self test fails
    Test: device rolls back a recently applied OTA with failing self test
    Test: device rolls back a recently applied conscrypt apex update with
          failing self test
    Change-Id: Iff879deff09d347262dc7a2acadb9164a5029d4a

commit b07606a5022bca6f764eec4e89875271ddf4f29e
Merge: a775458ff 21b00b31d
Author: Paul Crowley <paulcrowley@google.com>
Date:   Mon Sep 16 23:01:00 2019 -0700

    Merge "Create /data/per_boot"
    am: 21b00b31d4
    
    Change-Id: Ib849244dfbd7492ce05213b9086a07836f9496a8

commit 21b00b31d4954170a08aef2976d4f9d73d4d1695
Merge: 116d2ff50 570d20d2a
Author: Paul Crowley <paulcrowley@google.com>
Date:   Tue Sep 17 05:40:05 2019 +0000

    Merge "Create /data/per_boot"

commit b7bc7db6ee294ca38aaef441a1d612a54142d188
Merge: d05b5fd33 d3268a71b
Author: Tobias Thierer <tobiast@google.com>
Date:   Sun Sep 15 21:43:19 2019 -0700

    Merge "boringssl_self_test: Enable optimization."
    am: d3268a71b8
    
    Change-Id: Icfd75fcf425692f8a3f0fc8d6c9d7e9611ac8932

commit 570d20d2ac875198416dff280b7a4b7adaacac81
Author: Paul Crowley <paulcrowley@google.com>
Date:   Wed Sep 11 15:02:44 2019 -0700

    Create /data/per_boot
    
    Bug: 140882488
    Test: Booted twice, checked logs to ensure encryption
        is different each time, adb created files in directory.
    Change-Id: I44f746acd1040f7baa9123d4824ba39b194f287b

commit d05b5fd333936529f84e23f7edefae9b46811d9d
Merge: a3320441e a550e7f41
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Sep 13 12:45:07 2019 -0700

    Merge "init: add reboot_on_failure service option"
    am: a550e7f412
    
    Change-Id: I106786e267f5ea4d855cd45c75667162a5d19ab6

commit f0f9438d5b8d59595414191b9d7d9b8de673ed16
Author: Tobias Thierer <tobiast@google.com>
Date:   Fri Sep 13 16:51:56 2019 +0100

    boringssl_self_test: Enable optimization.
    
    libcrypto performs a self test when it is loaded, unless
    a marker file /dev/boringssl/selftest/[hash] exists which
    indicates that the self test has already successfully
    completed since the last time the device was booted.
    
    Before this CL topic, libcrypto attempted to create the
    marker file when the self test successfully completed.
    On Android, dedicated boringssl_self_test{32,64} binaries
    are run early during boot and are the only binaries
    (apart from init and vendor_int) that have permission to
    create these files.
    
    Another CL in this topic stops the boringssl self test
    creating a marker file unless the environment variable
    BORINGSSL_SELF_TEST_CREATE_FLAG is set to a nonempty value.
    This CL sets that value to "true" when running the dedicated
    self test binaries, but not for other binaries. This has
    the effect that other binaries that run the self test
    early during boot (before the dedicated self test binaries
    have created the marker files) and which run the self test
    will no longer attempt to create the marker file, which
    SELinux would have denied anyway.
    
    Bug: 137267623
    Test: Treehugger
    
    Change-Id: I99317df1a8c3496d33ae83f9ec346782b2286ac9

commit 60971e6ce22bd4fee531dc72875acb4b913f69a7
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Sep 10 10:40:47 2019 -0700

    init: add reboot_on_failure service option
    
    This replaces the recently added `exec_reboot_on_failure` builtin, since
    it'll be cleaner to extend service definitions than extending `exec`.
    This is in line with what we decided when adding `exec_start` instead
    of extending `exec` to add parameters for priority.
    
    Test: `exec_start` a service with a reboot_on_failure option and watch
          the system reboot appropriately when the service is not found and when
          the service terminates with a non-zero exit code.
    
    Change-Id: I332bf9839fa94840d159a810c4a6ba2522189d0b

commit 79dcab5b1fc017e964bde6e6c67ff98d33e8e487
Merge: e7b21617f 6f735df0d
Author: Tobias Thierer <tobiast@google.com>
Date:   Fri Sep 13 01:33:07 2019 -0700

    Merge "init.rc: Move /system/bin/boringssl_self_test{32,64} call to early-init."
    am: 6f735df0d1
    
    Change-Id: I929c1cfc6158b26e7f4472205529ecb8a23c763a

commit bda0554bb2b7827602834ea94430b58274bbbd09
Author: Tobias Thierer <tobiast@google.com>
Date:   Wed Sep 11 18:22:10 2019 +0100

    init.rc: Move /system/bin/boringssl_self_test{32,64} call to early-init.
    
    This should ensure that the self tests run before any other binaries
    that load libcrypto and which would otherwise run into SELinux denials
    trying to create the marker file /dev/boringssl/selftest/[hash]
    
    The invocation of the self test binaries from the Conscrypt apex
    requires the apex to be mounted so it remains at a later point in
    the boot process.
    
    Bug: 137267623
    Test: Treehugger
    Change-Id: I34266d6e9d2f394fffa8a2c7725479b5770d119c

commit 8aeccd0deb3072765a8ec06077e234775f253bba
Merge: 96fd084fb b13f817bb
Author: TreeHugger Robot <treehugger-gerrit@google.com>
Date:   Wed Sep 11 20:31:33 2019 +0000

    Merge "Merge qt-r1-dev-plus-aosp-without-vendor (5817612) into stage-aosp-master" into stage-aosp-master

commit 9caa15b5c3b37f03fda1166038ced3b29a68a8ff
Author: Tobias Thierer <tobiast@google.com>
Date:   Tue Sep 10 06:29:45 2019 -0700

    init.rc: drop spurious trailing ':'.
    
    The accidental trailing ':' appears to stop the line
    triggering.
    
    Bug: 137267623
    Test: Checked the /system/bin/boringssl_self_test32
          now runs on aosp_cf_x86_phone-userdebug
    
    Change-Id: I7b4b1d6b838d8d1a7a0db7f104a94b34962df030

commit 8bdbea8df5b776a8984b21706f06b3fc56603079
Author: Nikita Ioffe <ioffe@google.com>
Date:   Mon Sep 9 14:47:47 2019 +0100

    Remove `start vold` action from post-fs-data
    
    vold is already started during early-fs which happens before
    post-fs-data.
    
    Trying to start it again in post-fs-data is a little bit confusing.
    
    Test: device boots
    Change-Id: I5faefe6d1f1bb7472ea3d032b1f157c69da565f1

commit b13f817bb42c02a20a6ed59e66e463446dff66a6
Merge: 8e5f4c199 5aa334324
Author: Xin Li <delphij@google.com>
Date:   Sun Sep 8 13:07:02 2019 -0700

    Merge qt-r1-dev-plus-aosp-without-vendor (5817612) into stage-aosp-master
    
    Bug: 135460123
    Change-Id: I0600f3b6f15c25247dc70b62d41f2dd6af2f33d8
    Merged-In: I888fee03478bbf90a37cd9a905c49de614cc99ff

commit 983f76b3c632b29ca6ff858d986378a9028493c2
Merge: c8eadff1d 1136f1592
Author: Tobias Thierer <tobiast@google.com>
Date:   Sat Sep 7 23:46:00 2019 +0000

    Merge "Init: Run boringssl self test via separate binaries."

commit 8129f86141649a1111ae7f562e32649661365d5a
Author: Victor Hsieh <victorhsieh@google.com>
Date:   Thu Sep 5 14:23:19 2019 -0700

    Move fsverity_init to after class_start core
    
    The script needs to run after keystore, which is now a core service.
    Note the previous APEX requirement by ART is no longer needed.
    
    Test: see keys loaded
    Bug: 112038744
    Change-Id: I02fb6ce193bb301488b259421f120e6aa6cd75b9

commit 1136f1592a50c90b3b59fbc3293e4c1e155972e0
Author: Tobias Thierer <tobiast@google.com>
Date:   Fri Aug 23 14:05:29 2019 +0100

    Init: Run boringssl self test via separate binaries.
    
    Instead of init.cpp knowning about the boringssl self
    test, use init.rc to exec dedicated self test executables.
    
    Advantages:
     - The self test is run not only both the copy of libcrypto
       in /system but also /apex/com.android.conscrypt.
     - The self test is run not only for the primary (e.g. 64bit)
       ABI but also for a secondarry (e.g. 32bit) ABI.
     - The dependency on libcrypto is kept to the self test binary.
     - The self test binary abstracts the exact native API for
       running the self test (this will change soon because the
       self test will be run when the library is loaded).
    
    Bug: 137267623
    Test: Check that logcat shows both binaries being started as root,
          and finishing with exit code 0.
    
    Change-Id: I1e716749ee2133993f0f7b2836483391fd1a62f0

commit 21fd368dc2666b83ff0959cf8a8248b2d0052511
Merge: 1094aeb14 c70fc1cbf
Author: Tom Cherry <tomcherry@google.com>
Date:   Thu Aug 29 09:07:37 2019 -0700

    Merge "Start serial console at the 'init' trigger"
    am: c70fc1cbfd
    
    Change-Id: I18b1fc5fb667d4938e9d2a8fb9098444ef53259b

commit 71c3ef135d6f99906a2b58bafa07fc629b7cce7f
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Aug 27 14:57:32 2019 -0700

    Start serial console at the 'init' trigger
    
    Start the serial console at the 'init' trigger instead of much later
    when property triggers happen.  This will help debugging early boot
    issues.
    
    Test: serial console starts early for a userdebug build
    Test: serial console still doesn't start on a user build
    Change-Id: I7112a8e7171c9fa865c8787c9a3d14515bc59478

commit 95e7252fd83a1c3dfe6f84796c34541dd6ecd976
Merge: 6a6f2e9d6 24f955155
Author: Paul Crowley <paulcrowley@google.com>
Date:   Wed Aug 28 13:35:54 2019 -0700

    Merge "Move layout_version to /data/misc/installd"
    am: 24f955155a
    
    Change-Id: Icf3e304aff7e4e1e556c6372be932e3c357d1bbe

commit 24f955155ab32c0e260fddc02c98342525be7653
Merge: 956c204f1 26aabfd1e
Author: Paul Crowley <paulcrowley@google.com>
Date:   Wed Aug 28 19:56:15 2019 +0000

    Merge "Move layout_version to /data/misc/installd"

commit e7812e6787e160830ae3add1bd3c97c364e7d6c6
Merge: 60cc6b212 7a0948f6c
Author: Paul Crowley <paulcrowley@google.com>
Date:   Mon Aug 26 17:50:47 2019 -0700

    Merge "Create the rollback directories in init"
    am: 7a0948f6c4
    
    Change-Id: Iee1c67c81b5809c645c35211431f5c003c07b167

commit 8184d7c2a5b5ef42fdb6405a2ccf051310efbc42
Author: Paul Crowley <paulcrowley@google.com>
Date:   Fri Aug 9 14:13:41 2019 -0700

    Create the rollback directories in init
    
    Init sets the encryption policy on these directores when created.
    
    Bug: b/139193659
    Test: Boot device without this, then try to boot with it without wiping.
    Cherrypicked-From: 7bf42f148a1ad0dd0a33ccf4f1c73fc603ff4194
    Change-Id: I6b26710674b51d62fa4a07b06e06c539571fb7ac
    Merged-In: I6b26710674b51d62fa4a07b06e06c539571fb7ac

commit d62c31d3ac27921971b6046bed0ea1820193f590
Merge: 750fac4ed 5aa0e4241
Author: Xin Li <delphij@google.com>
Date:   Fri Aug 23 06:45:26 2019 +0000

    DO NOT MERGE - Merge build QP1A.190711.019 into stage-aosp-master
    
    Bug: 139893257
    Change-Id: Ib69c986e30b903cc48ca835fb307acf569930806

commit 93c7c9704704eb5ca6b95312e9e2463918e119e7
Merge: 4ae2efcac c3847f599
Author: Tobias Thierer <tobiast@google.com>
Date:   Thu Aug 22 15:55:22 2019 -0700

    Merge "Let init create /dev/boringssl/selftest/"
    am: c3847f599c
    
    Change-Id: I0eb2b4e57a7d5ba7e9bdcb7e3720d13d01c71a9e

commit 3536fdb927669fef1d9f28b7df659a8c750873fb
Author: Tobias Thierer <tobiast@google.com>
Date:   Thu Aug 22 13:02:43 2019 +0100

    Let init create /dev/boringssl/selftest/
    
    This directory is intended to be used by boringssl
    (through the bssl_self_test{,64} binaries) to create /
    check for the existence of marker files indicating that
    the self test has successfully run.
    
    It appears that because this is an .rc script for init
    rather than a shell,
      mkdir -p /dev/boringssl/selftest 0755 root root
    wouldn't work.
    
    Bug: 139348610
    Bug: 136262690
    Test: Checked that after booting, /dev/boringssl/selftest
      exists:
      $ su root ls -l /dev/boringssl
      total 0
      drwxr-xr-x 2 root root 40 1972-02-11 03:27 selftest
    Test: Checked that if I instead try:
      mkdir -p /dev/boringssl/selftest 0755 root root
      in init.rc then the directory isn't created (there is
      no error message in logcat because logd is only
      started in line 311).
    
    Change-Id: I12fdd08c8ead152ac4e62cbd0a2099a9d6170ddb

commit 26aabfd1ed6a7afcc70692a3fb7f1c66e2f209e2
Author: Paul Crowley <paulcrowley@google.com>
Date:   Fri Aug 16 12:39:17 2019 -0700

    Move layout_version to /data/misc/installd
    
    Bug: 139543295
    Test: Boot, ensure file is properly created
    Change-Id: I919b5599484b4c77f222e640a1f1b5d65198a0c7

commit a42fe440389be90f741c42cf948c4eef085435ff
Merge: 98c6eed19 ce2f32967
Author: Zimuzo Ezeozue <zezeozue@google.com>
Date:   Tue Aug 13 02:47:53 2019 -0700

    Merge "Allow switching between sdcardfs and FUSE mounts" am: 6c62ae7adb am: 1562c6cd8c
    am: ce2f329675
    
    Change-Id: I18edc45447f921af541c02a64eff2f44a88b0468

commit ce2f329675bc715b3662b94eb9b576ebec406983
Merge: 22c01d4c3 1562c6cd8
Author: Zimuzo Ezeozue <zezeozue@google.com>
Date:   Tue Aug 13 02:41:26 2019 -0700

    Merge "Allow switching between sdcardfs and FUSE mounts" am: 6c62ae7adb
    am: 1562c6cd8c
    
    Change-Id: Iece2009781c52ba7b24eecb45324981b83968cf6

commit 1562c6cd8c99385d6e67a146fe37d343433b5939
Merge: 0126a5ca5 6c62ae7ad
Author: Zimuzo Ezeozue <zezeozue@google.com>
Date:   Tue Aug 13 02:35:36 2019 -0700

    Merge "Allow switching between sdcardfs and FUSE mounts"
    am: 6c62ae7adb
    
    Change-Id: I707ad8146f4318fd3adf0e641aaac68e76d790b4

commit c9f8e5dfedca7b688f1844839b0e01dd3188459a
Author: Zim <zezeozue@google.com>
Date:   Fri Aug 9 20:02:49 2019 +0100

    Allow switching between sdcardfs and FUSE mounts
    
    This change is part of enabling upcoming platform changes that are
    described in the bug linked below.
    
    Bug: 135341433
    Test: builds, boots successfully and external storage remains
    an sdcardfs mount by default and works correctly
    Test: cat /proc/1/mountinfo is unchanged
    
    Change-Id: Idf851b3a42910e0ce8fdd75daea1cce91dd1aa98

commit bdd8164a5f33b31456269ca8b9e392dbd170002c
Merge: 0d9557a5c e5878ed97
Author: David Anderson <dvander@google.com>
Date:   Sun Aug 4 01:59:49 2019 -0700

    Merge "Implement basic libsnapshot functionality." am: 23a87716b5 am: aa6b5176fb
    am: e5878ed97e
    
    Change-Id: I19c8b7b81e44899dc8dbe375bfd58d18cfdf8b3a

commit e5878ed97e9593d85929a504517f65a52ab40178
Merge: 82f976634 aa6b5176f
Author: David Anderson <dvander@google.com>
Date:   Sun Aug 4 01:41:19 2019 -0700

    Merge "Implement basic libsnapshot functionality." am: 23a87716b5
    am: aa6b5176fb
    
    Change-Id: I80df3b72007f52ed761fae0565d94fb21bc75106

commit aa6b5176fbe5ff91e8f250002ded2f11cbb14801
Merge: 09ef370c2 23a87716b
Author: David Anderson <dvander@google.com>
Date:   Sun Aug 4 01:24:24 2019 -0700

    Merge "Implement basic libsnapshot functionality."
    am: 23a87716b5
    
    Change-Id: I2c29c0839d7cfefbc4791ab9a447c648e3ed73c0

commit 456e50193bf5989c787d1f33b9b411f4fd462093
Author: David Anderson <dvander@google.com>
Date:   Thu Aug 1 14:37:35 2019 -0700

    Implement basic libsnapshot functionality.
    
    This CL implements some of the libsnapshot internals necessary to work
    with update_engine. In particular it implements snapshot and update
    state, as well as creating and mapping snapshot devices. It does not
    implement anything related to merging, nor does it implement the full
    update_engine flow.
    
    Update state is stored in /metadata/ota/state. To synchronize callers of
    libsnapshot, we always flock() this file at the top of public functions
    in SnapshotManager. Internal functions are only called while the lock is
    held, and a "LockedFile" guard object is always passed through to
    indicate proof-of-lock.
    
    Low-level functions, such as snapshot management, have been moved to
    private methods. Higher-level methods designed for update_engine will
    ultimately call into these.
    
    This CL also adds some functional tests for SnapshotManager. Test state
    is stored in /metadata/ota/test to avoid conflicts with the rest of the
    system.
    
    Bug: 136678799
    Test: libsnapshot_test gtest
    Change-Id: I78c769ed33b307d5214ee386bb13648e35db6cc6

commit f683ab3e975806d8948396707b5f4c79bff9e3a8
Merge: 8e7061b73 888c5f53a
Author: David Anderson <dvander@google.com>
Date:   Thu Jul 18 16:20:23 2019 -0700

    Merge "Add a metadata folder for libsnapshot." am: 45a1c998d1 am: f1ce0e51bb
    am: 888c5f53aa
    
    Change-Id: I3e0f0c6b7e160c41a6006ef6dbd5b1e2c8979827

commit 888c5f53aabe8a47207cb7247c3263c1b5fe1967
Merge: aacd6c06f f1ce0e51b
Author: David Anderson <dvander@google.com>
Date:   Thu Jul 18 16:10:13 2019 -0700

    Merge "Add a metadata folder for libsnapshot." am: 45a1c998d1
    am: f1ce0e51bb
    
    Change-Id: Icd9a9ee21accb3cc6c79f30efe2f4af753b4a51b

commit f1ce0e51bba8ca22a6ff4c9fd8860c5b95310e97
Merge: 4e8b131b8 45a1c998d
Author: David Anderson <dvander@google.com>
Date:   Thu Jul 18 16:00:31 2019 -0700

    Merge "Add a metadata folder for libsnapshot."
    am: 45a1c998d1
    
    Change-Id: I450ae649c089b3c5108cc26a714d851e6615d298

commit 45a1c998d1602219756c52e2de2d0ffa0f953a63
Merge: 3dcb41b22 001747e89
Author: David Anderson <dvander@google.com>
Date:   Thu Jul 18 22:42:13 2019 +0000

    Merge "Add a metadata folder for libsnapshot."

commit 001747e890a1e58a8ab95eed05c5ff3c2920dc38
Author: David Anderson <dvander@google.com>
Date:   Wed Jul 3 15:10:53 2019 -0700

    Add a metadata folder for libsnapshot.
    
    /metadata/ota will store the update state ("none", "applying",
    "booting", "merging") for each dynamic partition. The data will be
    managed by libsnapshot, whose primary consumer will be update_engine
    but will also be available to recovery/fastbootd.
    
    Bug: 136678799
    Test: /metadata/ota exists
    Change-Id: I3e06484cafeb363904914767abc8984adaa37021

commit b0fff2743cc4f6d07d4e910b6f1688cb350548db
Merge: 0942b6f7a fa66ee341
Author: Elliott Hughes <enh@google.com>
Date:   Wed Jul 17 12:05:10 2019 -0700

    Merge "Remove perfprofd reference." am: 97c06703f6 am: 03cca21541
    am: fa66ee3411
    
    Change-Id: I49cf6f641759d28eedbe262dbcaaab952073feee

commit fa66ee341185d4cba9a9b59463dc9b8621a13475
Merge: ce2024c2e 03cca2154
Author: Elliott Hughes <enh@google.com>
Date:   Wed Jul 17 11:56:06 2019 -0700

    Merge "Remove perfprofd reference." am: 97c06703f6
    am: 03cca21541
    
    Change-Id: Ie9e1f86fdbfaa5e1f73fc6d1e4f052c90412b85c

commit 03cca215418e785604cfe97fbc8226f4c8ddccae
Merge: 1c8ecd77c 97c06703f
Author: Elliott Hughes <enh@google.com>
Date:   Wed Jul 17 11:47:44 2019 -0700

    Merge "Remove perfprofd reference."
    am: 97c06703f6
    
    Change-Id: If6374e130ff430e7171ac71c7889844aab10775f

commit 97c06703f6cd899d62b83ba8c7d2b226ad12da95
Merge: 1f1a0009f ffaabf54b
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Jul 17 18:30:37 2019 +0000

    Merge "Remove perfprofd reference."

commit ffaabf54bac0af43720beea04159f9e55c71ca4c
Author: Elliott Hughes <enh@google.com>
Date:   Wed Jul 17 08:17:44 2019 -0700

    Remove perfprofd reference.
    
    Dead and gone.
    
    Test: treehugger
    Change-Id: I8c08cada5313ddede5ebb4973d61cef2bb8a0a7e

commit f474068ae0074da5df7b56aea1f590fab3e08a85
Merge: a3524ac08 b95867eb3
Author: Tri Vo <trong@google.com>
Date:   Tue Jul 16 19:16:34 2019 -0700

    Merge "Set /sys/power/wake_lock permissions on init." am: e75c6c841b am: b00894dc64
    am: b95867eb30
    
    Change-Id: Id2391be3c5f5f1cd735f09855e86faae2d3d8d93

commit b95867eb30a7279ebb8f000f93576c3f0b4c7a1e
Merge: 09a959f1b b00894dc6
Author: Tri Vo <trong@google.com>
Date:   Tue Jul 16 19:05:39 2019 -0700

    Merge "Set /sys/power/wake_lock permissions on init." am: e75c6c841b
    am: b00894dc64
    
    Change-Id: I2e3cbbb520fb9451e77ebbe78c3642a2ef152583

commit b00894dc64bbcf047944c795e6dc514ab2b1352a
Merge: 904783582 e75c6c841
Author: Tri Vo <trong@google.com>
Date:   Tue Jul 16 18:55:40 2019 -0700

    Merge "Set /sys/power/wake_lock permissions on init."
    am: e75c6c841b
    
    Change-Id: I300152717163bc5419015c03b5dc23a2beb62422

commit c6a84e873b0d7062027494c632cc559b4bccfc0a
Author: Tri Vo <trong@google.com>
Date:   Tue Jul 16 14:31:55 2019 -0700

    Set /sys/power/wake_lock permissions on init.
    
    system_suspend need to be an early_hal as it's required before storage
    encryption can get unlock on FDE devices.
    
    /sys/power/wake_lock is a dependency of system_suspend (only in Q and
    earlier). Permissions on this file need to be set early enough.
    
    Bug: 136777986
    Bug: 133175847
    Test: boot blueline
    Change-Id: I8a9d3374b327e451fb98d2279d1bac9477a9560d

commit d7d475d470de7bb291034d1d61ec832bc1d2bbbb
Author: Daniel Rosenberg <drosen@google.com>
Date:   Fri Jul 12 23:43:56 2019 +0000

    Reland "Revert "rootdir / sdcard : Stop creating /data/media/obb.""
    
    This reverts commit 997a2d93d7a9216c248be9c983adec2d91283f5a.
    
    Reason for revert: This revert is needed, just also need some selinux rules for changes to the script that runs if this folder is present.
    
    Bug: 136199978
    Change-Id: Ie0544954965e3c90abc2f833c41949976c3bea65
    (cherry picked from commit 35708b9d7bcae0f9183de2848d782b2d0c54bcb6)

commit 4a98682a5698e9808c9544a7b01999a4f183dd85
Merge: 7daaabbd2 78f234e0a
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Mon Jul 15 18:12:39 2019 -0700

    Merge "Run linkerconfig from init process" am: 2f174171d7 am: 7b64a9a73a
    am: 78f234e0a4
    
    Change-Id: I3f66fa2247ea11d302d209b84f2439767778767d

commit 78f234e0a4305278f52d86b86e7bed32864ac2d4
Merge: bdbed08c4 7b64a9a73
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Mon Jul 15 17:50:29 2019 -0700

    Merge "Run linkerconfig from init process" am: 2f174171d7
    am: 7b64a9a73a
    
    Change-Id: I6956a7fb29162d0209ab496ecb378d0a7ff42aaa

commit 7b64a9a73a55aaf0f8b73e6a8065689fbf19a201
Merge: 4440f8bc2 2f174171d
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Mon Jul 15 17:39:34 2019 -0700

    Merge "Run linkerconfig from init process"
    am: 2f174171d7
    
    Change-Id: I1c228374303842ce7d02cb30ee23c83ef43808d9

commit 2f174171d71ee9d74d72982a56b908287200eb6f
Merge: c37f4a419 74c229232
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Tue Jul 16 00:32:13 2019 +0000

    Merge "Run linkerconfig from init process"

commit 93e092b21485f24ba09bbce6c203b10defd74de7
Merge: 2be25ac01 e48e3c893
Author: Daniel Rosenberg <drosen@google.com>
Date:   Mon Jul 15 13:33:03 2019 -0700

    Merge "Reland "Revert "rootdir / sdcard : Stop creating /data/media/obb.""" into qt-dev am: 11bf3545ab
    am: e48e3c8931
    
    Change-Id: I77e41d1c4c186f48d7c1b7f9de1ed903cb1f1c15

commit e48e3c89319bbab6f9392732cec6ff48d09d46cd
Merge: d5ebef055 11bf3545a
Author: Daniel Rosenberg <drosen@google.com>
Date:   Mon Jul 15 13:22:02 2019 -0700

    Merge "Reland "Revert "rootdir / sdcard : Stop creating /data/media/obb.""" into qt-dev
    am: 11bf3545ab
    
    Change-Id: I33b45da532ba677053c0866504a22ca43b1284b2

commit 11bf3545abd52aad9ca7c83ecfd0bb8b109205cd
Merge: ff7da227d 35708b9d7
Author: Daniel Rosenberg <drosen@google.com>
Date:   Mon Jul 15 19:56:35 2019 +0000

    Merge "Reland "Revert "rootdir / sdcard : Stop creating /data/media/obb.""" into qt-dev

commit 35708b9d7bcae0f9183de2848d782b2d0c54bcb6
Author: Daniel Rosenberg <drosen@google.com>
Date:   Fri Jul 12 23:43:56 2019 +0000

    Reland "Revert "rootdir / sdcard : Stop creating /data/media/obb.""
    
    This reverts commit 997a2d93d7a9216c248be9c983adec2d91283f5a.
    
    Reason for revert: This revert is needed, just also need some selinux rules for changes to the script that runs if this folder is present.
    
    Bug: 136199978
    Change-Id: Ie0544954965e3c90abc2f833c41949976c3bea65

commit 85316e7bad15e1a46bfd055778419de742bfc350
Merge: d271b91ca c9aff9869
Author: Gerry Fan <gfan@google.com>
Date:   Fri Jul 12 10:33:02 2019 -0700

    Merge "Revert "Revert "rootdir / sdcard : Stop creating /data/media/obb.""" into qt-dev am: ff7da227db
    am: c9aff9869d
    
    Change-Id: If7bdc7163796d078ff8bc968849089087129d3d8

commit 3f178695567185a23e6a6081dcec9c1600953102
Merge: 023a4282e ff7da227d
Author: Gerry Fan <gfan@google.com>
Date:   Fri Jul 12 10:24:00 2019 -0700

    Merge "Revert "Revert "rootdir / sdcard : Stop creating /data/media/obb.""" into qt-dev
    am: ff7da227db
    
    Change-Id: I6f6ec4b8472a3017c47d49a910e9ca982cae6eff

commit c9aff9869d8cb2efbfa24bf76f431337cd957bd0
Merge: d2e75075e ff7da227d
Author: Gerry Fan <gfan@google.com>
Date:   Fri Jul 12 10:24:00 2019 -0700

    Merge "Revert "Revert "rootdir / sdcard : Stop creating /data/media/obb.""" into qt-dev
    am: ff7da227db
    
    Change-Id: I42b5fdcdb6b87afe44353d830f6b1b5c0c645fc0

commit ff7da227dbe0f52d3eb9a3791cd19af99efda302
Merge: 346c17bbc 997a2d93d
Author: Gerry Fan <gfan@google.com>
Date:   Fri Jul 12 17:11:23 2019 +0000

    Merge "Revert "Revert "rootdir / sdcard : Stop creating /data/media/obb.""" into qt-dev

commit 997a2d93d7a9216c248be9c983adec2d91283f5a
Author: Gerry Fan <gfan@google.com>
Date:   Fri Jul 12 15:07:59 2019 +0000

    Revert "Revert "rootdir / sdcard : Stop creating /data/media/obb.""
    
    This reverts commit 891a0113941136544509886c1638d973a6c9773c.
    
    Reason for revert: Some Test failed, need more investigation
    
    Bug: 136199978
    Change-Id: Ibad0dad02a6701447c39ddcc805d44c9e68bdcce

commit 415110595b491d5de089ae3afc9bdf3152cf9348
Merge: 2a6c401d3 b8aaa13a5
Author: Hung-ying Tyan <tyanh@google.com>
Date:   Fri Jul 12 02:58:08 2019 -0700

    Merge "Revert "rootdir / sdcard : Stop creating /data/media/obb."" into qt-dev am: 346c17bbc9
    am: b8aaa13a5f
    
    Change-Id: Ib33cd581f66b470ec5d8c289e34d4866931517a9

commit 3061693f5d1a259b6948d4a352c6510f696c7b01
Merge: 6f2eeabbc 346c17bbc
Author: Hung-ying Tyan <tyanh@google.com>
Date:   Fri Jul 12 02:49:38 2019 -0700

    Merge "Revert "rootdir / sdcard : Stop creating /data/media/obb."" into qt-dev
    am: 346c17bbc9
    
    Change-Id: I1c99ad74d9b1ee7e486183b4c62ec732d2d23114

commit b8aaa13a5f585565ba79990eb5041f4b8c6ada4e
Merge: bb0838b51 346c17bbc
Author: Hung-ying Tyan <tyanh@google.com>
Date:   Fri Jul 12 02:49:37 2019 -0700

    Merge "Revert "rootdir / sdcard : Stop creating /data/media/obb."" into qt-dev
    am: 346c17bbc9
    
    Change-Id: I501695115c2c84345db0c78e8694fd31686b7ee7

commit 346c17bbc9d47cedfc3a1887940e6f1ea9514614
Merge: ac9e2af1b 891a01139
Author: Hung-ying Tyan <tyanh@google.com>
Date:   Fri Jul 12 09:27:01 2019 +0000

    Merge "Revert "rootdir / sdcard : Stop creating /data/media/obb."" into qt-dev

commit 74c229232c63dc1110f0e5c79ebba5aa9d40cbff
Author: Kiyoung Kim <kiyoungkim@google.com>
Date:   Mon Jul 8 18:59:50 2019 +0900

    Run linkerconfig from init process
    
    Create linkerconfig tmpfs mount and create ld.config.txt using
    linkerconfig during init
    
    Bug: 135004088
    Test: m -j & tested from device
    Change-Id: Iea30259871ef26d6c04beebf42b17ba7b494db0d

commit 891a0113941136544509886c1638d973a6c9773c
Author: Gerry Fan <gfan@google.com>
Date:   Thu Jul 11 20:44:58 2019 +0000

    Revert "rootdir / sdcard : Stop creating /data/media/obb."
    
    This reverts commit c6ca823710d49754c3717e9cf3ba11b9c2648825.
    Reason for revert: Q-GSI on Pie devices would crash kernel.
    
    Bug: 136199978
    
    Change-Id: I16a2cb81a1f21627db0cb00324679a322ba42fe0

commit 9c11e4a193bfa813f6b4901f0a61391ba2be5e23
Merge: 889818ca8 bb0838b51
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Wed Jul 10 16:05:08 2019 -0700

    rootdir: init.rc: use gc_urgent_sleep_time for f2fs
    am: bb0838b511
    
    Change-Id: I94f870ee7330c18272f95d673b678d3a34e53ae3

commit bb0838b5114419b4f8ecff67c0b6fb728399c7b7
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Mon Jul 1 11:34:58 2019 -0700

    rootdir: init.rc: use gc_urgent_sleep_time for f2fs
    
    This accelerates f2fs GC when IdleMaint.
    
    Bug: 128594671
    Bug: 137190790
    Change-Id: I1cea7c99ffd5963711c66460f1c8368b43aeaee2
    Signed-off-by: Jaegeuk Kim <jaegeuk@google.com>

commit 3fd963ed5e791dc302946f52a00aa6644ab2516a
Merge: 343ce615c cdc46ec3c
Author: Xin Li <delphij@google.com>
Date:   Tue Jul 9 17:00:47 2019 -0700

    DO NOT MERGE - Merge pie-platform-release (PPRL.190705.004) into master
    
    Bug: 136196576
    Change-Id: I127ae61add2e34184b3c65ca64693cccf62b8a6d

commit b7a8f6e0d82534740b946894f7936430846d108c
Merge: 86e506b85 15e01c675
Author: Jooyung Han <jooyung@google.com>
Date:   Tue Jun 18 22:50:38 2019 -0700

    Merge "init: Create /data/apex/hashtree folder at boot" am: 4a8d436ad1
    am: 15e01c675c
    
    Change-Id: I5d4d75df534681c39d2095e2c671f95a5897295a

commit 4a8d436ad199ca1b7e5f8de8da6967b97c9b3f6e
Merge: 411fb8850 baa7c13c3
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Jun 19 04:37:56 2019 +0000

    Merge "init: Create /data/apex/hashtree folder at boot"

commit ca8f5ade9176132f4f80dc8231f441cc6647b367
Merge: 771944aaf d6253fc91
Author: Daniel Rosenberg <drosen@google.com>
Date:   Tue Jun 18 12:55:55 2019 -0700

    Merge "Start Vold on early-fs" into qt-dev
    am: d6253fc917
    
    Change-Id: Ifc23a45193c3b615f1e64d1ab5b48dfa86aa5df7

commit c6e89725888dd6fa1838da49b1c6dccd5a92049b
Author: Daniel Rosenberg <drosen@google.com>
Date:   Mon Jun 17 13:23:05 2019 -0700

    Start Vold on early-fs
    
    We need vold on early-fs so we can handle userdata checkpointing.
    Without this, devices will take an extra minute or two as checkpointing
    related vdc calls attempt to reach vold before it is available.
    
    Bug: 134114000
    Test: Boot, see vold has started before vdc checkpointing tries to call
          out to vold.
    Merged-In: Idfdb304503a163fbb91f9317949eb98c06fecce1
    Change-Id: Idfdb304503a163fbb91f9317949eb98c06fecce1

commit 1be83e30c583de86a207ce4cebd10102eae0137e
Author: Daniel Rosenberg <drosen@google.com>
Date:   Mon Jun 17 13:23:05 2019 -0700

    Start Vold on early-fs
    
    We need vold on early-fs so we can handle userdata checkpointing.
    Without this, devices will take an extra minute or two as checkpointing
    related vdc calls attempt to reach vold before it is available.
    
    Bug: 134114000
    Test: Boot, see vold has started before vdc checkpointing tries to call
          out to vold.
    
    Change-Id: Idfdb304503a163fbb91f9317949eb98c06fecce1

commit baa7c13c314373a73e122fe4b20ca37756bebf5a
Author: Jooyung Han <jooyung@google.com>
Date:   Thu Apr 18 11:01:35 2019 +0900

    init: Create /data/apex/hashtree folder at boot
    
    /data/apex/hashtree is internal to apexd, hence 0700
    
    Bug: 120058143
    Test: m && boot device
    Change-Id: I3637a3cbedf871e982e02d50c21e0fe53e6b4824

commit 8daada64999c1027085fd9b7596c41c4f9e4657c
Merge: 3d58c67c1 91f35c08c
Author: Neil Fuller <nfuller@google.com>
Date:   Mon Jun 10 11:03:24 2019 -0700

    Merge "Switch tzdatacheck to comparing tzdata module file" am: e59703319f
    am: 91f35c08cd
    
    Change-Id: I95813932709c8c80d954cb7330793644b11ebaf5

commit e59703319f6d72e8ec9998596ea9c5fca1e8ab96
Merge: caa95d551 09bdb325a
Author: Neil Fuller <nfuller@google.com>
Date:   Mon Jun 10 17:40:51 2019 +0000

    Merge "Switch tzdatacheck to comparing tzdata module file"

commit 09bdb325a7d049d0f6bf6fa5008e97f925c56d3b
Author: Neil Fuller <nfuller@google.com>
Date:   Thu Jun 6 15:18:36 2019 +0100

    Switch tzdatacheck to comparing tzdata module file
    
    The old "time zone updates via APK" feature installs time zone data
    files in /data. tzdatacheck is run during boot to guard against an
    OTA leaving the data in /data older, or in a different format, than the
    files that exist elsewhere on device. If such files existed the system
    could use old versions of tzdb (and related) data or even end up
    unstable.
    
    Soon, the time zone data mainline module will be made "functionally
    mandatory" by the removal of most time zone data files from the
    runtime module APEX, i.e. the time zone data module cannot be absent,
    and the runtime module won't have files to compare against.
    
    This change modifies the command line args for tzdatacheck to reference
    the contents of time zone data module instead of the runtime module.
    
    Bug: 132168458
    Test: Build / boot / inspect logcat
    Change-Id: Iac8023b7cbb72213df344d603c121caa867a196f

commit 0c10a4c1f5bec1cd584a418e851de23c05eb3149
Merge: 773dedf1e c3d485fa1
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Jun 7 09:09:25 2019 -0700

    Merge "init.rc: move rlimit setting earlier" am: acf19e8031
    am: c3d485fa1a
    
    Change-Id: If8fe3b572537f360bdb2bd5164a3d7f99af18a35

commit fdeca99c4b6d1b209b57a56ebd843d556cd677c9
Author: Tom Cherry <tomcherry@google.com>
Date:   Thu Jun 6 11:05:52 2019 -0700

    init.rc: move rlimit setting earlier
    
    There is no reason that rlimits cannot be set earlier than they are,
    and apexd-bootstrap may want to set the priority service option, which
    would require that these rlimits have been set, so we move these to
    the beginning of early-init.
    
    Bug: 134668377
    Test: apexd-bootstrap can set the priorty service option
    Change-Id: I8040190cd4dc5e141784496ae65cfab80d9cad53

commit c6ca823710d49754c3717e9cf3ba11b9c2648825
Author: Narayan Kamath <narayan@google.com>
Date:   Fri May 17 12:20:54 2019 +0100

    rootdir / sdcard : Stop creating /data/media/obb.
    
    This directory is no longer used. OBB content is
    placed in /data/media/$user/Android.
    
    Test: make
    Test: manually verify the path doesn't exist.
    Bug: 129167772
    
    Change-Id: I8549826586b9a68c8cfa3fe2e51295363f9b4e11

commit c61ef453799bb6deb1fb78e19ce7bd3eb453650a
Author: Tao Bao <tbao@google.com>
Date:   Tue May 7 11:09:04 2019 -0700

    DO NOT MERGE Start update_verifier early in late-fs.
    
    We used to start update_verifier after mounting userdata (post-fs-data),
    as part of zygote-start. This leads to issues in practice for security
    updates, where an A/B device falls back into the old slot (for any
    reason, which unrelates to this change) but failing to boot due to
    upgraded key blob. It essentially breaks the fallback capability offered
    by A/B OTA.
    
    This CL mitigates the issue by starting update_verifier early, before
    mounting userdata. This avoids the device from falling back to the old
    slot with an already-upgraded key blob. update_verifier loses the
    opportunity of verifying _all_ the updated blocks based on the info
    that's stored in userdata.  Instead it will only trigger the minimal
    read to finish the work of marking a successful boot. This is a
    trade-off in P to avoid putting the device in a bad state after
    fallback, which will be improved in Q by better handling the fallback
    path in vold.
    
    Bug: 131176531
    Test: Flash and boot crosshatch. Check the start of update_verifier and
          it marks a successful boot.
    Change-Id: I3f4c4333ff38772a9a93c9d027d497db11de1d63
    (cherry picked from commit 79cfc7d5a8a5c4d308fa2315f42cf17f253c09fd)

commit c7bf1a01fdf0db57f46e25bd7af54e465a458929
Author: Rick Yiu <rickyiu@google.com>
Date:   Tue Apr 23 21:33:56 2019 +0800

    Apply initial settings for blkio cgroup
    
    Bug: 117857342
    Test: values are applied
    Change-Id: Id28d9619fc2fd2287fe656b8032025184ae7f631
    (cherry picked from commit a8aaf198d5d5bf110df36309a7c679ed3a153d68)
    Merged-In: Id28d9619fc2fd2287fe656b8032025184ae7f631

commit 9243da900839d87a5e55db69d88e469543919cac
Merge: fc78be293 a8aaf198d
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Tue May 7 08:15:35 2019 +0000

    Merge "Apply initial settings for blkio cgroup"

commit a8aaf198d5d5bf110df36309a7c679ed3a153d68
Author: Rick Yiu <rickyiu@google.com>
Date:   Tue Apr 23 21:33:56 2019 +0800

    Apply initial settings for blkio cgroup
    
    Bug: 111422845
    Test: values are applied
    Change-Id: Id28d9619fc2fd2287fe656b8032025184ae7f631

commit 70788f93ba5e8262790db9a473715362b8372501
Author: Martijn Coenen <maco@google.com>
Date:   Tue Apr 23 16:26:01 2019 +0200

    Support for stopping/starting post-data-mount class subsets.
    
    On devices that use FDE and APEX at the same time, we need to bring up a
    minimal framework to be able to mount the /data partition. During this
    period, a tmpfs /data filesystem is created, which doesn't contain any
    of the updated APEXEs. As a consequence, all those processes will be
    using the APEXes from the /system partition.
    
    This is obviously not desired, as APEXes in /system may be old and/or
    contain security issues. Additionally, it would create a difference
    between FBE and FDE devices at runtime.
    
    Ideally, we restart all processes that have started after we created the
    tmpfs /data. We can't (re)start based on class names alone, because some
    classes (eg 'hal') contain services that are required to start apexd
    itself and that shouldn't be killed (eg the graphics HAL).
    
    To address this, keep track of which processes are started after /data
    is mounted, with a new 'mark_post_data' keyword. Additionally, create
    'class_reset_post_data', which resets all services in the class that
    were created after the initial /data mount, and 'class_start_post_data',
    which starts all services in the class that were started after /data was
    mounted.
    
    On a device with FBE, these keywords wouldn't be used; on a device with
    FDE, we'd use them to bring down the right processes after the user has
    entered the correct secret, and restart them.
    
    Bug: 118485723
    Test: manually verified process list
    Change-Id: I16adb776dacf1dd1feeaff9e60639b99899905eb

commit f0bc58a42dff06213b60676c034b0d345e2b5344
Author: Martijn Coenen <maco@google.com>
Date:   Tue Apr 23 16:26:01 2019 +0200

    Support for stopping/starting post-data-mount class subsets.
    
    On devices that use FDE and APEX at the same time, we need to bring up a
    minimal framework to be able to mount the /data partition. During this
    period, a tmpfs /data filesystem is created, which doesn't contain any
    of the updated APEXEs. As a consequence, all those processes will be
    using the APEXes from the /system partition.
    
    This is obviously not desired, as APEXes in /system may be old and/or
    contain security issues. Additionally, it would create a difference
    between FBE and FDE devices at runtime.
    
    Ideally, we restart all processes that have started after we created the
    tmpfs /data. We can't (re)start based on class names alone, because some
    classes (eg 'hal') contain services that are required to start apexd
    itself and that shouldn't be killed (eg the graphics HAL).
    
    To address this, keep track of which processes are started after /data
    is mounted, with a new 'mark_post_data' keyword. Additionally, create
    'class_reset_post_data', which resets all services in the class that
    were created after the initial /data mount, and 'class_start_post_data',
    which starts all services in the class that were started after /data was
    mounted.
    
    On a device with FBE, these keywords wouldn't be used; on a device with
    FDE, we'd use them to bring down the right processes after the user has
    entered the correct secret, and restart them.
    
    Bug: 118485723
    Test: manually verified process list
    Change-Id: I16adb776dacf1dd1feeaff9e60639b99899905eb

commit ec78cca331fa651890c10c2746c2d99f4c800322
Author: Wei Wang <wvw@google.com>
Date:   Fri Apr 19 10:58:39 2019 -0700

    init.rc: set fsck log permission on post-fs-data
    
    Fixes: 130829745
    Test: build and trigger fsck
          crosshatch:/ # ls -l /dev/fscklogs/log
          -rwxrwx--- 1 root system 1584 1970-04-08 14:48 /dev/fscklogs/log
    Change-Id: Ifd0734e121d07b941a73d7cabde04928ce5e5c59
    Merged-In: Ifd0734e121d07b941a73d7cabde04928ce5e5c59

commit a91c5f700ea675f53beb1cf918cedf2d719e6f9e
Author: Wei Wang <wvw@google.com>
Date:   Fri Apr 19 10:58:39 2019 -0700

    init.rc: set fsck log permission on post-fs-data
    
    Fixes: 130829745
    Test: build and trigger fsck
          crosshatch:/ # ls -l /dev/fscklogs/log
          -rwxrwx--- 1 root system 1584 1970-04-08 14:48 /dev/fscklogs/log
    Change-Id: Ifd0734e121d07b941a73d7cabde04928ce5e5c59

commit a7c103eb8ed82f3a4886ebd07a1a9b3664cafa8f
Merge: f072aaffe 45d8174fe
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Fri Apr 19 02:17:50 2019 +0000

    Merge "init: set oom_adj early before fork vendor_init"

commit bb2bc1586d1de2afec9874fdbeb1e204b996aadf
Author: Wei Wang <wvw@google.com>
Date:   Thu Apr 18 14:56:24 2019 -0700

    init: set oom_adj early before fork vendor_init
    
    right now vendor_init is forked before we set oom_adj for init which
    leaves a chance vendor_init could be killed in heavy memory pressure.
    
    this CL set the oom_adj before forking everything to ensure all native
    have correct oom_adj settings.
    
    Fixes: 130824864
    Test: procrank -o
    
    (cherry picked from commit 45d8174fe7b6f35883f74ceefdf591b209f1fab2)
    
    Change-Id: I68c18f9db24d55239f7f0608592fcc702f04542e

commit 45d8174fe7b6f35883f74ceefdf591b209f1fab2
Author: Wei Wang <wvw@google.com>
Date:   Thu Apr 18 14:56:24 2019 -0700

    init: set oom_adj early before fork vendor_init
    
    right now vendor_init is forked before we set oom_adj for init which
    leaves a chance vendor_init could be killed in heavy memory pressure.
    
    this CL set the oom_adj before forking everything to ensure all native
    have correct oom_adj settings.
    
    Fixes: 130824864
    Test: procrank -o
    Change-Id: I8af129076c3efa29f7b781459449f8f2dc853c98

commit 122e78248ee588a49ff38a662865913923144c94
Author: Yifan Hong <elsk@google.com>
Date:   Mon Apr 8 13:29:07 2019 -0700

    charger: Allow to rw /sys/power/[state,wakeup_count]
    
    charger needs to suspend the device when the power goes away
    when it doesn't have root. These two files are marked with
    group system, user system, mode 0600 in 'on boot', but
    it is not executed in charger. Hence, move these actions
    to 'on init'.
    
    Test: no failure in libsuspend in charger
    
    Bug: 129138950
    
    Change-Id: I787b935b4ff6177601329aeedccdac361b119ca3
    Merged-In: I787b935b4ff6177601329aeedccdac361b119ca3

commit c9a9d279efbaa55f2ba51576bfd9ad587c5fef17
Author: Yifan Hong <elsk@google.com>
Date:   Mon Apr 8 13:29:07 2019 -0700

    charger: Allow to rw /sys/power/[state,wakeup_count]
    
    charger needs to suspend the device when the power goes away
    when it doesn't have root. These two files are marked with
    group system, user system, mode 0600 in 'on boot', but
    it is not executed in charger. Hence, move these actions
    to 'on init'.
    
    Test: no failure in libsuspend in charger
    
    Bug: 129138950
    
    Change-Id: I787b935b4ff6177601329aeedccdac361b119ca3

commit cc563077bfc18b1492ca1aaf7fb547750e582ac2
Merge: d03dfdf98 e727f6612
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Mon Apr 1 09:34:17 2019 -0700

    Merge "init.rc: tune F2FS to be aligned to system settings" am: 99ba4b36e8 am: d2060b771d
    am: e727f6612c
    
    Change-Id: I7a6b250ebb79baf726de6f6493fc2f11262682c4

commit 99ba4b36e86cc02b63ef5e6b58c7279f15f40e62
Merge: ddaf736a8 f65df964c
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Mon Apr 1 16:10:28 2019 +0000

    Merge "init.rc: tune F2FS to be aligned to system settings"

commit f65df964c01cf37f7a61fe4773320390d37c107a
Author: Jaegeuk Kim <jaegeuk@google.com>
Date:   Fri Mar 29 09:16:51 2019 -0700

    init.rc: tune F2FS to be aligned to system settings
    
    Android sets /proc/sys/vm/dirty_expire_centisecs to 200, so f2fs
    doesn't need to do checkpoint in 60 seconds.
    
    Bug: 127511432
    Change-Id: I2ba0623053d4480b82003eb1cca85ff03c61fc0f
    Signed-off-by: Jaegeuk Kim <jaegeuk@google.com>

commit f33436d7208e35f640d058f6cf9a1ca8b71d1849
Merge: cc347b9d4 d8a1ee860
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Fri Mar 29 13:36:57 2019 -0700

    Merge "Set /proc/pressure/memory file permissions" am: 3cf9850cef am: e337910a35
    am: d8a1ee860c
    
    Change-Id: I46d066d35a97a0d0fc01240c58a8060a40d6cea7

commit 1504cb5b6e0a4e0afc162c25b7e53e61c9331b77
Author: Tim Murray <timmurray@google.com>
Date:   Fri Feb 15 11:51:09 2019 -0800

    Set /proc/pressure/memory file permissions
    
    Change access mode and ownership for /proc/pressure/memory file
    to allow system components access memory pressure information.
    
    Bug: 129476847
    Change-Id: I25b6bc9d47aee857936f050b66e7bee6363b53be
    Signed-off-by: Tim Murray <timmurray@google.com>

commit c4430f3489805c91329e3aefd1fe76af88996503
Merge: d9c1711a7 98d769624
Author: Victor Hsieh <victorhsieh@google.com>
Date:   Wed Mar 27 13:51:14 2019 -0700

    Merge "Initialize fs-verity keys in shell script" am: 7f43e9fa40 am: ef787edd24
    am: 98d7696248
    
    Change-Id: Ie144188d08d295b1c34b1593772f74fed96a4197

commit 59183120c29e5e2747222b24de09484b7cd8cf17
Author: Victor Hsieh <victorhsieh@google.com>
Date:   Wed Mar 20 15:52:45 2019 -0700

    Initialize fs-verity keys in shell script
    
    This gives us two benefits:
      - Better compatibility to keyctl(1), which doesn't have "dadd"
      - Pave the way to specify key's security labels, since keyctl(1)
        doesn't support, and we want to avoid adding incompatible option.
    
    Test: See keys loaded in /proc/keys
    Bug: 128607724
    Change-Id: Ia45f6e9dea80d037c0820cf1fd2bc9d7c8bb6302

commit ed98d4f2499031f8bf21e392d36bab43a7d74e08
Merge: 44cbfa1ac f0ac99438
Author: Xiaoyong Zhou <xzhou@google.com>
Date:   Tue Mar 19 10:11:11 2019 -0700

    Merge "Enable fsverity signature checking" am: aaee497db2 am: 0d8d105e32
    am: f0ac994384
    
    Change-Id: I400ba966f1e23400bb3e4a2f3bb8ab0b3ba10368

commit 66fc7eb195820d9e8e6649495e51b738d41924a5
Author: Xiaoyong Zhou <xzhou@google.com>
Date:   Mon Mar 18 14:28:18 2019 -0700

    Enable fsverity signature checking
    
    This CL enable fsverity signature checking.
    
    Bug: 112038861
    Test: cat /proc/sys/fs/verity/require_signatures -> 1
    Change-Id: I57aaf6094aa503bdcac93306cafd7f71f202e711

commit 514fc0363865372e50ca31476e0e1ea93fd5be2d
Merge: dc36fb147 a7597deed
Author: Andreas Gampe <agampe@google.com>
Date:   Fri Mar 15 19:34:32 2019 -0700

    Merge "Init: Load fsverity keys earlier" am: f09ef56056 am: a0cc42381c
    am: a7597deed2
    
    Change-Id: Ibe40afdbed4af22f207600a94307448191287f29

commit e8565ac94a3aec39cc9efafe4cbb0b453d0a285f
Author: Andreas Gampe <agampe@google.com>
Date:   Fri Mar 15 14:22:04 2019 -0700

    Init: Load fsverity keys earlier
    
    Keys may be required for apex updates (post-installs), so load them
    before starting apexd.
    
    Bug: 125474642
    Test: m
    Test: manual
    Change-Id: I32ddb6ae6854334e8ee7e195173ecfaed565d783

commit 190cee35193115c540a3100e4b3a85b6f396b327
Merge: 76f9dc6f3 f90d8479c
Author: Jiyong Park <jiyong@google.com>
Date:   Fri Mar 15 02:42:54 2019 -0700

    Don't bind-mount bionic files am: 7b4801a921 am: 2f2b99a20d
    am: f90d8479c9
    
    Change-Id: I06ceb206ce8b95176fa7a74802d2d0b7d34f444c

commit 2f2b99a20daac5a451f50f0c9ce1a77e6171f9bc
Merge: ac5d9460f 7b4801a92
Author: Jiyong Park <jiyong@google.com>
Date:   Fri Mar 15 02:17:48 2019 -0700

    Don't bind-mount bionic files
    am: 7b4801a921
    
    Change-Id: I80ded3b5efbee209eb705556bc92e2708497da20

commit 4cd09140489d8ba4905c07e6541e5f2ae47df5ff
Merge: da1251d6a 192fdeb49
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Fri Mar 15 09:02:18 2019 +0000

    Merge changes from topic "apex_earlymount_no_bionic_bindmount"
    
    * changes:
      /bionic path is gone
      Revert "Handle adb sync with Bionic under /bionic"
      Don't bind-mount bionic files

commit ff3c13f52f1d223a4aa2904234867e6199643766
Merge: 873ee642f 8df32193f
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Thu Mar 14 14:14:38 2019 +0000

    Merge "Rename data/pkg_staging to data/app-staging."

commit 7b4801a92140a27343ddc38f4b8f0a2c4995a9fb
Author: Jiyong Park <jiyong@google.com>
Date:   Mon Feb 25 16:41:38 2019 +0900

    Don't bind-mount bionic files
    
    Bind-mounting of the bionic files on /bionic/* paths no longer required
    as there are direct symlinks from bionic files in /system partition to
    the corresponding bionic files in the runtime APEX. e.g.,
    
    /system/lib/libc.so -> /apex/com.android.runtime/lib/bionic/libc.so
    
    Bug: 125549215
    Test: m; devices boots
    Change-Id: I4a43101c3e3e2e14a81001d6d65a8a4b727df385

commit 4fa4c2a6f95f912ec475ccc870ab736bb98f1333
Merge: 8c27df0dd 3d62bd2e1
Author: Martijn Coenen <maco@google.com>
Date:   Wed Mar 13 01:27:08 2019 -0700

    Merge "Create /metadata/apex/[sessions]." am: 13b5c3bee7 am: 5cdb3a9af8
    am: 3d62bd2e16
    
    Change-Id: Ida561b285efae52985149ab90ad7bc6b96eb536b

commit 13b5c3bee788b53821023c849277f1ff1d720a35
Merge: 35c5cd913 4517e57ff
Author: Martijn Coenen <maco@google.com>
Date:   Wed Mar 13 07:46:32 2019 +0000

    Merge "Create /metadata/apex/[sessions]."

commit 4517e57ff5df0978199c69982270fdc647ce66a6
Author: Martijn Coenen <maco@google.com>
Date:   Tue Mar 12 22:05:20 2019 +0100

    Create /metadata/apex/[sessions].
    
    For storing persistent apex session state.
    
    Bug: 126740531
    Test: builds
    Change-Id: Ibf280764977768956b5512b2252d22ceaba31c1e

commit 8df32193f315d893493c1db3f6f7b26c59a7bc88
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Wed Feb 27 12:04:47 2019 +0000

    Rename data/pkg_staging to data/app-staging.
    
    Test: atest apex_e2e_tests
    Bug: 126330086
    
    Change-Id: Ic5729d60046e8825a2a94e3c3483ea8232a69ed2
    Merged-In: Ic5729d60046e8825a2a94e3c3483ea8232a69ed2

commit 8d7304820975f97e960a5f3ca227e9ddc36c1890
Merge: abc51e5e8 ad0b2473d
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Sat Mar 9 12:41:28 2019 +0000

    Merge "Rename data/pkg_staging to data/app-staging."

commit 27c13df54b3ab97854ad4d45d1060c324cb9a033
Merge: 9909c13ad 4b0a6092c
Author: Xiaoyong Zhou <xzhou@google.com>
Date:   Fri Mar 8 16:08:30 2019 -0800

    Merge "Change mini-keyctl command format." am: 34e1b402a6 am: 3c6e86bc11
    am: 4b0a6092cc
    
    Change-Id: I6e4179f6a2b4dfece070d196d343e5b497f37385

commit b29b27ec7f47bde45ee65752cb218d6f7a0860d6
Author: Xiaoyong Zhou <xzhou@google.com>
Date:   Fri Mar 8 09:59:42 2019 -0800

    Change mini-keyctl command format.
    
    This CL change the mini-keyctl tool to make it compitable with libkeyctl
    tool to make it more useful.
    
    Bug: 112038861
    Test: mini-keyctl padd asymmetric 'desc' .fs-verity < /path/to/cert.der
    Test: mini-keyctl unlink <key_id> <keyring_id>
    Test: mini-keyctl restrict_keyring <keyring_id>
    
    Change-Id: I950f07c7718f173823ce5a5cd08e0d1a0e23a007

commit ad0b2473dcddee9564334a7fc9a5182142e1b5c9
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Wed Feb 27 12:04:47 2019 +0000

    Rename data/pkg_staging to data/app-staging.
    
    Test: atest apex_e2e_tests
    Bug: 126330086
    
    Change-Id: Ic5729d60046e8825a2a94e3c3483ea8232a69ed2

commit ef35aa87ded54b08050f7da5d1c172f1f83890f1
Merge: d480dda3f c31a6f760
Author: David Anderson <dvander@google.com>
Date:   Thu Mar 7 12:19:57 2019 -0800

    Merge "Create /metadata/password_slots during boot." am: 1c1850fad2 am: 7d5cf4e04c
    am: c31a6f760c
    
    Change-Id: I3922e7b616e159628b5381bebee0e19edfc15e3e

commit 1c1850fad2470edc3732bfc05f7fe67f7e2fd422
Merge: e820afdad 0664f31dd
Author: David Anderson <dvander@google.com>
Date:   Thu Mar 7 16:20:01 2019 +0000

    Merge "Create /metadata/password_slots during boot."

commit 0664f31dd05119a6aaa3ef136a1509ff56978298
Author: David Anderson <dvander@google.com>
Date:   Tue Mar 5 22:16:36 2019 -0800

    Create /metadata/password_slots during boot.
    
    This directory is used to store the Weaver/GateKeeper slot map so GSIs
    do not overwrite host keys in secure storage.
    
    Bug: 123716647
    Test: /metadata/password_slots exists after boot
    Change-Id: Ib0ca13edec38e68cba1fc2124465571feedc4be7

commit b537934ab70d5e4e7fb67698716ad4870a9e47be
Merge: 27e93c1f1 7e933b1e0
Author: Jiyong Park <jiyong@google.com>
Date:   Mon Mar 4 23:14:51 2019 -0800

    Merge changes from topic "apex_earlymount_base" am: c676cca4f6 am: a192ff7ad3
    am: 7e933b1e07
    
    Change-Id: I038cfec65219659dbd0ae6a886476be7aeb25d5b

commit 27e93c1f11c9451fc2ca8f894ea423e09d03528a
Merge: 2085759c6 5675349df
Author: Jiyong Park <jiyong@google.com>
Date:   Mon Mar 4 23:14:03 2019 -0800

    mount /apex during first_stage init am: 4ba548d845 am: 854c5bc218
    am: 5675349df0
    
    Change-Id: Ic97ed52ae158225945542bc810a4ac5295c05f39

commit dcbaf9f41b94cc5ddd12523a48b7be98704332ff
Author: Jiyong Park <jiyong@google.com>
Date:   Fri Feb 22 22:15:25 2019 +0900

    Activate system APEXes early
    
    Summary: Boot sequence around apexd is changed to make it possible for
    pre-apexd processes to use libraries from APEXes. They no longer need to
    wait for the apexd to finish activating APEXes, which again can be
    done only after /data/ is mounted. This improves overall boot
    performance.
    
    Detail: This change fixes the problem that processes that are started
    before apexd (so called pre-apexd processes) can't access libraries
    that are provided only by the APEXes but are not found in the system
    partition (e.g. libdexfile_external.so, etc.). Main idea is to activate
    system APEXes (/system/apex/*.apex) before /data is mounted and then
    activate the updated APEXes (/data/apex/*.apex) after the /data mount.
    
    Detailed boot sequence is as follows.
    
    1) init prepares the bootstrap and default mount namespaces. A tmpfs is
    mounted on /apex and the propagation type of the mountpoint is set to
    private.
    
    2) before any other process is started, apexd is started in bootstrap
    mode. When executed in the mode, apexd only activates APEXes under
    /system/apex. Note that APEXes activated in this phase are mounted in
    the bootstrap mount namespace only.
    
    3) other pre-apexd processes are started. They are in the bootstrap
    mount namespace and thus are provided with the libraries from the system
    APEXes.
    
    4) /data is mounted. init switches into the default mount namespace and
    starts apexd as a daemon as usual.
    
    5) apexd scans both /data/apex and /system/apex, and activate latest
    APEXes from the directories. Note that APEXes activated in this phase
    are mounted in the default namespaces only and thus are not visible to
    the pre-apexd processes.
    
    Bug: 125549215
    Test: m; device boots
    Change-Id: I21c60d0ebe188fa4f24d6e6861f85ca204843069

commit 4ba548d845c0306a46d7cc8cf483caac5756159c
Author: Jiyong Park <jiyong@google.com>
Date:   Fri Feb 22 16:04:35 2019 +0900

    mount /apex during first_stage init
    
    /apex is not mounted via init.rc but directly by the first_stage init
    before the mount namespaces are configured.
    
    This allows us to change the propagation type for /apex mount point to
    private to isolate APEX activatesions across post- and pre-apexd
    processes.
    
    Bug: 125549215
    Test: m; device boots to the UI
    
    Change-Id: I10e056cd30d64cb702b6c237acd8dab326162884

commit 39e881576f64a0d4a22dc73c84077529a3e832ae
Merge: 22cabc9b5 85c9d7758
Author: Rick Yiu <rickyiu@google.com>
Date:   Wed Feb 27 05:24:34 2019 -0800

    Merge "Add blkio cgroup to libprocessgroup" am: d5345f58fd am: b6d02ff175
    am: 85c9d7758d
    
    Change-Id: I91308d425bdf1945822c82d9e692627b2fdb67ab

commit 2b3bf84373665e10d96c6b1680e5e53039505325
Author: Rick Yiu <rickyiu@google.com>
Date:   Thu Feb 21 14:37:36 2019 +0800

    Add blkio cgroup to libprocessgroup
    
    To differentiate IO priority for different groups.
    
    Bug: 111422845
    Bug: 117857342
    Test: tasks are assigned to the group as expected
    Change-Id: Ibb108d1b8e0f720f7ac4cab248b3c33d35e5483d

commit f54ccb8dd11b16a5a004f80408763eb6c73ae8fe
Merge: 59b44c16c 6916a8fc0
Author: Neil Fuller <nfuller@google.com>
Date:   Mon Feb 25 23:13:00 2019 -0800

    Merge "Move tzdatacheck execution after apex is mounted" am: 61b2016881 am: 3305192d3a
    am: 6916a8fc05
    
    Change-Id: Ibe63dfc1aa23b6626e98688d5d1d334d79bb85c8

commit 61b20168818891f8e6529f2786a0da0e697f1754
Merge: ef3429dae ada7e4928
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Mon Feb 25 13:30:36 2019 +0000

    Merge "Move tzdatacheck execution after apex is mounted"

commit ada7e4928a2a68993f6849a62467cb4684825adb
Author: Neil Fuller <nfuller@google.com>
Date:   Fri Feb 22 14:05:40 2019 +0000

    Move tzdatacheck execution after apex is mounted
    
    tzdatacheck references files in the runtime apex so should
    not be executed before the apex mounts are ready.
    
    Test: Manual tests (see b/123270813); observed tzdatacheck running after
          apex files are mounted
    Bug: 123270813
    Bug: 116191025
    Bug: 119293618
    Bug: 113373927
    Change-Id: I249d127c1d568bc5025d81b0bb4187c81363d897

commit 124a4bc791ace2c9d4c7ce6225f7ebace758dd71
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Fri Feb 15 15:38:46 2019 +0000

    Rename data/staging to data/pkg_staging.
    
    Test: Build and flash, atest apex_e2e_tests
    Fixes: 122999313
    Change-Id: I878ee41f804956ee7533d64e844ce98e5a8afacc
    Merged-In: I878ee41f804956ee7533d64e844ce98e5a8afacc

commit ac1eeb7f78f4a86f5e639d4b44adc6ac758adaf0
Author: Gavin Corkery <gavincorkery@google.com>
Date:   Fri Feb 15 15:38:46 2019 +0000

    Rename data/staging to data/pkg_staging.
    
    Test: Build and flash, atest apex_e2e_tests
    Fixes: 122999313
    Change-Id: I878ee41f804956ee7533d64e844ce98e5a8afacc

commit 9d851839caf162345837801187b91e5a3e61851f
Merge: cc1554019 e5633c18a
Author: Jiyong Park <jiyong@google.com>
Date:   Mon Feb 11 19:53:43 2019 -0800

    Merge "apexd is started much earlier to create loopback devices" am: 34f3660e2c am: bc08d9d207
    am: e5633c18a4
    
    Change-Id: I97743dea1fa022844b7dcf5f33a42bc240e81708

commit 407b000fe420294718dfce3f7d08dcd14516f01a
Author: Jiyong Park <jiyong@google.com>
Date:   Sat Feb 2 19:45:23 2019 +0900

    apexd is started much earlier to create loopback devices
    
    This change fixes the problem that apexd is delaying the entire boot
    sequence while waiting for the loopback devices to be created. The delay
    was as big as 50 ms per a loopback device.
    
    With this change, apexd is started much earlier: from "on post-fs-data"
    to "on init". When it is first started, it scans /system/apex to
    determine the number of APEXes and creates that number of loopback
    devices priori. Since then it enters into the binder loop.
    
    When the data partition is mounted, init lets apexd to initiate the
    apexd boot sequence where APEXes in /data is scanned, verified, and
    activated. Since the creation of the loopback devices were requested far
    before, it is very likely that dev nodes for the devices are ready at
    this moment (even if not, this isn't a lose).
    
    Bug: 123404717
    Bug: 123772265
    Test: compare boot times.
    init_zygote_START_TIME_avg is improved from 2831ms to 2622ms on blueline
    Change-Id: I12450cee44aa4d17a11def62261c2f82d3f2c718

commit 915a112b9540707547a7bb2697a1d05ad473fc38
Merge: f167ac133 e3b45e5c3
Author: Joel Fernandes <joelaf@google.com>
Date:   Thu Feb 7 06:31:53 2019 -0800

    Merge changes from topic "memfd-support" am: 3133b695e0 am: b03663ebdf
    am: e3b45e5c31
    
    Change-Id: Id23b2e9a60e290c6401c9dc69a718e908fc19557

commit ae7f052328d6c2c06f6e9335a6cd4bb7efdced2b
Author: Joel Fernandes <joelaf@google.com>
Date:   Thu Jan 31 19:27:23 2019 -0500

    init: set the sys.use_memfd property to false
    
    The sys.use_memfd property is set by default to false in Android
    to temporarily disable memfd, till vendor and apps are ready for it.
    The main issue: either apps or vendor processes can directly make ashmem
    IOCTLs on FDs they receive by assuming they are ashmem, without going
    through libcutils. Such fds could have very well be originally created with
    libcutils hence they could be memfd. Thus the IOCTLs will break.
    
    Set default value of sys.use_memfd property to true once the issue is
    resolved, so that the code can then self-detect if kernel support is present
    on the device. The property can also set to true from adb shell, for
    debugging.
    
    Bug: 113362644
    
    Change-Id: I0f572ef36cac2a58fe308ddb90bbeffbecdaed3b
    Signed-off-by: Joel Fernandes <joelaf@google.com>

commit 575be95c44eca5f8d6c435ddca55fba1e9eaff4c
Merge: f21242a4e d52ed3f08
Author: Nikita Ioffe <ioffe@google.com>
Date:   Wed Feb 6 09:24:40 2019 -0800

    Merge "apexd: Create top-level /data/apex folders at boot" am: 4fdc2ce2bb am: 2d3aeba767
    am: d52ed3f08f
    
    Change-Id: Iacd68739f2868b9f0cb77bfae6e7a12b6a9ef3bd

commit 4fdc2ce2bbca18b5e534500fd79a50cf6cbc8557
Merge: 54801442b bc744dc98
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Feb 6 16:58:23 2019 +0000

    Merge "apexd: Create top-level /data/apex folders at boot"

commit bc744dc98fcdde75a211f634562ca3b5357bf7f0
Author: Nikita Ioffe <ioffe@google.com>
Date:   Wed Feb 6 11:32:06 2019 +0000

    apexd: Create top-level /data/apex folders at boot
    
    - package manager needs to read from /data/apex/active, hence 0750
    - both /data/apex/backups and /data/apex/sessions are internal to apexd,
      hence 0700
    
    Bug: 123927167
    Fixes: 123927167
    Test: apex_e2e_tests, flashall -w & checked folders were created
    Change-Id: I06c28328afe4945d082acd890401651bd37fcb20

commit 82b72a566761b8379fd2964ed801696803867510
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Fri Dec 21 11:41:50 2018 -0800

    libprocessgroup: Add support for task profiles
    
    Abstract usage of cgroups into task profiles that allows for changes
    in cgroup hierarchy and version without affecting framework codebase.
    Rework current processgroup and sched_policy API function implementations
    to use task profiles instead of hardcoded paths and attributes.
    Mount cgroups using information from cgroups.json rather than from init.rc
    
    Exempt-From-Owner-Approval: already approved in internal master
    
    Bug: 111307099
    Test: builds, boots
    
    Change-Id: If5532d6dc570add825cebd5b5148e00c7d688e32
    Merged-In: If5532d6dc570add825cebd5b5148e00c7d688e32
    Signed-off-by: Suren Baghdasaryan <surenb@google.com>

commit 192aee782d96b5776e76b9c6d8a329d47f7a4789
Author: Suren Baghdasaryan <surenb@google.com>
Date:   Fri Dec 21 11:41:50 2018 -0800

    libprocessgroup: Add support for task profiles
    
    Abstract usage of cgroups into task profiles that allows for changes
    in cgroup hierarchy and version without affecting framework codebase.
    Rework current processgroup and sched_policy API function implementations
    to use task profiles instead of hardcoded paths and attributes.
    Mount cgroups using information from cgroups.json rather than from init.rc
    
    Bug: 111307099
    Test: builds, boots
    
    Change-Id: If5532d6dc570add825cebd5b5148e00c7d688e32
    Signed-off-by: Suren Baghdasaryan <surenb@google.com>

commit 4edb10b6b08bb9b39dc5d608c65f9364899baeba
Merge: 5a470dbbf 0b764ce56
Author: Xiaoyong Zhou <xzhou@google.com>
Date:   Fri Feb 1 03:15:50 2019 -0800

    Merge "Loads fsverity keys" am: 59a0149939 am: 818546b32c
    am: 0b764ce566
    
    Change-Id: I2981a6a8162cbd79e161f1c3d02f6aa10aff7ede

commit 66e2127c47d8863cea5b9d9899dd549d09bd1542
Author: Xiaoyong Zhou <xzhou@google.com>
Date:   Tue Jan 29 16:01:38 2019 -0800

    Loads fsverity keys
    
    This CL calls mini-keyctl to load fsverity keys.
    
    Bug: 112038861
    Test: cat /proc/keys
    Change-Id: I3b7cf85c2f64116a56349c54ed5fa4e8cf14a730

commit 06a982691c5d60d341ec40ff10bc8db78287c997
Merge: c4bb4518e 9829a8c5a
Author: Jiyong Park <jiyong@google.com>
Date:   Wed Jan 30 21:29:34 2019 -0800

    Proper mount namespace configuration for bionic am: 6866041ff0 am: 43505e3f22
    am: 9829a8c5aa
    
    Change-Id: I624273bf06ad96dfee5def80dc16050c52a7a640

commit 6866041ff03e6ddd07145be37f6806c51fc18173
Author: Jiyong Park <jiyong@google.com>
Date:   Wed Jan 16 23:00:59 2019 +0900

    Proper mount namespace configuration for bionic
    
    This CL fixes the design problem of the previous mechanism for providing
    the bootstrap bionic and the runtime bionic to the same path.
    
    Previously, bootstrap bionic was self-bind-mounted; i.e.
    /system/bin/libc.so is bind-mounted to itself. And the runtime bionic
    was bind-mounted on top of the bootstrap bionic. This has not only caused
    problems like `adb sync` not working(b/122737045), but also is quite
    difficult to understand due to the double-and-self mounting.
    
    This is the new design:
    
    Most importantly, these four are all distinct:
    1) bootstrap bionic (/system/lib/bootstrap/libc.so)
    2) runtime bionic (/apex/com.android.runtime/lib/bionic/libc.so)
    3) mount point for 1) and 2) (/bionic/lib/libc.so)
    4) symlink for 3) (/system/lib/libc.so -> /bionic/lib/libc.so)
    
    Inside the mount namespace of the pre-apexd processes, 1) is
    bind-mounted to 3). Likewise, inside the mount namespace of the
    post-apexd processes, 2) is bind-mounted to 3). In other words, there is
    no self-mount, and no double-mount.
    
    Another change is that mount points are under /bionic and the legacy
    paths become symlinks to the mount points. This is to make sure that
    there is no bind mounts under /system, which is breaking some apps.
    
    Finally, code for creating mount namespaces, mounting bionic, etc are
    refactored to mount_namespace.cpp
    
    Bug: 120266448
    Bug: 123275379
    Test: m, device boots, adb sync/push/pull works,
    especially with following paths:
    /bionic/lib64/libc.so
    /bionic/bin/linker64
    /system/lib64/bootstrap/libc.so
    /system/bin/bootstrap/linker64
    Change-Id: Icdfbdcc1efca540ac854d4df79e07ee61fca559f

commit 6379e920bec4e3f8b7bfa936f4f31be8d6f19778
Merge: b2ea2f23f e1c2e0d28
Author: Wei Wang <wvw@google.com>
Date:   Fri Jan 25 20:45:21 2019 -0800

    Merge "Fix path for default prop" am: 3c2c9d8d43 am: 9155524429
    am: e1c2e0d283
    
    Change-Id: I467ca7aa10a9546d759f4232b56ef7eae1228f6f

commit 0d78bfbc09a0e74c8b03bc989a142a7bf8b2d729
Author: Wei Wang <wvw@google.com>
Date:   Fri Jan 25 09:31:28 2019 -0800

    Fix path for default prop
    
    Bug: 123407630
    Test: boot
    Change-Id: Ia10ac6ad141e980abb07d7b37487f9de9ef64796

commit b8b6df2ae9a5e9a821f63030dfa4e74174782127
Merge: cdec0c130 ec21712d1
Author: Sudheer Shanka <sudheersai@google.com>
Date:   Fri Jan 18 17:46:58 2019 -0800

    Merge "Reland "Create new mount directory /mnt/runtime/full."" am: c39ed35d82 am: 5e4c507abd
    am: ec21712d16
    
    Change-Id: I59446c2d66b016119579b4c2b17e65997d4a3f10

commit c39ed35d82ae84360f473ed2a96e98ab854b7ca1
Merge: d7a501d18 81c687dff
Author: Sudheer Shanka <sudheersai@google.com>
Date:   Sat Jan 19 00:24:23 2019 +0000

    Merge "Reland "Create new mount directory /mnt/runtime/full.""

commit 81c687dff8bf737999d01b43b740e93bf274f192
Author: Sudheer Shanka <sudheersai@google.com>
Date:   Wed Jan 16 23:25:28 2019 -0800

    Reland "Create new mount directory /mnt/runtime/full."
    
    This will be used for system internals to access
    secondary volumes without having to bypass sdcardfs.
    
    This reverts commit 54b8844b1307ce64069861f8213c8bfed34b69d7
    
    Bug: 121277410
    Test: manual
    Change-Id: Id5b995dc5899b5999f1dea662ba1c3ee475a0e46

commit 6fabbecd97731610b2142389ec00c27efcdacf53
Merge: e8b561d83 3a63283af
Author: Srinivas Paladugu <srnvs@google.com>
Date:   Fri Jan 18 23:00:32 2019 +0000

    Merge "Allow write access to system_server on zram sysfs"

commit 8b73dfc0a44e069e57592a50800b7ea10270ce83
Author: Jiyong Park <jiyong@google.com>
Date:   Fri Jan 18 12:29:12 2019 +0900

    Revert "Bionic libs and the dynamic linker are bind mounted"
    
    This reverts commit 2599088ff67c10c66a70d3741c41529d3e11c7f5.
    Reason: Breaks some 3p apps.
    
    Bug: 122920047
    Test: run the app, login.
    Change-Id: Idea332b1f91e9d2ac6ebd3879da7820c8ba2284f

commit 3a63283affdb32674c06e81da584682da36ba88b
Author: Srinivas Paladugu <srnvs@google.com>
Date:   Wed Jan 9 11:28:59 2019 -0800

    Allow write access to system_server on zram sysfs
    
    System server needs to be able to write to idle and
    writeback nodes in the zram sysfs directory.
    
    Bug: 117682284
    Bug: 122674343
    Test: Test writeback on go ref device
    Change-Id: I1cd663b73a7ebb255fe7e459601e720961bbd69e

commit 3daecf597755200ff458039c719689323c2f9a67
Merge: 3ec408184 54b8844b1
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Jan 17 01:04:50 2019 +0000

    Merge "Revert "Create new mount directory /mnt/runtime/full.""

commit 54b8844b1307ce64069861f8213c8bfed34b69d7
Author: Sudheer Shanka <sudheersai@google.com>
Date:   Wed Jan 16 19:52:29 2019 +0000

    Revert "Create new mount directory /mnt/runtime/full."
    
    This reverts commit 987e732fe85226251e9a8ad6c6a0d5b0877446bf.
    
    Reason for revert: 122957837
    
    Change-Id: Ib1451d46a05f34eb52fdc13143529913df5ec001

commit 598a4bcb130fd209d6101ee36ef978e9031b38d5
Merge: 61f4ceb55 987e732fe
Author: Sudheer Shanka <sudheersai@google.com>
Date:   Wed Jan 16 16:34:21 2019 +0000

    Merge "Create new mount directory /mnt/runtime/full."

commit 3b316ee20119ad7bf4c56a5abc9fa17ab7e7a4e3
Author: Jiyong Park <jiyong@google.com>
Date:   Sun Jan 13 02:42:31 2019 +0900

    Load build sysprops early
    
    */build.prop files are now loaded much earlier than before; from 'on
    post-fs' to the time when the property service is started which is
    before init starts the action loop.
    
    This ensures that all processes that are launched by init have a
    consistent view of system properties. Previously, the processes that
    started before 'on post-fs' were initially with the small number of
    sysprops loaded from */default.prop and then suddenly get additional
    sysprops from */build.prop while they are executing.
    
    Bug: 122714998
    Test: device boots
    
    Change-Id: Ic07528421dfbe8d4f43673cea41175d33cfbf298

commit 987e732fe85226251e9a8ad6c6a0d5b0877446bf
Author: Sudheer Shanka <sudheersai@google.com>
Date:   Fri Jan 11 11:32:34 2019 -0800

    Create new mount directory /mnt/runtime/full.
    
    This will be used for system internals to access
    secondary volumes without having to bypass sdcardfs.
    
    Bug: 121277410
    Test: manual
    Change-Id: I6546fa8df419157b3c2adcf5ff3faa4db4458cff

commit 2599088ff67c10c66a70d3741c41529d3e11c7f5
Author: Jiyong Park <jiyong@google.com>
Date:   Wed Jan 2 23:37:15 2019 +0900

    Bionic libs and the dynamic linker are bind mounted
    
    This change makes the bionic libs and the dynamic linker from the
    runtime APEX (com.android.runtime) available to all processes started
    after apexd finishes activating APEXes.
    
    Specifically, the device has two sets of bionic libs and the dynamic
    linker: one in the system partition for pre-apexd processes and another
    in the runtime APEX for post-apexd processes. The former is referred as
    the 'bootstrap' bionic and are located at
    /system/lib/{libc|libdl|libm}.so and /system/bin/linker. The latter is
    referred as the 'runtime' bionic and are located at
    /apex/com.android.runtime/lib/bionic/{libc|libdl|libm}.so and
    /apex/com.android.runtime/bin/linker.
    
    Although the two sets are located in different directories, at runtime,
    they are accessed via the same path: /system/lib/* and
    /system/bin/linker ... for both pre/post-apexd processes. This is done
    by bind-mounting the bootstrap or the runtime bionic to the same path.
    Keeping the same path is necessary because there are many modules and
    apps that explicitly or implicitly depend on the fact that bionic libs
    are located in /system/lib and are loaded into the default linker
    namespace (which has /system/lib in its search paths).
    
    Before the apexd is started, init executes a built-in action
    'prepare_bootstrap_bionic' that bind-mounts the bootstrap bionic to the
    mount points. Processes started during this time are provided with the
    bootstrap bionic. Then after the apexd is finished, init executes
    another built-in action 'setup_runtime_bionic' which again mounts the
    runtime bionic to the same mount points, thus hiding the previous mounts
    that target the bootstrap bionic. The mounting of the runtime bionic
    (which is only for post-apexd processes) is hidden from pre-apexd
    processes by changing propagation type of the mount points to 'private'
    and execute the pre-apexd processes with a new mount namespace using
    unshare(2). If a pre-apexd process crashes and re-launched after the
    apexd is on, the process still gets the bootstrap bionic by unmounting
    the runtime bionic which effectively un-hides the previous bind-mounts
    targeting the bootstrap bionic.
    
    Bug: 120266448
    Test: device boots
    Test: cat /proc/`pidof zygote`/mountinfo shows that
    /system/lib/{libc|libdl|libm}.so and /system/bin/linker are from the
    runtime APEX
    Test: cat /proc/'pidof vold`/mountinfo shows that the same mount points
    are from system partition.
    
    Change-Id: I7ca67755dc0656c0f0c834ba94bf23ba9b1aca68

commit 8464d79877ffef391253e46ece90f54c95a7a3d9
Author: Narayan Kamath <narayan@google.com>
Date:   Fri Jan 4 16:40:56 2019 +0000

    Allow the system user to read apex_data_file.
    
    For consistency with APKs, signature verification is performed
    in the system_server. This includes checking that the signature of
    an updated install matches the signature of the active package that
    it updates. For this, it requires search access to /data/apex and
    read access to the files under that directory.
    
    Test: m
    Change-Id: I8795b26b9a40ba7126c2a548fbec82ff322a1453

commit 22cdf96697f1cb1efceb67b4facb65e5b17fbee4
Author: Dario Freni <dariofreni@google.com>
Date:   Thu Dec 20 14:31:32 2018 +0000

    Create staging directory for Staging Manager.
    
    Staging Manager is a high-level service (yet to be committed) that
    manages multi-package sessions requiring a reboot to be applied, for
    example if one of the packages is an APEX file. This directory will
    contain the session data and the temporary copies of the packages.
    
    Bug: 118865310
    Test: N/A
    Change-Id: I8aceefab849cf5af17086cb6868b801d1c2615e9

commit c71a48ba555646672dbf19abf4e6db6b38b3cd42
Author: Neil Fuller <nfuller@google.com>
Date:   Sun Dec 9 14:44:53 2018 +0000

    Track movement of tz files into the runtime module
    
    The main "base" copy of time zone data is now found in
    the runtime module. The system files will likely be deleted.
    
    Test: CTS: run cts -m CtsHostTzDataTests
    Test: PTS (cp'd to internal master): run pts -m PtsTimeZoneTestCases
    Bug: 116191025
    Bug: 119293618
    Bug: 113373927
    Test: build / boot with logcat inspection
    Change-Id: I8dc8ff0d17aac124262d9c7c54abce61d97397e5

commit d60a19b184e7f337d8a695c9c915afff935c04ba
Author: Haibo Huang <hhb@google.com>
Date:   Sun Nov 4 09:50:05 2018 -0800

    Writes cpu variant information to dev/
    
    This change adds a command to init.rc to write cpu variant information to a file under dev/
    
    Test: sync to device and make sure corresponding files are created.
    Change-Id: Ibf90967f13f72af925c82ff79bd973ef4cdc4068

commit c240440eece9a8d5df5b82a8d6fcb42208d865ee
Author: Jiyong Park <jiyong@google.com>
Date:   Thu Nov 8 17:14:35 2018 +0900

    init parses *.rc files from APEXes
    
    Init now parses *.rc files from the APEXs when the apexd notifies the
    mount event via apexd.status sysprop.
    
    Bug: 117403679
    Test: m apex.test; adb root; adb push <builtfile> /data/apex; adb reboot
    adb root; adb shell setprop ctl.start apex.test; dmesg shows that init
    tries to start the service which doesn't exist.
    
    [   47.979657] init: Could not ctl.start for 'apex.test': Cannot find '/apex/com.android.example.apex/bin/test': No such file or directory
    
    Change-Id: I3f12355346eeb212eca4de85b6b73257283fa054

commit c38a63646b28412a0db4c8c6a245d77d2ea40915
Author: Anton Hansson <hansson@google.com>
Date:   Wed Oct 24 15:29:16 2018 +0100

    Create /data/preloads on post-fs-data
    
    This directory is used for preloads that are typically placed in
    the system_other image and copied to /data on first boot if the
    cppreopts script is installed.
    
    Bug: 80508492
    Test: make
    Change-Id: I4121b07ee2fc96d533075d1907557de7e4be4ee0

commit f18b748b9145bc971fd4138de43f78593bf4309d
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Oct 17 13:14:55 2018 -0700

    Start logd and service managers during the 'init' trigger
    
    Now that we mount partitions early, services can be started before the
    'fs' trigger.  We therefore start the service managers as early as
    possible to ensure their transports are online, without device
    specific rc files needing to handle that.  We also start logd even
    one step earlier to ensure that we capture all possible logd.
    
    Bug: 89689596
    Test: logging works for early services, include the servicemanagers
    Change-Id: I75dbfcd26eb6fa77f002de10afd00f085c93aa07

commit 6156b9b8baa4fafa50d40a3cb213ee0799c8237c
Author: Daniel Rosenberg <drosen@google.com>
Date:   Thu Oct 11 15:35:07 2018 -0700

    Call markBootAttempt when serice manager available
    
    This causes adds a call the fucntion to decrement the
    checkpoint's retry count as soon as service manager is
    available.
    
    Test: vdc setCheckpoint 2 then reboot 3 times checking state
    Bug: 112901762
    Change-Id: Ie0a78b1eb05b340718e76175509d1ebefae68017

commit b920cb44aa5d9defad9479fa460714359095a8d0
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Oct 4 08:37:17 2018 -0700

    Handle retry count correctly
    
    Test: vdc startCheckpoint 2 then reboot 3 times checking state
    
    Change-Id: I4eeda7f73d82a7c8b2469571fa558df2fac47354

commit c3b40a57939fe44ac377d71618aac2812552144c
Merge: 29e9833e3 344a91a5f
Author: Martijn Coenen <maco@google.com>
Date:   Thu Oct 4 07:08:54 2018 +0000

    Merge "Add /apex tmpfs mount and mount it."

commit 344a91a5f11cd904579c0ab5b179d832417ee926
Author: Martijn Coenen <maco@google.com>
Date:   Tue Oct 2 16:43:16 2018 +0200

    Add /apex tmpfs mount and mount it.
    
    APEX filesystem images will now be mounted in /apex.
    
    Also, make sure /data/apex is created with the right ACL.
    
    Bug: 112455435
    Test: flash and wipe, /apex is mounted as tmpfs, /data/apex is created
    Change-Id: Ie27775e9f40a27b510272f212762624a04e94f1d

commit 786d0b27a2ed38682a58445505a4b34dc8a4ebdb
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri Sep 21 10:49:38 2018 -0700

    make checkpointing work on ext4
    
    Test: Test script passes
    
    Change-Id: Iafa337947f2fd456aa692ecb112ccc56638f7947

commit 1e3764575e7f578ac771ff26af1bcb566d0c06d5
Merge: 5952034c2 3848e1ba1
Author: Martijn Coenen <maco@google.com>
Date:   Wed Sep 26 06:56:26 2018 +0000

    Merge "init: start apexd as early as we can."

commit fa14d21ca44377f2c70769b6ebb2cc28a65d53d7
Author: Wei Wang <wvw@google.com>
Date:   Wed Sep 5 10:12:40 2018 -0700

    Move zygote start after loading persist properties
    
    Currently zygote is started before loading persistent properties which
    stops ART honor experiment flags planned landed as persistent
    properties.
    
    The original motivation is we would like zygote be started as early as
    possible and loading persistent properties taking time, but after fix of
    b/64392887 loading persist properties is now only taking 3ms on P18, 6ms
    on P16 respectively.
    
    Bug: 114044733
    Test: Boot
    Change-Id: Ibc118966e975c741ee8ea47091b14d691692bf2c

commit f32c20174349c058b20d3819802ed8aa8277c72d
Author: Isaac Lee <isaac.lee@mediatek.com>
Date:   Thu Jul 26 17:07:25 2018 +0800

    Show bootanimation after decrypt
    
    Because the original modification (restart SF which is added
    for display bootanimation) from O to P causes bootanimation NPE,
     we remove the part of restart SF and add other flow to show
     bootanimation.
    
    Test: manual, ran the test 10 times and it cause no NPE and
          display BootAnimation after decrypt
    Test: boot aosp_sailfish
    
    Bug: 79547653
    Change-Id: I355ccdbb2e2f27d897e2e0ee00f9300ef38ede03

commit 5a0a51b81ffb380e765da9de90d2a82e3b41529c
Author: Elliott Hughes <enh@google.com>
Date:   Wed Aug 22 13:21:21 2018 -0700

    Add /dev/stdin, /dev/stdout, and /dev/stderr.
    
    Bug: http://b/31824379
    Test: `adb shell ls -l /dev/std*`
    Change-Id: I6af7ff205e12c10e958be263c3f1c429d48c0bbc

commit 3848e1ba12cc813b7b58a4c8f2e7f0614966b504
Author: Martijn Coenen <maco@google.com>
Date:   Fri Aug 17 13:52:25 2018 +0200

    init: start apexd as early as we can.
    
    apexd needs to run right after mounting /data.
    
    Bug: 112455435
    Test: apexd is running
    Change-Id: I71c834bcaf26a3133aef57bb1d1953010a6d137c

commit 5d707816ace0f2173310645363533fed2188acfd
Merge: 574533a65 fb973d34a
Author: Xin Li <delphij@google.com>
Date:   Tue Aug 7 16:51:24 2018 +0000

    Merge "Merge Android Pie into master"

commit 31438489c0e263ca39f7ba77fe4e50334f2efab7
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Jul 20 14:57:00 2018 -0700

    split first stage init into a separate executable
    
    In the future, systems with dm-linear will require a ramdisk to set up
    the mount for system.  In this world, first stage init will be a part
    of this ramdisk and handle setting up dm-linear, mounting the
    necessary partitions, then pivoting to the system image, which will
    become the root partition.
    
    This also enables previous devices without system-as-root, to be
    unified with system-as-root devices for all aspects of boot after the
    pivot_root.
    
    Bug: 79758715
    Test: boot hikey
    Test: boot sailfish, boot sailfish into recovery
    Change-Id: Iefa88a3ec5994e7989aa9f26f2de0351ffa5468b

commit c4a8b5a595a6e89da24e787a9c0f0278a672e3b4
Merge: d6b7711e3 f2878cf15
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Mon Jul 30 16:49:55 2018 -0700

    Merge "Make /acct have 0555 permissions after mounting"
    am: f2878cf15b
    
    Change-Id: I961153c5af23a7f094aea16c8958b0d2bb36391b

commit 0451fd65841f627e0173e5c64a9319d10d0918ac
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Mon Jul 30 13:06:46 2018 -0700

    Make /acct have 0555 permissions after mounting
    
    This change adds a `chmod 0555 /acct` just after mounting the cgroup fs
    on it. This makes it such that even on systems where the rootdir+system
    partitions are shared, the permissions allow for the system user to open
    files within /acct, which in turn makes libprocessgroup not complain
    that it can never do anything with those files.
    
    Bug: 111996377
    Test: adb shell 'ls -ldZ /acct'  # Before and after, on an aosp_sailfish
          dr-xr-xr-x 48 root root u:object_r:cgroup:s0 0 1971-12-29 17:41 /acct
    
    Change-Id: Iee6531126c6e81aa7794e44500555bd3c1cdf7b8

commit 81c97bc46fa226ee27a6b545f954c1cf1386cd0b
Merge: 6065c03a5 19ef02ef4
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Wed Jul 11 10:49:41 2018 -0700

    Merge "init.rc: Remount / with MS_REMOUNT|MS_BIND|MS_NODEV"
    am: 19ef02ef42
    
    Change-Id: I94c5641308b7b2760bdc4734158011d9cb7146aa

commit d07d0942c60b7145f11254899b9509d9b327c7ab
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Wed Jul 11 08:13:34 2018 -0700

    init.rc: Remount / with MS_REMOUNT|MS_BIND|MS_NODEV
    
    / should not have any character/block devices, so might as well pass in
    the nodev flag.
    
    Bug: 73255020
    Test: aosp_sailfish still boots
    Test: sailfish:/ # find / -xdev -a \( -type b -o -type c -o -type p -o -type s \)
          sailfish:/ #
    Test: rootfs on / type rootfs (rw,seclabel)
          /dev/root on / type ext4 (ro,seclabel,nodevrelatime)
    
    Change-Id: Ia73e04b53a47506892d9d3cb61b471b81bb72dc3

commit 329e12fb57c0e40f82c5f33bb5f0f7da8d1414e5
Merge: a1e2f225b 1db378925
Author: Yabin Cui <yabinc@google.com>
Date:   Tue Jul 10 11:11:09 2018 -0700

    Merge "Add debug system properties to control profiling limits."
    am: 1db3789252
    
    Change-Id: I32d3d93bc97aab5a9c21be0f0af5191b581aa32a

commit 4f0da7cb8256bd7038e16e573e1a6c259e04b0a3
Author: Yabin Cui <yabinc@google.com>
Date:   Fri Jun 29 14:52:47 2018 -0700

    Add debug system properties to control profiling limits.
    
    When security.perf_harden is disabled through adb, use some debug
    system properties to set profiling limits in the kernel, including
    cpu percentage, memory, and max sample rate.
    
    Bug: 110706031
    Test: boot hikey960 and manually set system properties to make
    Test: sure it works.
    
    Change-Id: I44c0adf3a000bb393905233f2a097c97b5fe91ec

commit fbe32e723b2c7b863d1ce33c002da02502db1e30
Merge: 814299c5a 8b8096041
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Jun 29 15:20:57 2018 -0700

    Merge "rootdir: access to pstore denied to bootstat"
    am: 8b80960417
    
    Change-Id: I02884961f2b782e57a9dcac028c2bd6ae7b33f48

commit 7ab805ea1d78c0190c42b4aea553f77cf965f88f
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Jun 29 10:32:11 2018 -0700

    rootdir: access to pstore denied to bootstat
    
    Test: boot_reason_test.sh
    Bug: 110925971
    Change-Id: Iba7b7325fe8c9ad18a7f8dbda550d6008400693e

commit 428a6ffaf8fb3b9420180a6f54ad4e0f229c96d7
Merge: 8b491495a f0a5bbda8
Author: Jordan Liu <jminjie@google.com>
Date:   Tue May 22 21:12:31 2018 +0000

    Merge "Add a new directory to store downloaded apns" into pi-dev

commit 2f51c3ec2557b290b44663b2306c15a25c7ae66b
Merge: 36bd69f82 c25eeeca5
Author: Jordan Liu <jminjie@google.com>
Date:   Mon May 21 14:49:10 2018 -0700

    Merge "Add a new directory to store downloaded apns" am: e0a52774b4
    am: c25eeeca52
    
    Change-Id: I0e4fc27f07aea7a050ed06d7206256319d4204bc

commit f0a5bbda88762e5680e1fa3921fd0831e55ca496
Author: Niklas Lindgren <niklas.lindgren@sony.com>
Date:   Mon May 21 16:53:00 2018 +0200

    Add a new directory to store downloaded apns
    
    downloaded apns-conf.xml will be stored in the folder
    /data/misc/apns/ to make sure TelephonyProvider gets
    access.
    
    Bug: 79948106
    Test: Manual
    Change-Id: I4ba0596fa6523c0eb96328dbe46ead02587bd9b8
    Merged-In: I4ba0596fa6523c0eb96328dbe46ead02587bd9b8

commit 36bd69f82683f718e843a861e83996ab3fdd0541
Merge: dfb5b4b1a fe305ab28
Author: Paul Crowley <paulcrowley@google.com>
Date:   Mon May 21 10:46:33 2018 -0700

    Add option to create metadata mount point
    am: fe305ab286
    
    Change-Id: If035ab553e75afd4ac6e07ee1c97d6218c3ce397

commit fd66538ef3bdd4c1ad1ccdec04038bdbcedaac9b
Author: Niklas Lindgren <niklas.lindgren@sony.com>
Date:   Mon May 21 16:53:00 2018 +0200

    Add a new directory to store downloaded apns
    
    downloaded apns-conf.xml will be stored in the folder
    /data/misc/apns/ to make sure TelephonyProvider gets
    access.
    
    Bug: 79948106
    Test: Manual
    Change-Id: I4ba0596fa6523c0eb96328dbe46ead02587bd9b8

commit fe305ab286cadea129f2b8af01c0132631efc109
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu May 17 10:12:34 2018 -0700

    Add option to create metadata mount point
    
    Test: booted metadata-encrypted device
    Bug: 79781913
    Change-Id: Ie922db20314c04409c98700bfb1aff3d111275f0

commit 3188458f36f69db630e9a7894c4bbd3393ac7c13
Merge: 6d36fdc4d 658ae90f6
Author: Tim Murray <timmurray@google.com>
Date:   Wed Apr 18 17:00:21 2018 -0700

    cutils: add restricted cpuset
    am: 658ae90f69
    
    Change-Id: I94d05991e95f79282b0ad980a97edb75d2e908f7

commit 658ae90f699bd21ec8d79b18a34765ed5993c828
Author: Tim Murray <timmurray@google.com>
Date:   Fri Apr 13 10:15:49 2018 -0700

    cutils: add restricted cpuset
    
    Bug 78197570
    Test: CTS
    Exempt-From-Owner-Approval: owner OOO, build cop says it's fine
    
    Change-Id: I6df972950b75a839caa463ae282ad000b959e8ae

commit 6d36fdc4da1b3411e8e823a70270b6de22e17293
Merge: e57b1dd18 b0918bfa4
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Wed Apr 18 15:05:27 2018 -0700

    Merge "init.rc: create /data/system/dropbox" am: c629131c26
    am: b0918bfa47
    
    Change-Id: Ibe80b9d6e4f3fe6b4555c919fccfc4b0d72aba63

commit c629131c2617d5cceaa67152b1b93c62af7e7f21
Merge: 4640149fd 148dea71a
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Apr 18 21:48:39 2018 +0000

    Merge "init.rc: create /data/system/dropbox"

commit 4640149fd566cc1f73fa4ac972220acdcbb05b81
Merge: b41879111 0b66969ba
Author: Tri Vo <trong@google.com>
Date:   Wed Apr 18 19:32:32 2018 +0000

    Merge "Add /mnt/vendor rw mount point for vendor partitions."

commit 148dea71a5d4e520575b6f19a0a63ea7000fe4eb
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Mon Apr 16 16:04:38 2018 -0700

    init.rc: create /data/system/dropbox
    
    Ensure dropbox has the new dropbox_data_file label.
    
    Bug: 31681871
    Test: ls -dZ /data/system/dropbox
        u:object_r:dropbox_data_file:s0 /data/system/dropbox
    
    Change-Id: Ia67646f4a789155e20650c33fe4412cae7f930d2

commit 7977e3d24d65d39fbaf62c2d1cb71519bfcbcefc
Merge: 9bb6564c9 c2d4d08be
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Apr 17 15:34:06 2018 -0700

    Merge "lmkd: limit capability set to minimum" am: 01ce44b734
    am: c2d4d08be2
    
    Change-Id: Ic97ab3c4312d260c2aa8c7a30e203564cd72f61a

commit b35c019d5c8a8dde9bc83f5edd8d579198263a35
Merge: b3b1a5eac b51147566
Author: TreeHugger Robot <treehugger-gerrit@google.com>
Date:   Tue Apr 17 19:16:55 2018 +0000

    Merge "Add /mnt/vendor rw mount point for vendor partitions." into pi-dev

commit 0b66969ba03464bea45a12c978f51b59c4c200a9
Author: Tri Vo <trong@google.com>
Date:   Tue Apr 10 20:20:13 2018 -0700

    Add /mnt/vendor rw mount point for vendor partitions.
    
    Changes to init's behavior during early mount:
    1. Mounting of tmpfs on /mnt is moved from init stage to early mount.
    2. init creates /mnt/vendor used to mount vendor partitions.
    3. If a device tree fstab entry for early mount specifies a mount point
    under /mnt/vendor e.g. /mnt/vendor/foo, init will create
    /mnt/vendor/foo mount point.
    
    Bug: 64905218
    Test: change dt fstab entry to mount persist to /mnt/vendor/persist;
    mount point is created correctly, and partition is mounted in early
    mount. See go/pag/1069774
    Test: device boots with /mnt/vendor and previous contents of /mnt present,
    and selinux label "mnt_vendor_file" is applied correctly.
    Test: cts-tradefed run commandAndExit cts --skip-all-system-status-check
    --primary-abi-only --skip-preconditions -m CtsAppSecurityHostTestCases
    -t android.appsecurity.cts.PermissionsHostTest
    Change-Id: I3739130739eadf508355c7f2531366fcaed74175
    Merged-In: I3739130739eadf508355c7f2531366fcaed74175
    (cherry picked from commit b51147566461d411ad452df81d54dc800c554e06)

commit b51147566461d411ad452df81d54dc800c554e06
Author: Tri Vo <trong@google.com>
Date:   Tue Apr 10 20:20:13 2018 -0700

    Add /mnt/vendor rw mount point for vendor partitions.
    
    Changes to init's behavior during early mount:
    1. Mounting of tmpfs on /mnt is moved from init stage to early mount.
    2. init creates /mnt/vendor used to mount vendor partitions.
    3. If a device tree fstab entry for early mount specifies a mount point
    under /mnt/vendor e.g. /mnt/vendor/foo, init will create
    /mnt/vendor/foo mount point.
    
    Bug: 64905218
    Test: change dt fstab entry to mount persist to /mnt/vendor/persist;
    mount point is created correctly, and partition is mounted in early
    mount. See go/pag/1069774
    Test: device boots with /mnt/vendor and previous contents of /mnt present,
    and selinux label "mnt_vendor_file" is applied correctly.
    Test: cts-tradefed run commandAndExit cts --skip-all-system-status-check
    --primary-abi-only --skip-preconditions -m CtsAppSecurityHostTestCases
    -t android.appsecurity.cts.PermissionsHostTest
    Change-Id: I3739130739eadf508355c7f2531366fcaed74175

commit 64d97d87611a39163aa121f17214f4a846954cee
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Apr 9 09:50:32 2018 -0700

    lmkd: limit capability set to minimum
    
    Set F() capability set and 'drop' lmkd from AID_ROOT to AID_LMKD uid
    and from AID_ROOT to AID_LMKD and AID_SYSTEM gid.
    
    /dev/memcg/memory.pressure defaults to root.root mode 0000, set it up
    as root.system mode 0040 to allow lmkd read access.
    
    Instrument failure to set SCHED_FIFO.
    
    Annotate access points that require elevated capabilities.
    
    Test: check /proc/`pidof lmkd`/status for capability set
    Test: lmkd_unit_test
    Bug: 77650566
    Change-Id: I986081a0434cf6e842b63a55726380205b30a3ea

commit 7fdcbdfc7bd2fc18e64824d1164ad0fc69f4c0e8
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri Apr 13 12:28:42 2018 -0700

    Fix FDE
    
    Need a larger tmpfs to stop crashes
    Need to run start-zygote after mounting the real data
    
    Test: Cherry-pick ag/3898232. System boots, can set pattern, system
          reboots. Wifi works at all points.
    Bug: 76452634
    
    Change-Id: Id24241db940d352fd3bcdef594b5358854c6f71d

commit fd1aa70a0f05578fb7ac1502255aa62178e7f0ce
Author: Yifan Hong <elsk@google.com>
Date:   Wed Apr 4 14:08:04 2018 -0700

    healthd: add healthd.rc
    
    Split healthd section from init.rc into its own. This allows
    healthd.rc to be excluded from the build when healthd is excluded.
    
    Test: builds
    Test: exclude healthd from build, healthd.rc is not installed
    Bug: 77541952
    Change-Id: I1c055f14c5862631f359fd0029289da8f43af063

commit 89c9c9b18bec440f1507e686f98af61e9b611cb7
Author: Benedict Wong <benedictwong@google.com>
Date:   Mon Mar 12 19:00:50 2018 -0700

    Set SPI Allocation Timeout to One Hour
    
    This change increases the default expiration length of an SA to 1h. The
    IPsec API expects that SPIs are allocated indefinitely, but potential
    for instability requires that these get cleaned up automatically. As
    such, the duration was chosen as a sane, but long timeout value.
    
    Bug: 72316671
    Test: Added CTS tests to enforce this behavior
    Merged-In: I47aef9cea4a09da253b2ec048a8797af5fa25529
    Change-Id: I47aef9cea4a09da253b2ec048a8797af5fa25529
    (cherry picked from commit 00308f85540ec1e3557e991811e220455290e4d3)

commit 00308f85540ec1e3557e991811e220455290e4d3
Author: Benedict Wong <benedictwong@google.com>
Date:   Mon Mar 12 19:00:50 2018 -0700

    Set SPI Allocation Timeout to One Hour
    
    This change increases the default expiration length of an SA to 1h. The
    IPsec API expects that SPIs are allocated indefinitely, but potential
    for instability requires that these get cleaned up automatically. As
    such, the duration was chosen as a sane, but long timeout value.
    
    Bug: 72316671
    Test: Added CTS tests to enforce this behavior
    Change-Id: I47aef9cea4a09da253b2ec048a8797af5fa25529

commit 0ee6c22f58e29c9ae4a0c07f19a6b8e81b8f46ad
Merge: 7f8e3d80e cfd9a3af8
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Thu Feb 15 14:47:58 2018 +0000

    Merge "init.rc: Mount /mnt with nodev,nosuid,noexec" am: 6698482ca4 am: 0802d45683
    am: cfd9a3af86
    
    Change-Id: I9be6cffa4deb4df7c4b781e2900d7fa79fd558ca

commit b0d8b26e0fc415742bde933f61cd050284981624
Merge: ff13ac62e 655d6d545
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Thu Feb 15 14:43:04 2018 +0000

    Merge "init.rc: Remount / with MS_REMOUNT|MS_BIND" am: 008576080e am: c37d85953e
    am: 655d6d5451
    
    Change-Id: Idb18188ad9b3b667411d428ae616498748b8281a

commit 7238eca684b6058e40e0c311ed18799b3e3ab0bc
Merge: 6698482ca 877494503
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Feb 15 03:01:33 2018 +0000

    Merge "init.rc: Add nodev,noexec,nosuid to /config"

commit 877494503698b38d21b455dc2376bf9ec5526064
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Wed Feb 14 08:35:01 2018 -0800

    init.rc: Add nodev,noexec,nosuid to /config
    
    This change adds some additional flags to the /config mount. This is to
    reduce the number of mounts with unnecessary privileges.
    
    Bug: 73255020
    Test: aosp_sailfish still boots
    Test: CtsAppSecurityHostTestCases {ExternalStorageHostTest,StorageHostTest}
    Merged-In: If3409d917cdf76a67ebfb7c4035a3ae8fee6189f
    Change-Id: If3409d917cdf76a67ebfb7c4035a3ae8fee6189f

commit 465c8f307f4506afca18cfb0d88cce433117e613
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Wed Feb 14 08:35:01 2018 -0800

    init.rc: Add nodev,noexec,nosuid to /config
    
    This change adds some additional flags to the /config mount. This is to
    reduce the number of mounts with unnecessary privileges.
    
    Bug: 73255020
    Test: aosp_sailfish still boots
    Test: CtsAppSecurityHostTestCases {ExternalStorageHostTest,StorageHostTest}
    Change-Id: If3409d917cdf76a67ebfb7c4035a3ae8fee6189f

commit 081aa0a303ab09f10741d2ac2b1a409710792c72
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Wed Feb 14 08:39:03 2018 -0800

    init.rc: Mount /mnt with nodev,nosuid,noexec
    
    This change adds some additional flags to /mnt. This is to reduce
    the number of mounts with unnecessary flags.
    
    Bug: 73255020
    Test: aosp_sailfish still boots
    Test: CtsAppSecurityHostTestCases {StorageHostTest,ExternalStorageHostTest}
    Test: CtsOsTestCases StorageManagerTest
    Test: find /mnt  | egrep -v '^/mnt/runtime/(default|read|write)/emulated' | \
          xargs ls -lZd  # Shows no character devices or executable files
    Change-Id: I54739133119d9626ebeb2ef9a1c127f7a90fa098

commit 30780a73053d968460cbe9595f8024de07460c4e
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Wed Feb 14 08:36:16 2018 -0800

    init.rc: Remount / with MS_REMOUNT|MS_BIND
    
    Since we only want to change the ro flag on / (and leave all other mount
    flags alone), this can also be achieved by passing MS_REMOUNT|MS_BIND,
    even if the mount is not a bind-mount.
    
    This aims to make running Android within a user namespace easier, since
    remounts without the MS_BIND flag are forbidden.
    
    Bug: 73255020
    Test: aosp_sailfish still boots
    Test: rootfs on / type rootfs (rw,seclabel)
          /dev/root on / type ext4 (ro,seclabel,relatime,data=ordered)
    Change-Id: I2f89a8badfc467db47304c9355648e8fd8ad1272

commit 9420397267ae469e089af314b56bb3c6fc919a0e
Merge: 7163045f7 c876c660e
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Tue Feb 13 23:07:24 2018 +0000

    Merge "init.rc: Perform some mounts with nodev,nosuid,noexec" am: cd66e4c6ea am: 8cb681fa1f
    am: c876c660e0
    
    Change-Id: I588550f4cad7e18067d916a6e1b4eed3b1fb2265

commit f8a7e37b2de50eb7a2bcd59b305adb8f68f204c1
Author: Luis Hector Chavez <lhchavez@google.com>
Date:   Mon Feb 12 11:30:46 2018 -0800

    init.rc: Perform some mounts with nodev,nosuid,noexec
    
    This change adds some additional flags to some mounts. This is to reduce
    the number of mounts with these flags.
    
    Bug: 73255020
    Test: aosp_sailfish still boots
    Change-Id: I285e6d7b3dcc19f691a3d6780e7d3a3a5d7cb3de

commit a03134ea22e13092d9a0979ceff79bfe0ce6485e
Author: Andreas Huber <andih@google.com>
Date:   Mon Jan 22 12:14:51 2018 -0800

    Fingerprint data is now stored in one of two ways depending on the
    
    shipping API version:
    
    For devices shipped before Android P nothing changes, data
    is stored under /data/system/users/<user-id>/fpdata/...
    
    Devices shipped from now on will instead store
    fingerprint data under /data/vendor_de/<user-id>/fpdata.
    
    Support for /data/vendor_de and /data/vendor_ce has been added to vold.
    
    Bug: 36997597
    Change-Id: I83f87e88d1731e515b459a3d6d5bf3104afe6cfe
    Test: manually

commit 905c99b80e94b5a25f71543a4fdc51351801e0f9
Merge: 6de4e7ef5 cd4fa1226
Author: Max Bires <jbires@google.com>
Date:   Sat Jan 20 01:02:10 2018 +0000

    Merge "Adding /data/local/traces for traceur app" am: 658e4ddd03 am: 69c428e5a6
    am: cd4fa12263
    
    Change-Id: I0ba68a132cc840b0d5b63a9d22b54276b8c168de

commit 658e4ddd0398ca65936359b26390cb293d202899
Merge: e20b4a48f 181d11c5c
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Sat Jan 20 00:51:30 2018 +0000

    Merge "Adding /data/local/traces for traceur app"

commit 82b85d0b7c0dc843104f97d7d5c80b4de43df457
Merge: c68e35945 790352301
Author: TreeHugger Robot <treehugger-gerrit@google.com>
Date:   Fri Jan 19 21:57:18 2018 +0000

    Merge "Change /configfs/sdcardfs to 0770"

commit 181d11c5cb4d0dc10216e1aa89b8e2510f87b85c
Author: Max Bires <jbires@google.com>
Date:   Thu Jan 18 14:23:51 2018 -0800

    Adding /data/local/traces for traceur app
    
    Traceur app is being split out of shell user. Previously it logged to
    shell's bugreports directory. It no longer has access, so it needs a
    new, user-friendly file location to store trace data.
    
    Bug:68126425
    Test: Traceur can write and shell can read from this directory
    Change-Id: I9e344973fd43eb5699f7a848524e20b06458fb77

commit 128274a3f2dd7f09d23098f6fcc501596620e9e2
Merge: dc95eeadf b8deb4de2
Author: Oscar Shu <xshu@google.com>
Date:   Wed Jan 17 00:09:03 2018 +0000

    Merge "Firmware dump create directory" am: da007e0deb am: b4d9751eab
    am: b8deb4de2f
    
    Change-Id: I3eba1b745d75d8cc0a3eba7cf0fea7ad54b992c2

commit da007e0deb1f7149565766ae72499e48fb821bf0
Merge: 4719ecd28 9a7a5b61c
Author: Oscar Shu <xshu@google.com>
Date:   Tue Jan 16 23:57:15 2018 +0000

    Merge "Firmware dump create directory"

commit dc95eeadf41ce40650d9f12f53ffa47e43ba81b4
Merge: 538caefba 94cff8957
Author: Chenbo Feng <fengc@google.com>
Date:   Tue Jan 16 22:15:25 2018 +0000

    Merge "Mount eBPF file system and cgroupv2 root directory" am: 4719ecd28c am: 7a65861d7c
    am: 94cff89571
    
    Change-Id: Id2a58f55f16994dba0b6dbf86d4724943dbc8141

commit 2cba6f2e0e9b6a53fc90cddd30f668c1d5131923
Author: Chenbo Feng <fengc@google.com>
Date:   Mon Oct 23 11:57:59 2017 -0700

    Mount eBPF file system and cgroupv2 root directory
    
    Mount the eBPF file system under /sys/fs/bpf to allow netd to pin and
    retrieve persistent eBPF map object from the file system. It helps the
    system to maintain a consistent eBPF data store when netd crashed and
    restart. Mount the cgroupv2 module and use the root folder of it to
    monitor network statistics through eBPF program attached.
    
    Test: eBPF map object show up under /sys/fs/bpf after netd start.
    Bug: 30950746
    Change-Id: Ie475112116603798fe75a75c5a84f4bbe5b942ec

commit 9a7a5b61c4db8c0c8f04526767d36c6ab62144b4
Author: xshu <xshu@google.com>
Date:   Mon Dec 18 11:26:06 2017 -0800

    Firmware dump create directory
    
    Setting up infanstructure for vendor tombstone in dir:
    /data/vendor/tombstones
    
    Wifi specific dumps will go into:
    /data/vendor/tombstones/wifi
    
    Bug: 70170285
    Test: compile, run on device.
    Change-Id: Ie16dd8236d9b5df19adb9818b4c62ce01e0d0b10

commit 79035230155859111b8a8c922d7b123e359f6039
Author: Daniel Rosenberg <drosen@google.com>
Date:   Wed Nov 29 14:49:08 2017 -0800

    Change /configfs/sdcardfs to 0770
    
    Change-Id: I0a66f6b3ebc3dee398e4f23f5a58ebf7d62cc4c3
    Bug: 69929297
    Test: setenforce 0
          su
          mkdir /config/sdcardfs/test
          su u0_a0,u0_a0,u0_a0
          echo 10000 > /config/sdcardfs/test/appid
          Write should fail
    Signed-off-by: Daniel Rosenberg <drosen@google.com>

commit 88d5dcbd81d22462c54bdff301cb8580852b4795
Author: Ricky Wai <rickywai@google.com>
Date:   Fri Oct 27 16:35:35 2017 +0100

    Create Network Watchlist data folder for ConfigUpdater
    
    Bug: 63908748
    Test: Able to boot
    
    Change-Id: I8db6b5706cce17a60e2a7db9be80020f8681531d

commit 3d0fc2a60b39fd51e2726f9315d25b409a8f4cd6
Merge: 389fad9d5 17197ac3e
Author: Elliott Hughes <enh@google.com>
Date:   Fri Dec 8 00:58:26 2017 +0000

    Merge "Add a /bin symlink for convenience." am: dcc0f8f76b am: 7a54ed9e28
    am: 17197ac3e0
    
    Change-Id: I1371ba22037f4466ec2799bb5a8b5056d57a2de2

commit dcc0f8f76b6f8bc4ce9e747e0798b6791c4ebed4
Merge: c431c43f8 ff1ef9f2b
Author: Elliott Hughes <enh@google.com>
Date:   Thu Dec 7 16:55:25 2017 +0000

    Merge "Add a /bin symlink for convenience."

commit ff1ef9f2b10d98131ea8945c642dd8388d9b0250
Author: Elliott Hughes <enh@google.com>
Date:   Wed Dec 6 08:59:02 2017 -0800

    Add a /bin symlink for convenience.
    
    We already have /etc and /sbin. As the Android world moves towards / being
    on the system partition, the circumstances under which a /bin symlink
    won't work are reduced. This should already be usable most of the time.
    
    Bug: http://b/63142920
    Test: `adb shell /bin/date`
    Change-Id: I81c2209ae808ced186d05fbe1d5417ce8dd93ea7

commit 39b9f7cc18cc895ecc5a04e783d732fcfa6833ab
Merge: 25bb8d331 e6c35c860
Author: Vishnu Nair <vishnun@google.com>
Date:   Mon Nov 27 21:37:22 2017 +0000

    Merge "Create location  to store surface and window trace files on init" am: 3dfba33d67 am: 4d736b5fa5
    am: e6c35c8608
    
    Change-Id: I02663a6cb3fd019d104807ac375ed7092e3fddab

commit 4d736b5fa525391b8ffa0f198b6ff62a63cc6a20
Merge: f2eb4dc9a 3dfba33d6
Author: Vishnu Nair <vishnun@google.com>
Date:   Mon Nov 27 21:26:25 2017 +0000

    Merge "Create location  to store surface and window trace files on init"
    am: 3dfba33d67
    
    Change-Id: Ibcd26a9644e954d4e9fa5be1d538e45c44fcd1b9

commit 3dfba33d67a54c5a894510372d20f2a13a7e687b
Merge: db49c0851 d09ab7a21
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Mon Nov 27 21:17:07 2017 +0000

    Merge "Create location  to store surface and window trace files on init"

commit d09ab7a217eb13d09eddd031b46c6418b881ab6c
Author: Vishnu Nair <vishnun@google.com>
Date:   Mon Nov 27 09:54:31 2017 -0800

    Create location  to store surface and window trace files on init
    
    Bug: 64831661
    Test: adb shell su root rm /data/misc/wmtrace && adb reboot && adb shell su ls /data/misc/wmtrace
    Change-Id: I60979c26a9226534df534abd3d59df309f6ea6ad

commit f8b9d77b81dd3bdb29d1dacc36c8431b1b16a7f4
Merge: a2ef53855 77ad3f58a
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Nov 22 20:13:04 2017 +0000

    Merge "Move mkdir /data/nfc/... to rootdir init.rc" am: fa65396ca2 am: 4b3bcf2a10
    am: 77ad3f58ae
    
    Change-Id: Ic2ba51690b3dd5b64ea76ec83cb6007b7894810f

commit 4b3bcf2a108de290ca68831c4640339c1fd9ca74
Merge: df482d03a fa65396ca
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Nov 22 20:03:47 2017 +0000

    Merge "Move mkdir /data/nfc/... to rootdir init.rc"
    am: fa65396ca2
    
    Change-Id: I623f24df9b42500f347ae427f4ffd94395abaa56

commit fa65396ca278a0ecc21b14b9fb7603f219004ba2
Merge: 76adcdf68 c319310f9
Author: Tom Cherry <tomcherry@google.com>
Date:   Wed Nov 22 19:56:10 2017 +0000

    Merge "Move mkdir /data/nfc/... to rootdir init.rc"

commit df482d03add1a83a7b38823adc13500efea7ac45
Merge: 6c9f88863 76adcdf68
Author: Chen Xu <fionaxu@google.com>
Date:   Wed Nov 22 04:35:44 2017 +0000

    Merge "a new folder to store OTA carrier id update"
    am: 76adcdf688
    
    Change-Id: I052a0810830b2a81a8a992d66e8e59cda343b347

commit 06b8e2e1309a921fce687437a3b130c26c729ccd
Author: fionaxu <fionaxu@google.com>
Date:   Tue Nov 21 12:31:57 2017 -0800

    a new folder to store OTA carrier id update
    
    Bug:64131637
    Test: Build
    Change-Id: I0ce4322f297bab427d70aed3c329345c899786bb
    (cherry picked from commit 45713ff62159c90e1627af0eb970641ad33dade2)

commit 45713ff62159c90e1627af0eb970641ad33dade2
Author: fionaxu <fionaxu@google.com>
Date:   Tue Nov 21 12:31:57 2017 -0800

    a new folder to store OTA carrier id update
    
    Bug:64131637
    Test: Build
    Change-Id: I0ce4322f297bab427d70aed3c329345c899786bb

commit c319310f9b63065ec3e1b5f54fb89ddfdc975971
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Nov 21 10:40:25 2017 -0800

    Move mkdir /data/nfc/... to rootdir init.rc
    
    These are directories used by the system so they should be created by
    the system.
    
    Test: treehugger
    Change-Id: I2a721ef7871c8842fa912497f5ec6988fcec9e58

commit 23e27db576d06761363365494327baf062468a66
Merge: ea41bcf7a a63ccea6a
Author: Xin Li <delphij@google.com>
Date:   Tue Nov 14 12:12:57 2017 -0800

    Merge commit 'a63ccea6abc7ea02e2d98e41c80793ca97237bd3' from
    oc-mr1-dev-plus-aosp into stage-aosp-master
    
    Change-Id: Ia33311cd1fd26dfaea59a69317b306fb91203c40
    Merged-In: I03d06b10807e8a313c9654c2e1db36bfb59e3f99

commit aae9ad533cff8f6bad110bad2a7286e1f452bbdf
Author: Yifan Hong <elsk@google.com>
Date:   Fri Nov 10 14:03:40 2017 -0800

    healthd is class hal
    
    because it serves health 2.0 HAL. This forces it to restart when
    hwservicemanager dies.
    
    Bug: 69069765
    Test: kill hwservicemanager, lshal shows backup instance
    
    Change-Id: Ib51caa0e718031a0f8797d8af4c2459b4958a62e

commit 2ca0bbfae30c59b139b06f4e25564ad98c0ede05
Merge: d5c327e87 5d86509d1
Author: Tianjie Xu <xunchang@google.com>
Date:   Fri Nov 10 22:14:35 2017 +0000

    Merge "Create a new directory on boot for update_engine logs" am: 78d882bb5f
    am: 5d86509d19
    
    Change-Id: I01611463c081fafd60fc315a4a91418a4ddef22a

commit 74fa3cab4eb564678d3cdeefdd18da2504948b74
Author: Tianjie Xu <xunchang@google.com>
Date:   Fri Nov 3 10:59:36 2017 -0700

    Create a new directory on boot for update_engine logs
    
    Partners require to access update_engine's logs on the file system with
    non-root permission.
    
    Bug: 65568605
    Test: directory created with the correct permission on boot
    Change-Id: I1c1fb4acb8b0f2e7352ffa9e7d05a864940b5986

commit 4921f97fe323d665d50197f651dceeb61ab41b14
Merge: b247b6f93 17c8a89a0
Author: Elliott Hughes <enh@google.com>
Date:   Wed Oct 25 20:02:19 2017 +0000

    Merge "Remove Foreground Boost CPUSet" am: 77451492bc
    am: 17c8a89a08
    
    Change-Id: I08f25d4a799fdb7f3c5b415675dd3c50fa65fe93

commit 77451492bc3667e6b201f222adffffdc553ebe76
Merge: 3adedf989 60bc59718
Author: Elliott Hughes <enh@google.com>
Date:   Wed Oct 25 19:55:50 2017 +0000

    Merge "Remove Foreground Boost CPUSet"

commit 60bc597183e75446f2719dc86a50be31fdee47bc
Author: Jake Weinstein <jake@aospa.co>
Date:   Mon Oct 23 20:07:22 2017 -0400

    Remove Foreground Boost CPUSet
    
    This functionality was removed at
    https://android.googlesource.com/platform/frameworks/base/+/a712d4058f6f85268838

commit 455faa53ed578234672d9e705ec32d86d23f2af6
Merge: dba08cb1b 825915bfd
Author: Dmitry Shmidt <dimitrysh@google.com>
Date:   Wed Oct 11 20:50:54 2017 +0000

    Merge "console: Add setenv HOSTNAME console" am: d2c66b31a0 am: 5884f608d9
    am: 825915bfde
    
    Change-Id: Ia845dfb8cba654766dfff15f2eab7dbee621a45d

commit 5884f608d96cc760d7ea749672bbe682bf0ebc50
Merge: 79afacdd6 d2c66b31a
Author: Dmitry Shmidt <dimitrysh@google.com>
Date:   Wed Oct 11 20:28:49 2017 +0000

    Merge "console: Add setenv HOSTNAME console"
    am: d2c66b31a0
    
    Change-Id: I85addec989872b9e66f0e68c4fea20b969a1eb25

commit d0fb2510e2d4d6f57afb4e1222378c099674852a
Author: Dmitry Shmidt <dimitrysh@google.com>
Date:   Wed Oct 11 11:18:51 2017 -0700

    console: Add setenv HOSTNAME console
    
    Bug: 67678999
    Test: Run serial console on Hikey
    
    Change-Id: Ia5fa9c2af4771508d96545f6a8814a81d5ccee3c
    Signed-off-by: Dmitry Shmidt <dimitrysh@google.com>

commit 698da688009d16c98772cd7818ccc3d7facb094d
Merge: 38bdc3f57 32e268561
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Aug 29 21:32:05 2017 +0000

    Merge "Globally allow up to 32K FDs open per process" am: 451ff37052 am: 42fb030221
    am: 32e268561a
    
    Change-Id: I07f13cb0ccfa5e5b1bbf9ef3c4dfb27d2e711a02

commit 42fb030221d54676c1e10370473d3d369b00a558
Merge: 8547fb900 451ff3705
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Aug 29 21:15:03 2017 +0000

    Merge "Globally allow up to 32K FDs open per process"
    am: 451ff37052
    
    Change-Id: Icb14faacb7d10fd99dd66e2172e04c0e73a8b170

commit cb5fccc83c6c757f25436884e96c318f72743ffd
Author: Tom Cherry <tomcherry@google.com>
Date:   Mon Aug 28 12:53:56 2017 -0700

    Globally allow up to 32K FDs open per process
    
    We've seen crashes due to processes exceeding the current soft limit
    for open FDs of 1024, mainly due to increases in using FDs for shared
    memory and gralloc memory objects.
    
    There is not a compelling reason to keep this limit artificially low,
    so we raise it to 32K.  This matches my desktop linux limit, so it is
    with precedent.
    
    Bug: 64894637
    Test: open 32K FDs in a process without failure then fail after 32K
    Change-Id: Ibecfc486e9c61f273a432a108893137d2d13a530

commit 566ae3ebf61d63a45100de3245849ba17dc41ced
Merge: 096d8034a c3090ba2f
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Aug 28 14:42:49 2017 +0000

    Merge "init.rc: Lock down access to /proc/net/fib_trie" into oc-mr1-dev
    am: c3090ba2f4
    
    Change-Id: I9ffa9c76b807c8439f05388f4b8aae3d131bac5a

commit 15ffc53f6d57a46e3041453865311035a18e047a
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Aug 25 12:55:52 2017 -0700

    init.rc: Lock down access to /proc/net/fib_trie
    
    Make /proc/net/fib_trie only readable to root.
    
    Bug: 31269937
    Test: Device boots, file has appropriate permissions.
    Change-Id: I0d01ce5c043d576344a6732b0b9ff93d62fcaa34

commit 37c6015d9d9130ab5cb3a82d161f93da27036195
Merge: d98e5fc54 13cb59953
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Aug 25 14:24:21 2017 +0000

    Merge "Switch /data/misc/reboot/last_reboot_reason to persistent property"
    am: 13cb599536
    
    Change-Id: Ib6c1b51668b892288db931b09b099bf5ed28fbae

commit 73e6b49c0c24d22b345498ed60300a51750825fa
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Aug 14 15:56:53 2017 -0700

    Switch /data/misc/reboot/last_reboot_reason to persistent property
    
    Switch from /data/misc/reboot/last_reboot_reason to persistent
    Android property persist.sys.boot.reason for indicating why the
    device is rebooted or shutdown.
    
    persist.sys.boot.reason has a standard as outlined in b/63736262 and
    the associated investigation. Made adjustments to the values so that
    we did not create a problem even before we started. Compliance is
    part of the tests in boot_reason_test.sh.
    
    Test: system/core/bootstat/boot_reason_test.sh
    Bug: 64687998
    Change-Id: I812c55a12faf7cb7ff92101009be058ad9958d07

commit 4de04ccb6b8ed41abf879164e15310b5a699047e
Merge: 0de39b00e 68e79940e
Author: Joel Galenson <jgalenson@google.com>
Date:   Fri Jul 28 16:17:53 2017 +0000

    Merge "Move chmod of /sys/kernel/debug/tracing to fix tracing." am: 13c3a582de am: c4f2163954
    am: 68e79940ea
    
    Change-Id: Ie2ca46038cef82d7a63bed3473656c17e94bb503

commit c4f21639543fc6ccd0c18bfcdc12d34d5d7d4339
Merge: 9f030d89d 13c3a582d
Author: Joel Galenson <jgalenson@google.com>
Date:   Fri Jul 28 16:12:23 2017 +0000

    Merge "Move chmod of /sys/kernel/debug/tracing to fix tracing."
    am: 13c3a582de
    
    Change-Id: I63ca85ffce7aead567c34069135fb066c5a026de

commit d48c4cf23469281eb159b635dd5a5b761ec490b3
Author: Joel Galenson <jgalenson@google.com>
Date:   Tue Jun 13 10:15:05 2017 -0700

    Move chmod of /sys/kernel/debug/tracing to fix tracing.
    
    This is a temporary fix, since we're still not sure exactly what the
    bug is.
    
    Bug: 62547086
    Test: Built, flashed, and booted Sailfish.  Verified that the file has
    the correct permission and that wifi and atrace work.
    
    Change-Id: I43275e974a11754eca274f1b77d15cdd03a3b365
    (cherry picked from commit 62962dd5b7a37478da2bad786e084345d366f984)

commit e5fa38c73187e23ac3c4d10e808a601abb4cc220
Merge: f01f4e9d4 4e8227420
Author: Siqi Lin <siqilin@google.com>
Date:   Thu Jul 27 14:33:02 2017 +0000

    Merge "rootdir: record last build fingerprint"
    am: 4e8227420e
    
    Change-Id: I59664c816a8fbf4d7776270b28f4673418d30bcb

commit 94aeecea3ba683e2aa54a668ca08dba4abdc73c8
Merge: c50c327fb b9b76de6f
Author: Siqi Lin <siqilin@google.com>
Date:   Thu Jul 27 01:22:57 2017 +0000

    rootdir: record last build fingerprint
    am: b9b76de6ff
    
    Change-Id: Ie1c4444c147969dd74a51ca5acd9fe86825f8e3a

commit 870353633256641aa646c7a206d1fb809c987fa0
Merge: ba6705f9d b9b76de6f
Author: Siqi Lin <siqilin@google.com>
Date:   Thu Jul 27 01:21:50 2017 +0000

    rootdir: record last build fingerprint
    am: b9b76de6ff
    
    Change-Id: I2d781eb8684a860dbb4cb9590ba43bf9d2f3b4c6

commit 16bb36197b4d5acc4d6c3b27b9117d01ad08280f
Author: Siqi Lin <siqilin@google.com>
Date:   Wed Jul 26 13:18:15 2017 -0700

    rootdir: record last build fingerprint
    
    We can't copy /default.prop so just write the value of
    $(ro.build.fingerprint) to /data/misc/recovery/ro.build.fingerprint
    and rotate it after reboot instead.
    
    Bug: 62793047
    Test: manual - reboot phone and check /data/misc/recovery
    Change-Id: I130a4b7a01d9e1bfe9baecde2781626eb72e768b
    (cherry picked from commit b9b76de6ff0600dba846c2af5cccd082494f7243)

commit b9b76de6ff0600dba846c2af5cccd082494f7243
Author: Siqi Lin <siqilin@google.com>
Date:   Wed Jul 26 13:18:15 2017 -0700

    rootdir: record last build fingerprint
    
    We can't copy /default.prop so just write the value of
    $(ro.build.fingerprint) to /data/misc/recovery/ro.build.fingerprint
    and rotate it after reboot instead.
    
    Bug: 62793047
    Test: manual - reboot phone and check /data/misc/recovery
    Change-Id: I130a4b7a01d9e1bfe9baecde2781626eb72e768b

commit 3ec9aa4a91e4d04c324f89e8327d0a4b2bf1482c
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Jul 14 10:37:57 2017 -0700

    rootdir: record last build signature and kernel version
    
    (cherry pick from commit 93394034a24534a6807da25b4dabeda36867cd8f)
    
    Rotate /default.prop and /proc/version into /data/misc/recovery/
    as an aid in determining the vintage of the LAST_LOGCAT and
    LAST_DMESG in the bugreport collection.
    
    Signed-off-by: Mark Salyzyn <salyzyn@google.com>
    Test: manually confirm content rotation through reboots
    Bug: 62793047
    Change-Id: Ibbe546c76041f20e308e58e5548939afac75db97

commit d16eebd96dda483dd772859e5bc49409c4637486
Merge: dc43b54d3 77bf7449b
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Jul 14 21:33:42 2017 +0000

    Merge "rootdir: record last build signature and kernel version" am: 91a17a41f6 am: 97e90c6bb8 am: a62497c189
    am: 77bf7449b2
    
    Change-Id: Ic2d43115a4423e3870870406fdf992f7449565bd

commit 77bf7449b20a765a36795da37eb4bfe7e61b6ebd
Merge: ec721bdda a62497c18
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Jul 14 21:27:50 2017 +0000

    Merge "rootdir: record last build signature and kernel version" am: 91a17a41f6 am: 97e90c6bb8
    am: a62497c189
    
    Change-Id: Ieaddd4f3b02c7b67fd2b98e9874b037af77a0702

commit 97e90c6bb8342f15704c10182d97ff054583b27d
Merge: 3205cd6cc 91a17a41f
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Jul 14 21:20:22 2017 +0000

    Merge "rootdir: record last build signature and kernel version"
    am: 91a17a41f6
    
    Change-Id: I86afacf1540ad02f5e70c08f39a5c76f98d47c4e

commit 93394034a24534a6807da25b4dabeda36867cd8f
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Jul 14 10:37:57 2017 -0700

    rootdir: record last build signature and kernel version
    
    Rotate /default.prop and /proc/version into /data/misc/recovery/
    as an aid in determining the vintage of the LAST_LOGCAT and
    LAST_DMESG in the bugreport collection.
    
    Signed-off-by: Mark Salyzyn <salyzyn@google.com>
    Test: manually confirm content rotation through reboots
    Bug: 62793047
    Change-Id: Ibbe546c76041f20e308e58e5548939afac75db97

commit ed73c5c71ada6ebade1e47fe3c5897fac461ebee
Merge: 1f7246bda 6a4482a43
Author: Robert Benea <robenea@google.com>
Date:   Tue Jul 11 22:11:10 2017 +0000

    Merge "Use mem cgroups in libprocessgroup if they're available" am: 3c7f566495 am: 92ad7c02d4 am: 43c6c844de
    am: 6a4482a438
    
    Change-Id: I307fb64713d44d2447f835f4a74b7c40ccd61b4f

commit 6a4482a4382dea661e026828f0c761d202702c07
Merge: 9994fdf6d 43c6c844d
Author: Robert Benea <robenea@google.com>
Date:   Tue Jul 11 22:08:11 2017 +0000

    Merge "Use mem cgroups in libprocessgroup if they're available" am: 3c7f566495 am: 92ad7c02d4
    am: 43c6c844de
    
    Change-Id: I9c2976886372f5c6e1ae008872cacc0f01fc282f

commit 92ad7c02d4335e6c6f2a634a98af97bad6a65611
Merge: 66c61b545 3c7f56649
Author: Robert Benea <robenea@google.com>
Date:   Tue Jul 11 22:01:09 2017 +0000

    Merge "Use mem cgroups in libprocessgroup if they're available"
    am: 3c7f566495
    
    Change-Id: I7b50c83c5ba053faf6be62200570738744dd1e7b

commit 3280e48847e5dd16521ad7040d53eb30b66bf740
Author: Robert Benea <robenea@google.com>
Date:   Tue Jun 27 23:09:03 2017 -0700

    Use mem cgroups in libprocessgroup if they're available
    
    Use mem cgroups if the kernel is built with CONFIG_MEMCG=y,
    additionally add system group.
    
    test: verified on both kernel with/without memcg enabled
    Change-Id: Ia2ae89efa3905e9da68fa77adac1225c667864d1

commit 7af0deb144292d4a226c607b68827ae5606094b7
Merge: ab2a91309 2c0f9c3a7
Author: Tim Murray <timmurray@google.com>
Date:   Sat Jul 8 01:52:51 2017 +0000

    Merge "Revert "Use mem cgroups in libprocessgroup if they're available"" am: e8a75e8f76 am: 7f857bb9ff am: ac68c7fc8c
    am: 2c0f9c3a72
    
    Change-Id: I36ef31b921d56222902c4bba8f891d6d21dad947

commit 2c0f9c3a72e5170630513d85b1d88ee08e518ca0
Merge: 5ef15a9fa ac68c7fc8
Author: Tim Murray <timmurray@google.com>
Date:   Sat Jul 8 01:50:20 2017 +0000

    Merge "Revert "Use mem cgroups in libprocessgroup if they're available"" am: e8a75e8f76 am: 7f857bb9ff
    am: ac68c7fc8c
    
    Change-Id: I19e5d24a936e992bb634fd589ce04416dbf07c21

commit 7f857bb9ffb1fb97968998ebc4eda9ef92f590bb
Merge: 793ffcbf2 e8a75e8f7
Author: Tim Murray <timmurray@google.com>
Date:   Sat Jul 8 01:45:50 2017 +0000

    Merge "Revert "Use mem cgroups in libprocessgroup if they're available""
    am: e8a75e8f76
    
    Change-Id: Iec01b90ae7d49d1eaf4a6e0c5324749a358db5d6

commit e8a75e8f76d0c0fb97aed77758a9fbea65992134
Merge: 32ac9bfd0 fc10e3d5e
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Sat Jul 8 01:41:19 2017 +0000

    Merge "Revert "Use mem cgroups in libprocessgroup if they're available""

commit fc10e3d5e5385081853b7d1b3cc41f882ac6325d
Author: Tim Murray <timmurray@google.com>
Date:   Sat Jul 8 00:04:04 2017 +0000

    Revert "Use mem cgroups in libprocessgroup if they're available"
    
    This reverts commit 32375c23284704a7d044ed79060c4431468b4b4e.
    
    bug 63164307
    
    Change-Id: I3336bbf7c2f3297b231c5b0a1ef538faff9513fd

commit cea7028cf44970c11a65c7b9a0f106dce82c651b
Merge: 041f84954 5d4d6f726
Author: Wei Wang <wvw@google.com>
Date:   Thu Jul 6 22:36:47 2017 +0000

    Merge "init: Support custom shutdown actions" into oc-dr1-dev

commit 5d4d6f72695d532ee138d8a412dd13a7ea9a0025
Author: Wei Wang <wvw@google.com>
Date:   Tue Jun 27 22:08:45 2017 -0700

    init: Support custom shutdown actions
    
    We have been seeing panics and errors during shutdown sequence in
    some vendor's platform, and it is required to disable error handling
    during shutdown.
    
    This CL separates the shutdown request to execute another "shutdown"
    trigger at the beginning of shutdown stage. And vendor can use this
    trigger to add custom commands needed for shutting down gracefully.
    
    Bug: 38203024
    Bug: 62084631
    Test: device reboot/shutdown
    Change-Id: I3fac4ed59f06667d86e477ee55ed391cf113717f
    (cherry picked from commit eeab491efd8f456324f88e444f228b1016712e45)

commit f5b616dabf0a82c5d3f11f7763a77f94ae5d8603
Merge: e892b7cde bedc5faea
Author: Keun-young Park <keunyoung@google.com>
Date:   Thu Jul 6 01:38:15 2017 +0000

    Merge "add "shutdown critical" to service" am: b3915d113d am: a4ad5d0328 am: 19ec8e7bcf
    am: bedc5faea7
    
    Change-Id: I62cd1bc82531b88f5d8c8ac2dd637d5ec9d52572

commit bedc5faea7d38f67b6874af0e91bdfa3cbdfcb77
Merge: 3f10ecabf 19ec8e7bc
Author: Keun-young Park <keunyoung@google.com>
Date:   Thu Jul 6 01:13:19 2017 +0000

    Merge "add "shutdown critical" to service" am: b3915d113d am: a4ad5d0328
    am: 19ec8e7bcf
    
    Change-Id: Ide84d7f87a9884068ebc1cc9680c997507727af3

commit d266d37e4cb6d0b31eb9422b73f051632ea7365f
Author: Keun-young Park <keunyoung@google.com>
Date:   Wed Jul 5 11:38:44 2017 -0700

    add "shutdown critical" to service
    
    - "shutdown critical" prevents killing the service during
      shutdown. And the service will be started if not running.
    - Without it, services will be killed by SIGTERM / SIGKILL during shutdown.
    - Even services with "shutdown critical" will be killed if shutdown
      times out.
    - Removes ueventd and vold from hard coded list. Each service's rc will
      be updated to add "shutdown critical". watchdogd is still kept in the list.
    
    bug: 37626581
    Test: reboot and check last kmsg
    
    (cherry picked from commit cccb34fce8798f2a359c6eb0e394ef9460673629)
    
    Change-Id: I3c6aeb7151e64beca4b435f843ae64455217262d

commit a4ad5d0328334eb390368ef57d87ddd92fd51b5d
Merge: 328b56585 b3915d113
Author: Keun-young Park <keunyoung@google.com>
Date:   Thu Jul 6 00:46:31 2017 +0000

    Merge "add "shutdown critical" to service"
    am: b3915d113d
    
    Change-Id: I25b6f42478efda7077e00141042a427245393d28

commit b3915d113df4d24dfc4a72092f9b414422eaa9fc
Merge: cd0c2d896 cccb34fce
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Jul 6 00:40:55 2017 +0000

    Merge "add "shutdown critical" to service"

commit a89b61ad99ea6aa731fbac6d5e3095a831a938d6
Merge: 12ef7fd8b 2a38e6d11
Author: Wei Wang <wvw@google.com>
Date:   Thu Jul 6 00:22:45 2017 +0000

    Merge "init: Support custom shutdown actions" am: c1bc4241f8 am: 5b89535442 am: b39890048c
    am: 2a38e6d119
    
    Change-Id: I6776039ebf9f87b41193cc24a9786dc80db99e43

commit 2a38e6d11990caa40fba9572bbf65b7d0382be1d
Merge: 158803cd3 b39890048
Author: Wei Wang <wvw@google.com>
Date:   Wed Jul 5 23:58:51 2017 +0000

    Merge "init: Support custom shutdown actions" am: c1bc4241f8 am: 5b89535442
    am: b39890048c
    
    Change-Id: I57a0422f47094cc061163510138e9562648fdd98

commit 5b895354427ac2d0861beeeaf0cd71454df4bf88
Merge: f038ee0d8 c1bc4241f
Author: Wei Wang <wvw@google.com>
Date:   Wed Jul 5 23:54:56 2017 +0000

    Merge "init: Support custom shutdown actions"
    am: c1bc4241f8
    
    Change-Id: I6bb1789dbc5edbb10f2f4d712e9ca83e6302fdf4

commit cccb34fce8798f2a359c6eb0e394ef9460673629
Author: Keun-young Park <keunyoung@google.com>
Date:   Wed Jul 5 11:38:44 2017 -0700

    add "shutdown critical" to service
    
    - "shutdown critical" prevents killing the service during
      shutdown. And the service will be started if not running.
    - Without it, services will be killed by SIGTERM / SIGKILL during shutdown.
    - Even services with "shutdown critical" will be killed if shutdown
      times out.
    - Removes ueventd and vold from hard coded list. Each service's rc will
      be updated to add "shutdown critical". watchdogd is still kept in the list.
    
    bug: 37626581
    Test: reboot and check last kmsg
    
    Change-Id: Ie8cc699d1efbc59b9a2561bdd40fec64aed5a4bb

commit eeab491efd8f456324f88e444f228b1016712e45
Author: Wei Wang <wvw@google.com>
Date:   Tue Jun 27 22:08:45 2017 -0700

    init: Support custom shutdown actions
    
    We have been seeing panics and errors during shutdown sequence in
    some vendor's platform, and it is required to disable error handling
    during shutdown.
    
    This CL separates the shutdown request to execute another "shutdown"
    trigger at the beginning of shutdown stage. And vendor can use this
    trigger to add custom commands needed for shutting down gracefully.
    
    Bug: 38203024
    Bug: 62084631
    Test: device reboot/shutdown
    Change-Id: I3fac4ed59f06667d86e477ee55ed391cf113717f

commit ea5fd4d828398a14d9e8b231ee1f845160081c64
Merge: 482b48586 888d9e198
Author: Robert Benea <robenea@google.com>
Date:   Fri Jun 30 02:45:24 2017 +0000

    Merge "Use mem cgroups in libprocessgroup if they're available" am: d3afc124b6 am: 46706e6824 am: 74c02e7b58
    am: 888d9e198b
    
    Change-Id: I6f3a475bfff19801792ff7017150be6955cdd631

commit 888d9e198b824d16c395a618e2b0f7c33d3544ba
Merge: f4b01412f 74c02e7b5
Author: Robert Benea <robenea@google.com>
Date:   Fri Jun 30 02:41:24 2017 +0000

    Merge "Use mem cgroups in libprocessgroup if they're available" am: d3afc124b6 am: 46706e6824
    am: 74c02e7b58
    
    Change-Id: Iba2c643286063a9ffa22f3917f8acbcca1d77ef3

commit 46706e6824acf9fd6da30c44b7e0432fea438f93
Merge: 09181f3dd d3afc124b
Author: Robert Benea <robenea@google.com>
Date:   Fri Jun 30 02:32:24 2017 +0000

    Merge "Use mem cgroups in libprocessgroup if they're available"
    am: d3afc124b6
    
    Change-Id: Idd72671eb144343a73a02bfbde8603265ca78650

commit 32375c23284704a7d044ed79060c4431468b4b4e
Author: Robert Benea <robenea@google.com>
Date:   Tue Jun 27 23:09:03 2017 -0700

    Use mem cgroups in libprocessgroup if they're available
    
    Use mem cgroups if the kernel is built with CONFIG_MEMCG=y,
    additionally add system group.
    
    test: verified on both kernel with/without memcg enabled
    Change-Id: Ib9d1c8e3c797e75f160e0e92edf3f11c9d8e9f17

commit 4a4259b51bb74229f67f4123e0050a6e2f1fc324
Merge: 97d99fb16 872206fd8
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Jun 27 22:14:25 2017 +0000

    Merge changes Ibe1feb39,I05be83e4,If1422e4d am: a4f086ab20 am: 3a156e6c2b am: ca0c0bb96e
    am: 872206fd80
    
    Change-Id: I9c08baaf94f2eaaf2ad9633e70b9cd0c1dd484ed

commit 872206fd807719102080a263946e87db64e5bdf3
Merge: 8ffe39816 ca0c0bb96
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Jun 27 21:57:34 2017 +0000

    Merge changes Ibe1feb39,I05be83e4,If1422e4d am: a4f086ab20 am: 3a156e6c2b
    am: ca0c0bb96e
    
    Change-Id: I21636d01cf0cb0bd581104d2bfb5624877bfaf6a

commit 3a156e6c2b75ae8fad999dc25196470bc40cc9c3
Merge: 216ac3653 a4f086ab2
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Jun 27 21:52:06 2017 +0000

    Merge changes Ibe1feb39,I05be83e4,If1422e4d
    am: a4f086ab20
    
    Change-Id: I7e5d431c992f9860ca7b42ca81edfbfd1d8e0a1c

commit 4eb0ba058c6fca6a5f8a81308f006b52567fc3c5
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Jun 27 09:32:32 2017 -0700

    init.rc: setup console-ramoops-0
    
    On later kernels /sys/fs/pstore/console-ramoops becomes
    /sys/fs/pstore/console-ramoops-0
    
    Test: none
    Bug: 63058217
    Change-Id: Ibe1feb39ef9081b1ab2316510674bf181bdc7b0c

commit 62962dd5b7a37478da2bad786e084345d366f984
Author: Joel Galenson <jgalenson@google.com>
Date:   Tue Jun 13 10:15:05 2017 -0700

    Move chmod of /sys/kernel/debug/tracing to fix traceur.
    
    This is a temporary fix, since we're still not sure exactly what the
    bug is.
    
    Bug: 62547086
    Test: Built, flashed, and booted Marlin.  Verified that the file has
    the correct permission and that traceur does not popup an error.
    
    Change-Id: I43275e974a11754eca274f1b77d15cdd03a3b365

commit ec39a758a15bd43e1f9617674ff4e322bb571289
Merge: 417759f91 9c1809714
Author: Robert Benea <robenea@google.com>
Date:   Thu Jun 1 08:25:53 2017 +0000

    Merge "cgroups used by init must be mounted before any services start" am: 63c15c1b11 am: cc6da8ec5b am: b30ad069ec
    am: 9c18097147
    
    Change-Id: I49aee8cae9374ba40312f6a929909a77f2df6492

commit 9c180971470b01d9fcbf7051ac1e5db2427700c4
Merge: 7b36933a8 b30ad069e
Author: Robert Benea <robenea@google.com>
Date:   Thu Jun 1 08:17:03 2017 +0000

    Merge "cgroups used by init must be mounted before any services start" am: 63c15c1b11 am: cc6da8ec5b
    am: b30ad069ec
    
    Change-Id: I5627d6720aa0c237aca0cdd1cb75b654cb183158

commit c638569c2ebdc36f93a05190cd52dc08f4321d1b
Author: Robert Benea <robenea@google.com>
Date:   Wed May 31 16:07:53 2017 -0700

    cgroups used by init must be mounted before any services start
    
    init uses /acct and optionally /dev/memcg for tracking services and
    therefore these must be started before any services start.
    
    Test: check that cgroups are mounted appropriately.
    
    Change-Id: Ice095287963181fe687dbe6b7d291076e674d1cc

commit f97d96b8f4c3291f139a035ea05197eccc0c56f1
Author: Yueyao Zhu <yueyao@google.com>
Date:   Thu May 18 12:46:34 2017 -0700

    init.rc: import /vendor/etc/init/hw/init.${ro.hardware}.rc
    
    /init.${ro.hardware}.rc would sometime rely on being parsed before other
    .rc files. In this case all vendors are still able to have a .rc file
    included before all the ones in /vendor/etc/init.
    
    Merged-In: I3fb6df13a39204a516874ea94f5e5ad84bca42c6
    Bug: 38301110
    Change-Id: I3fb6df13a39204a516874ea94f5e5ad84bca42c6
    (cherry picked from commit f7c34ad4bf1f4afdb7f901bcf908128ad7c2ca3a)

commit 2a20488a77ee833abe4ea8078ed873d42631b61d
Merge: 2c4076804 b1fad8a5b
Author: Thierry Strudel <tstrudel@google.com>
Date:   Fri May 19 18:14:51 2017 +0000

    Merge "init.rc: import /vendor/etc/init/hw/init.${ro.hardware}.rc" into oc-dev am: 64bea883cb
    am: b1fad8a5b0
    
    Change-Id: I0f1f47059715fc55bf9ebe4b9a61e3f6d2d50726

commit f7c34ad4bf1f4afdb7f901bcf908128ad7c2ca3a
Author: Yueyao Zhu <yueyao@google.com>
Date:   Thu May 18 12:46:34 2017 -0700

    init.rc: import /vendor/etc/init/hw/init.${ro.hardware}.rc
    
    /init.${ro.hardware}.rc would sometime rely on being parsed before other
    .rc files. In this case all vendors are still able to have a .rc file
    included before all the ones in /vendor/etc/init.
    
    Bug: 38301110
    Change-Id: I3fb6df13a39204a516874ea94f5e5ad84bca42c6

commit f50d1091e9e92c4b72cb3122305cbc96cb07238c
Author: Joel Fernandes <joelaf@google.com>
Date:   Mon Dec 19 11:01:55 2016 -0800

    init.rc: Add a new schedtune group 'rt' for rt tasks
    
    Add a new boost group for rt tasks. Device specific changes will be in
    the device init rc.
    
    Bug: 33085313
    
    Change-Id: I99ca085d0933d878795bb0eda639bb2075419415
    Signed-off-by: Joel Fernandes <joelaf@google.com>

commit f59c55aa7a40085d5df1e2b17719f8e23a433316
Author: Steve Muckle <smuckle@google.com>
Date:   Wed May 10 13:24:31 2017 -0700

    Revert "disable module loading after BOOT_COMPLETED broadcast"
    
    This reverts commit 6ed19d1675ab7a9b45d1b82c90aac2be8f408a2e.
    
    Allow devices to decide for themselves whether to allow
    module loading after boot.
    
    Bug: 38204366
    Test: boot sailfish, load a kernel module
    Change-Id: Ib9e77381de9003fb5160463664015a95316ddfc5

commit 982e0693ce69021636e779c759ff6c596038dd1f
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri May 5 17:42:37 2017 +0000

    Revert "Make /data/data a symlink to /data/user/0"
    
    This reverts commit d147cb5887f1ee9c978f58cdf59e9ddb99209ac6.
    
    Original change breaks AVD
    Original changes breaks SF/AF
    Bug: 38026755
    Bug: 38030346
    Bug: 38114264
    
    Change-Id: Iab56244f0dc0f6b0df2916c691277a882fc7d184

commit d147cb5887f1ee9c978f58cdf59e9ddb99209ac6
Author: cjbao <cathy.bao@intel.com>
Date:   Wed Apr 12 00:01:41 2017 +0800

    Make /data/data a symlink to /data/user/0
    
    For legacy reason, /data/data is a real dir and /data/user/0 is a
    symbolic link to it.  Overhead for linux kernel to walk through
    symbolic link is not negligible. This is unnessary overhead to
    carry over.  This patch is to make /data/user/0 a a real dir and
    make legacy folder /data/data a symbolic link.  OTAed system does
    not get impacted.
    
    Test: Manual test
    Change-Id: I419564a75f6ebf3154badb8725ba9831164592b6
    Signed-off-by: cjbao <cathy.bao@intel.com>

commit d6ab6456c56d63ec069fe637cd5b9aad87ef5133
Author: Abodunrinwa Toki <toki@google.com>
Date:   Thu Apr 27 18:46:59 2017 +0100

    Initialize textclassifier model update directory
    
    Test: Builds successfully. Directory is initialized on install. Tests pass.
    bit FrameworksCoreTests:android.view.textclassifier.TextClassificationManagerTest
    Bug: 34780396
    
    Merged-In: Icbf7962f11b66579931f48053132da6e03e62c61
    Change-Id: Icbf7962f11b66579931f48053132da6e03e62c61

commit 40673e3381cbb661212f965432d190f0458644bd
Author: Abodunrinwa Toki <toki@google.com>
Date:   Thu Apr 27 22:56:43 2017 +0100

    Initialize textclassifier model update directory
    
    Test: Builds successfully. Directory is initialized on install. Tests pass.
    bit FrameworksCoreTests:android.view.textclassifier.TextClassificationManagerTest
    Bug: 34780396
    
    Change-Id: Icbf7962f11b66579931f48053132da6e03e62c61

commit 53842e7dc6c9c08a73b87775e2daccb35d400902
Author: Wei Wang <wvw@google.com>
Date:   Thu Apr 20 14:37:55 2017 -0700

    Ensure update_verifier run before zygote
    
    Currently zygote is started early for FBE device but update_verifier is run later
    which creates a potential risk. This CL ensures update_verifier run before
    zygote touches anything within data/ partition. With this change, we also start zygote
    early for unencrypted/unsupported encryption state device.
    
    Bug: 37543411
    Test: marlin boots
    
    (cherry picked from commit 5dc05effecca88f06da090dbcdd257666e69c2c7)
    
    Change-Id: I97cde0c20f74b1b17c995d84c2e31c86fe006395

commit 35a2ee84d5f58c592da16c8377f4edead8a39f10
Author: Wei Wang <wvw@google.com>
Date:   Mon Apr 24 21:33:12 2017 +0000

    Revert "Revert "Ensure update_verifier run before zygote""
    
    This reverts commit 2de3344180f0308a8e8c9ffa533bbd572e6fd89d.
    
    Change-Id: Ifc49bf389ed43a56baf5bb55d5f2028b8725083d

commit 2de3344180f0308a8e8c9ffa533bbd572e6fd89d
Author: Keun-young Park <keunyoung@google.com>
Date:   Sat Apr 22 00:43:55 2017 +0000

    Revert "Ensure update_verifier run before zygote"
    
    This reverts commit 5dc05effecca88f06da090dbcdd257666e69c2c7.
    
    Change-Id: Ic041860dee8a2993c6b4890beca4da745cfbfb60

commit 5dc05effecca88f06da090dbcdd257666e69c2c7
Author: Wei Wang <wvw@google.com>
Date:   Thu Apr 20 14:37:55 2017 -0700

    Ensure update_verifier run before zygote
    
    Currently zygote is started early for FBE device but update_verifier is run later
    which creates a potential risk. This CL ensures update_verifier run before
    zygote touches anything within data/ partition. With this change, we also start zygote
    early for unencrypted/unsupported encryption state device.
    
    Bug: 37543411
    Test: marlin boots
    Change-Id: I95daa73bc1a503eecb70d7be78251b74b773abf8

commit 5fb5b81fc78cf73000c92942fb6cbbe44dae8062
Author: Keun-young Park <keunyoung@google.com>
Date:   Thu Apr 20 12:35:45 2017 -0700

    early start zygote_secondary as well
    
    - late start of zygote_secondary leads into occasional
      1 second wait for starting system service.
    - Early start secondary zygote so that there is no additional
      wait.
    
    bug: 37508384
    Test: python packages/services/Car/tools/bootanalyze/bootanalyze.py -r -c packages/services/Car/tools/bootanalyze/config.yaml -n 100 -f -e 16 -w 30
    
    (cherry picked from commit f8532445b4c2c693d6c4e8794a7d9a69da1e0a5f)
    
    Change-Id: Ia46b07f3d6abb090cc169ebd807e21b16694d172

commit f8532445b4c2c693d6c4e8794a7d9a69da1e0a5f
Author: Keun-young Park <keunyoung@google.com>
Date:   Thu Apr 20 12:35:45 2017 -0700

    early start zygote_secondary as well
    
    - late start of zygote_secondary leads into occasional
      1 second wait for starting system service.
    - Early start secondary zygote so that there is no additional
      wait.
    
    bug: 37508384
    Test: python packages/services/Car/tools/bootanalyze/bootanalyze.py -r -c packages/services/Car/tools/bootanalyze/config.yaml -n 100 -f -e 16 -w 30
    Change-Id: I2e4eb0b59a9a8417b56a72fe2de6fa2a6e1ab0a2

commit 1b0895300f1458aa523ae6c0d00154a40d16484c
Merge: 4d26b266e 82a395de2
Author: TreeHugger Robot <treehugger-gerrit@google.com>
Date:   Wed Apr 19 20:16:14 2017 +0000

    Merge changes I33ad185f,I5fc2d727 into oc-dev
    
    * changes:
      init.rc: move load_system_props to beginning of 'on fs'
      liblog: __android_logger_property_bool svelte+eng default

commit 82a395de27cd7d54cd0d6b32e757607194d7a949
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Apr 18 08:13:06 2017 -0700

    init.rc: move load_system_props to beginning of 'on fs'
    
    (cherry pick from commit 3510359a3c382269e1b58bd5ce8d147e5f1c06e7)
    
    ro.logd.kernel, ro.config.low_ram, ro.logd.timestamp and ro.debuggable
    need to be retrieved prior to logd start in order for the service to
    behave in a configured manner.  Other essential services are also
    dependent on these system properties as well, so it just makes sense
    to pick them all up first in 'on fs'.
    
    Test: smoke test
    Bug: 37425809
    Change-Id: I33ad185f397ee527ed3c84cc2bcb40ff8ca785b5

commit ac0aa5f30c2b191a7a432f050fb928cbadf6d4b3
Merge: a190551d2 8dbd12b94
Author: Wei Wang <wvw@google.com>
Date:   Wed Apr 19 16:49:58 2017 +0000

    Merge "init.rc: set initial cpuset to all cores" into oc-dev

commit 3510359a3c382269e1b58bd5ce8d147e5f1c06e7
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Apr 18 08:13:06 2017 -0700

    init.rc: move load_system_props to beginning of 'on fs'
    
    ro.logd.kernel, ro.config.low_ram, ro.logd.timestamp and ro.debuggable
    need to be retrieved prior to logd start in order for the service to
    behave in a configured manner.  Other essential services are also
    dependent on these system properties as well, so it just makes sense
    to pick them all up first in 'on fs'.
    
    Test: smoke test
    Bug: 37425809
    Change-Id: I33ad185f397ee527ed3c84cc2bcb40ff8ca785b5

commit 5ceb7b3ebde818eaa3efe21b40d3481a4b653751
Author: Tom Cherry <tomcherry@google.com>
Date:   Mon Apr 17 16:34:20 2017 -0700

    init: handle sys.powerctl immediately
    
    Currently if a process sets the sys.powerctl property, init adds this
    property change into the event queue, just like any other property.
    The actual logic to shutdown the device is not executed until init
    gets to the action associated with the property change.
    
    This is bad for multiple reasons, but explicitly causes deadlock in
    the follow scenario:
    
    A service is started with `exec` or `exec_start`
    The same service sets sys.powerctl indicating to the system to
    shutdown
    The same service then waits infinitely
    
    In this case, init doesn't process any further commands until the exec
    service completes, including the command to reboot the device.
    
    This change causes init to immediately handle sys.powerctl and reboot
    the device regardless of the state of the event queue, wait for exec,
    or wait for property conditions.
    
    Bug: 37209359
    Bug: 37415192
    
    Test: Init reboots normally
    Test: Update verifier can reboot the system
    Change-Id: Iff2295aed970840f47e56c4bacc93001b791fa35
    (cherry picked from commit 98ad32a967079be80a101458d8a29d7ecefbb547)

commit 14ed55bae8f2f64005cdde61cb407ed34d0effef
Merge: f358bed62 98ad32a96
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Apr 18 18:14:17 2017 +0000

    Merge "init: handle sys.powerctl immediately"

commit 98ad32a967079be80a101458d8a29d7ecefbb547
Author: Tom Cherry <tomcherry@google.com>
Date:   Mon Apr 17 16:34:20 2017 -0700

    init: handle sys.powerctl immediately
    
    Currently if a process sets the sys.powerctl property, init adds this
    property change into the event queue, just like any other property.
    The actual logic to shutdown the device is not executed until init
    gets to the action associated with the property change.
    
    This is bad for multiple reasons, but explicitly causes deadlock in
    the follow scenario:
    
    A service is started with `exec` or `exec_start`
    The same service sets sys.powerctl indicating to the system to
    shutdown
    The same service then waits infinitely
    
    In this case, init doesn't process any further commands until the exec
    service completes, including the command to reboot the device.
    
    This change causes init to immediately handle sys.powerctl and reboot
    the device regardless of the state of the event queue, wait for exec,
    or wait for property conditions.
    
    Bug: 37209359
    Bug: 37415192
    
    Test: Init reboots normally
    Test: Update verifier can reboot the system
    Change-Id: Iff2295aed970840f47e56c4bacc93001b791fa35

commit 66f44d823f51c2283ec6ec59675953949a4a63fb
Merge: b7826a74f 2e83b86a8
Author: Wei Wang <wvw@google.com>
Date:   Mon Apr 17 20:01:43 2017 +0000

    Merge "init.rc: set initial cpuset to all cores"

commit 8dbd12b948e732105ff6bf698972e34e7731d14d
Author: Wei Wang <wvw@google.com>
Date:   Thu Apr 13 18:27:35 2017 -0700

    init.rc: set initial cpuset to all cores
    
    Starting zygote early requires cpuset to be initialized to all cores for
    foreground cpuset. Change to expolit all cores by default at boot and
    let device manufacturers override to proper values in device specific
    init script.
    
    Bug: 36576280
    Test: marlin boot fast and checked cpuset during early boot
    Change-Id: I2c1ce0630e58a7b04d1a453c6740d3f0bce9de9f
    (cherry picked from commit 2e83b86a8a10c825799062770ed8c85878e5b4e1)

commit 2e83b86a8a10c825799062770ed8c85878e5b4e1
Author: Wei Wang <wvw@google.com>
Date:   Thu Apr 13 18:27:35 2017 -0700

    init.rc: set initial cpuset to all cores
    
    Starting zygote early requires cpuset to be initialized to all cores for
    foreground cpuset. Change to expolit all cores by default at boot and
    let device manufacturers override to proper values in device specific
    init script.
    
    Bug: 36576280
    Test: marlin boot fast and checked cpuset during early boot
    Change-Id: I2c1ce0630e58a7b04d1a453c6740d3f0bce9de9f

commit 5975d4e33724047d73883ca84fda8b360f2fe000
Merge: d12835d19 e1e6edcf3
Author: TreeHugger Robot <treehugger-gerrit@google.com>
Date:   Fri Apr 14 01:29:38 2017 +0000

    Merge changes I76212f65,I6a29c678 into oc-dev
    
    * changes:
      init.rc: create /data/misc/reboot owned by system
      reboot: fix owner and permissions of last_reboot_reason file

commit e092b72bf493ffb45013acb4b0ed567339446b18
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu Apr 13 15:29:56 2017 -0700

    init.rc: create /data/misc/reboot owned by system
    
    Directory will be read and modified by system uid.
    
    Bug: 37251463
    Test: Manual: reboot and inspect
    Change-Id: I76212f65af991ff9ad0969b9c0b8460b80fb9cd2

commit e1e6edcf336f88c643a7a3d703bd53eed9233b72
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu Apr 13 15:29:56 2017 -0700

    init.rc: create /data/misc/reboot owned by system
    
    Directory will be read and modified by system uid.
    
    Bug: 37251463
    Test: Manual: reboot and inspect
    Change-Id: I76212f65af991ff9ad0969b9c0b8460b80fb9cd2

commit 00cdc106623dc252fa3d76de6b86eed1ab3b8114
Author: Wei Wang <wvw@google.com>
Date:   Thu Apr 13 13:50:09 2017 -0700

    init.rc: start all 3 servicemanagers early
    
    With the binder traffic of composer moved to vndbinder,
    vndservicemanager is needed to be started early to get bootanim
    displayed quickly.
    
    Also servicemanager is required to be start early to support early
    bootanim and sufaceflinger.
    
    Bug: 37306311
    Test: bootanim regression fixed
    Change-Id: Ice1e05bdb3fe4e67a63a49f1db8afdb018c7b61b

commit dcf4d19dd9ace8b04b8659bd3e3c4803d315b3a5
Author: Jaesoo Lee <jaesoo@google.com>
Date:   Mon Apr 10 19:42:19 2017 +0900

    disable module loading after BOOT_COMPLETED broadcast
    
    This CL disables module loading by writing 1 to
    /proc/sys/kernel/modules_disabled when the property sys.boot_completed
    is set to 1 by ActivityManagerService (at the broadcast of
    PHASE_BOOT_COMPLETED).
    
    Bug: 36515654
    Test: tested on sailfish and verified that module loading is disabled in
    userdebug and enabled in eng mode
    Merged-In: Id38d34a6395966ab21e440614337c0cfca791ad0
    (cherry picked from commit 6ed19d1675ab7a9b45d1b82c90aac2be8f408a2e)
    
    Change-Id: I2faa459b450b3a64f854c832c6b91cbf682bbffa

commit 6ed19d1675ab7a9b45d1b82c90aac2be8f408a2e
Author: Jaesoo Lee <jaesoo@google.com>
Date:   Mon Apr 10 19:42:19 2017 +0900

    disable module loading after BOOT_COMPLETED broadcast
    
    This CL disables module loading by writing 1 to
    /proc/sys/kernel/modules_disabled when the property sys.boot_completed
    is set to 1 by ActivityManagerService (at the broadcast of
    PHASE_BOOT_COMPLETED).
    
    Bug: 36515654
    Test: tested on sailfish and verified that module loading is disabled in
    userdebug and enabled in eng mode
    Change-Id: Id38d34a6395966ab21e440614337c0cfca791ad0

commit ec0ab6524e78d79fe6a50aebcc5154ffa8d87072
Author: Janis Danisevskis <jdanis@google.com>
Date:   Thu Apr 6 12:44:59 2017 -0700

    Move early_hal start to late-fs trigger action
    
    The class early_hal is essentially for the keymaster hal which needs
    to be up before vold tries to unlock a storage encryption key (FDE or
    FBE). The current position is too early in the boot process, because
    on devices with legacy HAL the wrapper service uses system properties
    to find the legacy HAL.
    
    This patch moves the start of the early_hal class to the late-fs trigger
    action which runs right after the system property action.
    
    Test: Manually tested and update tested on bullhead, sailfish, and
          another device.
    Bug: 35764921
    
    Change-Id: I34b45b85f8450e9ef18861535fdb2ee963df8c9b
    (cherry picked from commit 1ad8d21947ae41bfb912f959fa8b93e7c86052fb)

commit 1ad8d21947ae41bfb912f959fa8b93e7c86052fb
Author: Janis Danisevskis <jdanis@google.com>
Date:   Thu Apr 6 12:44:59 2017 -0700

    Move early_hal start to late-fs trigger action
    
    The class early_hal is essentially for the keymaster hal which needs
    to be up before vold tries to unlock a storage encryption key (FDE or
    FBE). The current position is too early in the boot process, because
    on devices with legacy HAL the wrapper service uses system properties
    to find the legacy HAL.
    
    This patch moves the start of the early_hal class to the late-fs trigger
    action which runs right after the system property action.
    
    Test: Manually tested and update tested on bullhead, sailfish, and
          another device.
    Bug: 35764921
    
    Change-Id: I34b45b85f8450e9ef18861535fdb2ee963df8c9b

commit 38b573598743e93de663722a2abf60fbf49d2f91
Author: Steven Moreland <smoreland@google.com>
Date:   Wed Mar 29 09:59:44 2017 -0700

    init.rc: add class_start early_hal
    
    This class is used to start hals which are required in order to mount
    data (for instance keymaster).
    
    Test: works to start early_hal in internal
    Bug: 36278706
    Change-Id: If06908135e59b187683d8cf4cc4a00b490559081
    (cherry picked from commit 5d56bad4bde0168fb00da666cb136ff8f6d51b0f)

commit 5d56bad4bde0168fb00da666cb136ff8f6d51b0f
Author: Steven Moreland <smoreland@google.com>
Date:   Wed Mar 29 09:59:44 2017 -0700

    init.rc: add class_start early_hal
    
    This class is used to start hals which are required in order to mount
    data (for instance keymaster).
    
    Test: works to start early_hal in internal
    Bug: 36278706
    Change-Id: If06908135e59b187683d8cf4cc4a00b490559081

commit aaeb7923124790fd1971dc59f69bef0d0b113031
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Mar 28 13:28:38 2017 -0700

    init.rc: launch update_verifier with exec_start
    
    This allows update_verifier to raise it's priority and ioprio.
    
    Bug: 36511808
    Bug: 36102163
    Test: Boot bullhead
    Test: Verify boottime decrease on sailfish
    Change-Id: I5710c6a98dc7acee9063d1fa1d1c80668f0f1528
    (cherry picked from commit 1e2d8c7fce132773da8058f7210c0d990c4cb1a9)

commit 1e2d8c7fce132773da8058f7210c0d990c4cb1a9
Author: Tom Cherry <tomcherry@google.com>
Date:   Tue Mar 28 13:28:38 2017 -0700

    init.rc: launch update_verifier with exec_start
    
    This allows update_verifier to raise it's priority and ioprio.
    
    Bug: 36511808
    Bug: 36102163
    Test: Boot bullhead
    Test: Verify boottime decrease on sailfish
    Change-Id: I5710c6a98dc7acee9063d1fa1d1c80668f0f1528

commit da48f4938a75abc9672b9b70ad867618fbdd11f3
Merge: 3286a6fe7 352b3d737
Author: Steven Moreland <smoreland@google.com>
Date:   Mon Mar 27 17:37:30 2017 +0000

    Merge "Revert "Revert "Start hwservicemanager earlier.""" am: ca622b4e78 am: e326cb121e
    am: 352b3d737c
    
    Change-Id: I7cb77ed1a7e4d7d8cee945a1ddee0c448f350452

commit d627502bb074e8982cb86ce86de5fb3e35b310d1
Author: Steven Moreland <smoreland@google.com>
Date:   Fri Mar 24 16:23:07 2017 +0000

    Revert "Revert "Start hwservicemanager earlier.""
    
    This reverts commit 5011270225b7b61cd485cb67f694d15d8570a0e1.
    
    Now starting even earlier.
    
    Reason for revert: Needed change, reverted b/c broken device.
    
    Bug: 36278706
    Test: original DOA device boots
    Test: angler, bullhead, fugu, marlin, ryu
    Test: all these devices boot with wipe
    Test: all these devices boot with w/o wipe
    Test: lshal shows all included services
    
    Change-Id: Ic639aedf7834b1bd3a26d23d109727f5559317e9

commit 7d8408663933c517ce7500e33f299c45096cbfc0
Merge: db3d45fa4 ea6de14c5
Author: Thierry Strudel <tstrudel@google.com>
Date:   Fri Mar 24 14:42:14 2017 +0000

    Merge "Revert "Start hwservicemanager earlier."" am: 3ba313597d am: 263cf5c8d9
    am: ea6de14c5e
    
    Change-Id: Ia0b57d328df2fc47e7f5dee35930e43bb514c4f5

commit 3ba313597d82f9b69142c8526440727477904d2e
Merge: 438720ac2 501127022
Author: Thierry Strudel <tstrudel@google.com>
Date:   Fri Mar 24 14:33:16 2017 +0000

    Merge "Revert "Start hwservicemanager earlier.""

commit 5011270225b7b61cd485cb67f694d15d8570a0e1
Author: Steven Moreland <smoreland@google.com>
Date:   Fri Mar 24 05:43:06 2017 +0000

    Revert "Start hwservicemanager earlier."
    
    This reverts commit 9e363311743f6a33d642f715d8a16b53b4ee9304.
    
    Reason for revert: a DOA device
    
    Bug: 36546734
    
    Change-Id: I0456247d362fe43b8c37623d04432eb494f68f68

commit 5659c9cf1d882476a56100020fafde3a7d02d4ab
Merge: e80f0cc5f bc4d384d4
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Thu Mar 23 19:48:45 2017 +0000

    Merge "Create dir in /data for vendor customization" am: c39a31f002 am: bfc4da8369
    am: bc4d384d49
    
    Change-Id: Ic14d961fb28c1cbad6a2082a321a679580a69d2c

commit c39a31f002d291607126bd27b846408ee7030c04
Merge: 0e19795a6 61efb0dab
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Mar 23 19:36:51 2017 +0000

    Merge "Create dir in /data for vendor customization"

commit 61efb0dab850a2ac76216e28cc05392a1398276d
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Thu Mar 23 09:23:50 2017 -0700

    Create dir in /data for vendor customization
    
    Vendor owns /data/vendor.
    
    HAL data must go in /data/vendor/hardware/.
    
    Bug: 34980020
    Test: build and boot AOSP Marlin. Observe /data/vendor and
          /data/vendor/hardware exist and are empty.
    Change-Id: I6fe96e3c76a10a5eb480ba10e10d4d006de56c12

commit 2b9a3391d0928f49d264d920e6ba0288e2e83e44
Merge: 2afb68096 6c546660d
Author: Steven Moreland <smoreland@google.com>
Date:   Thu Mar 23 03:53:01 2017 +0000

    Merge "Start hwservicemanager earlier." am: fcd509298d am: 0a85db775e
    am: 6c546660d9
    
    Change-Id: Ifd4e04fef289f8ece3884434efa1a3c6d47890fa

commit fcd509298db10df8badbd15a1b9d44a8be946a2c
Merge: a06e1c9ee 9e3633117
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Thu Mar 23 03:39:39 2017 +0000

    Merge "Start hwservicemanager earlier."

commit 9e363311743f6a33d642f715d8a16b53b4ee9304
Author: Steven Moreland <smoreland@google.com>
Date:   Wed Mar 22 09:17:11 2017 -0700

    Start hwservicemanager earlier.
    
    Also start hals where hwservicemanager was started before.
    
    Bug: 36278706
    Test: internal marlin+angler boots
    Change-Id: Ia55d2ef747fcbd086a09e1bb856824b14343118b

commit 33a55b3d52836dd84333e665685206b21fbf0734
Merge: 7486e65a6 7d4d63ca1
Author: Wei Wang <wvw@google.com>
Date:   Wed Mar 22 00:34:33 2017 +0000

    init.rc: remove bg_non_interactive cgroup am: a27a91a5fd am: 20943abad0
    am: 7d4d63ca18
    
    Change-Id: I5c1d3a860c64dae63be5edcc91734805863d6f85

commit a27a91a5fd23730c9ef0af751cddf119d869e029
Author: Wei Wang <wvw@google.com>
Date:   Mon Mar 20 14:21:06 2017 -0700

    init.rc: remove bg_non_interactive cgroup
    
    We have seen cases when threads in this cgroup not scheduled for more than
    a few seconds in heavy workload situation and causing device freeze.
    In Linux, multiple threads placed in ROOT cgroup cause the CPU resource to
    be split per thread, rather than per group.
    Currently we have many threads in ROOT cgroup, which makes threads in
    bg_non_interactive cgroup to have "tiny" CPU resource other than 5%
    quota defined.
    
    Bug: 34193533
    Test: on marlin
    Change-Id: I7721f6196560fbedf6265e8b6db130cec9edefd7

commit a44f638a018d93a80334c13a1397c8ff810e3354
Merge: decccc2e8 f357e1989
Author: David Lin <dtwlin@google.com>
Date:   Sat Mar 11 01:35:24 2017 +0000

    Merge "init.rc: enable ledtrig-transient support for vibrator" am: 75b66a6f2a am: 64af4183a1
    am: f357e1989a
    
    Change-Id: I98daea756aceeaeaca099bfb6dd668c68c58a8dd

commit 75b66a6f2a8df72c98e6290435438c67f6c23081
Merge: 2d03e64b9 27b2c1e67
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Sat Mar 11 01:23:17 2017 +0000

    Merge "init.rc: enable ledtrig-transient support for vibrator"

commit 8c1e3292a83d01dc86bc919514e31c5ee2d13e89
Merge: 601ccfbcb 07ace6209
Author: Wei Wang <wvw@google.com>
Date:   Thu Mar 9 23:56:30 2017 +0000

    Merge "init.rc: make sure netd start after post-fs-data" am: f58280e7dc am: 449b59873f
    am: 07ace62093
    
    Change-Id: I68103aafa9a23e0bf177d91544e4fbd743d222e4

commit bae9ba340267225438900654a05bd1113998ecfb
Author: Wei Wang <wvw@google.com>
Date:   Thu Mar 9 12:35:02 2017 -0800

    init.rc: make sure netd start after post-fs-data
    
    Current init doesn't order the triggeres it scaned, and there is no
    guarantee that general event trigger exec first and then event+property
    triggers.
    
    This CL will make sure netd started after post-fs-data trigger is done.
    
    Bug: 35110957
    Test: marlin boots
    Change-Id: I7bb55af4e00f336682388abfa8a06eac2136b7d4

commit 27b2c1e678468d5001f1540c78ada9ba2d1e236e
Author: David Lin <dtwlin@google.com>
Date:   Wed Mar 8 17:36:18 2017 -0800

    init.rc: enable ledtrig-transient support for vibrator
    
    This change makes the init process to always attempts to enable
    transient trigger for vibrator. This allows the exported properties to
    change the ownership later at the on boot stage.
    
    Test: device vibrates with the driver supports ledtrig-transient
    
    Change-Id: If5eb7b7feaefe803f2ead634fbe4fc7b48da84ea
    Signed-off-by: David Lin <dtwlin@google.com>

commit 36baabf07bc83f6ba2c855d53f6b3157bd04cc8b
Merge: 576b77383 3b272c7bf
Author: Wei Wang <wvw@google.com>
Date:   Thu Mar 9 06:24:27 2017 +0000

    Merge "init.rc: start netd and zygote early for file based encryption devices" am: 4bf2bc078f am: 1a65e43878
    am: 3b272c7bf8
    
    Change-Id: Ie44f4fd8a04b1fa1d0a5c6f7e01410246589c9d9

commit 7f32aa4d046ad8573d6b636b0dfb010a2ea2d28f
Author: Wei Wang <wvw@google.com>
Date:   Wed Mar 8 14:46:50 2017 -0800

    init.rc: start netd and zygote early for file based encryption devices
    
    Bug: 35110957
    Test: marlin boots
    Change-Id: Ibe4c413e41fcf25a68b50d99ee66d9b70706a6a1

commit 43a356d2137fdac0b0077df0dc1f62c98e7de2aa
Merge: affc6cd0e 2980bc113
Author: Wei Wang <wvw@google.com>
Date:   Wed Mar 8 22:28:24 2017 +0000

    Merge "init.rc: add a new zygote-start trigger" am: 4e5e797d26 am: 0d9416ba2e
    am: 2980bc1139
    
    Change-Id: I56e6907db4063f6b527be710b00de9200aa8914a

commit 4e5e797d26272dc08b6336def8d7878443881f0e
Merge: eab4c62e2 a2058036e
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Wed Mar 8 22:18:10 2017 +0000

    Merge "init.rc: add a new zygote-start trigger"

commit a2058036ed70cac9943885cef0581cab6d14c058
Author: Wei Wang <wvw@google.com>
Date:   Wed Mar 8 12:36:54 2017 -0800

    init.rc: add a new zygote-start trigger
    
    Bug: 35110957
    Test: marlin boots
    Change-Id: I12b41588371486e79938df2f7a2152cda18530d1

commit ae31fd48b073549cbd040f1cf243cd55997b724a
Merge: 43c1d5c4e 197b3f736
Author: David Lin <dtwlin@google.com>
Date:   Wed Mar 8 18:50:09 2017 +0000

    Merge "init.rc: remove duplicated chown entry for timed_output" am: e88882e16e am: 9c23fcbcd9
    am: 197b3f736c
    
    Change-Id: I4a87933290c31305b03fbcaa5c719503d8928b32

commit 489450abe38a225db60b90a0f30f644c95a730ba
Author: David Lin <dtwlin@google.com>
Date:   Tue Mar 7 21:30:10 2017 -0800

    init.rc: remove duplicated chown entry for timed_output
    
    Test: build
    
    Change-Id: Ib15be4188cdce270a15bd90304be0704d9e54cbf
    Signed-off-by: David Lin <dtwlin@google.com>

commit a4f5d12b7155ec815fe6e1edbdb2f0fd79469c2e
Merge: 75361b8d5 11339c7e3
Author: Ryan Campbell <ryanjcampbell@google.com>
Date:   Tue Feb 28 23:37:10 2017 +0000

    Merge "Add global GCOV_PREFIX option." am: df0f792a9e am: 2d3378350a
    am: 11339c7e34
    
    Change-Id: I10d53220ea5e433ae0f027bf21750a239a588e9c

commit 0b364732723e5dcecc1a74a4f592e8afcbadd2ba
Author: Ryan Campbell <ryanjcampbell@google.com>
Date:   Tue Feb 21 17:27:02 2017 -0800

    Add global GCOV_PREFIX option.
    
    When native coverage is enabled, add a global GCOV_PREFIX
    environment variable specifying that gcda files be output
    with path prefix /data/local/tmp.
    
    Bug: 35635587
    Test: make NATIVE_COVERAGE=true; check init.environ.rc
    Change-Id: I40972aea3ca3168d0687bdc93e9d4b7b3a1071b9

commit 1cf50050e636f43e8c57cce38d76ccf8efd40120
Merge: 357119c11 056155195
Author: Todd Poynor <toddpoynor@google.com>
Date:   Fri Feb 10 21:43:22 2017 +0000

    Merge "init.rc: create /data/misc/reboot for storing reboot reason" am: e499403bf4 am: 4dbefe4d4c am: 23b31ba7e3
    am: 0561551951
    
    Change-Id: I5ea693f7f34903305e34391fcd7d7a7174c2ffd8

commit 44ee2b0ef84b10f19f77e21a16141a2e7c931d9c
Author: Todd Poynor <toddpoynor@google.com>
Date:   Tue Feb 7 20:03:04 2017 -0800

    init.rc: create /data/misc/reboot for storing reboot reason
    
    Create /data/misc/reboot if not already.
    
    Bug: 30994946
    Test: manual: reboot command; modified thermal-engine.conf
    Change-Id: I66418beba539f76759b44742af7700f26a2c1f87

commit 314bb2faf2afb763b68b3c74577a40c2c70f8276
Merge: d8f82e236 06e9f5de8
Author: Steven Moreland <smoreland@google.com>
Date:   Thu Jan 26 00:58:46 2017 +0000

    Merge "init.rc, typo: fs-post-data -> post-fs-data" am: 5b202c4376 am: e0ac5d8304 am: 311e4295dc
    am: 06e9f5de8c
    
    Change-Id: I1525db8d43c3c27fe7ae1b17dd97a99f28321c13

commit f38aab462179dea763207c5e7abc975a8302f82e
Author: Steven Moreland <smoreland@google.com>
Date:   Wed Jan 25 10:52:15 2017 -0800

    init.rc, typo: fs-post-data -> post-fs-data
    
    Test: pass
    Change-Id: Icafdb7ec61935b35db85096b49e7f232a456f620

commit 5150a8fb85d4cc63f8d0bf786d0702b23efdb5a5
Merge: 3a03efb85 32d18e220
Author: Josh Gao <jmgao@google.com>
Date:   Tue Jan 24 02:51:34 2017 +0000

    Actually don't start tombstoned until /data is mounted. am: 0ad5107e51 am: 1170d8201d am: bf8bd27bb3
    am: 32d18e2204
    
    Change-Id: I45fe22d5b83e6399aadc374976986e7f660d9eba

commit 0ad5107e51cb71c78a6de02cab2835ba9c1ae61d
Author: Josh Gao <jmgao@google.com>
Date:   Mon Jan 23 15:56:11 2017 -0800

    Actually don't start tombstoned until /data is mounted.
    
    Bug: http://b/34461270
    Test: boot is actually faster
    Test: tombstoned still started by init
    Change-Id: I4976abef108bbb6fad264f9b68cbc1fba711085b

commit 8c98938853678e7847a9ed0561d7223e6e764f5c
Merge: 872e52597 5d6ea5a9b
Author: Josh Gao <jmgao@google.com>
Date:   Fri Jan 20 22:27:44 2017 +0000

    Merge "init: don't start tombstoned until /data is mounted." am: b479a5002e am: f83489c02c am: d7db8378d0
    am: 5d6ea5a9bd
    
    Change-Id: I5ad79b54f9f42e6b04d81ca8123e5b41b03e92fb

commit b479a5002e99e7454ed07d7b4631704d4c611193
Merge: b5e530f72 42a0fed78
Author: Treehugger Robot <treehugger-gerrit@google.com>
Date:   Fri Jan 20 22:13:38 2017 +0000

    Merge "init: don't start tombstoned until /data is mounted."

commit 42a0fed78b761ab06f220786c29f51459265bdec
Author: Josh Gao <jmgao@google.com>
Date:   Fri Jan 20 12:08:10 2017 -0800

    init: don't start tombstoned until /data is mounted.
    
    When vold mounts the encrypted /data partition, it first checks for and
    kills processes that have open fds to the tmpfs placeholder at /data.
    This resulted in a 20 second boot-time regression (vold's timeout period)
    when tombstoned was started before vold.
    
    Bug: http://b/34461270
    Test: boot is faster, no messages from vold in console spew
    Test: tombstoned still started by init
    Change-Id: Ib5e9ddb05f40c9da852f00e103861c6ff2d94888

commit 4b499a1b137a7aa1aeb0d92e5402e1e91fd68baa
Merge: 987059e98 a69b7ea3a
Author: Dave Weinstein <olorin@google.com>
Date:   Fri Jan 20 20:34:40 2017 +0000

    Merge "Move the kptr_restrict setting from init.rc to init.cpp." am: c734a0a9ee am: 776978788b am: 7e79a571fd
    am: a69b7ea3a4
    
    Change-Id: Iabde07f1c50e62b5394386f5718ae5a3d40e7c3b

commit 44f7e4f42190fdb5309b818d5acc0ff6b0f87249
Author: Dave Weinstein <olorin@google.com>
Date:   Thu Jan 19 18:03:34 2017 -0800

    Move the kptr_restrict setting from init.rc to init.cpp.
    
    Also ensure that it uses the highest supported value, and
    abort if the value is not above a minimum threshold.
    
    Test: Tested against the curent kernel (maximum value of 2,
          set to 0 by the kernel initially) and against a
          modified kernel (maximum value of 4, set to 4 by the
          kernel initially)
    
    Bug: 30368199
    Change-Id: I608db577258b68b390ffe96f452e1f7c0bc9ad8a

commit 8cf0eba307d1d715d0eff6e00eb0973db550af87
Merge: 271a1a7cd 87b62dc44
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Jan 12 01:52:03 2017 +0000

    Merge "Set right attributes on tracing folder" am: 5d8bf9e6e2 am: f014e41731 am: 36eeceec84
    am: 87b62dc44c
    
    Change-Id: Ie1eeaf4d1e0dc63c80262376720abe96684a2590

commit 3d8ade3f247f34a6b47fef75dfacdad015b6ecc7
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Jan 11 15:45:53 2017 -0800

    Set right attributes on tracing folder
    
    Since splitting tracefs out from debugfs, we now need to set the
    attributes explicitly on tracing folder.
    
    Test: Run adb shell atrace -c -b 16000 -t 5 gfx
    Bug: 34197733
    Change-Id: If2a962332b6d1ec227e289bdf952213756e26186

commit b0aea04065409e45d788a77add95e40cbdac2295
Merge: 38266e595 352b9c628
Author: Elliott Hughes <enh@google.com>
Date:   Fri Dec 16 18:03:12 2016 +0000

    Merge "Improve init bootcharting." am: 4ee7861ee1 am: a6532b4717 am: 1a947725b8
    am: 352b9c6282
    
    Change-Id: I58b258cbf13bdcc874bcce35d4bb07378a8a1864

commit 4ee7861ee1665b74b491f267636d367bbfe11dd3
Merge: 3b261ace5 a3641af22
Author: Elliott Hughes <enh@google.com>
Date:   Fri Dec 16 17:32:26 2016 +0000

    Merge "Improve init bootcharting."

commit 9b2e2070993ab4886c7322723581272b1197db70
Merge: e024b3957 e432dc58c
Author: Sandeep Patil <sspatil@google.com>
Date:   Wed Dec 14 19:54:35 2016 +0000

    Merge "socket: uevent: use SO_RCVBUF instead of SO_RCVBUFFORCE" am: 0a2080bced am: 571e246983 am: c345388bea
    am: e432dc58c1
    
    Change-Id: Iab5bafe3e156dfb2fc75634c8d25b5f67991915e

commit 5fee496e6220228b4a9059e06e430178ee1ba1ec
Author: Sandeep Patil <sspatil@google.com>
Date:   Wed Dec 7 10:55:45 2016 -0800

    socket: uevent: use SO_RCVBUF instead of SO_RCVBUFFORCE
    
    The SO_RCVBUFFORCE option requires the caller of uevent_create_socket()
    to have net_admin capabilities.
    
    Set platform default rcv/snd buffer sizes to 256kb that will always be
    overridden by the device/target. However, it will allow
    ueventd / healthd to use the uevent_create_socket() API w/o requiring
    the net_admin capability.
    
    Note: All devices override the buffer sizes according to the technology
    maximum to at least ~8MB. So, the init.rc change here is to make sure
    platform code can work w/o any overrides.
    
    Test: no SELinux failures for healthd with 'net_admin' removed.
    
    Bug: https://b/32733887
    
    Change-Id: Ida346468cd550ad07901bf3a78ad508939849906
    Signed-off-by: Sandeep Patil <sspatil@google.com>

commit a3641af22fdb0f1b3127e4d56e65c13ad108d74a
Author: Elliott Hughes <enh@google.com>
Date:   Thu Nov 10 17:43:47 2016 -0800

    Improve init bootcharting.
    
    Most notably, there's no longer any need to guess an end time.
    
    Bug: http://b/23478578
    Bug: http://b/33450491
    Test: rebooted with bootcharting on/off
    Change-Id: Icb7d6859581da5526d77dfc5aa4d57c9bfbfd7e2

commit 107b8ec454d8ef3a8096a23b6fbafe8ed5442ce3
Merge: e84e12744 c3f9d38a4
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Nov 23 00:19:04 2016 +0000

    Merge "change /data/bugreports to /bugreports" am: 1b2e6abf3b am: 5fae86b5fa am: cb9fbb4cf6
    am: c3f9d38a4c
    
    Change-Id: Ie10d1db864543ad6cc8695267344453599408c52

commit 5fae86b5fa60a9af4e48745989554bf504bedc60
Merge: 960584eeb 1b2e6abf3
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Nov 23 00:11:13 2016 +0000

    Merge "change /data/bugreports to /bugreports"
    am: 1b2e6abf3b
    
    Change-Id: I7de15de91a688f8fe4a203a84b54e7dcfa106782

commit c4084c669495fd1b41ce8b6568c71b1f46d26969
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Nov 19 12:09:33 2016 -0800

    change /data/bugreports to /bugreports
    
    It's 5 characters shorter, has no runtime costs, can be stored on a
    read-only partition, and avoids problems like b/27262109 and b/27204904.
    It allows makes some security hardening easier.
    
    Bug: 27262109
    Bug: 27204904
    Bug: 32799236
    Test: verified new symlink created and old one not present
    Change-Id: Ief362e13569ad9c868a7f0f9c4dbd6a328c96c6b

commit 8e22b4b9ecc3a6bdbd4bdaf1d02cb99f3485252c
Merge: 2c29ee327 6bef57560
Author: Nick Kralevich <nnk@google.com>
Date:   Sun Nov 20 01:11:05 2016 +0000

    init.rc: delete extra whitespace am: 715e33452e am: 70056e91fe
    am: 6bef57560f
    
    Change-Id: I8379eecc012dafb16e037e7fae8386df6b677303

commit 715e33452e728855251578d918467d94666fe10a
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Nov 19 16:07:40 2016 -0800

    init.rc: delete extra whitespace
    
    causes merge conflicts.
    
    Test: none
    Change-Id: Ic83db2b3e2f972955efadfc8df8fe8ec918a7609

commit 0705fcb2f4ecf0cf3b9799dc1741b9b6c0f8ab3a
Merge: 364430952 e799e3317
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Nov 17 18:30:22 2016 +0000

    Merge "Add flags to restorecon_recursive to traverse filesystems" am: 5fbd1cfd34 am: ffa3689107 am: a99490c813
    am: e799e3317a
    
    Change-Id: Icd4b867d450c7b84f86f9d91b39faf6792544cb1

commit ffa3689107d0e9c944e5d877dd8e857e1d22cb65
Merge: 5a411029d 5fbd1cfd3
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Nov 17 17:55:06 2016 +0000

    Merge "Add flags to restorecon_recursive to traverse filesystems"
    am: 5fbd1cfd34
    
    Change-Id: I539d7e9d441c7bb3f5602b892408a85436b857e8

commit a8d8434c42b27f0186be7ecd78c2acc9d459b068
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Nov 14 15:40:18 2016 -0800

    Add flags to restorecon_recursive to traverse filesystems
    
    Use to solve the problem of tracefs conditionally being mounted
    under debugfs and needing restorecon'd without boot performance
    penalty.
    
    Also move skip-ce to a flag for consistency.
    
    Test: Check that trace_mount has correct attributes after boot
    Bug: 32849675
    Change-Id: Ib6731f502b6afc393ea5ada96fa95b339f14da49

commit c488087aa0d13ed0b73b7fabbd65c4cd57905192
Author: Tianjie Xu <xunchang@google.com>
Date:   Tue Jul 12 18:31:17 2016 -0700

    Start update_verifier in cache group
    
    Start update_verifier in cache group to avoid dac_override
    
    Bug: 30020920
    Change-Id: I227b4a0e1c07e7b9bf209b432e9db02275ffe660
    Test: mma
    (cherry picked from commit 1e4635f0a8c307592b015476bc69ee2da28c41af)

commit cb221cee180d9b30f5278fc24160c5deede9d739
Merge: 644a868ee 526f8cf33
Author: Sandeep Patil <sspatil@google.com>
Date:   Tue Nov 8 23:45:13 2016 +0000

    Merge changes from topic 'healthd-charger-split'
    
    * changes:
      healthd: refactor healthd code to split into 'charger' and 'healthd'
      healthd: build 'charger' and 'healthd' binaries
      healthd: refactor to split charger and framework facing code

commit 6012db553c87f4f4b039a7d42e3b80ce9480f20f
Author: Sandeep Patil <sspatil@google.com>
Date:   Tue Nov 1 08:45:19 2016 -0700

    healthd: build 'charger' and 'healthd' binaries
    
    This renames the old '/sbin/healthd' to '/sbin/charger'
    which is to be only used in recovery and charger-only mode.
    
    .. and adds a new dynamically linked executable in /system/bin/healthd
    to be used as 'healthd' in Android.
    
       text    data     bss     dec     hex filename
     817404   36704   37960  892068   d9ca4 root/sbin/charger {was healthd}
      72717   11064   12984   96765   179fd system/bin/healthd {*new*}
     890121   47768   50944  988833   f16a1 (TOTALS)
    
    Corresponding changes in recovery and charger-only .rc files are
    required change how 'charger' is launched in each mode.
    
    Update the seclable for healthd with the launch path in init.rc
    
    Test: Boot tested and verified all 3 modes (recovery, charge-only,
    android)
    
    Change-Id: I4ada27a4c113258c5be1fd10adb0f58232b10024
    Signed-off-by: Sandeep Patil <sspatil@google.com>

commit ef2479247dc9cace694854a8ba4e526cd0f1d171
Merge: f5eee7d38 a0d26e7cd
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Nov 7 15:22:23 2016 +0000

    Merge "Fix selinux warning on tracefs systems" am: 0ad600bdc6 am: 3915012a46 am: 67387a3510
    am: a0d26e7cdd
    
    Change-Id: I004165050ab96c3a9a7f1fbcdadf84c22b8256d9

commit 3915012a461c2e9d77e5547c9b056e43d95bf07c
Merge: fbff89276 0ad600bdc
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Nov 7 15:07:22 2016 +0000

    Merge "Fix selinux warning on tracefs systems"
    am: 0ad600bdc6
    
    Change-Id: Ibaab6580caf0fe216cfae72bf5d2560fec02afdf

commit d2abcbd0aba8197040e940d898eb8e28b9fc675d
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Nov 2 14:23:31 2016 -0700

    Fix selinux warning on tracefs systems
    
    restorecon_recursive doesn't traverse filesystem boundaries. On
    tracefs systems, tracing is a separate filesystem, so restorecon
    this as well
    
    Bug: 30963384
    Test: Boot hikey, and check that there are no debugfs_tracing denials in dmesg
    Change-Id: I24abd3ad80d2cfdab4f64fecee799fc0c24ed238

commit f8f334966da0158eea5ba8d6e6f1aa8b462c35a6
Merge: 7ce35c558 0c54c1e8d
Author: Steven Moreland <smoreland@google.com>
Date:   Wed Nov 2 22:38:35 2016 +0000

    Merge "Update for hidlized hwservicemanager." am: 480af3f633 am: 82c67f5662 am: b394786624
    am: 0c54c1e8d6
    
    Change-Id: I8a186016e14aa4137233fc97f949b14bac7f19cd

commit 82c67f566203bf4812774e3154a40518a2197d62
Merge: b870bbd69 480af3f63
Author: Steven Moreland <smoreland@google.com>
Date:   Wed Nov 2 22:23:56 2016 +0000

    Merge "Update for hidlized hwservicemanager."
    am: 480af3f633
    
    Change-Id: I2c11b0249ab77e9dc22a76f6aa66026ebf3ed00d

commit ba825ac33f280e41bf6226370029551d89b39b28
Author: Steven Moreland <smoreland@google.com>
Date:   Mon Oct 24 13:34:31 2016 -0700

    Update for hidlized hwservicemanager.
    
    Bug: 32313592
    Test: end to end
    Change-Id: I76a7ee01413b28e95e9f19fcde90f6372502ec67

commit 1797eb1f09958b4a464262b476d674c2f2559a0c
Merge: 3cea7624b 121fe849e
Author: Iliyan Malchev <malchev@google.com>
Date:   Tue Sep 27 00:22:46 2016 +0000

    init.rc: have hwservicemanager start the HAL class am: 57d66b8447 am: ad0cbcf21c am: f0099ccb23
    am: 121fe849e8
    
    Change-Id: I6cba53d417d505b56e8294afaad473399f692beb

commit 121fe849e866b34426d5d3a60c24c0b776283d8b
Merge: ac129cbaa f0099ccb2
Author: Iliyan Malchev <malchev@google.com>
Date:   Tue Sep 27 00:16:50 2016 +0000

    init.rc: have hwservicemanager start the HAL class am: 57d66b8447 am: ad0cbcf21c
    am: f0099ccb23
    
    Change-Id: I5c24ecbf89d723c478a02bcab8cffc4e9e4385e9

commit 57d66b84478ef39aa5d39c4c58f1b6b04be10993
Author: Iliyan Malchev <malchev@google.com>
Date:   Mon Sep 19 15:08:38 2016 -0700

    init.rc: have hwservicemanager start the HAL class
    
    b/31458381
    Test: passing build and runtime tests
    
    Change-Id: I1d26af5ca1d0e9c7bbd97cfd88d0b432b50b7216
    Signed-off-by: Iliyan Malchev <malchev@google.com>

commit ac657cd0d2118ab19bf14bc984f81cd1624f9a81
Merge: 13cc6357a 531b201eb
Author: Ajay Panicker <apanicke@google.com>
Date:   Fri Sep 23 00:04:45 2016 +0000

    Merge "Remove net_bt_stack group and replace it with bluetooth" am: 7875407bb7 am: f924c252bd am: b0db9714bb
    am: 531b201eb6
    
    Change-Id: Ie822dd8f259f240eb457f5d67948c417f84817c6

commit 531b201eb684512fe5f10a2e6387369cd800d66f
Merge: 7673c4dc8 b0db9714b
Author: Ajay Panicker <apanicke@google.com>
Date:   Thu Sep 22 21:58:27 2016 +0000

    Merge "Remove net_bt_stack group and replace it with bluetooth" am: 7875407bb7 am: f924c252bd
    am: b0db9714bb
    
    Change-Id: I025c5301fecf0566d8184efce099a195fdbfc460

commit 604208e957ad6fb692c445b0f598579051d2071a
Author: Ajay Panicker <apanicke@google.com>
Date:   Tue Sep 20 11:52:14 2016 -0700

    Remove net_bt_stack group and replace it with bluetooth
    
    Bug: 31549206
    Change-Id: I667963e5f9fd1a5dc9ad74378b318e3b782e6883

commit 35a0ef524bc610512603c85d3337874b487d7634
Merge: 2f00b2568 bf2b7a93b
Author: Ajay Panicker <apanicke@google.com>
Date:   Tue Sep 20 03:25:22 2016 +0000

    Merge "Allow bluetooth service to access bluetooth directory and add /logs (1/6)" am: 2c2a3f7a95 am: 3a9a16ee79 am: f5ffb20e6f
    am: bf2b7a93b2
    
    Change-Id: Iac994fa66eeb7b4e84cd72891ff7449bb51f9da3

commit bf2b7a93b2c1f7cc2059f590658da6af6304c0b1
Merge: b24fb5b10 f5ffb20e6
Author: Ajay Panicker <apanicke@google.com>
Date:   Mon Sep 19 20:26:21 2016 +0000

    Merge "Allow bluetooth service to access bluetooth directory and add /logs (1/6)" am: 2c2a3f7a95 am: 3a9a16ee79
    am: f5ffb20e6f
    
    Change-Id: Ied3f4a26681d0c1e3bd72d4f1d0de77fa9e7803a

commit 59d6a8cf8a4867a10f56b36057bffcc344715d3f
Author: Ajay Panicker <apanicke@google.com>
Date:   Thu Sep 15 15:30:11 2016 -0700

    Allow bluetooth service to access bluetooth directory and add /logs (1/6)
    
    Bug: 31466840
    Change-Id: I2c2766a2366600def81708d97cf3f3f13e0eb655

commit d61a7e2da4e6184797f866abf8020bfe3b928ab0
Author: Wei Wang <wvw@google.com>
Date:   Tue Aug 23 11:58:09 2016 -0700

    Split fstab mount into 2 phases
    
    This will make it possible to start some key services before mounting
    data partition
    
    Bug: 30118894
    Change-Id: Ia9f8cc035de6cc0df9a61605864915efa0266d7f
    (cherry picked from commit abfbec342fdd2fc9d139a88a2d950953918e1b4e)

commit 254f44363b85f4665b1942762a708bf87301a462
Author: Wei Wang <wvw@google.com>
Date:   Tue Aug 23 11:58:09 2016 -0700

    Split fstab mount into 2 phases
    
    This will make it possible to start some key services before mounting
    data partition
    
    (cherry picked from commit abfbec342fdd2fc9d139a88a2d950953918e1b4e)
    
    Bug: 30118894
    Change-Id: Ia9f8cc035de6cc0df9a61605864915efa0266d7f

commit abfbec342fdd2fc9d139a88a2d950953918e1b4e
Author: Wei Wang <wvw@google.com>
Date:   Tue Aug 23 11:58:09 2016 -0700

    Split fstab mount into 2 phases
    
    This will make it possible to start some key services before mounting
    data partition
    
    Bug: 30118894
    Change-Id: Ia9f8cc035de6cc0df9a61605864915efa0266d7f

commit 7edd3146c7ee2e8794dba1300cdc9430c81c823d
Merge: 734d5fbec 872b6e879
Author: Tianjie Xu <xunchang@google.com>
Date:   Thu Jul 14 23:06:49 2016 +0000

    Merge \\"Start update_verifier in cache group\\" into nyc-mr1-dev am: eddde7a130
    am: 872b6e8790
    
    Change-Id: Iac20bb4571292da8b783de8185dff93dc04850b9

commit 872b6e879001952d61437272fd78076a3b385d18
Merge: 1110245f2 eddde7a13
Author: Tianjie Xu <xunchang@google.com>
Date:   Thu Jul 14 22:43:16 2016 +0000

    Merge \"Start update_verifier in cache group\" into nyc-mr1-dev
    am: eddde7a130
    
    Change-Id: Ia17697a852687f319050a8cf260316f522564085

commit eddde7a130e8ee732ead4ba5453c6d6d3078d091
Merge: c52591557 1e4635f0a
Author: Tianjie Xu <xunchang@google.com>
Date:   Thu Jul 14 22:27:08 2016 +0000

    Merge "Start update_verifier in cache group" into nyc-mr1-dev

commit 5408a76637eb8370eff5fafc50cf0bfe6ee9d2b7
Merge: 652f2bb71 b05988b33
Author: Pat Tjin <pattjin@google.com>
Date:   Thu Jul 14 19:23:27 2016 +0000

    Merge \\"core/init.rc: Add /data/cache/* directory creation\\" into nyc-mr1-dev am: 46066ef405
    am: b05988b33a
    
    Change-Id: Iae9bc319eaad99364b59772260867fb90b08eeae

commit b05988b33a3a2a97a9c5d6f1062aa25a8accdb44
Merge: cd571636f 46066ef40
Author: Yueyao (Nathan) Zhu <yueyao@google.com>
Date:   Thu Jul 14 18:34:21 2016 +0000

    Merge \"core/init.rc: Add /data/cache/* directory creation\" into nyc-mr1-dev
    am: 46066ef405
    
    Change-Id: Id67c7a2177520da1f3848642a68442c55b4f863d

commit 46066ef405fc0679d73d0f6c0b14f2f50f4f2ed6
Merge: 3ad493d96 60c6dacd6
Author: Pat Tjin <pattjin@google.com>
Date:   Thu Jul 14 18:28:50 2016 +0000

    Merge "core/init.rc: Add /data/cache/* directory creation" into nyc-mr1-dev

commit 1e4635f0a8c307592b015476bc69ee2da28c41af
Author: Tianjie Xu <xunchang@google.com>
Date:   Tue Jul 12 18:31:17 2016 -0700

    Start update_verifier in cache group
    
    Start update_verifier in cache group to avoid dac_override
    
    Bug: 30020920
    Change-Id: I227b4a0e1c07e7b9bf209b432e9db02275ffe660

commit e43d1d523e550284fa85d44c7139ff0c662b3ada
Merge: 51dcc811d b386d7226
Author: Tim Murray <timmurray@google.com>
Date:   Tue Jul 12 02:46:06 2016 +0000

    Merge \\"Add support for background stune group.\\" into nyc-mr1-dev am: 531bdd5a2c
    am: b386d72266
    
    Change-Id: Ib0e2efeef7e015e0e8244e29a825bf3da50297a8

commit 51dcc811dc564990761c12133b7326314e4faaf9
Merge: 1af798ddc ddb0f3c61
Author: Irina Patru <irina.patru@intel.com>
Date:   Tue Jul 12 02:46:05 2016 +0000

    Merge \\"init.rc: Remove cpu weight set on the root cgroup\\" into nyc-mr1-dev am: ac957cbd72
    am: ddb0f3c612
    
    Change-Id: Ia872bcedde94c70dadc2c3a4e69e2d5cd375c28f

commit 1af798ddc5435683a398273fc68c716f03dfd772
Merge: c8433fbe3 3886aaeae
Author: Tim Kryger <tkryger@google.com>
Date:   Tue Jul 12 02:46:05 2016 +0000

    Merge \\\\"Remove attempt to write sched_compat_yield\\\\" am: 3f2db32b8c am: 49a986bf73 am: f789bd0133
    am: 3886aaeae4
    
    Change-Id: I6da3999160ca054e0d8e819e4b35420ae19507c7

commit 17b1c0c0611d1acd97b4416f738e825592d540c7
Merge: 45473db58 b8a19f449
Author: Tim Murray <timmurray@google.com>
Date:   Tue Jul 12 02:05:02 2016 +0000

    Merge changes from topic \\'stune\\' into nyc-mr1-dev am: 4b75a86858
    am: b8a19f4499
    
    Change-Id: Iecdd4d4693534640aef408f40aa3fd1e1fa9b93e

commit 3f947d1c58774487579ab5cc784ae781fe7c44c8
Merge: 531bdd5a2 f3e1f13d8
Author: TreeHugger Robot <treehugger-gerrit@google.com>
Date:   Tue Jul 12 00:09:03 2016 +0000

    Merge "Remove attempt to write sched_compat_yield" into nyc-mr1-dev

commit b386d72266fd8eb933fed0037e4f6e1bbcdce126
Merge: ddb0f3c61 531bdd5a2
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jul 11 23:55:17 2016 +0000

    Merge \"Add support for background stune group.\" into nyc-mr1-dev
    am: 531bdd5a2c
    
    Change-Id: Ia3be10db68dffc44e2d70535544c7c59d0933f7d

commit 531bdd5a2cde3a8152ae6c10336525518430ae25
Merge: ac957cbd7 5dcff8f2b
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jul 11 23:21:11 2016 +0000

    Merge "Add support for background stune group." into nyc-mr1-dev

commit ddb0f3c6129939b2b1f8a43e4eee6c703646a09e
Merge: 3886aaeae ac957cbd7
Author: Irina Patru <irina.patru@intel.com>
Date:   Mon Jul 11 22:29:13 2016 +0000

    Merge \"init.rc: Remove cpu weight set on the root cgroup\" into nyc-mr1-dev
    am: ac957cbd72
    
    Change-Id: I00c942a5d3e283efe40541c12f7daac2d2c77770

commit f3e1f13d81138f9afb573dbcbd5cb321d48e676c
Author: Tim Kryger <tkryger@google.com>
Date:   Mon Jul 11 11:20:55 2016 -0700

    Remove attempt to write sched_compat_yield
    
    The sched_compat_yield option was eliminated in Linux 2.6.38 by commit
    ac53db596cc0 ("sched: Use a buddy to implement yield_task_fair()") and
    as a result, the following error is printed to the log during boot up.
    
    init: write_file: Unable to open '/proc/sys/kernel/sched_compat_yield':
    No such file or directory"
    
    Bug: 30034121
    Change-Id: Idbdb68de0cb3ab1f67d82a4d66af880bcfdfe261
    (cherry picked from commit 724dfbac70ce69c48d3457229411c1c84e9f1c3d)

commit ac957cbd72ceb7a916e2e500242189c86d82e20a
Merge: 4b75a8685 23ad7517d
Author: TreeHugger Robot <treehugger-gerrit@google.com>
Date:   Mon Jul 11 22:20:22 2016 +0000

    Merge "init.rc: Remove cpu weight set on the root cgroup" into nyc-mr1-dev

commit 3886aaeae4dff26219c5785a37ca7637b2c73d8d
Merge: a38bb11ff f789bd013
Author: Tim Kryger <tkryger@google.com>
Date:   Mon Jul 11 21:44:49 2016 +0000

    Merge \\\"Remove attempt to write sched_compat_yield\\\" am: 3f2db32b8c am: 49a986bf73
    am: f789bd0133
    
    Change-Id: I7434b27cf1662543efbe7b5d9fee6bac16cc9f26

commit 49a986bf735d707ab45f6c375c0585fd65f9525a
Merge: 619875061 3f2db32b8
Author: Tim Kryger <tkryger@google.com>
Date:   Mon Jul 11 21:31:08 2016 +0000

    Merge \"Remove attempt to write sched_compat_yield\"
    am: 3f2db32b8c
    
    Change-Id: I13c56436dd00cf2d5336ba757ae2c32d2e2504b5

commit 5dcff8f2b19a53abe7c632a22f455df396554afe
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jul 11 13:57:31 2016 -0700

    Add support for background stune group.
    
    bug 29512132
    
    Change-Id: If8144bfee0fb30cf11f2bb26494ca5e83c11d4d7

commit b8a19f4499240fbc8bc88a7e4fd0365deaeca737
Merge: 67410f857 4b75a8685
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jul 11 20:35:56 2016 +0000

    Merge changes from topic \'stune\' into nyc-mr1-dev
    am: 4b75a86858
    
    Change-Id: Ib11061d5d539f2e82ad16f122ea7d7b621bd988d

commit 23ad7517d21c9751f571232c91f9e74822a5f60e
Author: Irina Patru <irina.patru@intel.com>
Date:   Thu May 12 14:41:57 2016 +0300

    init.rc: Remove cpu weight set on the root cgroup
    
    It isn't allowed to change the cpu.share value for the root cgroup.
    See kernel commit:
    https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=ec7dc8ac73e4a56ed03b673f026f08c0d547f597
    
    This fixes the following error seen in dmesg:
    init: write_file: Unable to write to '/dev/cpuctl/cpu.shares': Invalid argument
    
    BUG: 28735908
    
    Change-Id: I5ef359fb275792f99d13d35c62499026d354f6af
    Signed-off-by: Irina Patru <irina.patru@intel.com>
    (cherry picked from commit c560c6310fdb6f8d4a44b05c0d15cad7ac6f4bb1)

commit 724dfbac70ce69c48d3457229411c1c84e9f1c3d
Author: Tim Kryger <tkryger@google.com>
Date:   Mon Jul 11 11:20:55 2016 -0700

    Remove attempt to write sched_compat_yield
    
    The sched_compat_yield option was eliminated in Linux 2.6.38 by commit
    ac53db596cc0 ("sched: Use a buddy to implement yield_task_fair()") and
    as a result, the following error is printed to the log during boot up.
    
    init: write_file: Unable to open '/proc/sys/kernel/sched_compat_yield':
    No such file or directory"
    
    Bug: 30034121
    Change-Id: Idbdb68de0cb3ab1f67d82a4d66af880bcfdfe261

commit 955694b657012c50312de99e6f78084beae52d60
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jul 11 11:40:15 2016 -0700

    Add support for top-app stune group.
    
    bug 29512132
    
    Change-Id: I41ec2dd80a469309f48dbb59fc27fbe43fcd67b3

commit 10b2ad167a11e78857fb7a964ebc9225f00a1f6e
Merge: 589a335a6 6469fa2a7
Author: Tim Murray <timmurray@google.com>
Date:   Thu Jul 7 20:47:56 2016 +0000

    resolve merge conflicts of 3a29e34 to nyc-mr1-dev-plus-aosp
    am: 6469fa2a7e
    
    Change-Id: I36b1580a9ce0548b27059699998289aa34fade7d

commit 6469fa2a7e1ef0b8ac977df321a0360f22556cba
Merge: aa32e374c 3a29e344b
Author: Tim Murray <timmurray@google.com>
Date:   Thu Jul 7 13:40:18 2016 -0700

    resolve merge conflicts of 3a29e34 to nyc-mr1-dev-plus-aosp
    
    Change-Id: I4edd53094a98fcb3cd3e1b063122d13f80d36d3c

commit 3a29e344b0d0b184954d505a58e61141300e0dd2
Author: Tim Murray <timmurray@google.com>
Date:   Fri Jun 17 14:02:16 2016 -0700

    Update FIFO settings for new uses of FIFO.
    
    Adjust FIFO timings as well as allow SurfaceFlinger to use FIFO.
    
    bug 24503801
    
    Change-Id: I2c21d4c1788777c2d0d77227bb872701b35c4ff6

commit 60c6dacd62cf671cd6038285f3754d33631f643c
Author: Yueyao (Nathan) Zhu <yueyao@google.com>
Date:   Tue Jun 21 12:04:54 2016 -0700

    core/init.rc: Add /data/cache/* directory creation
    
    Bug: 28845422
    Change-Id: I2abcc67176cf94f34706f8f005a24ef5f70e0494

commit abb116523661acce48fa8fc11f4056b9ca24f240
Merge: 575b10aa9 27bbf8953
Author: Tao Bao <tbao@google.com>
Date:   Tue Jun 7 04:45:48 2016 +0000

    Merge "Create /data/ota_package for OTA packages." into nyc-mr1-dev am: f9b7f7fdba
    am: 27bbf8953d
    
    * commit '27bbf8953d5a141912fe9325a4995da18ca86a6d':
      Create /data/ota_package for OTA packages.
    
    Change-Id: I243ec91e45bf202a6867645504eb963b64262556

commit 27bbf8953d5a141912fe9325a4995da18ca86a6d
Merge: 3b2920a80 f9b7f7fdb
Author: Tao Bao <tbao@google.com>
Date:   Tue Jun 7 04:43:14 2016 +0000

    Merge "Create /data/ota_package for OTA packages." into nyc-mr1-dev
    am: f9b7f7fdba
    
    * commit 'f9b7f7fdba6f62309372fee7c619de1edd8aa389':
      Create /data/ota_package for OTA packages.
    
    Change-Id: I8d0cb3b8687d376efbfbbf186f858bef1c7ccf8e

commit 380d6b1b4dae020e2319add3abb6b0e6fa0c79d3
Author: Tao Bao <tbao@google.com>
Date:   Wed May 25 16:41:08 2016 -0700

    Create /data/ota_package for OTA packages.
    
    We will store OTA packages there for both A/B and non-A/B OTAs. The
    directory will be accessed by GMSCore (for both), uncrypt (non-A/B),
    update_engine (A/B), update_verifier (A/B) and possibly system server
    (for non-A/B OTAs to clean up half-way uncrypt'd packages).
    
    Bug: 28944800
    Change-Id: I5aa8156ec5052bd15dfadd4d8c28925d464e4401

commit f97ae58686c556d0fb463f393785b697d8323999
Merge: e68f363f3 0e7344f1c
Author: Jeffrey Vander Stoep <jeffv@google.com>
Date:   Thu Jun 2 01:30:50 2016 +0000

    Merge "add a property for controlling perf_event_paranoid" am: 9292d7dae3 am: a6d6f45037 am: 680b2f3cb6
    am: 0e7344f1ca
    
    * commit '0e7344f1cad902133480d5137af2bdae1bf255e4':
      add a property for controlling perf_event_paranoid
    
    Change-Id: Ib4536fb05b7a3842f208e29bb6ace43ec87f1a39

commit fe01f56c0d5c42508e1e82f5976e4c10bb00f632
Author: Daniel Micay <danielmicay@gmail.com>
Date:   Fri Sep 4 16:23:01 2015 -0400

    add a property for controlling perf_event_paranoid
    
    (Cherry picked from commit 2b22a66382db8a2fdf5ed7a685085a6d7d67cf12)
    
    This adds a system property for controlling unprivileged access to
    perf_event_paranoid. It depends on adding kernel support for
    perf_event_paranoid=3 based on grsecurity's PERF_HARDEN feature to
    completely disable unprivileged access to perf. A minimal port of this
    feature is used in the vanilla Debian kernel by default.
    
    It hides the non-hardened value as an implementation detail, since while
    it is currently 1, it will probably become 2 in the future.
    
    Bug: 29054680
    
    Change-Id: I6e3ae3cf18d8c76df94f879c34fb6fde519b89a9

commit 680b2f3cb61e29a46d0d6bdf89394dd96e82f201
Merge: 6ed783a72 a6d6f4503
Author: Jeffrey Vander Stoep <jeffv@google.com>
Date:   Wed Jun 1 23:33:12 2016 +0000

    Merge "add a property for controlling perf_event_paranoid" am: 9292d7dae3
    am: a6d6f45037
    
    * commit 'a6d6f45037025175b3074661c9d2d80931d71817':
      add a property for controlling perf_event_paranoid
    
    Change-Id: Ic1e1a1365735f73edde6767bf71da8c6e59b46a4

commit bc3ff3a7a2dd7658f24d210eaf2fe532cb878eaa
Merge: 745b40e8f 0be76bb96
Author: David Sehr <sehr@google.com>
Date:   Wed Jun 1 14:13:40 2016 +0000

    add /data/misc/profman for output am: 0eb24e1bc7 am: cdc503c13b
    am: 0be76bb96f
    
    * commit '0be76bb96f718d802cfed09b41202fb07ba867af':
      add /data/misc/profman for output
    
    Change-Id: Ic2c4c42e2cb59cfb609963a36b29325f7044041d

commit 0be76bb96f718d802cfed09b41202fb07ba867af
Merge: 380693666 cdc503c13
Author: David Sehr <sehr@google.com>
Date:   Wed Jun 1 14:05:15 2016 +0000

    add /data/misc/profman for output am: 0eb24e1bc7
    am: cdc503c13b
    
    * commit 'cdc503c13b153c8a9216725dcd0f03ee6414161e':
      add /data/misc/profman for output
    
    Change-Id: I60764f97eacd6853f17baed62bb6beee67fbc6fa

commit b829f909f7ea2e7c14f0121390f83130b4b9b4a5
Merge: deb4e6e59 0eb24e1bc
Author: David Sehr <sehr@google.com>
Date:   Wed Jun 1 14:01:10 2016 +0000

    add /data/misc/profman for output
    am: 0eb24e1bc7
    
    * commit '0eb24e1bc7317eb5764567223cdd9405d16aefa7':
      add /data/misc/profman for output
    
    Change-Id: Id672a7e5f4b64c9b3d707b4f45f1e7f8ce40ca34

commit 0eb24e1bc7317eb5764567223cdd9405d16aefa7
Author: David Sehr <sehr@google.com>
Date:   Sat May 28 14:10:38 2016 -0700

    add /data/misc/profman for output
    
    Bug: 28748264
    Change-Id: Ib57ccc570de446e03ea8c27ce8e404929138b213

commit 2b22a66382db8a2fdf5ed7a685085a6d7d67cf12
Author: Daniel Micay <danielmicay@gmail.com>
Date:   Fri Sep 4 16:23:01 2015 -0400

    add a property for controlling perf_event_paranoid
    
    This adds a system property for controlling unprivileged access to
    perf_event_paranoid. It depends on adding kernel support for
    perf_event_paranoid=3 based on grsecurity's PERF_HARDEN feature to
    completely disable unprivileged access to perf. A minimal port of this
    feature is used in the vanilla Debian kernel by default.
    
    It hides the non-hardened value as an implementation detail, since while
    it is currently 1, it will probably become 2 in the future.
    
    Bug: 29054680
    
    Change-Id: I6e3ae3cf18d8c76df94f879c34fb6fde519b89a9

commit 0ba7983b9f00a4ca1398cab665a4f242ae749086
Merge: e47159e65 403461f67
Author: Irina Patru <irina.patru@intel.com>
Date:   Thu May 12 18:22:58 2016 +0000

    Merge "init.rc: Remove cpu weight set on the root cgroup" am: 422492c506 am: 2618d90c2f am: 12397f202f
    am: 403461f67d
    
    * commit '403461f67d47e1156115d6e1be3925e48cb182f7':
      init.rc: Remove cpu weight set on the root cgroup
    
    Change-Id: Iabaf0f78e60a5e3ac28f88d6951d49cde8717940

commit 12397f202f97da7dcd40d45159696bc6be50aaf6
Merge: 5d76be85a 2618d90c2
Author: Irina Patru <irina.patru@intel.com>
Date:   Thu May 12 18:13:14 2016 +0000

    Merge "init.rc: Remove cpu weight set on the root cgroup" am: 422492c506
    am: 2618d90c2f
    
    * commit '2618d90c2fa3f952a195dfd4ecd9f92ec462bccb':
      init.rc: Remove cpu weight set on the root cgroup
    
    Change-Id: I2663c368032a3c9f851de7d1e47f68c3a25b0d52

commit c560c6310fdb6f8d4a44b05c0d15cad7ac6f4bb1
Author: Irina Patru <irina.patru@intel.com>
Date:   Thu May 12 14:41:57 2016 +0300

    init.rc: Remove cpu weight set on the root cgroup
    
    It isn't allowed to change the cpu.share value for the root cgroup.
    See kernel commit:
    https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=ec7dc8ac73e4a56ed03b673f026f08c0d547f597
    
    This fixes the following error seen in dmesg:
    init: write_file: Unable to write to '/dev/cpuctl/cpu.shares': Invalid argument
    
    BUG: 28735908
    
    Change-Id: I5ef359fb275792f99d13d35c62499026d354f6af
    Signed-off-by: Irina Patru <irina.patru@intel.com>

commit 77e05cd29a5ac223db51ce5adf045cf23f703169
Merge: f208467f3 fa3e4ea7c
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 19 14:52:45 2016 +0000

    Merge "Don\'t start defaultcrypto twice" into nyc-dev am: fe5d55a am: 1a920d7
    am: fa3e4ea
    
    * commit 'fa3e4ea7c3dec9e7715ac46553714b8493005bb1':
      Don't start defaultcrypto twice
    
    Change-Id: I7d225afe784949d96e5a628d97c18f90c1038721

commit 1a920d72dcc6f8c91fd6ec04954facd4d351fb9d
Merge: 2f46a7d0e fe5d55a68
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 19 14:46:48 2016 +0000

    Merge "Don\'t start defaultcrypto twice" into nyc-dev
    am: fe5d55a
    
    * commit 'fe5d55a68b9dc3a593d3f6ee5be919b8a9de710c':
      Don't start defaultcrypto twice
    
    Change-Id: I0e9a27208ea046a2cf738992ba97141da9026c08

commit fe5d55a68b9dc3a593d3f6ee5be919b8a9de710c
Merge: a9e818f46 1f9921861
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 19 14:44:26 2016 +0000

    Merge "Don't start defaultcrypto twice" into nyc-dev

commit 1f99218612fa12f2c3354c29bf8d761a27e50148
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Apr 18 15:37:31 2016 -0700

    Don't start defaultcrypto twice
    
    The old way (using triggers) starts defaultcrypto twice because
    queue_property_triggers_action retriggers the action.
    
    Bug: 27452459
    Change-Id: I48c844836f551673d0dbfed6c33bd8ee1e035f40

commit 2deb078895ab2422c1e0846833a6fb88534dda3d
Merge: 94cc36868 1b59b815b
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Mon Apr 18 20:18:03 2016 +0000

    Merge "Create legacy /data/system/user directory." into nyc-dev am: e4f870a am: 2a9974a
    am: 1b59b81
    
    * commit '1b59b815bab116d11347011791c020981432a99d':
      Create legacy /data/system/user directory.
    
    Change-Id: Ib1983ee798a81b316d055cf2f8c9a239bdfd1253

commit 1b59b815bab116d11347011791c020981432a99d
Merge: b1b71132a 2a9974a96
Author: Jeff Sharkey <jsharkey@google.com>
Date:   Mon Apr 18 20:05:44 2016 +0000

    Merge "Create legacy /data/system/user directory." into nyc-dev am: e4f870a
    am: 2a9974a
    
    * commit '2a9974a9682291f4e7dcbb2e940ac2e42a0d6c2c':
      Create legacy /data/system/user directory.
    
    Change-Id: I20b29a6fb802966be184cb78534b4dd7d36eee66

commit 0ef5c5cb203eae0656f86e500274eb5bd856b88c
Merge: 9de1b0ccd e4f870a0b
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Mon Apr 18 19:59:34 2016 +0000

    Merge "Create legacy /data/system/user directory." into nyc-dev
    am: e4f870a
    
    * commit 'e4f870a0bb260f351208b9fe3cf7334e58c16a14':
      Create legacy /data/system/user directory.
    
    Change-Id: I9b18134310c101974eb353d635c9cc8f8488877f

commit c9b84a362a92b7ce709095c1986be871eacbb010
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Apr 14 21:09:34 2016 -0600

    Create legacy /data/system/user directory.
    
    We create per-user directories under this location, so it should
    only be created once by init, similar to all the other user-specific
    directories.
    
    Bug: 27896918
    Change-Id: I9ec55e4fd763c0eda6c6e50483694a6377344586

commit bc725db93a30428c93de74f08f977ad8bdc7ee53
Merge: e21165406 bcf98cfcd
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Apr 13 14:37:27 2016 +0000

    init.rc: Restore the /mnt/sdcard symlink am: d2f0a2c
    am: bcf98cf
    
    * commit 'bcf98cfcd40f2d408f601061ba1071b52d92ffbc':
      init.rc: Restore the /mnt/sdcard symlink
    
    Change-Id: I50ec25bcc48f4cc312b8559b5985a8371feef5ae

commit bcf98cfcd40f2d408f601061ba1071b52d92ffbc
Merge: 9c4a0e021 d2f0a2c06
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Apr 13 14:33:52 2016 +0000

    init.rc: Restore the /mnt/sdcard symlink
    am: d2f0a2c
    
    * commit 'd2f0a2c0653e332b906875077b9048e64b929d94':
      init.rc: Restore the /mnt/sdcard symlink
    
    Change-Id: Icd4eea67bdf9ea416f1e15ec9f1666e74e85b3eb

commit d2f0a2c0653e332b906875077b9048e64b929d94
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Apr 12 20:36:01 2016 -0700

    init.rc: Restore the /mnt/sdcard symlink
    
    "You are in a maze of twisty little symlinks, all alike."
    
    Restore the /mnt/sdcard symlink, for compatibility with older Android
    apps. This symlink was suppose to have been removed in the Gingerbread
    time frame, but lives on.
    
    Note: The /mnt/sdcard symlink was originally created in device specific
    *.rc files in the device/vendor/hardware/* directory. This change moves
    the creation of the symlink into the common init.rc file.
    
    Bug: 25801877
    Bug: 28108983
    Change-Id: I2f9bf71bddffadb587d7376dfdfc8a546c84ec28

commit afef45141f82577d2466b9d5b76371393931dc54
Merge: 078caf4fe 797204058
Author: Daniel Rosenberg <drosen@google.com>
Date:   Thu Mar 17 21:18:45 2016 +0000

    Merge "Set up configfs" into nyc-dev am: 290127b
    am: 7972040
    
    * commit '7972040588b1921c743d93a68435e095cb352858':
      Set up configfs

commit 7972040588b1921c743d93a68435e095cb352858
Merge: 199d92abb 290127b29
Author: Daniel Rosenberg <drosen@google.com>
Date:   Thu Mar 17 21:16:24 2016 +0000

    Merge "Set up configfs" into nyc-dev
    am: 290127b
    
    * commit '290127b29290c133f759eda3fc992e3dcbfb7cb1':
      Set up configfs

commit 4edec2539693690e116799cbbcf468147e02cb4b
Author: Daniel Rosenberg <drosen@google.com>
Date:   Thu Feb 18 19:48:31 2016 -0800

    Set up configfs
    
    Bug: 19160983
    Change-Id: I8fddf11fb6124950dfa2528a4f420abd9d461df6
    Signed-off-by: Daniel Rosenberg <drosen@google.com>

commit bae1efe5001093d1654b5fd00a2c9f039fbab8ae
Merge: dfe4b7a9d 0af61f002
Author: Janis Danisevskis <jdanis@google.com>
Date:   Sun Mar 13 14:55:12 2016 +0000

    Merge "Leftovers of the SELinux policy update mechanism" am: b9c0788806
    am: 0af61f0024
    
    * commit '0af61f0024d137e7a2f1ac0d9e002711cd01092c':
      Leftovers of the SELinux policy update mechanism

commit 0af61f0024d137e7a2f1ac0d9e002711cd01092c
Merge: 64d413499 b9c078880
Author: Janis Danisevskis <jdanis@google.com>
Date:   Sun Mar 13 14:53:00 2016 +0000

    Merge "Leftovers of the SELinux policy update mechanism"
    am: b9c0788806
    
    * commit 'b9c078880644b51bc9e6c314eed157f230fce43c':
      Leftovers of the SELinux policy update mechanism

commit 3d1dff22311bb6b3c01115f0c4400dcdc37c35c3
Author: Janis Danisevskis <jdanis@google.com>
Date:   Tue Mar 8 18:35:28 2016 +0000

    Leftovers of the SELinux policy update mechanism
    
    Remove references to SELinux policy files in /data/security
    from libselinux/android.c. In the process all code that is
    apparently related to handling an alternate policy and/or
    reloading the policy has been removed.
    
    Bug: 26544104
    Change-Id: I47bf76ac3c26c5d71f92a21ffac2b17ba14262ea

commit ec8637ef6d0bc5bf69eb03aa1461b549e02a136f
Author: Hidehiko Abe <hidehiko@google.com>
Date:   Wed Mar 9 16:41:50 2016 +0900

    Split slave-bind mount into two.
    
    mount(2) does not work with MS_BIND | MS_SLAVE at a time.
    Instead, this CL calls mount twice.
    
    Change-Id: I36b2eb2853f19efc2b0677fb07b6822392aac37c

commit e120b471acbe136e27e257fdf493590e1cc4ba73
Author: Alex Deymo <deymo@google.com>
Date:   Mon Feb 29 17:23:36 2016 -0800

    Add /postinstall partition when using the A/B updater.
    
    The new top level directory /postinstall is used by the A/B updater to
    mount the new partition and run a post-install program before rebooting
    into that new system.
    
    init.rc was extended to label this new directory since the initrd has
    no extended attributes.
    
    Bug: 27177071
    TEST=`ls -laZ /` shows the /postinstall directory on edison-eng
    
    (cherry picked from commit bb968fb04db3ec5227e84571e1c6bfd265836085)
    
    Change-Id: Iff993135c7ce3a1a0f6450892ef7382da408fd5e

commit 40345ef6b89b589f88c49bfa6a861ade88154782
Merge: 48add4c97 e2ad3cfae
Author: Alex Deymo <deymo@google.com>
Date:   Fri Mar 4 08:03:35 2016 +0000

    Merge "Add /postinstall partition when using the A/B updater." am: 700b15dacf
    am: e2ad3cfae4
    
    * commit 'e2ad3cfae4f9f9ddec2746c0c57cdb3dc1991a43':
      Add /postinstall partition when using the A/B updater.

commit e2ad3cfae4f9f9ddec2746c0c57cdb3dc1991a43
Merge: 55592371d 700b15dac
Author: Alex Deymo <deymo@google.com>
Date:   Fri Mar 4 08:01:40 2016 +0000

    Merge "Add /postinstall partition when using the A/B updater."
    am: 700b15dacf
    
    * commit '700b15dacfa42bcc5c4d768b92530e9f20f0211b':
      Add /postinstall partition when using the A/B updater.

commit bb968fb04db3ec5227e84571e1c6bfd265836085
Author: Alex Deymo <deymo@google.com>
Date:   Mon Feb 29 17:23:36 2016 -0800

    Add /postinstall partition when using the A/B updater.
    
    The new top level directory /postinstall is used by the A/B updater to
    mount the new partition and run a post-install program before rebooting
    into that new system.
    
    init.rc was extended to label this new directory since the initrd has
    no extended attributes.
    
    Bug: 27177071
    TEST=`ls -laZ /` shows the /postinstall directory on edison-eng
    
    Change-Id: I6cdee7eb1d61ac7d447528962a4fad1a7bbf138d

commit be54c543bd6e76d8b505028cf64233e1a9213776
Author: Keun Soo Yim <yim@google.com>
Date:   Tue Mar 1 12:45:27 2016 -0800

    mkdir /data/misc/cameraserver for AVD's camera HALs
    
    cameraserver from nyc uses cameraserver as its username.
    thus this change is needed for AVD (android virtual device)'s
    camera HAL which is attached to cameraserver to work as that
    HAL writes some files to /data/misc/media. the backward compatibility
    issue should be handled as separate changes. this approach is
    preferred for finer-grained security isolation.
    
    Change-Id: If028667d62df8fcac634ff1001759c39703b00dd

commit d125f6e8a95a998d74175df49d54251489723933
Merge: 1e86e1ba1 11cde567a
Author: Todd Kjos <tkjos@google.com>
Date:   Fri Feb 26 17:35:50 2016 +0000

    Merge "Mount schedTune cgroup as /dev/stune" into nyc-dev

commit 845a4ffef800949c45dc722deec5523d239ed41e
Author: Glenn Kasten <gkasten@google.com>
Date:   Tue Feb 23 15:23:46 2016 -0800

    Restore audio tee sink
    
    Bug: 27323882
    Change-Id: I1131c0537942c8f7cbf9ff6cc6847ab7e93e6187

commit 11cde567a8fd6fd37cd462e24dd97d0f57bb12a4
Author: Todd Kjos <tkjos@google.com>
Date:   Tue Feb 23 09:00:36 2016 -0800

    Mount schedTune cgroup as /dev/stune
    
    Make stune consistent with the other cgroups mounted under /dev
    
    Change-Id: I0fe7120ad2afbe8e6a3c9f72cc3f465de618d344

commit aed972dead82d2a74c3a9be296ba3390477d30cf
Merge: f411123ea 807f23aff
Author: Calin Juravle <calin@google.com>
Date:   Mon Feb 22 11:41:59 2016 +0000

    Merge "Create profiles folders" into nyc-dev

commit 002aecf6e8eda5d5affe412e20a22458c371a355
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Feb 19 15:51:29 2016 -0700

    Temporary fix for bugreport symlink.
    
    Bug: 27262109
    Change-Id: I011da38f8ad1eeaf717dc03a0fb6f9fdc5654c4c

commit 807f23aff210064274d332866b3d5f59d0fb743c
Author: Calin Juravle <calin@google.com>
Date:   Mon Feb 1 19:27:01 2016 +0000

    Create profiles folders
    
    Current profiles (the ones which have not been used for
    compilation) are stored in /data/misc/profiles/cur/0/pkgname/.
    
    Reference profiles (the merged of all user profiles, used for
    compilation) are stored in /data/misc/profiles/ref/pkgname/.
    
    Add a method to get the shared app gid from an uid or appid.
    
    Bug: 26719109
    Bug: 26563023
    Change-Id: I89601d7dbeb3041df882c141a9127dac200a645e

commit 4409f1446caa4eb06122d60c96573503b73ea84b
Merge: 2773d4f96 4352ee87f
Author: Bill Yi <byi@google.com>
Date:   Wed Feb 17 11:37:00 2016 -0800

    Merge commit '4352ee87fd74b931d4b58192fb8974e91aa899d0' into HEAD

commit 623b56af5da59fb57abcb2d984762669c82f57e9
Author: Martijn Coenen <maco@google.com>
Date:   Mon Feb 8 11:42:25 2016 +0100

    Fix libprocessgroup SELinux denials.
    
    libprocessgroup checks whether it can use memory
    cgroups for keeping track of forked processes by
    seeing whether /dev/memcg/apps is writable. However,
    on systems with memory cgroups disabled, SELinux
    (correctly) no longer classifies this directory as a cgroup,
    and starts denying zygote access. To fix this,
    first check whether /dev/memcg/apps/tasks exists to
    see if the cgroup is mounted; only then check whether
    we can write to the directory.
    
    Bug: 27046965
    Change-Id: I6e44cd62d8c396e20ceb162c50606b3e86f2cb3e

commit c457610e786f20b673796e2e875eb86df454c4f3
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Sat Feb 6 20:15:24 2016 -0700

    Follow migration of Shell app to DE storage.
    
    The Shell app that stores bugreports now lives under DE storage for
    all devices, both FBE and non-FBE.
    
    Bug: 26668510
    Change-Id: Iead1dcb98181a5caccf4d0c1e86de62abc6dc990

commit 3b9c83a0f69778253f82730404363b5f5f795eb2
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Wed Feb 3 14:44:44 2016 -0700

    User 0 directories are created by vold now.
    
    This ensures that all users on device follow a consistent path for
    setup and validation of encryption policy.
    
    Also add remaining user-specific directories and fix linking order.
    
    Bug: 25796509
    Change-Id: I8c2e42a78569817f7f5ea03f54b743a6661fdb9c

commit 95c220e6b7aad1f589be3b65c6232560b18f1dca
Merge: fcad79fe1 d8e0e5209
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Wed Feb 3 16:45:03 2016 +0000

    Merge "init.rc: too many start logd" am: 989daeaf5b
    am: d8e0e52099
    
    * commit 'd8e0e520998e83ae16fcff317704bb6c00b7fb31':
      init.rc: too many start logd

commit d8e0e520998e83ae16fcff317704bb6c00b7fb31
Merge: de0af89c8 989daeaf5
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Wed Feb 3 15:51:31 2016 +0000

    Merge "init.rc: too many start logd"
    am: 989daeaf5b
    
    * commit '989daeaf5b2f50d96da69ad476adf434522e35e7':
      init.rc: too many start logd

commit fcad79fe10ab73b8a0bdedc4f5d30838c52cb44b
Merge: 1446f0f31 7dfcc92be
Author: Andreas Gampe <agampe@google.com>
Date:   Wed Feb 3 01:28:32 2016 +0000

    Merge "Init: add OTA directory"

commit 0604f6fbae9bf963b55c5d8f5b5730e9583f05e3
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Feb 2 15:13:58 2016 -0800

    init.rc: too many start logd
    
    Bug: 26934873
    Change-Id: Ia00da6253a50bedc8ba825df1cf641b86cdebeed

commit 1ee7abd066e3e5161f3ec53ab9c0c9d7b1389ede
Merge: 4e9bda387 1ef5b78a2
Author: Elliott Hughes <enh@google.com>
Date:   Tue Feb 2 21:12:49 2016 +0000

    Merge "Start debuggerd as soon as logd is up." am: 1b729b3e04
    am: 1ef5b78a2f
    
    * commit '1ef5b78a2ffc471e5ac2e30b424f00d15d581a8c':
      Start debuggerd as soon as logd is up.

commit 1ef5b78a2ffc471e5ac2e30b424f00d15d581a8c
Merge: 819da66be 1b729b3e0
Author: Elliott Hughes <enh@google.com>
Date:   Tue Feb 2 21:10:47 2016 +0000

    Merge "Start debuggerd as soon as logd is up."
    am: 1b729b3e04
    
    * commit '1b729b3e04b210d096ee2d447945f6b2c53b6029':
      Start debuggerd as soon as logd is up.

commit 2f74a5dae5ec456844bcc95dee1cf264bba4e084
Author: Elliott Hughes <enh@google.com>
Date:   Tue Feb 2 09:15:59 2016 -0800

    Start debuggerd as soon as logd is up.
    
    Makes debugging early boot crashes easier.
    
    Bug: http://b/26918597
    Change-Id: I5bb883f1350ea5f7a545cb0e9f1034ecfcf47cdb

commit 2f076739576ca7ca2d13fac77bf80af3add584e6
Merge: 699709c59 b82bab66f
Author: Martijn Coenen <maco@google.com>
Date:   Tue Feb 2 10:23:57 2016 +0000

    Merge "Reuse mem cgroups for tracking forked PIDs."

commit 88185f9ee8e15afdf69ca9374ff2608ab81a59ba
Merge: e7b92201d 6647bb513
Author: Tim Murray <timmurray@google.com>
Date:   Tue Feb 2 02:13:31 2016 +0000

    Merge "Enable top-app cpuset support."

commit 6647bb51301ea101b73e7431888f70bb35a4fabb
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jan 11 16:16:35 2016 -0800

    Enable top-app cpuset support.
    
    Allows ActivityManager to use the top-app cpuset to grant the currently
    focused app exclusive access to a CPU core.
    
    Change-Id: I45bca5170477e413dec6e5889338399d0859706c

commit 7026d48d84b4bf536e52853a3438b0a1dce490a7
Merge: 5fff7da71 ef605cb74
Author: Greg Hackmann <ghackmann@google.com>
Date:   Mon Feb 1 22:07:42 2016 +0000

    Merge "init.rc: add missing /dev/fd symlink" am: 54bf0718f4
    am: ef605cb749
    
    * commit 'ef605cb7495cec368f7be015f924479969dd8fc2':
      init.rc: add missing /dev/fd symlink

commit ef605cb7495cec368f7be015f924479969dd8fc2
Merge: d484e7cef 54bf0718f
Author: Greg Hackmann <ghackmann@google.com>
Date:   Mon Feb 1 22:04:06 2016 +0000

    Merge "init.rc: add missing /dev/fd symlink"
    am: 54bf0718f4
    
    * commit '54bf0718f4eb1b170f55bbd07207cd6ad2e7e0f5':
      init.rc: add missing /dev/fd symlink

commit b82bab66f318896ebad80c1feee2347c58e3ce37
Author: Martijn Coenen <maco@google.com>
Date:   Wed Jan 20 16:39:16 2016 -0800

    Reuse mem cgroups for tracking forked PIDs.
    
    It turns out we were using the CPU accounting
    cgroups for keeping track of processes that were
    forked by an app without the framework's knowledge,
    so we could kill all of them reliably (see b/15313911
    for context).
    
    Since we want to use memory cgroups for other purposes,
    we might as well use memory cgroups for tracking forked
    PIDs if they're enabled. This also gets us automatic cleanup
    of empty mem cgroups.
    
    Also, removed old mem cgroup mount point that is no
    longer used, as well as cgroup release agent code that
    we're not using.
    
    Change-Id: I69d5cc31c162ffa49ef6945755f41381e306cc8b

commit 40a96e4ba07d1b1b79115eaa2727000f72707381
Author: Greg Hackmann <ghackmann@google.com>
Date:   Mon Feb 1 09:59:44 2016 -0800

    init.rc: add missing /dev/fd symlink
    
    The Linux kernel implicitly expects /dev/fd to symlink to /proc/self/fd.
    
    This change fixes the exec/execveat.c kernel selftest.
    
    Change-Id: Ia08d50023336fdbfc098527299c326d9d59039a9
    Signed-off-by: Greg Hackmann <ghackmann@google.com>

commit 5949745534e11a877ec839931af76c569f78e058
Author: Paul Crowley <paulcrowley@google.com>
Date:   Mon Feb 1 16:37:13 2016 +0000

    On FDE devices, initialize user 0
    
    Fix ugly special cases for user 0: initialize them explicitly.
    
    Bug: 26704408
    Change-Id: I1b8536b9e5e87ea98b4009a309f2e22c56006651

commit 63c463fe2873b1f68c73b427a396eae463bba648
Author: Christopher Tate <ctate@google.com>
Date:   Thu Jan 28 17:09:42 2016 -0800

    Have init set up the backup stage dir on /cache
    
    Bug 26834865
    
    Change-Id: Idc63c1706f68d42b2a9cee05997c63a9bbcb0fb9

commit 7dfcc92beeda542b0148c71490cac29007cce38f
Author: Andreas Gampe <agampe@google.com>
Date:   Tue Dec 8 09:33:07 2015 -0800

    Init: add OTA directory
    
    Add /data/ota in init so that the right selinux labels are applied.
    
    Bug: 25612095
    Change-Id: I8fd093147f8e0a5c3bd1a4007a61b0b759911cf2

commit 1293fed9a3371ad2096785e1af99ddd66c7a8344
Merge: 6ddde53e8 4284f9f3a
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jan 25 18:45:01 2016 +0000

    Merge "Improve cpuset support for surfaceflinger."

commit b797e78f8bfa5d8b5ea36f4dbe102ce30dff16a4
Merge: bb92b21c4 9deaf7c8a
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Jan 23 04:04:38 2016 +0000

    Merge "init.rc: mix device-specific data into the Linux RNG" am: e04b60d2b9
    am: 9deaf7c8a6
    
    * commit '9deaf7c8a6eca900e1e50cccc1aeef17d04d70e2':
      init.rc: mix device-specific data into the Linux RNG

commit 9deaf7c8a6eca900e1e50cccc1aeef17d04d70e2
Merge: 7b7b872e8 e04b60d2b
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Jan 23 04:02:51 2016 +0000

    Merge "init.rc: mix device-specific data into the Linux RNG"
    am: e04b60d2b9
    
    * commit 'e04b60d2b9bf0e6560e3cde6f671f294b796fcdb':
      init.rc: mix device-specific data into the Linux RNG

commit 27cb41035264e5ff299a5784dc6ca60e791347d2
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jan 22 18:02:29 2016 -0800

    init.rc: mix device-specific data into the Linux RNG
    
    Mix the contents of /proc/cmdline and /default.prop
    into /dev/urandom. /proc/cmdline often contains
    androidboot.serialno, a device-specific unique
    identifier. Similarly, /default.prop contains the
    build fingerprint and timestamp, which vary between
    device families.
    
    Change-Id: I8803b38c7089b2a1217b99a7c1808b29a3b138cf

commit 4284f9f3a3d471208d7a9341056e4d7af886dab3
Author: Tim Murray <timmurray@google.com>
Date:   Tue Nov 10 14:31:09 2015 -0800

    Improve cpuset support for surfaceflinger.
    
    SurfaceFlinger needs some of its threads in the system-background cpuset
    and some of its threads (the binder pool) outside of the
    system-background cpuset in order to improve UI perf/power
    consumption. Remove surfaceflinger from the system-background cpuset in
    init.rc and allow a thread to place itself in the system-background
    cpuset given enough permissions.
    
    bug 25745866
    
    Change-Id: I85f7e41c5439e6ad7cc2d355e51f5dfb3a0c7088

commit 558d8f4364c87e7ba34ef4c127654cdd9e049072
Author: Paul Crowley <paulcrowley@google.com>
Date:   Wed Jan 20 11:20:23 2016 +0000

    Remove no-longer-needed crypto init builtins
    
    Changes to the way FBE works to support lifecycles mean that these
    commands aren't needed any more.
    
    Bug: 22358539
    Change-Id: Id73339e0aa8070dd688f35b5d59de75236961395

commit d78b55fba2c2deeb145354fc6c6ae89e51967f44
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Wed Jan 13 09:37:08 2016 -0700

    Move some directory creation out of installd.
    
    Core system directories should be created here in init.rc instead
    of making installd do the creation.
    
    Bug: 26466827
    Change-Id: I313a332e74699641872c41fce5a7ca35bfce8f82

commit e8b97fc0b0eec1c98053cfa51db6b450657ef876
Merge: 8866fe9d1 19616ce10
Author: Elliott Hughes <enh@google.com>
Date:   Fri Jan 8 17:16:34 2016 +0000

    Merge "init.rc: Reland "mkdir /data/misc/vold""
    am: 19616ce100
    
    * commit '19616ce100771d0f570bc9cf19d08fbbe8feec0f':
      init.rc: Reland "mkdir /data/misc/vold"

commit c1149ff0c33f0a7100428402cc934296d7170e42
Author: Yu Ning <yu.ning@intel.com>
Date:   Fri Jan 8 14:51:07 2016 +0800

    init.rc: Reland "mkdir /data/misc/vold"
    
    Creation of /data/misc/vold was first introduced by commit 25775e8. It
    then got reverted, probably inadvertently, by:
    
     commit 2e24bcfdce030d410cbc8e8c8fa3e8c1260ba65d
     Author: Paul Lawrence <paullawrence@google.com>
     Date:   Fri May 22 18:31:55 2015 +0000
    
         Revert "Set up crypto for user directories in init."
    
    This folder is required by vold. In its absence, if one tries to format
    an SD card as internal storage, an error will occur, with the following
    message printed to logcat:
    
     01-08 06:31:48.389  1002  1069 E vold    : Failed to persist key
    
    Restoring /data/misc/vold fixes this bug.
    
    This fix has been verified on the emulator, which currently does not
    allow its virtual SD card to be adopted, but another CL will be uploaded
    to enable that.
    
    Change-Id: Ibb87ee821630a038a6f9b7b6a9da50fe03ca690d
    Signed-off-by: Yu Ning <yu.ning@intel.com>

commit 7705e0384eb38b5a15168136cbeb5e9c3672011e
Merge: 03e6f710b 0f0498ad5
Author: Pavlin Radoslavov <pavlin@google.com>
Date:   Tue Dec 29 01:28:48 2015 +0000

    Merge "Use GID "wakelock" to control access to kernel wakelock"
    am: 0f0498ad50
    
    * commit '0f0498ad508e6747dc7b72a6e63de2f2befa2e1c':
      Use GID "wakelock" to control access to kernel wakelock

commit 17d80c84e1ec6fc803f7b30df4e7f436a72e79d4
Author: Pavlin Radoslavov <pavlin@google.com>
Date:   Mon Nov 23 17:18:31 2015 -0800

    Use GID "wakelock" to control access to kernel wakelock
    
    * Added new kernel GID named "wakelock" (AID_WAKELOCK = 3010)
    * Changed the group access for /sys/power/wake_lock and
      /sys/power/wake_unlock from "system" to "wakelock"
    * Added "wakelock" to the list of groups for the healthd process/service
    
    Bug: 25864142
    Change-Id: Ieabee9964cccec3107971a361a43aa9805164aa9

commit 0eca10751270462c865de16e5aa2443cee92b9b9
Author: Pavlin Radoslavov <pavlin@google.com>
Date:   Mon Nov 23 17:18:31 2015 -0800

    Use GID "wakelock" to control access to kernel wakelock
    
    * Added new kernel GID named "wakelock" (AID_WAKELOCK = 3010)
    * Changed the group access for /sys/power/wake_lock and
      /sys/power/wake_unlock from "system" to "wakelock"
    * Added "wakelock" to the list of groups for the healthd process/service
    
    Bug: 25864142
    Change-Id: Ieabee9964cccec3107971a361a43aa9805164aa9

commit 1a9c4531c7ae4a6538443a5f7b7f272b42bce1ee
Author: Felipe Leme <felipeal@google.com>
Date:   Mon Dec 14 12:44:10 2015 -0800

    Moved 'bugreportplus' from init.rc to dumpstate.rc
    
    BUG: 26034608
    Change-Id: Id6923cff0b2b3bd9d2ec9320ebcdb3fbead8df83

commit db8548442304f103e3bc70d34e86e99c2acde15c
Merge: 5e664d1f7 7abc71ecd
Author: Daichi Hirono <hirono@google.com>
Date:   Fri Dec 11 06:16:29 2015 +0000

    Merge "Add /mnt/appfuse mount point to init.rc."

commit 7abc71ecd3d9f0ac4a88dedaaf6be952a7b7c909
Author: Daichi Hirono <hirono@google.com>
Date:   Fri Dec 11 13:29:04 2015 +0900

    Add /mnt/appfuse mount point to init.rc.
    
    BUG=25755834
    
    Change-Id: I00b1185aec7a95baa6ef2f345a49761f3d006c4d

commit c5733cfadbf98c8b6a1b280306cb9abac162f26c
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Dec 9 13:53:09 2015 -0800

    Add createuserkey
    
    Needed so we can make the user0 key on first boot
    
    Change-Id: I4699dbf2efdec44bb09bc4cfa7eeb59e56cb93ab

commit 27ca1eb2940f3be640afe4ffd89a5d8cf852b578
Merge: 444330270 8ca866495
Author: Tao Bao <tbao@google.com>
Date:   Wed Dec 9 19:57:52 2015 +0000

    Merge "rootdir: Execute update_verifier for A/B update." am: df13f60ce0
    am: 8ca8664956
    
    * commit '8ca8664956bf4bce783d9b84a9f0fd0ff8a9c11f':
      rootdir: Execute update_verifier for A/B update.

commit 8ca8664956bf4bce783d9b84a9f0fd0ff8a9c11f
Merge: e6bcd22f3 df13f60ce
Author: Tao Bao <tbao@google.com>
Date:   Wed Dec 9 19:55:09 2015 +0000

    Merge "rootdir: Execute update_verifier for A/B update."
    am: df13f60ce0
    
    * commit 'df13f60ce0152bc9a38e18fcb9c7c839d8eba5e3':
      rootdir: Execute update_verifier for A/B update.

commit df13f60ce0152bc9a38e18fcb9c7c839d8eba5e3
Merge: b6345d6ef 97df39568
Author: Tao Bao <tbao@google.com>
Date:   Wed Dec 9 19:50:31 2015 +0000

    Merge "rootdir: Execute update_verifier for A/B update."

commit c94d92f5ad92444ada64b519cd8e6e64ff9f2be6
Merge: 79a3210ed baaeddfa2
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Dec 8 04:54:15 2015 +0000

    Merge "init.rc: restorecon_recursive /sys/kernel/debug" am: 6d85c06aa1 am: 070288241d
    am: baaeddfa23
    
    * commit 'baaeddfa239625a9d54091c628242d84a9191514':
      init.rc: restorecon_recursive /sys/kernel/debug

commit baaeddfa239625a9d54091c628242d84a9191514
Merge: cbc6f68e3 070288241
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Dec 8 04:50:55 2015 +0000

    Merge "init.rc: restorecon_recursive /sys/kernel/debug" am: 6d85c06aa1
    am: 070288241d
    
    * commit '070288241d5c3d1a169e21ba4439a5943ce476d8':
      init.rc: restorecon_recursive /sys/kernel/debug

commit 070288241d5c3d1a169e21ba4439a5943ce476d8
Merge: 4c1b3840f 6d85c06aa
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Dec 8 04:48:06 2015 +0000

    Merge "init.rc: restorecon_recursive /sys/kernel/debug"
    am: 6d85c06aa1
    
    * commit '6d85c06aa1600e905cf3e0b093e939fa3866ee59':
      init.rc: restorecon_recursive /sys/kernel/debug

commit 715c4dc3f9972f312d2c072dd9e47d1408ee6f55
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Dec 7 16:57:08 2015 -0800

    init.rc: restorecon_recursive /sys/kernel/debug
    
    If /sys/kernel/debug is present, make sure it has all the appropriate
    SELinux labels.
    
    Labeling of /sys/kernel/debug depends on kernel support
    added in commit https://android-review.googlesource.com/122130
    
    This patch depends on an external/sepolicy change with the
    same Change-Id as this patch.
    
    Change-Id: Id1d6a9ad6d0759d6de839458890e8cb24685db6d

commit 97df3956834f00dd084773f1b544f8541584ff32
Author: Tao Bao <tbao@google.com>
Date:   Fri Dec 4 17:45:43 2015 -0800

    rootdir: Execute update_verifier for A/B update.
    
    update_verifier verifies the updated partitions and marks the current
    slot as having booted successfully. It needs to be triggered prior to
    the start of the framework, otherwise it won't be able to fall back to
    the old system without a data wipe.
    
    Bug: 26039641
    Change-Id: I6fd183cdd3dfcc72feff2a896368158875b28591

commit 088113f419a50f360efa66efd9d88df849576e45
Merge: be5c6f53b 0a2733582
Author: Todd Kennedy <toddke@google.com>
Date:   Mon Dec 7 15:33:06 2015 +0000

    Merge "Create new ephemeral app directory"

commit 171b5d8be3f940793f910e1002aa944760fe187f
Author: Felipe Leme <felipeal@google.com>
Date:   Fri Dec 4 14:51:38 2015 -0800

    Created service 'bugreportplus'
    
    This service is an enhanced version of bugreport that provides a better
    user interface (like displaying progress and allowing user to enter
    details).
    
    It will be  typically triggered by the 'Take Bug Report' UI, which will
    now offer the option for the traditional or enhanced options (services
    'bugreport' and 'bugreportplus' respectively).
    
    BUG: 26034608
    Change-Id: I39ea92c3e329a801b51f60a558c73faaf890c068

commit a5954de3bb61bee797024bbef1a795cd071c90e3
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Mon Nov 30 13:28:45 2015 -0700

    Create credential-encrypted system dir for owner.
    
    Other user directories are created correctly, but owner is still
    special cased.
    
    Bug: 22358539
    Change-Id: I2bbd3023cdbcbb5315ebc32ba54dc3ddb9a280d6

commit 0a2733582d85f52b4901e3e7cc5fefea56ec93fc
Author: Todd Kennedy <toddke@google.com>
Date:   Mon Nov 23 15:24:13 2015 -0800

    Create new ephemeral app directory
    
    Bug: 25119046
    Change-Id: Ie005430700a73ef1ba492dae4101419a41da4071

commit af1e35e07b986fb8f0f8c5324e10fa06eb0c8a06
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Wed Nov 18 14:24:32 2015 -0700

    Create user_de directory for user 0.
    
    This mirrors what we do for "/data/data" for user 0.  Eventually we
    should move to vold/installd doing the user 0 initialization.
    
    Bug: 22358539
    Change-Id: I48cd27b990e6bd6e37870c41aef0e7dc3106caa4

commit 5c331c5be821fe5c900cee56a842a3a8b4a12315
Merge: 4832c2788 c97e1cb39
Author: Daniel Rosenberg <drosen@google.com>
Date:   Wed Nov 18 21:39:01 2015 +0000

    Remove creation of root directory folders
    am: c97e1cb39d
    
    * commit 'c97e1cb39d9ba129d8326605d121a10c9ae491e7':
      Remove creation of root directory folders

commit 88b5892d74978df60585ce59dd283d188fecdafa
Merge: 5153be7f9 ed6078896
Author: Todd Kjos <tkjos@google.com>
Date:   Wed Nov 18 08:31:03 2015 -0800

    resolve merge conflicts of ed60788968 to mnc-dr2-dev-plus-aosp.
    
    Change-Id: I9b07dd8dcb8fc74b658466b8dd47546cefffab1d

commit 6426874cdda284d46d9d6785627018b66b5e8407
Merge: 881671ae8 cdef6fb91
Author: Calin Juravle <calin@google.com>
Date:   Wed Nov 18 00:20:51 2015 +0000

    Merge "Don\'t create profiles directory under dalvik-cache." am: 942f8ea84f am: 2a095e186b
    am: cdef6fb917
    
    * commit 'cdef6fb91725f771ab23d0eea03a97aa3c161d75':
      Don't create profiles directory under dalvik-cache.

commit d792c986063ca0f6207cfb20da18157e657b8270
Merge: fb24ff8e7 c97e1cb39
Author: Daniel Rosenberg <drosen@google.com>
Date:   Tue Nov 17 00:52:55 2015 +0000

    Remove creation of root directory folders
    am: c97e1cb39d
    
    * commit 'c97e1cb39d9ba129d8326605d121a10c9ae491e7':
      Remove creation of root directory folders

commit ba8a47531c5ebc5e1322088354d2114f6892f3fd
Author: Todd Kjos <tkjos@google.com>
Date:   Mon Oct 26 16:22:11 2015 -0700

    Actively mangage EAS schedtune nodes
    
    Move foreground tasks to /sys/fs/cgroup/stune/boost/tasks (boosted
    weight in EAS scheduler). Move background tasks to
    /sys/fs/cgroup/stune/tasks (default weight). For services started
    with init, set "foreground" services to boosted.
    
    Change-Id: I0e489fad9510727c13e6754dabaf311c2391f395

commit c97e1cb39d9ba129d8326605d121a10c9ae491e7
Author: Daniel Rosenberg <drosen@google.com>
Date:   Wed Jul 8 16:30:22 2015 -0700

    Remove creation of root directory folders
    
    Folders in the root directory are now created during the build,
    as we may be building without a ramdisk, and when we do that,
    the root directory will be read-only.  With those changes,
    these mkdirs will never need to run.
    
    Change-Id: I49c63e8bfc71d28e3f938ed41f81d108359fa57a

commit ed60788968be61f4f6f47890e5f3cb182a6a2b6e
Author: Todd Kjos <tkjos@google.com>
Date:   Mon Oct 26 16:22:11 2015 -0700

    Actively mangage EAS schedtune nodes
    
    Move foreground tasks to /sys/fs/cgroup/stune/boost/tasks (boosted
    weight in EAS scheduler). Move background tasks to
    /sys/fs/cgroup/stune/tasks (default weight). For services started
    with init, set "foreground" services to boosted.
    
    Change-Id: I0e489fad9510727c13e6754dabaf311c2391f395

commit 2a095e186b2ff28d3c5a2e5f20f3cf61cc1942f0
Merge: 8468b26e7 942f8ea84
Author: Calin Juravle <calin@google.com>
Date:   Mon Nov 16 11:21:48 2015 +0000

    Merge "Don\'t create profiles directory under dalvik-cache."
    am: 942f8ea84f
    
    * commit '942f8ea84f3f96c2e2556fe90ebba0ec76730553':
      Don't create profiles directory under dalvik-cache.

commit 942f8ea84f3f96c2e2556fe90ebba0ec76730553
Merge: e32cb1b14 933bc0a3d
Author: Calin Juravle <calin@google.com>
Date:   Mon Nov 16 11:08:46 2015 +0000

    Merge "Don't create profiles directory under dalvik-cache."

commit 439419b713736c1280386253945a599bd6d6bac4
Merge: bf5537dd2 11705863f
Author: Jeff Sharkey <jsharkey@google.com>
Date:   Thu Nov 12 00:20:28 2015 +0000

    Merge "Create some new encryption paths."

commit 8e9791357e8c59c35ffc12742e816e9b98cc875d
Merge: eaeafe13b a8dcfc062
Author: Calin Juravle <calin@google.com>
Date:   Wed Nov 11 18:39:23 2015 +0000

    Merge "Create a folder to store method traces activated with -Xmethod-trace" am: 7605a56fbc am: 5d1a9688b8
    am: a8dcfc0622
    
    * commit 'a8dcfc062260bdce7ca471baa5f081e512d5da7f':
      Create a folder to store method traces activated with -Xmethod-trace

commit 5d1a9688b8623c12a00b76e2256f5b418aa1dace
Merge: 7d223253c 7605a56fb
Author: Calin Juravle <calin@google.com>
Date:   Wed Nov 11 18:12:03 2015 +0000

    Merge "Create a folder to store method traces activated with -Xmethod-trace"
    am: 7605a56fbc
    
    * commit '7605a56fbcf5706b6e2892da9d9dc0fd20efb395':
      Create a folder to store method traces activated with -Xmethod-trace

commit 11705863ffe2fe6b2bee0720aa37e4b014035eb9
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Mon Nov 9 17:07:35 2015 -0800

    Create some new encryption paths.
    
    Bug: 22358539
    Change-Id: I2e7533cd3dbd18e9ae115f611c5714b0c7ba4917

commit 9b3e5d59feaa1c6863ba74a764293295e52c9e34
Author: Calin Juravle <calin@google.com>
Date:   Tue Nov 10 19:16:43 2015 +0000

    Create a folder to store method traces activated with -Xmethod-trace
    
    Bug: 25612377
    Change-Id: I370b858594ccc88c12099b23a0d1aac22acd4969

commit bdf20142b93999acf59c8e488972ede62ce3a39b
Merge: 4cb77fc2a 7dafe5b81
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Nov 9 20:41:19 2015 +0000

    Merge "Enable hidepid=2 on /proc" am: 2d8f1d4c47 am: ea8452cc72
    am: 7dafe5b818
    
    * commit '7dafe5b818f7771cb00c4a0ea3ab1dbf74593185':
      Enable hidepid=2 on /proc

commit ea8452cc720cfcf2d8d1f469bbaafec968202e99
Merge: 8163cbc53 2d8f1d4c4
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Nov 9 20:29:44 2015 +0000

    Merge "Enable hidepid=2 on /proc"
    am: 2d8f1d4c47
    
    * commit '2d8f1d4c478b9d921730d3fc9b290315e2ff9f04':
      Enable hidepid=2 on /proc

commit c39ba5ae32afb6329d42e61d2941d87ff66d92e3
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Nov 7 16:52:17 2015 -0800

    Enable hidepid=2 on /proc
    
    Add the following mount options to the /proc filesystem:
    
      hidepid=2,gid=3009
    
    This change blocks /proc access unless you're in group 3009
    (aka AID_READPROC).
    
    Please see
      https://github.com/torvalds/linux/blob/master/Documentation/filesystems/proc.txt
    for documentation on the hidepid option.
    
    hidepid=2 is preferred over hidepid=1 since it leaks less information
    and doesn't generate SELinux ptrace denials when trying to access
    /proc without being in the proper group.
    
    Add AID_READPROC to processes which need to access /proc entries for
    other UIDs.
    
    Bug: 23310674
    Change-Id: I22bb55ff7b80ff722945e224845215196f09dafa

commit 933bc0a3d12e24cc2845507dd70d7c5d1cbe28c5
Author: Calin Juravle <calin@google.com>
Date:   Wed Nov 4 14:59:41 2015 +0000

    Don't create profiles directory under dalvik-cache.
    
    Bug: 24698874
    Bug: 17173268
    Change-Id: Ic81258a8df90818fa6b4ee64fd1507ac18fe3f04

commit e41937d9b31fa1c7c627428d131361ae077bce6c
Merge: bdfbf76b3 538697b31
Author: Tim Murray <timmurray@google.com>
Date:   Wed Oct 21 14:50:03 2015 +0000

    Reorder init.rc to avoid a kernel warning. am: f429d37807 am: e56b566401
    am: 538697b315
    
    * commit '538697b3153a9a71bdfd197d0461a74d29fd2fae':
      Reorder init.rc to avoid a kernel warning.

commit 2b216aa89b76dbadb315322e4fd31aa37059b262
Merge: f429d3780 751dfddc1
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Oct 21 14:27:38 2015 +0000

    Merge "Don't show UI on default encryption" into mnc-dr-dev

commit 538697b3153a9a71bdfd197d0461a74d29fd2fae
Merge: fd31be08f e56b56640
Author: Tim Murray <timmurray@google.com>
Date:   Tue Oct 20 22:14:47 2015 +0000

    Reorder init.rc to avoid a kernel warning. am: f429d37807
    am: e56b566401
    
    * commit 'e56b566401aad8e7175306b2969f78baa0b8f9c6':
      Reorder init.rc to avoid a kernel warning.

commit f429d37807a005c1de38a7616669bf1834d45432
Author: Tim Murray <timmurray@google.com>
Date:   Thu Oct 15 12:38:15 2015 -0700

    Reorder init.rc to avoid a kernel warning.
    
    3.18 has a warning in dmesg that appears when the parent cpuset's cpus
    and mems are changed to something other than what the child has. Reorder
    init.rc to prevent this warning from appearing.
    
    bug 24941443
    
    Change-Id: I49d8394063b23dce03222dcc9ddccdc32bb97ea2

commit 09cf06fc74a814176852abb587f1a6aa6b152fc8
Merge: c1d467c17 2f63adcea
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Oct 10 05:47:41 2015 +0000

    am 2f63adce: am 28107143: am 9e27cab6: Merge "init.rc: Disable sysrq from the keyboard"
    
    * commit '2f63adcea8e4e4a64d85b59044224f198016e093':
      init.rc: Disable sysrq from the keyboard

commit 281071435a00e8f8d9cd91f3a12f31e7c64ac878
Merge: fa993b2b0 9e27cab69
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Oct 10 00:38:18 2015 +0000

    am 9e27cab6: Merge "init.rc: Disable sysrq from the keyboard"
    
    * commit '9e27cab695b0e2a4910cf576d306a3379991f1f7':
      init.rc: Disable sysrq from the keyboard

commit d28a535d9aa5a30deb682cd02b18c9bbd772c44f
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Oct 9 17:09:10 2015 -0700

    init.rc: Disable sysrq from the keyboard
    
    Don't allow the accidental triggering of sysrq functionality
    from the keyboard. The only expected use of sysrq functionality
    is via /proc/sysrq-trigger
    
    Please see https://www.kernel.org/doc/Documentation/sysrq.txt for
    additional information on /proc/sys/kernel/sysrq
    
    Bug: 13435961
    Change-Id: I60dc92a4b2b4706e8fa34a6cead9abd449f7375f

commit 8e15f8d0964551e48235572d99cf7356a6bf3c1d
Merge: a3f5bad43 8c06f8ccd
Author: David Zeuthen <zeuthen@google.com>
Date:   Wed Oct 7 20:34:18 2015 +0000

    am 8c06f8cc: am 10bb4e51: Merge "init.rc: mkdir /data/misc/update_engine 0700 root root"
    
    * commit '8c06f8ccd41c5d1206d721b4f19dd6b5ede9ad9e':
      init.rc: mkdir /data/misc/update_engine 0700 root root

commit 8c06f8ccd41c5d1206d721b4f19dd6b5ede9ad9e
Merge: a4d9a59a0 10bb4e516
Author: David Zeuthen <zeuthen@google.com>
Date:   Wed Oct 7 20:29:00 2015 +0000

    am 10bb4e51: Merge "init.rc: mkdir /data/misc/update_engine 0700 root root"
    
    * commit '10bb4e5161ecca1a9660d1e5967b3fb5e7662839':
      init.rc: mkdir /data/misc/update_engine 0700 root root

commit 10bb4e5161ecca1a9660d1e5967b3fb5e7662839
Merge: 9e45f201d 159147853
Author: David Zeuthen <zeuthen@google.com>
Date:   Wed Oct 7 20:18:36 2015 +0000

    Merge "init.rc: mkdir /data/misc/update_engine 0700 root root"

commit 159147853efb9b2ea81824e4940b815821f76656
Author: David Zeuthen <zeuthen@google.com>
Date:   Wed Oct 7 14:00:55 2015 -0400

    init.rc: mkdir /data/misc/update_engine 0700 root root
    
    Ensure that /data/misc/update_engine exists since it will be referenced
    by selinux policy.
    
    Bug: 23186405
    Change-Id: I96e4ff341086da6474ef7f7c934f1f35bffc1439

commit d80ddaabe12a22451f17730b584520ecd08f6de2
Merge: 0266fc416 936d65f59
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Sep 28 15:58:30 2015 +0000

    am 936d65f5: am cb2ab20d: am 87122ce1: Merge "logd: increase dgram_max_qlen to 600"
    
    * commit '936d65f59bbab071898390c8bd6982055be5ab4b':
      logd: increase dgram_max_qlen to 600

commit 936d65f59bbab071898390c8bd6982055be5ab4b
Merge: 6185e567d cb2ab20d4
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Sep 28 15:54:05 2015 +0000

    am cb2ab20d: am 87122ce1: Merge "logd: increase dgram_max_qlen to 600"
    
    * commit 'cb2ab20d480cdf488e5b5bf37dc55ca7f0ddee67':
      logd: increase dgram_max_qlen to 600

commit cb2ab20d480cdf488e5b5bf37dc55ca7f0ddee67
Merge: d59075b50 87122ce1d
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Sep 28 15:50:02 2015 +0000

    am 87122ce1: Merge "logd: increase dgram_max_qlen to 600"
    
    * commit '87122ce1d60dd6fbc18e747d976db734d502f2bf':
      logd: increase dgram_max_qlen to 600

commit 39944c89a9223ee646cd9263317b284149baa4f1
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Sep 8 11:24:07 2015 -0700

    logd: increase dgram_max_qlen to 600
    
    Seeing liblog messages on system_server runtime restart
    (too much system_server spam, 566 messages in 72ms)
    
    Bug: 23788621
    Change-Id: I5171f2c19a3538da190fc6c2b40e978d89bf0e20

commit 3c6ffbc6fec456bd25a3dad85d45a444b807d020
Merge: 6bb611d38 984bd8323
Author: Tom Cherry <tomcherry@google.com>
Date:   Mon Sep 21 21:41:46 2015 +0000

    am 984bd832: resolved conflicts for 5caca3dd to mnc-dr-dev-plus-aosp
    
    * commit '984bd8323dcb5e494a04b2058ab7de40bf347ee5':
      add system-background cpuset

commit 984bd8323dcb5e494a04b2058ab7de40bf347ee5
Merge: 03581ce1e 5caca3dd8
Author: Tom Cherry <tomcherry@google.com>
Date:   Mon Sep 21 14:25:34 2015 -0700

    resolved conflicts for 5caca3dd to mnc-dr-dev-plus-aosp
    
    Change-Id: I773e514a8232b77cdd566dc36c9efc4e15f206f0

commit cba6ad7449bf8027bf045c9a60ff0821e84f3726
Author: Tim Murray <timmurray@google.com>
Date:   Fri Sep 18 13:18:49 2015 -0700

    add system-background cpuset
    
    add a new cpuset for system services that should not run on
    larger cores
    
    bug 24144797
    
    Change-Id: I21a54f0d6b46b3b8bd8c4564b8685c88cfc4a57d

commit 751dfddc198b64409d035b8a80b526c0815432fb
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Sep 9 12:10:58 2015 -0700

    Don't show UI on default encryption
    
    Bug: 22989588
    Change-Id: I8e7023767f1da80c872adc45871be1f8851926ad

commit 4c5d655e3d425ea0bb17d6e6675661e57e231be3
Merge: fd53a3bf8 4bc10de99
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Sep 4 18:13:00 2015 +0000

    am 4bc10de9: am cd1a65b6: am 30c13c49: Merge "move uncrypt from init.rc to uncrypt.rc"
    
    * commit '4bc10de99f3f84b89b40c46203cbc051224f931d':
      move uncrypt from init.rc to uncrypt.rc

commit 4bc10de99f3f84b89b40c46203cbc051224f931d
Merge: c74403b4c cd1a65b69
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Sep 4 18:02:34 2015 +0000

    am cd1a65b6: am 30c13c49: Merge "move uncrypt from init.rc to uncrypt.rc"
    
    * commit 'cd1a65b69ad2da81e654adab8edeead457a1b1f5':
      move uncrypt from init.rc to uncrypt.rc

commit cd1a65b69ad2da81e654adab8edeead457a1b1f5
Merge: b00a8a066 30c13c495
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Sep 4 17:56:27 2015 +0000

    am 30c13c49: Merge "move uncrypt from init.rc to uncrypt.rc"
    
    * commit '30c13c4954a959c2e6c5ba126f26d88b2e56be61':
      move uncrypt from init.rc to uncrypt.rc

commit 008eb9b80a4094d0f1b4fe29ebfbc3e40cde9575
Author: Tom Cherry <tomcherry@google.com>
Date:   Thu Sep 3 16:31:50 2015 -0700

    move uncrypt from init.rc to uncrypt.rc
    
    Move uncrypt from /init.rc to /system/etc/init/uncrypt.rc using the
    LOCAL_INIT_RC mechanism
    
    Bug 23186545
    
    Change-Id: Ibd838dd1d250c0e6536e44b69f11fb5ed42ba10b

commit b111a0796226bf88ef080a9826b208e624f16eb5
Merge: 742372a48 fdc6fbd0c
Author: Tom Cherry <tomcherry@google.com>
Date:   Thu Sep 3 22:36:10 2015 +0000

    am fdc6fbd0: am b2acb6b2: am b4998341: Merge "move init.trace.rc to frameworks/native"
    
    * commit 'fdc6fbd0c7f98fa44b86e834a88441cce3bdedaa':
      move init.trace.rc to frameworks/native

commit fdc6fbd0c7f98fa44b86e834a88441cce3bdedaa
Merge: 27e427aaa b2acb6b2c
Author: Tom Cherry <tomcherry@google.com>
Date:   Thu Sep 3 22:28:35 2015 +0000

    am b2acb6b2: am b4998341: Merge "move init.trace.rc to frameworks/native"
    
    * commit 'b2acb6b2ce07bf9e1c944eadcdc2dafe3e41efaf':
      move init.trace.rc to frameworks/native

commit b2acb6b2ce07bf9e1c944eadcdc2dafe3e41efaf
Merge: db31ac76b b49983412
Author: Tom Cherry <tomcherry@google.com>
Date:   Thu Sep 3 22:02:40 2015 +0000

    am b4998341: Merge "move init.trace.rc to frameworks/native"
    
    * commit 'b499834121854fd98664d8d96734c733f96dbc1f':
      move init.trace.rc to frameworks/native

commit b0d5184774ae46726113ac3ac59dc89507b7ff02
Author: Tom Cherry <tomcherry@google.com>
Date:   Thu Sep 3 14:18:22 2015 -0700

    move init.trace.rc to frameworks/native
    
    init.trace.rc will be renamed to atrace.rc and use the LOCAL_INIT_RC
    mechanism to be included on /system appropriately.
    
    Bug 23186545
    
    Change-Id: I55c37d3ff98c9ac10e6c1a713fadc7eb37346195

commit d8cf000d6cba28f57daf50d080fdb68688d4f09d
Merge: 5917b8a3b b081b8cdd
Author: Badhri Jagan Sridharan <Badhri@google.com>
Date:   Thu Sep 3 05:03:20 2015 +0000

    am b081b8cd: am ddc296e8: am e1801863: init: usb: Add init scripts for configfs commands
    
    * commit 'b081b8cdd17ef678fd84dccb9b5645bd72f26c5b':
      init: usb: Add init scripts for configfs commands

commit a89568c29ed11a32bbc17dfc32da72b3638de070
Merge: 160b5232e adef754b4
Author: Tim Murray <timmurray@google.com>
Date:   Thu Sep 3 05:03:17 2015 +0000

    am adef754b: am 25a1b489: am 4a1f02ea: Merge "Add foreground/boost cpuset." into mnc-dr-dev
    
    * commit 'adef754b4548b391c6c2cac3065c91ccaa783a1b':
      Add foreground/boost cpuset.

commit b081b8cdd17ef678fd84dccb9b5645bd72f26c5b
Merge: 1c791dfd3 ddc296e84
Author: Badhri Jagan Sridharan <Badhri@google.com>
Date:   Thu Sep 3 04:23:16 2015 +0000

    am ddc296e8: am e1801863: init: usb: Add init scripts for configfs commands
    
    * commit 'ddc296e841fa98bc89c0459d1dd3e438c790f15d':
      init: usb: Add init scripts for configfs commands

commit adef754b4548b391c6c2cac3065c91ccaa783a1b
Merge: de2c8a24c 25a1b4894
Author: Tim Murray <timmurray@google.com>
Date:   Thu Sep 3 04:22:24 2015 +0000

    am 25a1b489: am 4a1f02ea: Merge "Add foreground/boost cpuset." into mnc-dr-dev
    
    * commit '25a1b4894d9fc249535f0e0b3851643eb172202f':
      Add foreground/boost cpuset.

commit e18018639bd38e959118d16d567c7567bb88d80b
Author: Badhri Jagan Sridharan <Badhri@google.com>
Date:   Fri Aug 28 19:32:45 2015 -0700

    init: usb: Add init scripts for configfs commands
    
    This CL adds a new init script init.usb.configfs.rc
    to add generic configfs commands. Setting
    sys.usb.configfs in init.usb.{hardware}.rc
    enables executing commands in this script
    
    Bug=23633457
    
    Change-Id: Iaae844a7957d6c9bf510648aaff86d56aa0c6243

commit 3985dda1c3e668d76ecb689cb89ca8ff6614c7e9
Author: Tim Murray <timmurray@google.com>
Date:   Tue Aug 25 00:30:55 2015 -0700

    Add foreground/boost cpuset.
    
    This is used for app launches (and maybe other high priority tasks
    in the future). It's to be set to whatever cores should be used
    for short term high-priority tasks.
    
    bug 21915482
    
    Change-Id: Id0ab0499146c09e860b97f4cb8095834cb12dd50

commit ef6556b8f9a89708b6c96106a2b79c97dc9b2fc5
Merge: 3bd964480 22bc242a5
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Aug 21 15:22:57 2015 -0700

    resolved conflicts for merge of 22bc242a to master
    
    Change-Id: I80546955611db9d003466c78588e8a7316ca9a6d

commit 57a082f4de1864daf545e9f11f7373a409614326
Merge: d64bf3389 b21de5f62
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Aug 21 15:12:28 2015 -0700

    resolved conflicts for merge of b21de5f6 to mnc-dev-plus-aosp
    
    Change-Id: Ia0c7f2e33e22b2419811f7e68da276e02e156d08

commit 22bc242a5b3ecc3efc88d82f99d96a7eb05996fa
Merge: 25c22bb9e b21de5f62
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Aug 21 15:09:30 2015 -0700

    resolved conflicts for merge of b21de5f6 to mnc-dr-dev-plus-aosp
    
    Change-Id: I13fd71d5af0b0a66d0c3e2f026581c60e9b95e8b

commit 837135a64fff9f9d5ae630642cfba41cc95d07f8
Author: Tom Cherry <tomcherry@google.com>
Date:   Fri Aug 14 13:03:44 2015 -0700

    remove bundled services from rootdir/init.rc
    
    Services definitions for core services are now bundled with the source
    for the service itself in the form of <service name>.rc.  These
    individual .rc files are now located in /system/init/... and are
    parsed when the system partition is mounted.
    
    Bug: 23186545
    Change-Id: Ia1b73af8d005633aa4252d603892064d7804163d

commit 063d4b07abf39ec44e4184cb5410eb9d4ac84940
Merge: 3141d1abb 94629bdec
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Aug 6 21:31:13 2015 +0000

    am 94629bde: resolved conflicts for merge of 779a38a5 to mnc-dr-dev-plus-aosp
    
    * commit '94629bdec34b253fa2e9cd9ec800715b3c3a4f7f':
      Protect runtime storage mount points.

commit 94629bdec34b253fa2e9cd9ec800715b3c3a4f7f
Merge: ee00d9ccf 779a38a5c
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Aug 6 14:22:09 2015 -0700

    resolved conflicts for merge of 779a38a5 to mnc-dr-dev-plus-aosp
    
    Change-Id: Ieaa0dcd8e93fba3060e9a85f17b1f5eabc6b8c9e

commit fdf14874930e92933eda7c756fd3bfe1f5e6c09a
Merge: 0e3b339bb b9f438ff8
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Aug 6 12:50:48 2015 -0700

    resolved conflicts for merge of b9f438ff to mnc-dev-plus-aosp
    
    Change-Id: I7103bacb1b2d7dc29b4f8d9dddb2fec1feb869d3

commit 779a38a5cd8dab1741ae4a45907bfdf0449bd546
Merge: d3a5e857e b9f438ff8
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Aug 6 19:35:56 2015 +0000

    am b9f438ff: Protect runtime storage mount points.
    
    * commit 'b9f438ff841f87c8ffbca85b13a533718a18e15f':
      Protect runtime storage mount points.

commit b9f438ff841f87c8ffbca85b13a533718a18e15f
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Aug 6 11:39:44 2015 -0700

    Protect runtime storage mount points.
    
    We have a bunch of magic that mounts the correct view of storage
    access based on the runtime permissions of an app, but we forgot to
    protect the real underlying data sources; oops.
    
    This series of changes just bumps the directory heirarchy one level
    to give us /mnt/runtime which we can mask off as 0700 to prevent
    people from jumping to the exposed internals.
    
    Also add CTS tests to verify that we're protecting access to
    internal mount points like this.
    
    Bug: 22964288
    Change-Id: I32068e63a3362b37e8ebca1418f900bb8537b498

commit 91e1b0135d322a1f604fbdc8ec26fad1d2a8bdd9
Merge: a50bd8d36 70ab38a57
Author: Yasuhiro Matsuda <mazda@google.com>
Date:   Thu Jul 30 19:07:23 2015 +0900

    resolved conflicts for merge of 70ab38a5 to master
    
    Change-Id: I7092ecb87f4020add5fe8843f188955a5579c284

commit 70ab38a5702129ae1cc064345c76f66b4bfa57c2
Merge: ea504bc08 102ead3ae
Author: Yasuhiro Matsuda <mazda@google.com>
Date:   Thu Jul 30 08:05:46 2015 +0000

    am 102ead3a: am b10e562b: Merge "Introduce a mechanism to trace boot sequence."
    
    * commit '102ead3ae187a007b8a90b61ea243197927b6ae2':
      Introduce a mechanism to trace boot sequence.

commit 6b802c4b9565c83a863c88416e6b7e5c3d418aeb
Merge: eeea3fc1b 102ead3ae
Author: Yasuhiro Matsuda <mazda@google.com>
Date:   Thu Jul 30 08:05:13 2015 +0000

    am 102ead3a: am b10e562b: Merge "Introduce a mechanism to trace boot sequence."
    
    * commit '102ead3ae187a007b8a90b61ea243197927b6ae2':
      Introduce a mechanism to trace boot sequence.

commit f93db4b827818806ca4cee80e6ec954d7aa40632
Author: Yasuhiro Matsuda <mazda@google.com>
Date:   Mon Jun 15 18:49:35 2015 +0900

    Introduce a mechanism to trace boot sequence.
    
    This CL adds a trigger and a service so that Systrace can be used
    for tracing events during boot.
    persist.debug.atrace.boottrace property is used for switching on
    and off tracing during boot. /data/misc/boottrace/categories
    file is used for specifying the categories to be traced.
    These property and file are rewritten by Systrace when the newly
    added option --boot is specified.
    
    Here is an example of tracing events of am and wm catetories
    during boot.
    
    $ external/chromium-trace/systrace am wm --boot
    
    This command will cause the device to reboot. Once the device has
    booted up, the trace report is created by hitting Ctrl+C.
    
    As written in readme.txt, this mechanism relies on persistent
    property, so tracing events that are emitted before that are not
    recorded. This is enough for tracing events after zygote is
    launched though.
    This only works on userdebug or eng build for security reason.
    
    BUG: 21739901
    Change-Id: I03f2963d77a678f47eab5e3e29fc7e91bc9ca3a4

commit 3fe84e009e20e2104d6a0a6322f18c856b460477
Merge: 36a8b3e88 f05256b32
Author: Jeffrey Vander Stoep <jeffv@google.com>
Date:   Tue Jul 28 21:38:13 2015 +0000

    am f05256b3: am 4b70dd4c: am 26f0f657: Merge "init.rc: add healthd to system group to allow write to /dev/cpuset" into mnc-dev
    
    * commit 'f05256b32b815fc5d8be65e2fbc2e4a9f4da5ccd':
      init.rc: add healthd to system group to allow write to /dev/cpuset

commit f05256b32b815fc5d8be65e2fbc2e4a9f4da5ccd
Merge: b1dda7c16 4b70dd4c8
Author: Jeffrey Vander Stoep <jeffv@google.com>
Date:   Tue Jul 28 21:12:51 2015 +0000

    am 4b70dd4c: am 26f0f657: Merge "init.rc: add healthd to system group to allow write to /dev/cpuset" into mnc-dev
    
    * commit '4b70dd4c8f5c5c2baed8cb1f8436bf74971e20c6':
      init.rc: add healthd to system group to allow write to /dev/cpuset

commit 6beb774d5e1606a2a1791c3d165cdecb4fb62b36
Merge: 6e629e46a 26f0f657e
Author: Jeffrey Vander Stoep <jeffv@google.com>
Date:   Tue Jul 28 20:08:40 2015 +0000

    am 26f0f657: Merge "init.rc: add healthd to system group to allow write to /dev/cpuset" into mnc-dev
    
    * commit '26f0f657ec027430bde7d2237890ba59b3fd174a':
      init.rc: add healthd to system group to allow write to /dev/cpuset

commit 4b70dd4c8f5c5c2baed8cb1f8436bf74971e20c6
Merge: 9c298f820 26f0f657e
Author: Jeffrey Vander Stoep <jeffv@google.com>
Date:   Tue Jul 28 20:07:55 2015 +0000

    am 26f0f657: Merge "init.rc: add healthd to system group to allow write to /dev/cpuset" into mnc-dev
    
    * commit '26f0f657ec027430bde7d2237890ba59b3fd174a':
      init.rc: add healthd to system group to allow write to /dev/cpuset

commit 26f0f657ec027430bde7d2237890ba59b3fd174a
Merge: cc451785f a30a8e02d
Author: Jeffrey Vander Stoep <jeffv@google.com>
Date:   Tue Jul 28 19:54:40 2015 +0000

    Merge "init.rc: add healthd to system group to allow write to /dev/cpuset" into mnc-dev

commit a30a8e02dd41505f46e692f29943011a032a5210
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Tue Jul 28 12:27:36 2015 -0700

    init.rc: add healthd to system group to allow write to /dev/cpuset
    
    Also add to root group to avoid introducting new bugs.
    
    Bug: 22699101
    Change-Id: I9da31e0cc955efd711df3f4c6b17e39d74c01549

commit b4a5b3bac591268337ea17efde88b3749d8c2e24
Merge: 9752a4696 b57ba0478
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Jul 27 19:00:59 2015 +0000

    am b57ba047: am ba03cc95: am 5f3b05ad: Merge "init.rc: mkdir /data/anr 0775 system system"
    
    * commit 'b57ba047805fd7a779927075be4581f03f3ad938':
      init.rc: mkdir /data/anr 0775 system system

commit b57ba047805fd7a779927075be4581f03f3ad938
Merge: 552f23dee ba03cc953
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Jul 27 18:50:31 2015 +0000

    am ba03cc95: am 5f3b05ad: Merge "init.rc: mkdir /data/anr 0775 system system"
    
    * commit 'ba03cc953ff9076d5b01748912b102db43911f7f':
      init.rc: mkdir /data/anr 0775 system system

commit 0f42f3937126a6de329406216b1bac73da79ef35
Merge: 8a8953bb3 ba03cc953
Author: Nick Kralevich <nnk@google.com>
Date:   Sun Jul 26 06:16:06 2015 +0000

    am ba03cc95: am 5f3b05ad: Merge "init.rc: mkdir /data/anr 0775 system system"
    
    * commit 'ba03cc953ff9076d5b01748912b102db43911f7f':
      init.rc: mkdir /data/anr 0775 system system

commit c2ea70ae6ebcf98bd067e06b3e33894ef5c260c8
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Jul 25 21:06:20 2015 -0700

    init.rc: mkdir /data/anr 0775 system system
    
    Ensure that /data/anr always exists. This allows us to eliminate
    some code in system_server and dumpstate. In addition, this change
    solves a common problem where people would create the directory
    manually but fail to set the SELinux label, which would cause
    subsequent failures when they used the directory for ANRs.
    
    Bug: 22385254
    Change-Id: I29eb3deb21a0504aed07570fee3c2f87e41f53a0

commit 9752a4696eefe82e6dfe37879bb8ee19c291ead7
Merge: a96ad297f 552f23dee
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Sat Jul 25 17:00:47 2015 +0000

    am 552f23de: am 1d0fe13a: am 3f62a020: logd: allow logd to write to /dev/cpuset files
    
    * commit '552f23deef9491f4e60b78f1ca6f89b7b60c5de2':
      logd: allow logd to write to /dev/cpuset files

commit 552f23deef9491f4e60b78f1ca6f89b7b60c5de2
Merge: 919bb66f7 1d0fe13a9
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Sat Jul 25 16:38:32 2015 +0000

    am 1d0fe13a: am 3f62a020: logd: allow logd to write to /dev/cpuset files
    
    * commit '1d0fe13a9e720a88766b38070195670183274e30':
      logd: allow logd to write to /dev/cpuset files

commit 1d0fe13a9e720a88766b38070195670183274e30
Merge: e850f5786 3f62a020c
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Sat Jul 25 00:59:33 2015 +0000

    am 3f62a020: logd: allow logd to write to /dev/cpuset files
    
    * commit '3f62a020c48d5d812fb2898759b93a59dc24d310':
      logd: allow logd to write to /dev/cpuset files

commit c200e9564b3ec7eea4b55badbeb0882c9674513d
Merge: 187afaf54 3f62a020c
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Fri Jul 24 23:31:53 2015 +0000

    am 3f62a020: logd: allow logd to write to /dev/cpuset files
    
    * commit '3f62a020c48d5d812fb2898759b93a59dc24d310':
      logd: allow logd to write to /dev/cpuset files

commit 3f62a020c48d5d812fb2898759b93a59dc24d310
Author: Jeff Vander Stoep <jeffv@google.com>
Date:   Thu Jul 23 15:18:36 2015 -0700

    logd: allow logd to write to /dev/cpuset files
    
    Required by logd on devices with USE_CPUSETS defined.
    
    Make /dev/cpuset/background, /dev/cpuset/foreground and
    /dev/cpuset/task writeable by system gid. Add logd to system
    group for writing to cpuset files and to root group to avoid
    regressions. When dropping privs, also drop supplementary groups.
    
    Bug: 22699101
    Change-Id: Icc01769b18b5e1f1649623da8325a8bfabc3a3f0

commit 42525a1b24af0e90a8c7b45c4a38278c9d84953f
Merge: 458cca4c4 7c1ae0051
Author: Riley Andrews <riandrews@google.com>
Date:   Tue Jul 21 21:44:03 2015 +0000

    am 7c1ae005: am e850f578: Disable scaling of the cfs tunables.
    
    * commit '7c1ae0051d8492b12862f0983521883a1325bdd3':
      Disable scaling of the cfs tunables.

commit 7c1ae0051d8492b12862f0983521883a1325bdd3
Merge: 36bb59cda e850f5786
Author: Riley Andrews <riandrews@google.com>
Date:   Tue Jul 21 21:15:37 2015 +0000

    am e850f578: Disable scaling of the cfs tunables.
    
    * commit 'e850f5786cdd4d3e4f1157db8785de3e6ff77eab':
      Disable scaling of the cfs tunables.

commit e850f5786cdd4d3e4f1157db8785de3e6ff77eab
Author: Riley Andrews <riandrews@google.com>
Date:   Mon Jul 20 16:01:48 2015 -0700

    Disable scaling of the cfs tunables.
    
    The cfs tunables auto-scale with the number of active cpus by default. Given
    that the tunable settings are in device-independent code and it's not
    known how many cores are currently active when the init.rc file runs,
    the cfs tunables can vary pretty significantly across devices depending
    on the state at boot. Disable scaling of the the tunables so that we
    can get more consistent behavior of cfs across devices. If we want to
    do per-device tuning of these values, we can override what's written
    here in device specific files.
    
    Bug: 22634118
    Change-Id: Id19b24ef819fef762521e75af55e6d4378cfc949

commit fc1a8c1d353403a07ca035203d6823c4a5031bcb
Merge: c2a30be41 69b2c2a12
Author: Elliott Hughes <enh@google.com>
Date:   Sat Jul 18 18:15:57 2015 +0000

    am 69b2c2a1: am 6657d224: am 069f62de: Merge "Fix N9 boot."
    
    * commit '69b2c2a125f655a43f54a181d5ddbe714f4848ca':
      Fix N9 boot.

commit 69b2c2a125f655a43f54a181d5ddbe714f4848ca
Merge: 790d25b76 6657d2248
Author: Elliott Hughes <enh@google.com>
Date:   Sat Jul 18 18:02:01 2015 +0000

    am 6657d224: am 069f62de: Merge "Fix N9 boot."
    
    * commit '6657d2248e902289476c4b937f5d6a1585c95ec2':
      Fix N9 boot.

commit 546738a4e7afbb216876cf65791c87adb0541e7d
Merge: cb599d34b 6657d2248
Author: Elliott Hughes <enh@google.com>
Date:   Sat Jul 18 18:01:41 2015 +0000

    am 6657d224: am 069f62de: Merge "Fix N9 boot."
    
    * commit '6657d2248e902289476c4b937f5d6a1585c95ec2':
      Fix N9 boot.

commit 04b2022f7eebffda31f1f86e4f9ee06c45fd0578
Author: Elliott Hughes <enh@google.com>
Date:   Sat Jul 18 10:34:53 2015 -0700

    Fix N9 boot.
    
    Without this, sdcard fails to start because its mount point doesn't
    exist.
    
    Bug: http://b/22568628
    Change-Id: Ic6a2f51fc74c5bd1f23d97592049495ac3822bb3

commit 15db3551d005a58407a8ac97b73a879530dd3e74
Author: Daniel Rosenberg <drosen@google.com>
Date:   Tue Jul 14 15:40:25 2015 -0700

    resolved conflicts for merge of 074ee014 to mnc-dev-plus-aosp
    
    Change-Id: Iead524946a84503a6e89c17861d3f54e4cf276a0

commit 6e1fd8dde739a205e58ebc64347ebc63ddd02a39
Merge: c044d2593 1c45c0ff5
Author: Daniel Rosenberg <drosen@google.com>
Date:   Tue Jul 14 20:41:38 2015 +0000

    am 1c45c0ff: Merge "resolved conflicts for merge of 074ee014 to mnc-dr-dev-plus-aosp" into mnc-dr-dev-plus-aosp
    
    * commit '1c45c0ff5d1cbd49d2d77fa837e1be0724fa77b3':
      Remove creation of root directory folders

commit cfda5bb47ac558d3628074904e386178c3fc58e1
Merge: 559349e7b 074ee014b
Author: Daniel Rosenberg <drosen@google.com>
Date:   Tue Jul 14 12:47:36 2015 -0700

    resolved conflicts for merge of 074ee014 to mnc-dr-dev-plus-aosp
    
    Change-Id: I346583851035950350433136599f73ab2bedba4b

commit b7f1f61fbc1c2eae7a689df476da401847a936d9
Merge: c1fa34b9f ee923139c
Author: Paul Crowley <paulcrowley@google.com>
Date:   Tue Jul 14 00:27:56 2015 +0000

    am ee923139: Merge "Set up user directory crypto in init." into mnc-dr-dev
    
    * commit 'ee923139c346e6751203fc7d2a341388e01c7b19':
      Set up user directory crypto in init.
      logd: switch to unordered_map from BasicHashtable
      rootdir: make sure the /oem mountpoint is always available

commit f3fbfaef220ead1f68dd5f6a6b2a10ae019764c4
Merge: c5e804a1e c1fa34b9f
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Jul 13 22:39:08 2015 +0000

    am c1fa34b9: am d5ef9841: Merge "Change init sequence to support file level encryption" into mnc-dr-dev
    
    * commit 'c1fa34b9f600c827769b4401d8b12e7c587b68f4':
      Change init sequence to support file level encryption

commit ee923139c346e6751203fc7d2a341388e01c7b19
Merge: d5ef98419 749af8c08
Author: Paul Crowley <paulcrowley@google.com>
Date:   Mon Jul 13 20:52:43 2015 +0000

    Merge "Set up user directory crypto in init." into mnc-dr-dev

commit c1fa34b9f600c827769b4401d8b12e7c587b68f4
Merge: 8ee286c21 d5ef98419
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Jul 13 17:53:08 2015 +0000

    am d5ef9841: Merge "Change init sequence to support file level encryption" into mnc-dr-dev
    
    * commit 'd5ef984195779aa9e27d7baabdd751d641eea1a0':
      Change init sequence to support file level encryption

commit 64dffd3975824512353244684c960845be8bdde2
Author: Daniel Rosenberg <drosen@google.com>
Date:   Wed Jul 8 16:30:22 2015 -0700

    Remove creation of root directory folders
    
    Folders in the root directory are now created during the build,
    as we may be building without a ramdisk, and when we do that,
    the root directory will be read-only.  With those changes,
    these mkdirs will never need to run.
    
    Change-Id: I49c63e8bfc71d28e3f938ed41f81d108359fa57a

commit 2ed2e30120778b3b4e2fe67c7e1871465c87ad7f
Merge: d80e24341 e8308f852
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Jul 7 20:36:19 2015 +0000

    am e8308f85: am 81046166: Merge "Revert "Change init sequence to support file level encryption"" into mnc-dev
    
    * commit 'e8308f852c867bc676e71875ea57de022464ea09':
      Revert "Change init sequence to support file level encryption"

commit 948410a4936fda5348304af9711db932926bcc1a
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Jul 1 14:40:56 2015 -0700

    Change init sequence to support file level encryption
    
    File level encryption must get the key between mounting userdata and
    calling post_fs_data when the directories are created. This requires
    access to keymaster, which in turn is found from a system property.
    
    Split property loaded into system and data, and load in right order.
    
    Bug: 22233063

commit e8308f852c867bc676e71875ea57de022464ea09
Merge: 722d4a54d 810461669
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Jul 7 18:20:27 2015 +0000

    am 81046166: Merge "Revert "Change init sequence to support file level encryption"" into mnc-dev
    
    * commit '8104616696ac5e806b16a393ea02c4f5d8efc328':
      Revert "Change init sequence to support file level encryption"

commit c011b031c988038f81c72875fdd6ac7349774f35
Merge: 775b58d08 810461669
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Jul 7 17:39:03 2015 +0000

    am 81046166: Merge "Revert "Change init sequence to support file level encryption"" into mnc-dev
    
    * commit '8104616696ac5e806b16a393ea02c4f5d8efc328':
      Revert "Change init sequence to support file level encryption"

commit 8104616696ac5e806b16a393ea02c4f5d8efc328
Merge: 833f142d2 437bc5dce
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Jul 7 17:28:59 2015 +0000

    Merge "Revert "Change init sequence to support file level encryption"" into mnc-dev

commit 437bc5dceca1608456c1c40b694645bc2d100ad4
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Jul 7 17:05:58 2015 +0000

    Revert "Change init sequence to support file level encryption"
    
    This reverts commit d815178b7512cb44d8b5f234e3f823b5a3e44dea.
    
    Change-Id: I7e3f55d3092fcd04ea9f62f1971c9d42570f096c

commit d80e24341176ca9d4048dfae41d99d9435285ee4
Merge: ca0b82333 722d4a54d
Author: Andres Morales <anmorales@google.com>
Date:   Tue Jul 7 01:09:04 2015 +0000

    am 722d4a54: am 833f142d: Merge "[init] start gatekeeperd after device decryption" into mnc-dev
    
    * commit '722d4a54d9fa49581931e7c88fee5aa0c1f3c5f8':
      [init] start gatekeeperd after device decryption

commit 1c875cc40fa3290c79c463140cbbff98eb524941
Merge: 7c195a276 22d0ee6a2
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Jul 7 00:32:17 2015 +0000

    am 22d0ee6a: am a65e402b: Merge "Change init sequence to support file level encryption" into mnc-dev
    
    * commit '22d0ee6a25b3bedd6c3cd52473df1404fce8615f':
      Change init sequence to support file level encryption

commit 722d4a54d9fa49581931e7c88fee5aa0c1f3c5f8
Merge: 609c7acd0 833f142d2
Author: Andres Morales <anmorales@google.com>
Date:   Mon Jul 6 23:57:49 2015 +0000

    am 833f142d: Merge "[init] start gatekeeperd after device decryption" into mnc-dev
    
    * commit '833f142d201a4b682885ff9d95c6b3ab32fd0618':
      [init] start gatekeeperd after device decryption

commit 775b58d08f207cc1752deca50e4526f19ac14583
Merge: f92c19ee3 833f142d2
Author: Andres Morales <anmorales@google.com>
Date:   Mon Jul 6 23:10:31 2015 +0000

    am 833f142d: Merge "[init] start gatekeeperd after device decryption" into mnc-dev
    
    * commit '833f142d201a4b682885ff9d95c6b3ab32fd0618':
      [init] start gatekeeperd after device decryption

commit 833f142d201a4b682885ff9d95c6b3ab32fd0618
Merge: 6b6c1bd99 4dd2982dd
Author: Andres Morales <anmorales@google.com>
Date:   Mon Jul 6 23:00:08 2015 +0000

    Merge "[init] start gatekeeperd after device decryption" into mnc-dev

commit 22d0ee6a25b3bedd6c3cd52473df1404fce8615f
Merge: 341b607c8 a65e402b6
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Jul 6 20:34:05 2015 +0000

    am a65e402b: Merge "Change init sequence to support file level encryption" into mnc-dev
    
    * commit 'a65e402b613e927697d35e7936c6d80908d77e88':
      Change init sequence to support file level encryption

commit d3669ff27f782ce1da324f0a6043204a3a4e9f3f
Merge: 0c3cb52df a65e402b6
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Jul 6 19:52:40 2015 +0000

    am a65e402b: Merge "Change init sequence to support file level encryption" into mnc-dev
    
    * commit 'a65e402b613e927697d35e7936c6d80908d77e88':
      Change init sequence to support file level encryption

commit 4dd2982dd31d43e905f6792201c404a2e549ca17
Author: Andres Morales <anmorales@google.com>
Date:   Mon Jul 6 12:00:22 2015 -0700

    [init] start gatekeeperd after device decryption
    
    gatekeeperd depends on having /data to determine whether
    to call setup routines for qcom HALs.
    
    Bug: 22298552
    Change-Id: I6c552016dc863bbb04bd5a949a2317a720c8263f

commit d815178b7512cb44d8b5f234e3f823b5a3e44dea
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Jul 1 14:40:56 2015 -0700

    Change init sequence to support file level encryption
    
    File level encryption must get the key between mounting userdata and
    calling post_fs_data when the directories are created. This requires
    access to keymaster, which in turn is found from a system property.
    
    Split property loaded into system and data, and load in right order.
    
    Bug: 22233063
    Change-Id: I8a6c40d44e17de386417a443c9dfc3b4e7fe59a5

commit 35e0cc552c4466c46cf3fc4c326b708313a2e1f9
Merge: b15e63602 96835733b
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Jun 26 16:18:13 2015 +0000

    am 96835733: am f38f29c8: Let\'s reinvent storage, yet again!
    
    * commit '96835733b397da908c86e2a1190b8c8baf06a441':
      Let's reinvent storage, yet again!

commit 96835733b397da908c86e2a1190b8c8baf06a441
Merge: d3b8b72ec f38f29c87
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Jun 26 16:05:20 2015 +0000

    am f38f29c8: Let\'s reinvent storage, yet again!
    
    * commit 'f38f29c87d97cea45d04b783bddbd969234b1030':
      Let's reinvent storage, yet again!

commit f38f29c87d97cea45d04b783bddbd969234b1030
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Tue Jun 23 14:30:37 2015 -0700

    Let's reinvent storage, yet again!
    
    Now that we're treating storage as a runtime permission, we need to
    grant read/write access without killing the app.  This is really
    tricky, since we had been using GIDs for access control, and they're
    set in stone once Zygote drops privileges.
    
    The only thing left that can change dynamically is the filesystem
    itself, so let's do that.  This means changing the FUSE daemon to
    present itself as three different views:
    
    /mnt/runtime_default/foo - view for apps with no access
    /mnt/runtime_read/foo - view for apps with read access
    /mnt/runtime_write/foo - view for apps with write access
    
    There is still a single location for all the backing files, and
    filesystem permissions are derived the same way for each view, but
    the file modes are masked off differently for each mountpoint.
    
    During Zygote fork, it wires up the appropriate storage access into
    an isolated mount namespace based on the current app permissions.  When
    the app is granted permissions dynamically at runtime, the system
    asks vold to jump into the existing mount namespace and bind mount
    the newly granted access model into place.
    
    Bug: 21858077
    Change-Id: I5a016f0958a92fd390c02b5ae159f8008bd4f4b7

commit 749af8c08f6db8da4202ad93f9a6d06884b27c0d
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu May 28 17:35:06 2015 +0100

    Set up user directory crypto in init.
    
    (cherry-picked from commit b94032b79c3cded501e2d5f7c328cf8c0c3911c4)
    
    Bug: 19704432
    Change-Id: Ife4928ffbee39c8ae69e6ba66d9ce5ef5a0beb76

commit a88a084e94e348206298b796eb1f9709e06cfc14
Merge: 0ace5f20f 233286f40
Author: Pavlin Radoslavov <pavlin@google.com>
Date:   Tue Jun 23 01:39:01 2015 +0000

    am 233286f4: am 4caa9f39: Merge "Fix the file permissions of /data/misc/bluedroid/bt_config.conf" into mnc-dev
    
    * commit '233286f40bdd84ad26b5ebf615d9f62fc30e19bf':
      Fix the file permissions of /data/misc/bluedroid/bt_config.conf

commit 233286f40bdd84ad26b5ebf615d9f62fc30e19bf
Merge: f7180d1d2 4caa9f39b
Author: Pavlin Radoslavov <pavlin@google.com>
Date:   Tue Jun 23 01:31:49 2015 +0000

    am 4caa9f39: Merge "Fix the file permissions of /data/misc/bluedroid/bt_config.conf" into mnc-dev
    
    * commit '4caa9f39bb3415358dcb737d0eb9058c34192806':
      Fix the file permissions of /data/misc/bluedroid/bt_config.conf

commit 8175bb235277f637faf30138b30e97e07fb85b8e
Author: Pavlin Radoslavov <pavlin@google.com>
Date:   Fri Jun 19 19:12:46 2015 -0700

    Fix the file permissions of /data/misc/bluedroid/bt_config.conf
    
    Fix the file access permissions and group ownership of
    "/data/misc/bluedroid/bt_config.conf" so the file can be reused when
    switching users on the device.
    For that purpose, we need to do the following:
    
    1. Set the set-group-ID (bit 02000) flag for directory "/data/misc/bluedroid"
       so the files created in that directory will have group-id of
       "net_bt_stack" .
    
    2. Change the file's permissions of file "/data/misc/bluedroid/bt_config.conf"
       to Read/Write by User and Group.
    
    Bug: 21493919
    Change-Id: Ie00ab4695198ef2aa299b484ef9d4f17bd41b98a

commit c15560d49637c3d57a0291eb6d17e948a30ac6e5
Merge: 766ca5cd6 7c6020ba5
Author: Tim Kilbourn <tkilbourn@google.com>
Date:   Fri Jun 12 21:33:14 2015 +0000

    Merge "Don't restart zygote when inputflinger dies."

commit 766ca5cd6cf841869aa1baaa4c9b40b1363a2444
Merge: 83da7c6a5 f8fcd6a61
Author: Tim Kilbourn <tkilbourn@google.com>
Date:   Fri Jun 12 21:33:01 2015 +0000

    Merge "Revert "Track removal of the inputflinger binary.""

commit 83da7c6a54be49adf9e0fc7892c910cbe2f11fec
Merge: 264a4afee 63e383136
Author: Tim Murray <timmurray@google.com>
Date:   Fri Jun 12 19:15:46 2015 +0000

    am 63e38313: am e5b0c837: Merge "add cpuset support to libcutils" into mnc-dev
    
    * commit '63e383136b8a76fdf619aa878b58b815a094e6ee':
      add cpuset support to libcutils

commit 63e383136b8a76fdf619aa878b58b815a094e6ee
Merge: 2eefc61d0 e5b0c8378
Author: Tim Murray <timmurray@google.com>
Date:   Fri Jun 12 19:03:30 2015 +0000

    am e5b0c837: Merge "add cpuset support to libcutils" into mnc-dev
    
    * commit 'e5b0c837856007812ace8ec5849f6852015d5d2b':
      add cpuset support to libcutils

commit b769c8d24fd7be96f8968aa4c80b669525b930d3
Author: Tim Murray <timmurray@google.com>
Date:   Mon Jun 8 14:56:29 2015 -0700

    add cpuset support to libcutils
    
    bug 21782794
    
    Change-Id: I249531754fb29442dc3c7434d77dbb103f4220a7

commit 7c6020ba53b4b0c2560c11b2aae0e579f44aee29
Author: Tim Kilbourn <tkilbourn@google.com>
Date:   Tue May 5 17:01:32 2015 -0700

    Don't restart zygote when inputflinger dies.
    
    During development it is useful to be able to kill inputflinger and have
    init restart it without bringing down the entire system server.
    
    Change-Id: I8b13b94331c5045086db2f5c73a8f49efc5992cb

commit f8fcd6a616cad9424d98e91783d6f14c6f542a1a
Author: Tim Kilbourn <tkilbourn@google.com>
Date:   Tue Feb 24 09:43:03 2015 -0800

    Revert "Track removal of the inputflinger binary."
    
    This reverts commit 2422c17c5e5dc4aaaaca6ec99953497d87091a50.
    
    Change-Id: I11d1624947dcc3cdcd0d648de6cc25901c91dac6

commit 04b10b9aa3d4d80addbf5079e1d72b4001ce4172
Author: Tao Bao <tbao@google.com>
Date:   Mon May 11 14:08:18 2015 -0700

    Change pre-recovery into two services
    
    /system/bin/uncrypt needs to be triggered to prepare the OTA package
    before rebooting into the recovery. Separate pre-recovery (uncrypt)
    into two services: uncrypt that does the uncryption work and
    pre-recovery that actually reboots the device into recovery.
    
    Also create /cache/recovery on post-fs in case it doesn't exist.
    
    Bug: 20012567
    Bug: 20949086
    (cherry picked from commit e48aed0f0abd10cb21e14d81ae46214d08872f79)
    Change-Id: I9877cd6ac9412ea6a566bb1ec0807940c7a38ce5

commit b183361199fe206c25ed666f3ad397460939f140
Merge: 575719a0a a7dcec1da
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri Jun 5 00:47:36 2015 +0000

    am a7dcec1d: am 3678a5fb: Merge "Move crypt commands to a different listener in vold" into mnc-dev
    
    * commit 'a7dcec1da38c15d5e5ede7bfdec7ffd880cb6b82':
      Move crypt commands to a different listener in vold

commit a7dcec1da38c15d5e5ede7bfdec7ffd880cb6b82
Merge: d41dee7fc 3678a5fb8
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Jun 4 23:07:32 2015 +0000

    am 3678a5fb: Merge "Move crypt commands to a different listener in vold" into mnc-dev
    
    * commit '3678a5fb8d1094c4796c1316f3b571cb63cf7246':
      Move crypt commands to a different listener in vold

commit 3678a5fb8d1094c4796c1316f3b571cb63cf7246
Merge: 25a1341f4 37fcc5d73
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Jun 4 21:32:14 2015 +0000

    Merge "Move crypt commands to a different listener in vold" into mnc-dev

commit 7dbe806939c164a7b681c57a9725ae9e501f0377
Merge: 3ada4d08c e2722e9bf
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jun 3 22:25:14 2015 +0000

    am e2722e9b: am a20d6f4e: am 2ec88501: Merge "tzdatacheck: don\'t hard code SELinux domain name"
    
    * commit 'e2722e9bfbeb2f2f349493fbe9b464c24e416ee0':
      tzdatacheck: don't hard code SELinux domain name

commit 37fcc5d73ebf31b193cda41731a5a9dcb8206473
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Jun 3 14:19:29 2015 -0700

    Move crypt commands to a different listener in vold
    
    In order to prevent this bug from happening, we must allow vold cryptfs
    commands to complete while a long running mount is underway.
    
    While waiting for vold to be changed to a binder interface, we will simply
    create two listeners, one for cryptfs and one for everything else.
    
    Bug: 19197175
    Change-Id: Ie3d9567819ced7757b0a8f391547f27db944153c

commit e2722e9bfbeb2f2f349493fbe9b464c24e416ee0
Merge: 618981ad8 a20d6f4e1
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jun 3 20:53:31 2015 +0000

    am a20d6f4e: am 2ec88501: Merge "tzdatacheck: don\'t hard code SELinux domain name"
    
    * commit 'a20d6f4e154939722263207ddf5954b3f58f666d':
      tzdatacheck: don't hard code SELinux domain name

commit 32512e716750b94c9e72c50a98a5db724857f1d5
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jun 3 13:05:28 2015 -0700

    tzdatacheck: don't hard code SELinux domain name
    
    An automatic domain transition is already defined by SELinux
    policy. Avoid having redundant information on the exec line.
    
    This commit depends on commit 17fff893c04971b519d25d52b07f51111353cba5
    which made the SELinux process label optional.
    
    (cherrypicked from commit 221fca7ddd2ba1778ec89013c96434a9d36b529e)
    
    Change-Id: I89464f2bd218c7d6e8db08aa6bed2b62ec6dad2a

commit 221fca7ddd2ba1778ec89013c96434a9d36b529e
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jun 3 13:05:28 2015 -0700

    tzdatacheck: don't hard code SELinux domain name
    
    An automatic domain transition is already defined by SELinux
    policy. Avoid having redundant information on the exec line.
    
    This commit depends on commit 17fff893c04971b519d25d52b07f51111353cba5
    which made the SELinux process label optional.
    
    Change-Id: I89464f2bd218c7d6e8db08aa6bed2b62ec6dad2a

commit b94032b79c3cded501e2d5f7c328cf8c0c3911c4
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu May 28 17:35:06 2015 +0100

    Set up user directory crypto in init.
    
    Bug: 19704432
    Change-Id: Ife4928ffbee39c8ae69e6ba66d9ce5ef5a0beb76

commit f8a6fa503f13202dea3189eb284d8a8950f80b9e
Author: Paul Crowley <paulcrowley@google.com>
Date:   Wed Jun 3 13:33:43 2015 +0100

    Restore creation of /data/misc/vold erroneously rolled back
    
    Rollback commit: 9f403450bcce9ef0ef99ff58b65eb3b1eedc6979
    
    Bug: 19704432
    Change-Id: I1a73a2e1d3f4d5441df4d686d420d3a79b3e95bc

commit d8a99287a411c62a536f9b2b0be35e4d0ca16c0d
Merge: 2d70811ec 560515540
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Jun 2 22:52:31 2015 +0000

    am 56051554: am e0e56563: am 0bda352f: Merge changes from topic \'logcatd\'
    
    * commit '560515540d3ef4da9dc58e3b7fcfeb6c067bb677':
      init.rc: logd: Add logpersistd (nee logcatd)
      init: change exec parsing to make SECLABEL optional
      logcat: -f run in background
      logcat: -f flag to continue

commit 560515540d3ef4da9dc58e3b7fcfeb6c067bb677
Merge: 698054a81 e0e565635
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Jun 2 22:41:29 2015 +0000

    am e0e56563: am 0bda352f: Merge changes from topic \'logcatd\'
    
    * commit 'e0e565635a7c6c36a05282622c01203afbec5ca5':
      init.rc: logd: Add logpersistd (nee logcatd)
      init: change exec parsing to make SECLABEL optional
      logcat: -f run in background
      logcat: -f flag to continue

commit 49ed105fd91677f7c87417890bf7441146953fff
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue May 26 14:57:13 2015 -0700

    init.rc: logd: Add logpersistd (nee logcatd)
    
    (cherry pick from commit 100658c303919d8f69c76f6f25eac376795712f0)
    
    - logpersistd is defined as a thread or process in the context of the
      logd domain. Here we define logpersistd as logcat -f in logd domain
      and call it logcatd to represent its service mechanics.
    - Use logcatd to manage content in /data/misc/logd/ directory.
    - Only turn on for persist.logd.logpersistd = logcatd.
    - Add logpersist.start, logpersist.stop and logpersist.cat debug
      class executables, thus only in the eng and userdebug builds.
    
    ToDo: Wish to add Developer Options menu to turn this feature on or
    off, complicated by the fact that user builds have no tools with
    access rights to /data/misc/logd.
    
    Bug: 19608716
    Change-Id: I57ad757f121c473d04f9fabe9d4820a0eca06f31

commit 100658c303919d8f69c76f6f25eac376795712f0
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue May 26 14:57:13 2015 -0700

    init.rc: logd: Add logpersistd (nee logcatd)
    
    - logpersistd is defined as a thread or process in the context of the
      logd domain. Here we define logpersistd as logcat -f in logd domain
      and call it logcatd to represent its service mechanics.
    - Use logcatd to manage content in /data/misc/logd/ directory.
    - Only turn on for persist.logd.logpersistd = logcatd.
    - Add logpersist.start, logpersist.stop and logpersist.cat debug
      class executables, thus only in the eng and userdebug builds.
    
    ToDo: Wish to add Developer Options menu to turn this feature on or
    off, complicated by the fact that user builds have no tools with
    access rights to /data/misc/logd.
    
    Bug: 19608716
    Change-Id: I57ad757f121c473d04f9fabe9d4820a0eca06f31

commit 0a423d994a0dbd05924ae6cff702b5d4d7dd43f0
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 28 22:07:10 2015 +0000

    DO NOT MERGE Securely encrypt the master key
    
    (chery-picked from commit 806d10be2336f32cdca16c2540cbf3d548f2fec7)
    
    Move all key management into vold
    Reuse vold's existing key management through the crypto footer
    to manage the device wide keys.
    
    Use ro.crypto.type flag to determine crypto type, which prevents
    any issues when running in block encrypted mode, as well as speeding
    up boot in block or no encryption.
    
    This is one of four changes to enable this functionality:
      https://android-review.googlesource.com/#/c/148586/
      https://android-review.googlesource.com/#/c/148604/
      https://android-review.googlesource.com/#/c/148606/
      https://android-review.googlesource.com/#/c/148607/
    
    Bug: 18151196
    
    Change-Id: I6a8a18f43ae837e330e2785bd26c2c306ae1816b

commit 7cc023a7d59bef9e39ca374d5ba8c80e6f75cd7d
Merge: bf8dcfa5c 6b0938f7f
Author: Tao Bao <tbao@google.com>
Date:   Thu May 28 23:06:26 2015 +0000

    am 6b0938f7: am 6484f3d1: Merge "Change pre-recovery into two services" into mnc-dev
    
    * commit '6b0938f7fb39ad4ad071c2b493545409a3d69f41':
      Change pre-recovery into two services

commit 6b0938f7fb39ad4ad071c2b493545409a3d69f41
Merge: 4e89c5c1c 6484f3d1c
Author: Tao Bao <tbao@google.com>
Date:   Thu May 28 22:51:29 2015 +0000

    am 6484f3d1: Merge "Change pre-recovery into two services" into mnc-dev
    
    * commit '6484f3d1cb4078c7525e23d16c7e7bcd90afa653':
      Change pre-recovery into two services

commit 6484f3d1cb4078c7525e23d16c7e7bcd90afa653
Merge: 0c3f1ae66 e48aed0f0
Author: Tao Bao <tbao@google.com>
Date:   Thu May 28 21:48:15 2015 +0000

    Merge "Change pre-recovery into two services" into mnc-dev

commit 7c3f575c8a3e65340dc5d07701c7908ddb9b0907
Merge: df0afcb43 a4fd555fc
Author: Than McIntosh <thanm@google.com>
Date:   Thu May 28 17:39:18 2015 +0000

    am a4fd555f: am 51f8aa27: am f166e38b: Merge "Move perfprofd to late_start class."
    
    * commit 'a4fd555fc9654ba18d947deb13edae303172d575':
      Move perfprofd to late_start class.

commit a4fd555fc9654ba18d947deb13edae303172d575
Merge: 420979613 51f8aa27f
Author: Than McIntosh <thanm@google.com>
Date:   Thu May 28 17:19:32 2015 +0000

    am 51f8aa27: am f166e38b: Merge "Move perfprofd to late_start class."
    
    * commit '51f8aa27fdc5675cf0e621af6e14625a24720ff0':
      Move perfprofd to late_start class.

commit b37c45e90aa311b4d32a5b21dad5fce93c9761a7
Author: Than McIntosh <thanm@google.com>
Date:   Wed May 27 14:02:11 2015 -0400

    Move perfprofd to late_start class.
    
    Bug: http://b/19483574
    Change-Id: I88649b50b95cbddb7d0671a5499232cbef156c48
    (cherry picked from commit e8efd0d6bf41527d67a402ed3a945a8c5f75f10d)

commit e8efd0d6bf41527d67a402ed3a945a8c5f75f10d
Author: Than McIntosh <thanm@google.com>
Date:   Wed May 27 14:02:11 2015 -0400

    Move perfprofd to late_start class.
    
    Bug: http://b/19483574
    Change-Id: I88649b50b95cbddb7d0671a5499232cbef156c48

commit 9f403450bcce9ef0ef99ff58b65eb3b1eedc6979
Merge: cd31afb14 ffdac6ddf
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri May 22 21:42:39 2015 +0000

    am ffdac6dd: am f0b318d6: am 7c789575: Merge "Revert "Set up crypto for user directories in init.""
    
    * commit 'ffdac6ddf2e13370674821159edd9663b5302707':
      Revert "Set up crypto for user directories in init."

commit ffdac6ddf2e13370674821159edd9663b5302707
Merge: e2a306d77 f0b318d61
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri May 22 19:41:48 2015 +0000

    am f0b318d6: am 7c789575: Merge "Revert "Set up crypto for user directories in init.""
    
    * commit 'f0b318d61cc129f4ddd25859500857b9f8e34e69':
      Revert "Set up crypto for user directories in init."

commit 2e24bcfdce030d410cbc8e8c8fa3e8c1260ba65d
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri May 22 18:31:55 2015 +0000

    Revert "Set up crypto for user directories in init."
    
    Causes a boot loop in Shamu
    
    This reverts commit ce6f7160969e67c9caa486a6f249ab3e997c5f4c.
    
    Bug: 21396871
    Change-Id: I9709053c589807d4530a3a99bd84e5b3177316cd

commit 83e670e6871046f4c0bb19a28d82f811a163938f
Merge: 1ee93af13 e8cbb421c
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu May 21 22:12:58 2015 +0000

    am e8cbb421: am 5f3c715e: am 7f623dec: Merge "Set up crypto for user directories in init."
    
    * commit 'e8cbb421cd28ec754923a88a919557ee5b174411':
      Set up crypto for user directories in init.

commit e8cbb421cd28ec754923a88a919557ee5b174411
Merge: 7ea1d685a 5f3c715e1
Author: Paul Crowley <paulcrowley@google.com>
Date:   Thu May 21 21:59:40 2015 +0000

    am 5f3c715e: am 7f623dec: Merge "Set up crypto for user directories in init."
    
    * commit '5f3c715e1a8331f13ea39264b24dfc03ac8db060':
      Set up crypto for user directories in init.

commit ce6f7160969e67c9caa486a6f249ab3e997c5f4c
Author: Paul Crowley <paulcrowley@google.com>
Date:   Wed May 6 16:32:31 2015 +0100

    Set up crypto for user directories in init.
    
    Depends on https://android-review.googlesource.com/#/c/147911/
    
    Bug: 19704432
    Change-Id: Ie59c6b67f73c1cadd86e69d3c9673ddaddb49a7e

commit e48aed0f0abd10cb21e14d81ae46214d08872f79
Author: Tao Bao <tbao@google.com>
Date:   Mon May 11 14:08:18 2015 -0700

    Change pre-recovery into two services
    
    /system/bin/uncrypt needs to be triggered to prepare the OTA package
    before rebooting into the recovery. Separate pre-recovery (uncrypt)
    into two services: uncrypt that does the uncryption work and
    pre-recovery that actually reboots the device into recovery.
    
    Also create /cache/recovery on post-fs in case it doesn't exist.
    
    Bug: 20012567
    Bug: 20949086
    Change-Id: If67fe1e9ee6279593d2788452febcd3f0fe714c2

commit 0853afe8aaf46fcad2fda8fd99809a9bb0663ec2
Merge: ed8ad5978 3ce52a57c
Author: Dehao Chen <dehao@google.com>
Date:   Thu May 7 08:18:19 2015 +0000

    am 3ce52a57: am ac725c12: Add /data/misc/perfprofd to store perf profile.
    
    * commit '3ce52a57c5db5de2eff7cb14497279c7a6e157e8':
      Add /data/misc/perfprofd to store perf profile.

commit 3ce52a57c5db5de2eff7cb14497279c7a6e157e8
Merge: 0847d1bf2 ac725c12d
Author: Dehao Chen <dehao@google.com>
Date:   Thu May 7 05:27:05 2015 +0000

    am ac725c12: Add /data/misc/perfprofd to store perf profile.
    
    * commit 'ac725c12da8a67ca33d10c7b6131f8f543ed4449':
      Add /data/misc/perfprofd to store perf profile.

commit ac725c12da8a67ca33d10c7b6131f8f543ed4449
Author: Dehao Chen <dehao@google.com>
Date:   Tue May 5 15:05:39 2015 -0700

    Add /data/misc/perfprofd to store perf profile.
    
    BUG: 19483574
    
    (cherry picked from commit 30c401fa92f5a32a9a41024d9d1daddd1bc37ea5)
    
    Change-Id: Ibf96db9f7e5db625b395db20b73572acc240b1f9

commit 30c401fa92f5a32a9a41024d9d1daddd1bc37ea5
Author: Dehao Chen <dehao@google.com>
Date:   Tue May 5 15:05:39 2015 -0700

    Add /data/misc/perfprofd to store perf profile.
    
    BUG: 19483574
    
    Change-Id: Ib5eb9e789c063bd76d24181c4c03652f9ef12cb7

commit 7d678d8d78b40c9c7697565637ba5e4dc81ec02f
Author: Than McIntosh <thanm@google.com>
Date:   Tue Apr 28 14:32:35 2015 -0400

    Invoke perfprofd daemon (only for userdebug/eng builds).
    
    Change-Id: Ifaabe32dda6db249efc62c5db3760e32295eb1a9
    (cherry picked from commit d6544d2a405df4c6e1fb517b1038a3640ae5f095)

commit b12facc2e295ebfcba34af61ca81d36523af26a2
Merge: 739e1bc0c d5fb597c8
Author: Elliott Hughes <enh@google.com>
Date:   Fri May 1 22:47:07 2015 +0000

    am d5fb597c: am 5ea5aaa5: am a668478e: Merge "Invoke perfprofd daemon (only for userdebug/eng builds)."
    
    * commit 'd5fb597c8d21215273e0c48b494a13f989c212dd':
      Invoke perfprofd daemon (only for userdebug/eng builds).

commit d5fb597c8d21215273e0c48b494a13f989c212dd
Merge: 8c2b9269c 5ea5aaa56
Author: Elliott Hughes <enh@google.com>
Date:   Fri May 1 22:35:54 2015 +0000

    am 5ea5aaa5: am a668478e: Merge "Invoke perfprofd daemon (only for userdebug/eng builds)."
    
    * commit '5ea5aaa561fc011bf58332d48fb6bbf102cc40a4':
      Invoke perfprofd daemon (only for userdebug/eng builds).

commit dd764f5192d67ee6bd7ee79c4b0b4af5aa00ae9a
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Apr 29 14:16:58 2015 -0700

    Fix whitespace
    
    Change-Id: If13df64f6ba61e0f8742e85a332dea7c5e7640af

commit b8fca94e81698229970124d7feba4242b4b504f3
Merge: 22313a75b 2fe6a631c
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Apr 29 09:56:26 2015 -0700

    Merge commit '2fe6a631' into manualmerge
    
    Change-Id: Ib8d61ee25711e86a2df3705e87904a50c0ef5187

commit 806d10be2336f32cdca16c2540cbf3d548f2fec7
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 28 22:07:10 2015 +0000

    Securely encrypt the master key
    
    Move all key management into vold
    Reuse vold's existing key management through the crypto footer
    to manage the device wide keys.
    
    Use ro.crypto.type flag to determine crypto type, which prevents
    any issues when running in block encrypted mode, as well as speeding
    up boot in block or no encryption.
    
    This is one of four changes to enable this functionality:
      https://android-review.googlesource.com/#/c/148586/
      https://android-review.googlesource.com/#/c/148604/
      https://android-review.googlesource.com/#/c/148606/
      https://android-review.googlesource.com/#/c/148607/
    
    Bug: 18151196
    
    Change-Id: I6a8a18f43ae837e330e2785bd26c2c306ae1816b

commit 658801ff9ff59ae0f6102a4e15bb3a07742d3d71
Merge: adc385c26 6a5244bcc
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 28 14:28:44 2015 -0700

    resolved conflicts for merge of 6a5244bc to mnc-dev-plus-aosp
    
    Change-Id: Ied1bbf09aeeed53daefb53c559498066abd9b767

commit 2b3a4939463cb2eb6b65e416f6544a2e2d3bc29b
Merge: 6e8c8f542 7ac280754
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 28 19:15:40 2015 +0000

    Merge "Revert "Securely encrypt the master key""

commit 7ac2807546487de0cd74a8bbd976753c8f5862f3
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Apr 28 19:15:01 2015 +0000

    Revert "Securely encrypt the master key"
    
    This reverts commit 4bf1887c787a025aad2fbafe382e556e85ac73b0.
    
    Change-Id: Ie6d1f39de530b99b50a27ddc45bcc900a24e04b5

commit d6544d2a405df4c6e1fb517b1038a3640ae5f095
Author: Than McIntosh <thanm@google.com>
Date:   Tue Apr 28 14:32:35 2015 -0400

    Invoke perfprofd daemon (only for userdebug/eng builds).
    
    Change-Id: Ifaabe32dda6db249efc62c5db3760e32295eb1a9

commit 7880f812f7f7f92db694963027b86716bcd5d777
Merge: cbc37ce77 72fad66f0
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Apr 27 14:44:15 2015 -0700

    resolved conflicts for merge of 72fad66f to mnc-dev-plus-aosp
    
    Change-Id: Ib6659a50ee3f1f1ac3719e5d3397c21f786b9afc

commit 9234b169e62b10e38ecd3dc636ccccb425ea4eed
Merge: 96b6415c5 4bf1887c7
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Apr 27 20:08:53 2015 +0000

    Merge "Securely encrypt the master key"

commit 5cb4c8796cf43ddcb11ac5af8cc4bfe6be730154
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Apr 24 20:30:07 2015 +0000

    Revert "STOPSHIP: WifiStateMachine logging temporarily disabled"
    
    This reverts commit 15ae6c2e7ce02db583ca5a6be5ca30499d56de87.
    
    Change-Id: I281a65209a5118a6c73ddec65ed40d149c23bf0b

commit b2beaf7b204952dc5f6447f75e9d247a895e8ed4
Merge: 013708c43 ea782d327
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Apr 24 21:29:31 2015 +0000

    Merge "Revert "STOPSHIP: Additional Wifi logging temporarily disabled""

commit 03c9267865d34cc4a233776dea03b967ac0b54da
Merge: 4822bd197 a8088f380
Author: Elliott Hughes <enh@google.com>
Date:   Fri Apr 24 21:09:34 2015 +0000

    am a8088f38: am ec389902: am 132440b0: Merge "Revert "Revert "Make init re-exec itself for its SELinux domain transition."""
    
    * commit 'a8088f380932d873a39fafdd816f96328f7caa9c':
      Revert "Revert "Make init re-exec itself for its SELinux domain transition.""

commit ea782d327a3d959d93f2b23b85894aa392e64a2f
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Apr 24 20:28:27 2015 +0000

    Revert "STOPSHIP: Additional Wifi logging temporarily disabled"
    
    This reverts commit 18b1da2033440cf362ea5c71ca687d359671096f.
    
    Change-Id: I86cde061a36a9a9e43c8a5df2df1e853ed32b7a0

commit f65730e620dde083133b8c1ab61c0d07b4dd8c2f
Author: Elliott Hughes <enh@google.com>
Date:   Fri Apr 24 18:38:17 2015 +0000

    Revert "Revert "Make init re-exec itself for its SELinux domain transition.""
    
    This reverts commit 4217374611ada50f33aee544f015f6f9dfbf7ced.
    
    It turns out that the kernel passes any unrecognized arguments on to init,
    and (at least) N6 and N9 have such arguments. My lazy check of argc was
    thus insufficient to recognize what stage of init we were in, so we'd
    skip to stage 2 and not set up SELinux. And apparently you can get a
    very long way with SELinux off... We'll fix that in a later change.
    
    Bug: 19702273
    Change-Id: I43b3fb722fed35dd217cb529cbcac9a29aff4e4b

commit d6069e21ee5c6941844b31b29732f9ccb84304b5
Merge: e203d278e b706a8acf
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Apr 24 17:37:42 2015 +0000

    am b706a8ac: am 2db3cd3e: am 46fee19c: Merge "Revert "Make init re-exec itself for its SELinux domain transition.""
    
    * commit 'b706a8acff9c62da7b4045374b93a8739671a8a0':
      Revert "Make init re-exec itself for its SELinux domain transition."

commit 46fee19cb27dd24a58bbcad608058f25ca7b3e52
Merge: f0b479201 421737461
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Apr 24 16:57:59 2015 +0000

    Merge "Revert "Make init re-exec itself for its SELinux domain transition.""

commit 4217374611ada50f33aee544f015f6f9dfbf7ced
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Apr 24 16:57:21 2015 +0000

    Revert "Make init re-exec itself for its SELinux domain transition."
    
    shamu isn't booting.
    
    This reverts commit adf0d1bbfa4bc560c2106f14afa8258a11c48bf6.
    
    Change-Id: I89d568838cebbe14cc4a8ae3843f0f1ac54987af

commit 45a2329b2d3e928d48f546d6d6822620e0dac057
Merge: 7076796ca 77434ab36
Author: Elliott Hughes <enh@google.com>
Date:   Fri Apr 24 03:51:12 2015 +0000

    am 77434ab3: am ef68fd3f: am d4656784: Merge "Make init re-exec itself for its SELinux domain transition."
    
    * commit '77434ab362b3234accf16499aaf2a5340d568553':
      Make init re-exec itself for its SELinux domain transition.

commit d46567848bfcdc8f2cbc3faeef487cf5c770b43a
Merge: 765207524 adf0d1bbf
Author: Elliott Hughes <enh@google.com>
Date:   Fri Apr 24 03:10:14 2015 +0000

    Merge "Make init re-exec itself for its SELinux domain transition."

commit 7076796cab1ae275d9e9336f19e068abf28f946b
Merge: 2b70a6501 44f1356e4
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Thu Apr 23 23:16:39 2015 +0000

    am 44f1356e: am 85a9566f: am 76520752: Merge "rootfs: init.rc start logd parse error"
    
    * commit '44f1356e42a64fefb194b5c74b62402f4ec2881e':
      rootfs: init.rc start logd parse error

commit 765207524fcbe261686c5d96bc42ea3dcc124f0a
Merge: 2ce1d81fd 5c39e0ada
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Thu Apr 23 22:25:29 2015 +0000

    Merge "rootfs: init.rc start logd parse error"

commit adf0d1bbfa4bc560c2106f14afa8258a11c48bf6
Author: Elliott Hughes <enh@google.com>
Date:   Wed Apr 22 18:39:58 2015 -0700

    Make init re-exec itself for its SELinux domain transition.
    
    Change-Id: I38adabe5789d671e3f7d21936071a758ec8cea8a

commit 4bf1887c787a025aad2fbafe382e556e85ac73b0
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Mar 30 11:30:21 2015 -0700

    Securely encrypt the master key
    
    Remove unencrypted link since it is easier to manage directly
    Move creation of key to vold
    Start vold early so this is possible in a timely fashion
    
    This is one of four changes to enable this functionality:
      https://android-review.googlesource.com/#/c/144586/
      https://android-review.googlesource.com/#/c/144663/
      https://android-review.googlesource.com/#/c/144672/
      https://android-review.googlesource.com/#/c/144673/
    
    Bug: 18151196
    Change-Id: Idb17d1f1a724c6ec509d181ae4427113e9d3b5e6

commit 18b1da2033440cf362ea5c71ca687d359671096f
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Apr 21 15:58:40 2015 -0700

    STOPSHIP: Additional Wifi logging temporarily disabled
    
    Bug: 20416721
    Change-Id: I1be1c742f47f0e673eef6a8d391246f47c35c336

commit 15ae6c2e7ce02db583ca5a6be5ca30499d56de87
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Apr 21 15:29:12 2015 -0700

    STOPSHIP: WifiStateMachine logging temporarily disabled
    
    Bug: 20416721
    Change-Id: Id60eb6ab77589ab50800532de0d2877adef1d5b7

commit 5c39e0ada89de6a945ad3df0a0e6181fc3325cca
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Apr 20 08:55:02 2015 -0700

    rootfs: init.rc start logd parse error
    
    init: /init.rc: 490: invalid option 'start'
    
    Change-Id: Ica985e45d4652dab0ebd434803344f14cc73d834

commit 1450586ffd1113baa80f415531fb1de378fc8037
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Apr 20 08:55:12 2015 -0700

    create /data/misc/gatekeeper
    
    Change-Id: I7631401ac21b60a22f6fd4052814186bf3bc2b05

commit 4e9da84be188d3ad49bc9306723448eccc061ad0
Merge: 7364f24d7 6a49c2fa4
Author: Andres Morales <anmorales@google.com>
Date:   Thu Apr 16 22:16:58 2015 +0000

    Merge "Implement SID API"

commit 6a49c2fa4371cad600f4a96da3d1644df862d2a5
Author: Andres Morales <anmorales@google.com>
Date:   Thu Apr 16 13:16:24 2015 -0700

    Implement SID API
    
    Change-Id: Id11632a6b4b9cab6f08f97026dd65fdf49a46491

commit b63190fda8ab7d4271380c6a8512411ec2910c7d
Merge: e498c7ca2 b4ef85c63
Author: Vinit Deshpande <vinitd@google.com>
Date:   Tue Apr 14 15:06:55 2015 -0700

    am b4ef85c..b4ef85c from mirror-m-wireless-internal-release
    
    b4ef85c Add Bluetooth SAP UIM socket

commit 13859d12309c86ca4423484cd07ca56a029064db
Merge: c828ae877 90014d61c
Author: Neil Fuller <nfuller@google.com>
Date:   Mon Apr 13 12:18:34 2015 +0000

    am 90014d61: am 532d0a11: am 9b83b623: Merge "Executable to run on boot that removes old tzdata if needed"
    
    * commit '90014d61c83ef5105881c171481a50f21fd4dd57':
      Executable to run on boot that removes old tzdata if needed

commit 08913228e17f4a16b6fbe77f9f08ca2a13323f5e
Author: Neil Fuller <nfuller@google.com>
Date:   Tue Mar 31 18:24:29 2015 +0100

    Executable to run on boot that removes old tzdata if needed
    
    tzdatacheck is exec'd from init.rc early in boot just after /data is
    mounted. It checks to make sure that the tz rule data in /data
    is newer than the version in /system. If the data is older it is
    deleted. This is to address problems with earlier tz rule updates
    that occurred: after an OTA upgrade previous updates in /data
    would override newer versions in the system partition.
    
    Includes change to init.rc neccessary to run it at boot time. Other
    changes are in external/selinux.
    
    Bug: 19941636
    Bug: https://code.google.com/p/android/issues/detail?id=35730
    Change-Id: I7cc61e058424c856da88f11ff9b259f34cb39dc7

commit b4ef85c636390d54afcb0e3fbcafe687f050b2b5
Author: Dheeraj Shetty <dshetty@codeaurora.org>
Date:   Fri Apr 10 10:31:21 2015 -0700

    Add Bluetooth SAP UIM socket
    
    Change-Id: I1445e51f613ac3e21cf818c0b1364c334579593e

commit 2d08dce0beedcfc63b2a837045d1be7d49157555
Author: Andres Morales <anmorales@google.com>
Date:   Fri Apr 3 16:40:15 2015 -0700

    GateKeeper proxy service
    
    Until we have SELinux support for gating access
    to individual TEE services, we will proxy TEE requests
    to GateKeeper via this daemon.
    
    Change-Id: Ifa316b75f75bff79bdae613a112c8c3c2e7189a8

commit 6abe4295881c9ebd2baf12ea7443a15c9d59da29
Merge: ec56019c0 4122304de
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Wed Apr 8 16:56:04 2015 +0000

    am 4122304d: am 07e3ed46: am c19572fa: Merge "rootfs: init start logd in post-fs"
    
    * commit '4122304de3990ca1fca2790468fb8e9ddcca11f2':
      rootfs: init start logd in post-fs

commit 124ff15bcaeded8b794e18bd1523e3affa97c386
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Apr 7 15:32:12 2015 -0700

    rootfs: init start logd in post-fs
    
    The earliest point we can start logd is after /system is mounted.
    Ideally on post-fs-system (does not exist), post-fs will do.
    As insurance, we will also make sure logd is started if a
    logd-reinit is requested. This results in logd starting at least
    4 processes earlier than it does currently, with a tighter
    grouping of threads which means we are taking advantage of a
    lighter CPU load at the time, rather than taking cycles during
    heavy activity during core startup.
    
    Change-Id: If4f0bd3a53bb4c47500a54d741ca635d87c0c330

commit bd3212fd92470fa76577530fbc515c866755e722
Merge: 136a790a3 5056cdcdd
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Apr 8 01:06:59 2015 +0000

    am 5056cdcd: am 01190672: am de957955: Merge "Create /data/system/heapdump for system_server"
    
    * commit '5056cdcdde4901fe667522cfebf3e1f9e1af3b3b':
      Create /data/system/heapdump for system_server

commit 9c0437fba7357ae4abe70b540468799df3bfdbd3
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Apr 7 16:44:08 2015 -0700

    Create /data/system/heapdump for system_server
    
    Bug: 20073185
    Change-Id: I6fd83d33da33d048fdd6b07fa1f675ecb4f4eb2c

commit ae0a5acc0e46df569b97a605246e59c6ea4821f8
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Mon Apr 6 14:08:54 2015 -0700

    Mount point for expanded storage.
    
    Managed by vold.
    
    Bug: 19993667
    Change-Id: I7957b44d37d6a1f572cbec515d03856a8ed54391

commit b8bd76b7cbfbc4b0d3b7d76070c9b53eec87c83a
Merge: 4761c2a0e c410b3bd6
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Apr 2 14:49:25 2015 +0000

    Merge "Revert "Revert "Adding e4crypt support"""

commit c410b3bd63828730623b9c5ccf15242175ac3c10
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Mar 26 15:49:42 2015 +0000

    Revert "Revert "Adding e4crypt support""
    
    Fix build break caused by original change
    
    This reverts commit 84b0bab58fcc7f225e9a17a15c531b0c2fc509c5.
    
    (cherry picked from commit bbb4c85bdcc9a1bce315ed9d61a228bb1b992a1c)
    
    Change-Id: If0ead0f2656b69f33f72c64b03a05784455a4143

commit 25775e8e638d9d323c2dbac6d770092b920a5360
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Tue Mar 31 15:03:29 2015 -0700

    Different blkid and fsck execution domains.
    
    Tell vold about which SELinux domains to use for different classes
    of devices.  Also create a directory for vold to store private
    files.
    
    Bug: 19993667
    Change-Id: Ib7bc80234f2b13a89b143bf90f147140109570cd

commit b8c9d273a07f3fc45780e763bb3f7f6266b8cab7
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Mar 26 15:49:42 2015 +0000

    Revert "Revert "Adding e4crypt support""
    
    Fix build break caused by original change
    
    This reverts commit 84b0bab58fcc7f225e9a17a15c531b0c2fc509c5.
    
    Change-Id: I99fbd7c3d1ed92db1f546033c8493bb71a327924

commit fc0004894a3ff93382493688bb9ab9af83b74ea4
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Mon Mar 16 10:17:47 2015 -0700

    Progress towards dynamic storage support.
    
    To support external storage devices that are dynamically added and
    removed at runtime, we're changing /mnt and /storage to be tmpfs that
    are managed by vold.
    
    To support primary storage being inserted/ejected at runtime in a
    multi-user environment, we can no longer bind-mount each user into
    place.  Instead, we have a new /storage/self/primary symlink which
    is resolved through /mnt/user/n/primary, and which vold updates at
    runtime.
    
    Fix small mode bugs in FUSE daemon so it can be safely mounted
    visible to all users on device.
    
    Bug: 19993667
    Change-Id: I0ebf4d10aba03d73d9a6fa37d4d43766be8a173b

commit 1ef8498d02a4fa762d24195deefe293556bc807b
Merge: d854481f6 4ce3c8288
Author: Elliott Hughes <enh@google.com>
Date:   Sat Mar 28 17:10:38 2015 +0000

    am 4ce3c828: am 0cd316a4: am 5db3936d: Merge "Log more timing information from init."
    
    * commit '4ce3c8288ba030c2d2a80cf94ceb5d2f84a66d26':
      Log more timing information from init.

commit da40c00137f75543a69972f1be506e2d14a41845
Author: Elliott Hughes <enh@google.com>
Date:   Fri Mar 27 23:20:44 2015 -0700

    Log more timing information from init.
    
    Also make important events in init's life NOTICE rather than INFO,
    and ensure that NOTICE events actually make it to the kernel log.
    
    Also fix the logging so that if you have a printf format string
    error, the compiler now catches it.
    
    Also give messages from init, ueventd, and watchdogd distinct tags.
    (Previously they'd all call themselves "init", and dmesg doesn't
    include pids, so you couldn't untangle them.)
    
    Also include the tag in SELinux messages.
    
    Bug: 19544788
    Change-Id: Ica6daea065bfdb80155c52c0b06f346a7df208fe

commit 84b0bab58fcc7f225e9a17a15c531b0c2fc509c5
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Mar 26 14:53:19 2015 +0000

    Revert "Adding e4crypt support"
    
    This reverts commit 6095afc115fe3a4b7d151b4fcc164e00f9df9659.
    
    Change-Id: Icedfe0036223d7f42eaaefc4a35ad0f2efb14e4e

commit 6095afc115fe3a4b7d151b4fcc164e00f9df9659
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Feb 25 15:09:39 2015 -0800

    Adding e4crypt support
    
    Add file encryption flag to fstab.
    
    If file encryption flag set in fstab, handle identically to block
    encrypted volumes.
    
    Requires matching change:
      https://googleplex-android-review.git.corp.google.com/#/c/642778/
    
    Change-Id: I28c236959f2d7d5f0dccc8ea45c325ea0cf871fc

commit e3b164d024a1f9a21731a42aff442bc575dc03a7
Merge: 5ed3e9ec3 429e7424f
Author: Daniel Cardenas <danielcar@google.com>
Date:   Fri Mar 20 00:14:35 2015 +0000

    Merge "Revert "lowmemorykiller: make perms 0220""

commit 429e7424f29ab42e10559340f31a64c25035ce4f
Author: Daniel Cardenas <danielcar@google.com>
Date:   Fri Mar 20 00:07:57 2015 +0000

    Revert "lowmemorykiller: make perms 0220"
    
    This reverts commit b3739735b84a88cccfe08c0d69b1017a07004470.
    Values are helpful to inspect during memory performance tuning.
    
    b/19847626
    
    Change-Id: I004ed37d5cc67e466c1fd1a84e47348524056e87

commit 7ad506839a4ea39bb47f203cd1dcd21b9260b3a6
Merge: 959470f72 6025a2bc4
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Mar 13 07:09:39 2015 +0000

    am 6025a2bc: am bd518bce: Merge changes I3187aa34,Iadac58e6
    
    * commit '6025a2bc493534b3003ebd2ad7130366cf4f6723':
      init.rc: logd --reinit on changes to persistent properties
      logd: add reinit command

commit 48d06069a8a6be3a968694dad65ce4c11b7bef22
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Wed Mar 11 14:45:05 2015 -0700

    init.rc: logd --reinit on changes to persistent properties
    
    Bug: 19681572
    Change-Id: I3187aa348dae79fa5822ffb7ee9566919a7a04e6

commit 87946e714b8efd4448efc90812306afbce62a8c7
Merge: e6b0512ef 20dc9c01f
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Feb 27 19:44:46 2015 +0000

    am 20dc9c01: am 1dd71ae1: am f33c3bc9: Merge "init: drop dontpanic & apanic initialization"
    
    * commit '20dc9c01fabb33ed5a0e17b8efbdcdbe576c0941':
      init: drop dontpanic & apanic initialization

commit 1dd71ae12e2e47c9ca63eb04878ee9632cc4417c
Merge: b8d1af618 f33c3bc96
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Feb 27 19:34:33 2015 +0000

    am f33c3bc9: Merge "init: drop dontpanic & apanic initialization"
    
    * commit 'f33c3bc9602e4a369c4cc5d28357b8f73a3eed6c':
      init: drop dontpanic & apanic initialization

commit 1eaba37aae04ba3db65e4c3564192d53b2137bac
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Thu Feb 26 17:17:55 2015 -0800

    init: drop dontpanic & apanic initialization
    
    Bug: 19050686
    Bug: 19525200
    Change-Id: Id81abe3b44283b439390b42db7a9da23748dee0a

commit be95a75e6f9532bf78a4a8a408a7bf2f337a32d3
Merge: 80783dea1 0a316829f
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Feb 26 02:27:11 2015 +0000

    am 0a316829: am 398ade81: am 7bb72b73: Merge "seclabel use on services out of system partition"
    
    * commit '0a316829fb856f98d8db3ba78667feb19fb12e22':
      seclabel use on services out of system partition

commit 398ade817b64308cabbf10883ab5a74e4850e43d
Merge: 15e625f7d 7bb72b73b
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Feb 26 01:07:12 2015 +0000

    am 7bb72b73: Merge "seclabel use on services out of system partition"
    
    * commit '7bb72b73b0291636721d83a45adad175163361ec':
      seclabel use on services out of system partition

commit 2422c17c5e5dc4aaaaca6ec99953497d87091a50
Author: Narayan Kamath <narayan@google.com>
Date:   Tue Feb 24 11:02:27 2015 +0000

    Track removal of the inputflinger binary.
    
    Change-Id: Ie3c3e5a67e7dfac5bd1672da6979fb053e8483b9

commit 6889007627fa0b50cb393c822e59f4f76d3883aa
Author: William Roberts <w2.roberts@samsung.com>
Date:   Mon Feb 23 13:49:49 2015 -0800

    seclabel use on services out of system partition
    
    These services can make use of type transitions already
    present in the base policy.
    
    Change-Id: Id785c39c4ea44598c64dc499bd943c73bc55ca85

commit 7630916fb86d87efc94df574c9a644903591e180
Merge: afb654532 9c1bc6bbc
Author: Elliott Hughes <enh@google.com>
Date:   Sat Feb 14 05:14:22 2015 +0000

    am 9c1bc6bb: am 29576ae8: Merge "/vendor is sometimes on a separate partition now."
    
    * commit '9c1bc6bbc82e3e4f005e9fcacfca94b2dd82ca31':
      /vendor is sometimes on a separate partition now.

commit 9c1bc6bbc82e3e4f005e9fcacfca94b2dd82ca31
Merge: c3d2793f6 29576ae89
Author: Elliott Hughes <enh@google.com>
Date:   Sat Feb 14 05:08:42 2015 +0000

    am 29576ae8: Merge "/vendor is sometimes on a separate partition now."
    
    * commit '29576ae8901eb95d4c8a34f242a282b2fb73d35f':
      /vendor is sometimes on a separate partition now.

commit 3a5d71ac60ea1769aa5a0c4d0d76b08238392247
Author: Elliott Hughes <enh@google.com>
Date:   Fri Feb 13 16:47:02 2015 -0800

    /vendor is sometimes on a separate partition now.
    
    Change-Id: I3217c272ea38ab8212056e0432d0ededacd362f6

commit e6cc8012f5adadca867f5370d235525dff529091
Merge: b31528e9f 0903c13ad
Author: Elliott Hughes <enh@google.com>
Date:   Thu Feb 12 21:36:21 2015 +0000

    am 0903c13a: am 265df6f5: Merge "bootchart: fix bootchart can not be triggered problem"
    
    * commit '0903c13ade29e6eedecd198ac54131248a1818f3':
      bootchart: fix bootchart can not be triggered problem

commit 0903c13ade29e6eedecd198ac54131248a1818f3
Merge: 06b308bef 265df6f50
Author: Elliott Hughes <enh@google.com>
Date:   Thu Feb 12 20:32:33 2015 +0000

    am 265df6f5: Merge "bootchart: fix bootchart can not be triggered problem"
    
    * commit '265df6f50c508710f0b717d67650732baa906976':
      bootchart: fix bootchart can not be triggered problem

commit a197ff12dd336a9945ad1164402980296f9c235c
Author: Yongqin Liu <yongqin.liu@linaro.org>
Date:   Fri Dec 5 13:45:02 2014 +0800

    bootchart: fix bootchart can not be triggered problem
    
    bootchart uses a file on the data partition to decide if it should collect
    data for bootchart, but the data partition will be mounted by the mount_all
    command in the "on fs" section, and it will be only added into the action
    queue when command "trigger fs" is executed, but that's after the
    bootchart_init action (late_init).
    
    This change makes bootchart_init a builtin command of init,
    and make it executed as the first command of "on post-fs" section
    which will be triggered after the "on fs" section.
    
    This change also refactors the bootchart code to all be in bootchart.cpp.
    
    Change-Id: Ia74aa34ca5b785f51fcffdd383075a549b2a99d9
    Signed-off-by: Yongqin Liu <yongqin.liu@linaro.org>

commit d933fc0c05c9dff977ec6824cecb37e49a5b28ff
Merge: 14b964f52 a17389153
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Feb 9 04:14:22 2015 +0000

    am a1738915: am 317b4024: Revert "Make encryption configurable"
    
    * commit 'a1738915329e704ea52fc09c222bb4893e6e51df':
      Revert "Make encryption configurable"

commit a1738915329e704ea52fc09c222bb4893e6e51df
Merge: e6ed63e61 317b4024a
Author: Paul Lawrence <paullawrence@google.com>
Date:   Sat Feb 7 00:11:12 2015 +0000

    am 317b4024: Revert "Make encryption configurable"
    
    * commit '317b4024a2a46b8c57abfa08f2a649df13572bd3':
      Revert "Make encryption configurable"

commit 317b4024a2a46b8c57abfa08f2a649df13572bd3
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri Feb 6 17:18:19 2015 +0000

    Revert "Make encryption configurable"
    
    This reverts commit bda6272446454886339841a62daaa1b66c07ad60.
    
    The original fix seems to have led to boot failures in QA. Rather than
    risk shipping, revert the change. Bug 18764230 reopened.
    
    Requires change
        https://googleplex-android-review.git.corp.google.com/#/c/629764/
    
    Bug: 19278390
    Bug: 19199624
    
    Change-Id: I8b6ab585666f2b0f585ffb2a5f61ac2e3462e06e

commit 0c713b52436674cac2cb4dc2bac50dfad31042a1
Merge: 07e0ee7cf 86cdce1aa
Author: Greg Hackmann <ghackmann@google.com>
Date:   Thu Feb 5 23:31:32 2015 +0000

    am 86cdce1a: am f52338fe: Merge "rootdir: enable armv8_deprecated swp hook"
    
    * commit '86cdce1aab39ddbb346e6f7be1ca86531970419f':
      rootdir: enable armv8_deprecated swp hook

commit 86cdce1aab39ddbb346e6f7be1ca86531970419f
Merge: dcbeb41a6 f52338fe1
Author: Greg Hackmann <ghackmann@google.com>
Date:   Thu Feb 5 23:21:19 2015 +0000

    am f52338fe: Merge "rootdir: enable armv8_deprecated swp hook"
    
    * commit 'f52338fe1e8f74123a895db591d6a2a53061a2b1':
      rootdir: enable armv8_deprecated swp hook

commit cee8757f921d5b74acbc29b37a1842041b27fb00
Author: Greg Hackmann <ghackmann@google.com>
Date:   Mon Jan 26 10:40:29 2015 -0800

    rootdir: enable armv8_deprecated swp hook
    
    The upstream kernel now includes support for emulating legacy AArch32
    instructions on ARMv8 devices.  By default this framework emulates
    deprecated instructions but not obsolete instructions.
    
    Android requires support for the obsolete SWP and SWPB instructions on
    all ARM devices, so override this default for the swp emulation hook.
    
    Change-Id: I82b9bdb564413ec7c1a101da75a9928aebe1606b
    Signed-off-by: Greg Hackmann <ghackmann@google.com>

commit 07932da9118893563624116dad926d7c49c06424
Merge: 75ad8ce75 e1f62802f
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Jan 31 08:34:08 2015 +0000

    am e1f62802: am d07555db: Merge "ensure /data/tombstones exists on all Android devices"
    
    * commit 'e1f62802f6bec8ecc89100a1bbbdc36b7d18985b':
      ensure /data/tombstones exists on all Android devices

commit e1f62802f6bec8ecc89100a1bbbdc36b7d18985b
Merge: 977e23397 d07555dba
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Jan 31 07:49:28 2015 +0000

    am d07555db: Merge "ensure /data/tombstones exists on all Android devices"
    
    * commit 'd07555dba01d64011b0d611dd6d3b197b216c163':
      ensure /data/tombstones exists on all Android devices

commit 0359d778a564a5c63baba08a33484fb69eda4d1e
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jan 30 17:38:06 2015 -0800

    ensure /data/tombstones exists on all Android devices
    
    /data/tombstones is referenced by core platform code, but is not
    guaranteed to exist on all Android devices. Move the directory
    creation out of device specific files and into the core
    init.rc file.
    
    Bug: https://code.google.com/p/android/issues/detail?id=93207
    Change-Id: I94ae5199a6a32c4fe555ca994fc4a8345e0c9690

commit 36d0eaecd7bd7970b91ac35d6753bf715097e3b9
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Jan 21 09:57:01 2015 -0800

    Make encryption configurable
    
    Delay mounting encryptable but unencrypted volumes until we can
    check the ro.vold.forceencrypt flag, then optionally encrypt.
    
    Requires matching vold change from
        https://googleplex-android-review.git.corp.google.com/#/c/615309/
    
    Bug: 18764230
    Change-Id: If22008be8de6a4f3216b349f81ace49be1730314

commit e5a84ce55e1a0b5d8a4eed2fd8c96d6579829b85
Merge: 6671bd1fb 7e890a4d3
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Jan 26 16:28:33 2015 +0000

    am 7e890a4d: am bda62724: Make encryption configurable
    
    * commit '7e890a4d32816d34b30fb5d1f651d966d64bbf36':
      Make encryption configurable

commit 7e890a4d32816d34b30fb5d1f651d966d64bbf36
Merge: 406865adc bda627244
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Jan 26 16:22:49 2015 +0000

    am bda62724: Make encryption configurable
    
    * commit 'bda6272446454886339841a62daaa1b66c07ad60':
      Make encryption configurable

commit bda6272446454886339841a62daaa1b66c07ad60
Author: Paul Lawrence <paullawrence@google.com>
Date:   Wed Jan 21 09:57:01 2015 -0800

    Make encryption configurable
    
    Delay mounting encryptable but unencrypted volumes until we can
    check the ro.vold.forceencrypt flag, then optionally encrypt.
    
    Requires matching vold change from
        https://googleplex-android-review.git.corp.google.com/#/c/615309/
    
    Bug: 18764230
    Change-Id: If22008be8de6a4f3216b349f81ace49be1730314

commit f756cf143968e0c17b7992b9d850490e8c314bd6
Merge: 51f33fca6 8c7380b47
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Thu Jan 15 02:27:51 2015 +0000

    am 8c7380b4: am 3802b5d4: Merge "rootdir: add pstore"
    
    * commit '8c7380b4761d5ca02d839ccd337014116134a5b8':
      rootdir: add pstore

commit 8c7380b4761d5ca02d839ccd337014116134a5b8
Merge: 03e45da4f 3802b5d4c
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Wed Jan 14 17:46:46 2015 +0000

    am 3802b5d4: Merge "rootdir: add pstore"
    
    * commit '3802b5d4c5cb14864dcdd8820e9140b81a2d7d78':
      rootdir: add pstore

commit 4b0313e4d39d4ce9c911907e0f1b34ab3b32dd58
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Dec 15 07:52:19 2014 -0800

    rootdir: add pstore
    
    /dev/pmsg0 used to record the Android log messages, then
    on reboot /sys/fs/pstore/pmsg-ramoops-0 provides a means
    to pull and triage user-space activities leading
    up to a panic. A companion to the pstore console logs.
    
    Change-Id: Id92cacb8a30339ae10b8bf9e5d46bb0bd4a284c4

commit f3fd1226e05c806dd4ad4552abf56bcac12efe5e
Author: Greg Hackmann <ghackmann@google.com>
Date:   Wed Dec 3 09:57:00 2014 -0800

    init.rc: disable ICMP redirects
    
    Bug: 18604139
    
    Change-Id: I4bf22d0029f8b03b0ef4329b7b8632d8e116c8e1
    Signed-off-by: Greg Hackmann <ghackmann@google.com>

commit ac12f25004d728fe117c058446fccb0ca0a397c9
Merge: b54228543 667230074
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Nov 5 19:18:32 2014 +0000

    Ensure /data/adb exists
    automerge: 6672300
    
    * commit '667230074b6e4e306a50d84a88a57bf4f1ec0291':
      Ensure /data/adb exists

commit 667230074b6e4e306a50d84a88a57bf4f1ec0291
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Oct 20 21:53:56 2014 -0700

    Ensure /data/adb exists
    
    Ensure that /data/adb always exists. This directory is used
    for writing adb debugging information when persist.adb.trace_mask
    is set.
    
    Bug: https://code.google.com/p/android/issues/detail?id=72895
    
    (cherry picked from commit 89252ce31aacb27248e708b6487f730d3a024943)
    
    Change-Id: I44e01bee50125f4e6e5fff6e74c53bb2022ce355

commit aad358fbc19592cefc37160fb7e3901f732dc033
Merge: 37d70f536 b2042f726
Author: Bill Yi <byi@google.com>
Date:   Wed Oct 22 08:49:05 2014 -0700

    Merge commit 'b2042f7263c7bbacc5115de4a42c5a96b64a06f2' into HEAD

commit 268c887f0c689625701f1218d649217ebc887e15
Merge: e272a538d 147de7e14
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Oct 21 17:16:31 2014 +0000

    am 147de7e1: am 37d70f53: am c0b4b8b0: Merge "Ensure /data/adb exists"
    
    * commit '147de7e147c9a85158f79b6aeffd87af6b921690':
      Ensure /data/adb exists

commit 147de7e147c9a85158f79b6aeffd87af6b921690
Merge: 06850f9cc 37d70f536
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Oct 21 17:10:47 2014 +0000

    am 37d70f53: am c0b4b8b0: Merge "Ensure /data/adb exists"
    
    * commit '37d70f53672c8878a5ce5506d6d89b851400f8e6':
      Ensure /data/adb exists

commit 89252ce31aacb27248e708b6487f730d3a024943
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Oct 20 21:53:56 2014 -0700

    Ensure /data/adb exists
    
    Ensure that /data/adb always exists. This directory is used
    for writing adb debugging information when persist.adb.trace_mask
    is set.
    
    Bug: https://code.google.com/p/android/issues/detail?id=72895
    Change-Id: I9cee2a0202417ff72a5ede7742e25877f51732dd

commit 49d1ba1743528ae492a24851e4632b0af5917ef5
Merge: 7a75fd11b d1380d645
Author: Riley Andrews <riandrews@google.com>
Date:   Wed Oct 8 20:55:04 2014 +0000

    am d1380d64: am 33b33549: Merge "Make the default cgroup, the foreground cgroup." into lmp-mr1-dev
    
    * commit 'd1380d645de163d34a6e590f82eb0ee40d51f408':
      Make the default cgroup, the foreground cgroup.

commit 522d72b7020a7d2f975531c7214ff34225391aba
Author: Riley Andrews <riandrews@google.com>
Date:   Fri Oct 3 17:02:53 2014 -0700

    Make the default cgroup, the foreground cgroup.
    
    All kernel services will now be in the same cgroup as
    foreground applications. This will now make kernel threads
    not implicitly higher priority than android foreground
    services.
    
    Bug 17681097
    
    Change-Id: I28e81c7aade50428d5395df86f00ce01c1e7af02

commit 157e3a4b22db530daea1c5fc1bfc5ae10484ca66
Merge: 16632a9d0 6ee5d62ac
Author: Mike Lockwood <lockwood@google.com>
Date:   Mon Oct 6 19:48:28 2014 +0000

    am 6ee5d62a: am 67479c97: am 24e3e831: am 7569b7b3: Merge "Add bootanimation to audio group so it can play boot sound" into lmp-dev
    
    * commit '6ee5d62ac00fa00d7b86072a7f19d58582a05d18':
      Add bootanimation to audio group so it can play boot sound

commit 7e58899bcfd83152581867b05bb012c5c4ec4b46
Author: Mike Lockwood <lockwood@google.com>
Date:   Mon Sep 29 06:17:10 2014 -0700

    Add bootanimation to audio group so it can play boot sound
    
    Bug: 17674304
    
    Change-Id: I5d31bc024fa36fedac2c0ba5c4a8b100937183ad

commit 074fc3ddfb8fc5676af24d366e071b6bca5614bf
Merge: 2ac272d8a 68e0d185f
Author: Brian Carlstrom <bdc@google.com>
Date:   Fri Aug 29 11:56:57 2014 +0000

    am 68e0d185: am 24d2adba: am 188d4396: Merge "Change /dalvik-cache to be owned by root."
    
    * commit '68e0d185f4640a8e1dc7b6d1aad17b51a802de37':
      Change /dalvik-cache to be owned by root.

commit 68e0d185f4640a8e1dc7b6d1aad17b51a802de37
Merge: a1e9ced56 24d2adba7
Author: Brian Carlstrom <bdc@google.com>
Date:   Fri Aug 29 11:39:17 2014 +0000

    am 24d2adba: am 188d4396: Merge "Change /dalvik-cache to be owned by root."
    
    * commit '24d2adba7a2f9caa82a88be70ad2fe7397ab310a':
      Change /dalvik-cache to be owned by root.

commit c692410e1607a39cd6d55f4be8164fc630d9772c
Author: Alex Light <allight@google.com>
Date:   Wed Aug 27 15:40:05 2014 -0700

    Change /dalvik-cache to be owned by root.
    
    Bug: 16875245
    
    (cherry picked from commit 3878ebd72493427ea5537b36dfb9cd7cb38677bb)
    
    Change-Id: I29a70215a2207bc4e0db02ab751d32a68edf4b66

commit 3878ebd72493427ea5537b36dfb9cd7cb38677bb
Author: Alex Light <allight@google.com>
Date:   Wed Aug 27 15:40:05 2014 -0700

    Change /dalvik-cache to be owned by root.
    
    Bug: 16875245
    
    Change-Id: I29a70215a2207bc4e0db02ab751d32a68edf4b66

commit 22b27ad718418bc86a4d5232ea7b6d5866fc2c93
Merge: 2afd61f7f c28be8be6
Author: Andres Morales <anmorales@google.com>
Date:   Tue Aug 26 23:04:48 2014 +0000

    am c28be8be: am 314313a9: Move bootanim and surfaceflinger to class core
    
    * commit 'c28be8be68a55a50f20b42101f0f33d558f8a548':
      Move bootanim and surfaceflinger to class core

commit 314313a9915c9a274f580c0fcf535a4db2ba0a9a
Author: Andres Morales <anmorales@google.com>
Date:   Tue Aug 26 12:57:46 2014 -0700

    Move bootanim and surfaceflinger to class core
    
    They have no dependencies on /data so can be started early.
    This permits us to unmount /data while bootanimation is running,
    allowing an uninterrupted first boot encryption sequence.
    
    Bug: 17260550
    Change-Id: I323fe23e8cf488d8bc136387efdd9fcea96625eb

commit ad5b54aa6480b384f90ecb0acd9e2c6f30fd45c1
Merge: ec865a6c4 a95e10fe3
Author: Paul Lawrence <paullawrence@google.com>
Date:   Tue Aug 26 10:07:27 2014 +0000

    am a95e10fe: am a005e779: Merge "Enable not rebooting during default encryption" into lmp-dev
    
    * commit 'a95e10fe3187d1dd3fbbd01d6653d7d9c2f9fc4d':
      Enable not rebooting during default encryption

commit a005e7795e3dfb7cc0bd2bc65208d2490bfc89d8
Merge: 4089cda0a c23074f38
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Aug 25 20:28:35 2014 +0000

    Merge "Enable not rebooting during default encryption" into lmp-dev

commit c23074f386ded6cd28b2f8ba2331814b7491c802
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Aug 18 07:42:29 2014 -0700

    Enable not rebooting during default encryption
    
    Need to not set this property) during mount, since it can't
    be changed later (ro property)
    
    Also no reason to start class main on encryption cycle - we'll
    show surfaceflinger, which is enough UI for this short cycle.
    
    Bug: 17041092
    Change-Id: Ica5339c54e45716d0fe20e23c0ab857f388d23ed

commit 82b76249fbc339e82ab47a956f7e17160247e4c4
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Mon Aug 4 08:47:23 2014 -0700

    Remove obsolete tcp buffer size system properties.
    
    Change-Id: If6fb6fdcf8975e6102e84594ee3f64a5be6166f6

commit 4fe327b902a1d5ff48878c1801cce8cdbe718d31
Merge: 342a2264b 1de92cffc
Author: Michael Wright <michaelwr@google.com>
Date:   Tue Aug 19 20:08:29 2014 +0000

    Merge "Remove inputflinger from init. DO NOT MERGE" into lmp-dev

commit 1de92cffc7ac1e1654bdef5e3849fe542b1fd9fc
Author: Michael Wright <michaelwr@google.com>
Date:   Tue Aug 19 13:02:47 2014 -0700

    Remove inputflinger from init. DO NOT MERGE
    
    Change-Id: I6ae2815a0c3f6b9c69e712af3ed6ce9d455ef3d3

commit 67cb1aeaa5bb8dbd43d5a1bfb21d1a8c39822fb6
Author: Riley Andrews <riandrews@google.com>
Date:   Tue Jul 15 20:39:41 2014 -0700

    Remove the /dev/.booting file before triggering boot.
    
    On mako only, there is a race condition such that
    core + main services must be started after releasing
    ueventd (by removing /dev/.booting).
    
    bug 16304711
    bug 16333352

commit d721f5fc21855fdf7dd36ff1ec8f9b46f6cc33d6
Author: Riley Andrews <riandrews@google.com>
Date:   Tue Jul 15 20:39:41 2014 -0700

    Remove the /dev/.booting file before triggering boot.
    
    On mako only, there is a race condition such that
    core + main services must be started after releasing
    ueventd (by removing /dev/.booting).
    
    bug 16304711
    bug 16333352

commit 80c7a5e8a861de42ddade15704f1785953cee345
Author: Riley Andrews <riandrews@google.com>
Date:   Fri Jul 11 15:05:23 2014 -0700

    Move unlink("/dev/.booting") until after filesystems are mounted.
    
    Move the unlink out of init.c and into init.rc, so that the file
    will be removed after all the filesystems with firmware are up.
    
    Change-Id: Ifdd5dd1e95d7e064dde5c80b70198882d949a710

commit 9464e5a58da50f6cc3503020b38181150cfd01c4
Author: Riley Andrews <riandrews@google.com>
Date:   Fri Jul 11 15:05:23 2014 -0700

    Move unlink("/dev/.booting") until after filesystems are mounted.
    
    Move the unlink out of init.c and into init.rc, so that the file
    will be removed after all the filesystems with firmware are up.
    
    Change-Id: I7442df2042cc2788d0301f00e3c2fba7d6e0e1c7

commit ee0388e768bb27eb845809a0b3ba85f4f7f21885
Merge: 33e7b1316 f89ddf76f
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jul 9 20:03:29 2014 +0000

    am f89ddf76: am d05245a4: am c87237f5: Merge "restorecon_recursive /cache"
    
    * commit 'f89ddf76f9e3c10af9002cdb0d9b8eadcd59bf15':
      restorecon_recursive /cache

commit f89ddf76f9e3c10af9002cdb0d9b8eadcd59bf15
Merge: f043f0612 d05245a4b
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jul 9 20:01:02 2014 +0000

    am d05245a4: am c87237f5: Merge "restorecon_recursive /cache"
    
    * commit 'd05245a4b10044670ed8456c5c869490fd90583f':
      restorecon_recursive /cache

commit b12e40da2526881c1730a3d3387556e4600c7040
Merge: f761709a8 0a7b44d55
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Tue Jul 8 19:14:36 2014 +0000

    am 0a7b44d5: am ab98d2e6: Merge "Create a data directory for netd and other network-related files."
    
    * commit '0a7b44d55b9e9d038de390457246ec7fd0999cad':
      Create a data directory for netd and other network-related files.

commit e1695914d55d9ced3645fc532191970c9450e9e9
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jul 9 12:39:21 2014 -0700

    restorecon_recursive /cache
    
    Make sure all files / directories within /cache are properly
    labeled, not just the directory itself.
    
    Addresses the following denial:
    
      type=1400 audit(0.0:26): avc: denied { getattr } for comm="Thread-85" path="/cache/lost+found" dev="mmcblk0p27" ino=11 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:unlabeled:s0 tclass=dir
    
    Change-Id: I5937b30043efeb696ffaa77258b7294d20d1494e

commit cddb15b8a9057e7efacf2de9c9a6a887fd666663
Merge: 7367ecbc4 b4e74db79
Author: dcashman <dcashman@google.com>
Date:   Tue Jul 8 15:13:30 2014 +0000

    am b4e74db7: am 3fa71b8e: Merge "Remove sshd."
    
    * commit 'b4e74db79c9fda5e63ae49f299df3c0dd80a87f9':
      Remove sshd.

commit b4cbff47ad4c8f15213189959c2ea33cb0ee529f
Author: dcashman <dcashman@google.com>
Date:   Mon Jul 7 16:26:48 2014 -0700

    Remove sshd.
    
    This may require changes to other code, such as fastbootd, which relies on this
    service.  sshd is not currently, used, however, so this change will force any
    such code to be changed.
    
    Bug: 11594902
    Change-Id: I07e52008290dab5825be2ad062cbe730fa7dff71

commit b46efdb08ef8a700654d28be94b90550b8d90822
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Mon Jul 7 22:09:54 2014 -0700

    Create a data directory for netd and other network-related files.
    
    Allows the 'shell' group (which is what dumpstate uses) to read the files in
    this directory.
    
    Change-Id: I69deb1a64d5d6647470823405bf0cc55b24b22de

commit 14253c1aab42e4e4ec4e68798c068436b4260288
Merge: aecb7f84c a1d97e5d1
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Jul 8 23:06:13 2014 +0000

    Merge "init.rc: add seclabel to flash_recovery"

commit a1d97e5d1c15e0adf40b5853f2f85db7008baa77
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Jul 8 12:41:16 2014 -0700

    init.rc: add seclabel to flash_recovery
    
    Make sure flash_recovery is always running in the
    install_recovery SELinux domain.
    
    Change-Id: I9495eedd03f6b5dfcf2e78c03d1102f6032b327a

commit 85449d360f86ed9faaf1403f972f9657698a8289
Merge: 81542db7c b12e40da2
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Tue Jul 8 19:18:45 2014 +0000

    am b12e40da: am 0a7b44d5: am ab98d2e6: Merge "Create a data directory for netd and other network-related files."
    
    * commit 'b12e40da2526881c1730a3d3387556e4600c7040':
      Create a data directory for netd and other network-related files.

commit 9f3a11edde07af068217581cf11c004f1cdca3f0
Merge: 4b39c6aca cddb15b8a
Author: dcashman <dcashman@google.com>
Date:   Tue Jul 8 15:19:50 2014 +0000

    am cddb15b8: am b4e74db7: am 3fa71b8e: Merge "Remove sshd."
    
    * commit 'cddb15b8a9057e7efacf2de9c9a6a887fd666663':
      Remove sshd.

commit 24912dc446439b0aaa1c3417a8159af758f76ff6
Merge: f67d6bd3c fa6f25432
Author: Riley Andrews <riandrews@google.com>
Date:   Thu Jun 26 20:49:46 2014 -0700

    resolved conflicts for merge of fa6f2543 to master
    
    Change-Id: I04ce82e5d245e90e2cc62b76d688ec902c1a471d

commit fa6f25432b45958af870674529ce79e84986e0fa
Merge: 3bf00fd6a 23340d8ad
Author: Riley Andrews <riandrews@google.com>
Date:   Fri Jun 27 03:42:33 2014 +0000

    am 23340d8a: am 10f8cd1d: Merge changes Ia15b2110,I5498c725
    
    * commit '23340d8adac7bf68a6e47064ab7b48c1e227a077':
      Add ability to adjust init log level at runtime.
      Improve init's debug printing.

commit f67d6bd3c0fb41d167c675b9d2b5d377b6f38a74
Author: Daniel Rosenberg <drosen@google.com>
Date:   Thu Jun 26 14:55:04 2014 -0700

    Moved symlink back up.
    
    Moving the vendor symlink down was causing issues with some devices.
    Moved it back up, and adjusted mount to remove symlinks if necessary.
    
    Change-Id: I77126d77cfbef32250012bea3960c99b55db4cbb
    Signed-off-by: Daniel Rosenberg <drosen@google.com>

commit 1bbef88e8011805f7a3995a4d81928a853cb5cff
Author: Riley Andrews <riandrews@google.com>
Date:   Thu Jun 26 13:55:03 2014 -0700

    Add ability to adjust init log level at runtime.
    
    + Add a new property, sys.init_log_level, which can be set after init
      bootstrap. This will control the level at which init does prints to klog.
    
    Change-Id: Ia15b2110157b5e6b713785ece9b0fb94889be6c8

commit f530c93c4aab818de51fd7123199bef6621047f8
Author: Daniel Rosenberg <drosen@google.com>
Date:   Wed May 28 14:10:01 2014 -0700

    Added support for vendor partition and image
    
    Modified fastboot to flash vendor.img as well. Moved symlink
    for /vendor to occur after mounting partitions. Changed mount
    to also create the mount point.
    
    Change-Id: I78e1ba24e6bb8b4af96a67ee0569af579439e682
    Signed-off-by: Daniel Rosenberg <drosen@google.com>

commit 6bd4588d65977956cadf2e5d384673c64329c8e8
Merge: 62ecd51f8 079c637f3
Author: Riley Andrews <riandrews@google.com>
Date:   Mon Jun 23 15:20:51 2014 -0700

    resolved conflicts for merge of 079c637f to master
    
    Change-Id: Iab9a857026de954d7497d6b0eaf3751d2d3904c7

commit 079c637f3d269242bbc772b9207179b8cf56738a
Merge: 8e1f3f58e 5b45e08aa
Author: Riley Andrews <riandrews@google.com>
Date:   Mon Jun 23 21:40:54 2014 +0000

    am 5b45e08a: am 7950fc47: Merge "Add ability to boot from charger mode."
    
    * commit '5b45e08aabd6dcbab527d221584fe348c73c70d4':
      Add ability to boot from charger mode.

commit e4b7b294f37d9b64d6b7c1931e2c9bfb1a500d68
Author: Riley Andrews <riandrews@google.com>
Date:   Mon Jun 16 15:06:21 2014 -0700

    Add ability to boot from charger mode.
    
    Add the ability to boot up directly from charger mode, instead of forcing
    charger mode to initiate a full restart to launch 'full' android. This
    should shave a few seconds off of boot time on supported devices (just
    manta for now).
    
    Change-Id: Ieec4494d929e92806e039f834d78b9002afd15c4

commit aab0d57d18b202d059fec57c832d6443faff6ee3
Merge: f0a4855c2 94fa20058
Author: Riley Andrews <riandrews@google.com>
Date:   Fri Jun 20 01:35:47 2014 +0000

    am 94fa2005: am 4f5392cb: Merge "Make indentation sane in init.rc"
    
    * commit '94fa20058fbd0e4f7e3c6d1381cdb9718dd90cde':
      Make indentation sane in init.rc

commit 6dfdc7cd0c9d1b266b599b3ee7f5dd3a60e45c39
Author: Riley Andrews <riandrews@google.com>
Date:   Wed Jun 18 20:35:40 2014 -0700

    Make indentation sane in init.rc
    
    Change-Id: Ic632fbe1423eeef7ec958877d74db7b87fc385c6

commit 53f24c2f940b946805821db1036466d95061b1e1
Merge: 188fdd1c0 aab0d57d1
Author: Riley Andrews <riandrews@google.com>
Date:   Fri Jun 20 01:39:27 2014 +0000

    am aab0d57d: am 94fa2005: am 4f5392cb: Merge "Make indentation sane in init.rc"
    
    * commit 'aab0d57d18b202d059fec57c832d6443faff6ee3':
      Make indentation sane in init.rc

commit 8ffe8eac5b4f04ce82ae553f2155959a8b165a61
Merge: 511998fcd f8cb68e15
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jun 12 23:17:38 2014 +0000

    am f8cb68e1: am 3bff77a8: am 875dc8f3: Merge "Create /data/dalvik-cache/profiles"
    
    * commit 'f8cb68e15ba242200e3525fffa2f969960e18a50':
      Create /data/dalvik-cache/profiles

commit f8cb68e15ba242200e3525fffa2f969960e18a50
Merge: 44aadc4da 3bff77a8f
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jun 12 23:12:45 2014 +0000

    am 3bff77a8: am 875dc8f3: Merge "Create /data/dalvik-cache/profiles"
    
    * commit '3bff77a8f90e673dbf41d97b7b842a3e4a6986bf':
      Create /data/dalvik-cache/profiles

commit 511998fcdb3d35847f1222aec956e6ac6f5a17ba
Merge: 8396e7519 44aadc4da
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jun 12 19:46:43 2014 +0000

    am 44aadc4d: am 1eebf538: am 59d16c9e: Merge "make console shell run as GID=shell"
    
    * commit '44aadc4daf926155bf06bcf9d8f2daa96f861cdf':
      make console shell run as GID=shell

commit 44aadc4daf926155bf06bcf9d8f2daa96f861cdf
Merge: 2b9581160 1eebf538d
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jun 12 19:43:07 2014 +0000

    am 1eebf538: am 59d16c9e: Merge "make console shell run as GID=shell"
    
    * commit '1eebf538d3e5465bbec84d86017bb9ca250a052b':
      make console shell run as GID=shell

commit f2cb352412252f8e609986520cff830096248b9f
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jun 12 12:33:21 2014 -0700

    make console shell run as GID=shell
    
    Change-Id: I240bec07b04de1b26eef14e4f590af56c1aaa276

commit 875dc8f3f31fe9f5ee42d900737149bdeb95f1c7
Merge: 59d16c9e9 347ee511e
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jun 12 23:04:49 2014 +0000

    Merge "Create /data/dalvik-cache/profiles"

commit 347ee511e44a4b6419c144917e079c78fde46f32
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jun 11 18:32:15 2014 -0700

    Create /data/dalvik-cache/profiles
    
    Make sure /data/dalvik-cache/profiles gets the correct
    permissions and SELinux context, and ownership is properly
    assigned to the system UID.
    
    Change-Id: Ic1b44009faa30d704855e97631006c4b990a4ad3

commit a54b7ca1565d314c88eb31e1f2375948b3c5616a
Merge: b575c3e37 b7c07da2f
Author: Robin Lee <rgl@google.com>
Date:   Thu Jun 5 17:30:13 2014 +0000

    am b7c07da2: am 33154817: am 46fbaf06: Merge "Create world-searchable /data/misc/user directory"
    
    * commit 'b7c07da2f4606ca36b93c2b9221e43e6ebe68831':
      Create world-searchable /data/misc/user directory

commit b7c07da2f4606ca36b93c2b9221e43e6ebe68831
Merge: 147d158e2 33154817e
Author: Robin Lee <rgl@google.com>
Date:   Thu Jun 5 17:26:31 2014 +0000

    am 33154817: am 46fbaf06: Merge "Create world-searchable /data/misc/user directory"
    
    * commit '33154817e274a4c7c381e2f5ef73ead7093e3985':
      Create world-searchable /data/misc/user directory

commit 46fbaf062fd94e3fecc7165f4b42d42145e0603d
Merge: aa2be4fd6 3094f82a8
Author: Robin Lee <rgl@google.com>
Date:   Thu Jun 5 17:07:43 2014 +0000

    Merge "Create world-searchable /data/misc/user directory"

commit e7fd4078a225fdfa92edcb6be6d79ba2fd6e8eb9
Merge: f9ff246dd 7206eccbd
Author: Nick Kralevich <nnk@google.com>
Date:   Wed May 28 18:02:27 2014 +0000

    am 7206eccb: am c4ffa5f6: am c290bed0: Merge "Remove dmesg_restrict"
    
    * commit '7206eccbd904508a199c7ec302d7395b3b674968':
      Remove dmesg_restrict

commit f9ff246dd7d4d44ad65d7f9690780eddaf74bde0
Merge: accd09581 4f3ad823e
Author: Torne (Richard Coles) <torne@google.com>
Date:   Wed May 28 18:02:24 2014 +0000

    am 4f3ad823: am a8329a36: am 96109cf3: Merge "Add UID and directory for RELRO sharing support."
    
    * commit '4f3ad823eaf97fcbcbb1afac67371aff76677b1d':
      Add UID and directory for RELRO sharing support.

commit 7206eccbd904508a199c7ec302d7395b3b674968
Merge: 4f3ad823e c4ffa5f62
Author: Nick Kralevich <nnk@google.com>
Date:   Wed May 28 13:14:54 2014 +0000

    am c4ffa5f6: am c290bed0: Merge "Remove dmesg_restrict"
    
    * commit 'c4ffa5f62ef256ff286122d0ceea61364aa67e13':
      Remove dmesg_restrict

commit c4ffa5f62ef256ff286122d0ceea61364aa67e13
Merge: a8329a36c c290bed03
Author: Nick Kralevich <nnk@google.com>
Date:   Wed May 28 13:11:38 2014 +0000

    am c290bed0: Merge "Remove dmesg_restrict"
    
    * commit 'c290bed0350cded5620ed8dbb68b1cfb07d9828c':
      Remove dmesg_restrict

commit c290bed0350cded5620ed8dbb68b1cfb07d9828c
Merge: 96109cf36 1a6184baf
Author: Nick Kralevich <nnk@google.com>
Date:   Wed May 28 13:09:33 2014 +0000

    Merge "Remove dmesg_restrict"

commit 4f3ad823eaf97fcbcbb1afac67371aff76677b1d
Merge: 73334e605 a8329a36c
Author: Torne (Richard Coles) <torne@google.com>
Date:   Wed May 28 10:20:55 2014 +0000

    am a8329a36: am 96109cf3: Merge "Add UID and directory for RELRO sharing support."
    
    * commit 'a8329a36ca0e5f5799ec2dd14ae360dc0656b9c9':
      Add UID and directory for RELRO sharing support.

commit a8329a36ca0e5f5799ec2dd14ae360dc0656b9c9
Merge: 1e4cfe063 96109cf36
Author: Torne (Richard Coles) <torne@google.com>
Date:   Wed May 28 10:17:44 2014 +0000

    am 96109cf3: Merge "Add UID and directory for RELRO sharing support."
    
    * commit '96109cf36c3dd44e9ecfe4b810e21e77eaf834dc':
      Add UID and directory for RELRO sharing support.

commit 1a6184baf3e01bf7786fb14de4216bcb4e3b2f70
Author: Nick Kralevich <nnk@google.com>
Date:   Tue May 27 16:51:11 2014 -0700

    Remove dmesg_restrict
    
    dmesg_restrict is too coarse of a control. In Android's case,
    we want to allow the shell user to see dmesg output, but disallow
    others from seeing it.
    
    Rather than rely on dmesg_restrict, use SELinux to control access
    to dmesg instead. See corresponding change in external/sepolicy .
    
    Bug: 10020939
    Change-Id: I9d4bbbd41cb02b707cdfee79f826a39c1ec2f177

commit 234f696ea7f97dc489290827c1c68f26279de294
Author: Torne (Richard Coles) <torne@google.com>
Date:   Thu May 22 18:40:21 2014 +0100

    Add UID and directory for RELRO sharing support.
    
    Define a UID to be used by the process responsible for creating shared
    RELRO files for the WebView native library, and create a directory owned
    by that UID to use to store the files.
    
    Bug: 13005501
    Change-Id: I5bbb1e1035405e5534b2681f554fe16f74e3da1a

commit 373d9fa0824226c721c7b0c07952ebe3e3af770e
Author: Jaewan Kim <jaewan@google.com>
Date:   Mon Mar 10 17:13:07 2014 +0900

    Support static IP config on Ethernet
    
    Bug: 7606609
    Bug: 8687763
    Change-Id: I1d76b5783e8511a8e3f5d981e6b4b9fb4fbecdf4

commit 066c9b5a005fdb84ea72a6d27a40ab5bf5e6f0e2
Merge: 12d9b8272 9743f0972
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Wed May 14 19:51:37 2014 +0000

    am 9743f097: am 09eaad79: Merge "Introduce fwmarkd: a service to set the fwmark of sockets."
    
    * commit '9743f09724162186fb280627c3c125a55534a219':
      Introduce fwmarkd: a service to set the fwmark of sockets.

commit 9743f09724162186fb280627c3c125a55534a219
Merge: 4f801e60e 09eaad793
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Wed May 14 19:48:10 2014 +0000

    am 09eaad79: Merge "Introduce fwmarkd: a service to set the fwmark of sockets."
    
    * commit '09eaad793a8cec9196255d740ecb89a1426c0bf7':
      Introduce fwmarkd: a service to set the fwmark of sockets.

commit e38d4707141174a8c211d5cb01ff78da8ef1baff
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Sun May 11 07:27:34 2014 -0700

    Introduce fwmarkd: a service to set the fwmark of sockets.
    
    (cherry picked from commit d5121e212c1f53b1cb6458ee83be892d94fdfef3)
    
    Change-Id: Ieb049fe34ea2b21a7f6108f2099d1a8b8f2c28f7

commit 76202a2dfaeb9ec6a23dfbc4a382b65820a52132
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Sun May 11 07:27:34 2014 -0700

    Introduce fwmarkd: a service to set the fwmark of sockets.
    
    Change-Id: Ieb049fe34ea2b21a7f6108f2099d1a8b8f2c28f7

commit 3c1c730f206d1d2dc25ac555d48513d6a3e5fb7f
Merge: 910bca685 ca61b484b
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Tue May 13 22:43:58 2014 +0000

    am ca61b484: am b8cfcf3d: am 32e4479d: Merge "Set kernel proc files for fwmark reflection and table numbers for RAs."
    
    * commit 'ca61b484b6eb1bf92b05bc5386668ec51999e55a':
      Set kernel proc files for fwmark reflection and table numbers for RAs.

commit ca61b484b6eb1bf92b05bc5386668ec51999e55a
Merge: 57e53ed41 b8cfcf3d9
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Tue May 13 22:38:30 2014 +0000

    am b8cfcf3d: am 32e4479d: Merge "Set kernel proc files for fwmark reflection and table numbers for RAs."
    
    * commit 'b8cfcf3d9beb6ae09512941a182c326723b3ef41':
      Set kernel proc files for fwmark reflection and table numbers for RAs.

commit b8cfcf3d9beb6ae09512941a182c326723b3ef41
Merge: c563c38d0 32e4479d5
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Tue May 13 22:33:51 2014 +0000

    am 32e4479d: Merge "Set kernel proc files for fwmark reflection and table numbers for RAs."
    
    * commit '32e4479d5535887d03625b43b7e3574b458dfc8d':
      Set kernel proc files for fwmark reflection and table numbers for RAs.

commit fd94922329a83c257dd8c65a4b1417a24d67db88
Author: Sreeram Ramachandran <sreeram@google.com>
Date:   Wed Apr 9 17:44:56 2014 -0700

    Set kernel proc files for fwmark reflection and table numbers for RAs.
    
    (cherry picked from commit 2c2807ac1041751583e0c3b6892ca56eae423fa2)
    
    Change-Id: I5f0d759cb9b8590555af7f5503f00d3e455ece54

commit 1333e012ee65fef59f5f43f33744230574dfc2a2
Merge: a4fe7ddc4 4102af05a
Author: Bill Yi <byi@google.com>
Date:   Tue Apr 29 16:07:40 2014 -0700

    Merge commit '4102af05a86aae36d2560fd8b3f740a52399342c' into HEAD

commit 3094f82a8a4d4b8d2725df85a6af9d306b9f8800
Author: Robin Lee <rgl@google.com>
Date:   Fri Apr 25 15:21:35 2014 +0100

    Create world-searchable /data/misc/user directory
    
    installd will create a separate subdirectory for each user.
    
    Change-Id: I95ec09169ea70f35443bbb3209237611e174ca29

commit 0aee64f614d5eae0e50f5e24a1c790dd172b663f
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Apr 17 10:12:08 2014 -0700

    Make Volantis devices encryptable
    
    Volantis SurfaceFlinger holds open a file on data partition.
    SurfaceFlinger is not running when we trigger_default_encryption
    but if we start it before starting defaultcrypto it locks open
    data, so we can't unmount it.
    
    It will start anyway when main starts, so not starting it here
    is safe - it will just cause a 1-2 second delay in the graphics
    appearing.
    
    Change-Id: Idd546a578e62a24f999367b1407b37ad0f00f3a2

commit e29590b08bce1667c6bddebeb80991b7d16344c4
Merge: 99886266c 46e6b4f7f
Author: JP Abgrall <jpa@google.com>
Date:   Fri Apr 18 21:18:41 2014 +0000

    am 46e6b4f7: am b0397d55: am 9bb44b41: Merge "rootdir: init.rc: update max TCP window sizes for mobile networks"
    
    * commit '46e6b4f7fd5f6488d0ba06a26d67888136b3ee3e':
      rootdir: init.rc: update max TCP window sizes for mobile networks

commit 46e6b4f7fd5f6488d0ba06a26d67888136b3ee3e
Merge: 4726ba240 b0397d55a
Author: JP Abgrall <jpa@google.com>
Date:   Fri Apr 18 21:15:33 2014 +0000

    am b0397d55: am 9bb44b41: Merge "rootdir: init.rc: update max TCP window sizes for mobile networks"
    
    * commit 'b0397d55a2ff4b3c6664c9545be18ba88c07dea4':
      rootdir: init.rc: update max TCP window sizes for mobile networks

commit ce898489e4ff2567b297c8f8776504b9924f432a
Author: Narayan Reddy <narayanr@nvidia.com>
Date:   Mon Mar 24 16:53:03 2014 +0530

    rootdir: init.rc: update max TCP window sizes for mobile networks
    
    GRPS: RTT=600ms, max tput=80kbps (class 12 GMSK 4+1)
    EDGE: RTT=300ms, max tput=236kbps (class 12 8PSK)
    UMTS: RTT=200ms, max tput=384kbps (R99)
    HSDPA: RTT=75ms, max tput=14Mbps (cat 10)
    HSUPA: RTT=50ms, max tput=14Mbps
    HSPA: RTT=50ms, max tput=14Mbps
    HSPA+: RTT=50ms, max tput=42Mbps (cat 20)
    LTE: RTT=20ms, max tput=100Mbps (class 3)
    
    bug 67569
    
    Change-Id: I9d62359bbd11dc68e3649a7ea2295d0d4e25e3f2
    Signed-off-by: Narayan Reddy <narayanr@nvidia.com>
    Signed-off-by: Steve Lin <stlin@nvidia.com>

commit f24aab7d744b708a897e70e2cbdb76a81bc069b7
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Apr 10 13:28:39 2014 -0700

    Fix forceencrypt
    
    When changing vdc cryptfs enablecrypto inplace default in
      https://googleplex-android-review.git.corp.google.com/#/c/445001/
    forgot to change init.rc
    
    Change-Id: I2a937d3c302ab8eab4829a36101145d6fe726ab1

commit 11673a03e05c21bd254868466e6736b02ef1097e
Merge: 8d176e6bd 8b4ea5a49
Author: dcashman <dcashman@google.com>
Date:   Wed Apr 9 16:41:17 2014 +0000

    am 8b4ea5a4: am 39a5b812: am 2baf2886: Merge "Enable world-readable selinuxfs policy binary."
    
    * commit '8b4ea5a49dda2767af87604713053e1bc418e96f':
      Enable world-readable selinuxfs policy binary.

commit 8b4ea5a49dda2767af87604713053e1bc418e96f
Merge: 7b6a8cbae 39a5b8129
Author: dcashman <dcashman@google.com>
Date:   Wed Apr 9 16:37:05 2014 +0000

    am 39a5b812: am 2baf2886: Merge "Enable world-readable selinuxfs policy binary."
    
    * commit '39a5b812904ec13390d6261bafccf823729ae21d':
      Enable world-readable selinuxfs policy binary.

commit 5822a4af8406fb6e9ecc675297af19852b378ca0
Author: dcashman <dcashman@google.com>
Date:   Tue Mar 25 16:31:07 2014 -0700

    Enable world-readable selinuxfs policy binary.
    
    Change-Id: I1eefb457cea1164a8aa9eeb7683b3d99ee56ca99

commit dc9af896f011698949cf9237094e52eaec9d4e8e
Merge: 89086df24 6a949b45e
Author: Narayan Kamath <narayan@google.com>
Date:   Tue Apr 1 17:40:45 2014 +0100

    resolved conflicts for merge of 6a949b45 to master
    
    Change-Id: Ie123b4fff76ef43e2b1c0583731e88997504320e

commit 6a949b45e9166bcd4fc4b18e795085126a937c7b
Merge: 05b0d848b ffca173c8
Author: Narayan Kamath <narayan@google.com>
Date:   Tue Apr 1 16:29:57 2014 +0000

    am ffca173c: am 5da2dbbc: Merge "Move zygote init config to its own file."
    
    * commit 'ffca173c853a2e312610d87f40957f696ac8364a':
      Move zygote init config to its own file.

commit 4456a55ce69cd5b8ad39349ed55d3efc3512bffa
Author: Narayan Kamath <narayan@google.com>
Date:   Mon Mar 31 11:08:02 2014 +0100

    Move zygote init config to its own file.
    
    This allows us to choose different configs depending on
    whether or not the target is 64 capable, and what its preferred
    default is.
    
    bug: 13647418
    Change-Id: Ie1ce4245a3add7544c87d27c635ee390f4062523

commit 5c789b8a31a1924a346b1485410b692b82781406
Merge: bd28bb69c 166fa3de7
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Mar 24 22:18:58 2014 +0000

    Merge "Auto-encrypt drive at startup"

commit 166fa3de7060198252b43a4a9ddd841fb6d65cf7
Author: Paul Lawrence <paullawrence@google.com>
Date:   Mon Feb 3 13:27:49 2014 -0800

    Auto-encrypt drive at startup
    
    Modify fs_mgr to unmount encryptable drives after test mounting them and
    then trigger an auto-encrypt via the init script
    
    Needs matching vold changes from
     https://googleplex-android-review.googlesource.com/#/c/414200/
    
    Feature is limited to list of serial numbers with this change
    
    Bug: 11985952
    Change-Id: I84f85a258b6a7e9809467c9149249302e203c41b

commit bd28bb69c7e52f44743745562f10573c1814ff3c
Merge: 44983ace8 b5f9e65ad
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Mar 24 19:36:37 2014 +0000

    am b5f9e65a: am 0a0cc719: init.rc: Add lmkd service back
    
    * commit 'b5f9e65ad127261df2f7c9ed40d73b9024f492f6':
      init.rc: Add lmkd service back

commit 44983ace850dd47384fa7698c362b4cfc9ca7f4c
Merge: 978786e8b 68b9d5f07
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Mon Mar 24 19:36:32 2014 +0000

    am 68b9d5f0: am bdef5499: resolved conflicts for merge of f8f0531b to klp-modular-dev-plus-aosp
    
    * commit '68b9d5f07a443b44d81e09f65a45fea8c8f4984b':
      logd: core requirement

commit 0a0cc7192e1081acff483ae4f455c3aad6370546
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Mar 21 17:41:52 2014 -0700

    init.rc: Add lmkd service back
    
    - not impressed with conflict for merge f8f0531b
    
    Change-Id: I5b9a1a93ea0cf7eda4ced8dcfc9d0ad70f7aa6c8

commit bdef5499d4eb0c4f5e6853471373acd610798c7c
Merge: abf085370 f8f0531bb
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Mar 21 16:57:22 2014 -0700

    resolved conflicts for merge of f8f0531b to klp-modular-dev-plus-aosp
    
    Change-Id: I87228aa0dbd0b909437c85812f2404ca8be39f38

commit 9a305cd168abea5d0eaad0f1b1e65466b9a823c9
Merge: f529d49df f8f0531bb
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Mar 21 23:29:13 2014 +0000

    am f8f0531b: Merge "logd: core requirement"
    
    * commit 'f8f0531bb69a90e87f1bafa875e665e3935610b1':
      logd: core requirement

commit 3c253dc88f3e1decb055340c84fd6234b422c409
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Fri Mar 21 16:06:54 2014 -0700

    logd: core requirement
    
    - has no dependency on /data, switch from main to core
    
    Change-Id: I4bfe3e67d4cbd31e943c609f5626e533857a27a9

commit d94ed2c8fea4733684e4ebbf55c112828562b7a7
Merge: f37986e26 7283db6d2
Author: JP Abgrall <jpa@google.com>
Date:   Fri Mar 14 16:32:41 2014 +0000

    am 7283db6d: am efbf36f2: init.rc: prep tcp_default_init_rwnd, set the default to 60
    
    * commit '7283db6d2694c8deae644a0d815cf292309a6176':
      init.rc: prep tcp_default_init_rwnd, set the default to 60

commit 7283db6d2694c8deae644a0d815cf292309a6176
Merge: 0d4a4cb8a efbf36f2d
Author: JP Abgrall <jpa@google.com>
Date:   Fri Mar 14 16:28:05 2014 +0000

    am efbf36f2: init.rc: prep tcp_default_init_rwnd, set the default to 60
    
    * commit 'efbf36f2dad8f083de6f48dbb682461d7cfa9781':
      init.rc: prep tcp_default_init_rwnd, set the default to 60

commit 10f229d4291da55c379ce7ae0e87b1a1878199e8
Merge: 0fd9db1f5 efbf36f2d
Author: JP Abgrall <jpa@google.com>
Date:   Fri Mar 14 04:12:50 2014 +0000

    am efbf36f2: init.rc: prep tcp_default_init_rwnd, set the default to 60
    
    * commit 'efbf36f2dad8f083de6f48dbb682461d7cfa9781':
      init.rc: prep tcp_default_init_rwnd, set the default to 60

commit efbf36f2dad8f083de6f48dbb682461d7cfa9781
Author: JP Abgrall <jpa@google.com>
Date:   Fri Feb 21 12:05:01 2014 -0800

    init.rc: prep tcp_default_init_rwnd, set the default to 60
    
    The kernel's default is between 4~20.
    
    Prepare for javaland to modify the value at runtime.
    
    It can be done via
      setprop sys.sysctl.tcp_def_init_rwnd  <value>
    
    
    Bug: 12020135
    Change-Id: Id34194b085206fd02e316401c0fbbb9eb52522d2
    (cherry picked from commit 7c862c8b5e59cbe216a5bc092c01f1ecba8e9de4)

commit f447c1b3ae6d467392500a985e3974facb1b095f
Merge: eb78ba809 858d0dd1e
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Mar 11 18:28:50 2014 +0000

    am 858d0dd1: Merge "set /proc/sys/net/unix/max_dgram_qlen to large value"
    
    * commit '858d0dd1e529575181abd8de607e46f7b273cc9d':
      set /proc/sys/net/unix/max_dgram_qlen to large value

commit 9509103cd4f28cf05a9fc6c5b6fd97504875097c
Merge: 0c7d71a02 9453bce4c
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Mar 11 18:08:38 2014 +0000

    am 9453bce4: Merge "Apply restorecon_recursive to all of /data."
    
    * commit '9453bce4cff952aab5c90f5b30c6c12d3e1521e5':
      Apply restorecon_recursive to all of /data.

commit 01c5199665cfa5c6631696d410c077c3dceb871e
Merge: adad825db e9c8fb900
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Mar 11 18:08:35 2014 +0000

    am e9c8fb90: Merge "logd: initial checkin."
    
    * commit 'e9c8fb900a460699201208870ce9997a734261cc':
      logd: initial checkin.

commit dfda9b0b4703329745fc873a78034868937921ea
Merge: 566aa4788 27fd413d6
Author: Colin Cross <ccross@android.com>
Date:   Fri Mar 7 19:38:56 2014 +0000

    am 27fd413d: Merge "Start debuggerd64 for 64-bit processes"
    
    * commit '27fd413d6d02a53c453cf926717b67e9a8d1eb32':
      Start debuggerd64 for 64-bit processes

commit c1f1eb374e3153e71419b50e8e9642a0ffaaea1e
Merge: 6f4bf0391 ba023b063
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Mar 7 01:35:42 2014 +0000

    am ba023b06: Merge "Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file."
    
    * commit 'ba023b063d25b73923f2df536b6258967f756ff6':
      Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file.

commit 1d39c53e29a9c56893d170f1eac3d720076e0e55
Merge: 3a436c1c3 00eaae3aa
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Mar 4 01:00:21 2014 +0000

    am 00eaae3a: am 556c9c24: am 858d0dd1: Merge "set /proc/sys/net/unix/max_dgram_qlen to large value"
    
    * commit '00eaae3aaa6ea3ca2c9c00e0559fa6937ce33e37':
      set /proc/sys/net/unix/max_dgram_qlen to large value

commit 556c9c245de257efe8bda09ff23d2c4f7add5e49
Merge: a27fcee62 858d0dd1e
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Tue Mar 4 00:14:13 2014 +0000

    am 858d0dd1: Merge "set /proc/sys/net/unix/max_dgram_qlen to large value"
    
    * commit '858d0dd1e529575181abd8de607e46f7b273cc9d':
      set /proc/sys/net/unix/max_dgram_qlen to large value

commit 581edc1b6c3799238cfb674dfddb97db44f2818e
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Wed Nov 20 13:38:52 2013 -0800

    set /proc/sys/net/unix/max_dgram_qlen to large value
    
    - init: set /proc/sys/net/unix/max_dgram_qlen to 300
    - libsysutils: Add listen backlog argument to startListener
    - logd: set listen backlog to 300
    
    Change-Id: Id6d37d6c937ba2d221e76258d89c9516619caeec

commit 5c3c77ed7855d262645c44b7e239476d9b66393d
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Wed Jan 29 13:53:03 2014 -0500

    Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file.
    
    mkdir /data/misc/wifi subdirectories and /data/misc/dhcp is performed
    in the various device-specific init*.rc files but seems generic.
    Move it to the main init.rc file.
    
    Drop the separate chown for /data/misc/dhcp as this is handled by mkdir
    built-in if the directory already exists.
    
    Add a restorecon_recursive /data/misc/wifi/sockets.
    
    Change-Id: I51b09c5e40946673a38732ea9f601b2d047d3b62
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit d7ce27e8ae637b9bbaf0a31cd469a461b6651ab0
Merge: daaee0ae3 e6fb169fd
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Feb 26 22:39:07 2014 +0000

    am e6fb169f: am e570fd3a: am 9453bce4: Merge "Apply restorecon_recursive to all of /data."
    
    * commit 'e6fb169fd69bfa6775737f37d45041c5b229321c':
      Apply restorecon_recursive to all of /data.

commit e570fd3a32a3a3525a2e6a069d2b69c6184db56e
Merge: 8dd3ad128 9453bce4c
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Feb 26 22:31:02 2014 +0000

    am 9453bce4: Merge "Apply restorecon_recursive to all of /data."
    
    * commit '9453bce4cff952aab5c90f5b30c6c12d3e1521e5':
      Apply restorecon_recursive to all of /data.

commit 1bb3489e600876979146a6222ac5bb2a684702bf
Merge: 785fff484 e9c8fb900
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Feb 26 14:02:02 2014 -0800

    resolved conflicts for merge of e9c8fb90 to klp-modular-dev-plus-aosp
    
    Change-Id: I9ee9908a915258937b343de90dce5774d914f03a

commit 9453bce4cff952aab5c90f5b30c6c12d3e1521e5
Merge: 78617a087 f2b7ee765
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Feb 26 21:36:30 2014 +0000

    Merge "Apply restorecon_recursive to all of /data."

commit 0175b0747a1f55329109e84c9a1322dcb95e2848
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Wed Feb 26 09:50:16 2014 -0800

    logd: initial checkin.
    
    * Create a new userspace log daemon for handling logging messages.
    
    Original-Change-Id: I75267df16359684490121e6c31cca48614d79856
    Signed-off-by: Nick Kralevich <nnk@google.com>
    
    * Merge conflicts
    * rename new syslog daemon to logd to prevent confusion with bionic syslog
    * replace racy getGroups call with KISS call to client->getGid()
    * Timestamps are filed at logging source
    * insert entries into list in timestamp order
    * Added LogTimeEntry tail filtration handling
    * Added region locking around LogWriter list
    * separate threads for each writer
    * /dev/socket/logd* permissions
    
    Signed-off-by: Mark Salyzyn <salyzyn@google.com>
    
    (cherry picked from commit 3e76e0a49760c4970b7cda6153e51026af98e4f3)
    
    Author: Nick Kralevich <nnk@google.com>
    Change-Id: Ice88b1412d8f9daa7f9119b2b5aaf684a5e28098

commit 7c862c8b5e59cbe216a5bc092c01f1ecba8e9de4
Author: JP Abgrall <jpa@google.com>
Date:   Fri Feb 21 12:05:01 2014 -0800

    init.rc: prep tcp_default_init_rwnd, set the default to 60
    
    The kernel's default is between 4~20.
    
    Prepare for javaland to modify the value at runtime.
    
    It can be done via
      setprop sys.sysctl.tcp_def_init_rwnd  <value>
    
    
    Bug: 12020135
    Change-Id: Id34194b085206fd02e316401c0fbbb9eb52522d2

commit 4046c132dc385fb9f2ae2e2198fd32269dd14a20
Merge: d4446607b 63c15d506
Author: Mark Salyzyn <salyzyn@google.com>
Date:   Thu Feb 20 00:27:00 2014 +0000

    Merge changes I929dddc7,Ice88b141,I243b1338
    
    * changes:
      logd: prune more aggressively when over the top
      logd: initial checkin.
      logcat: test: add clear and blocking check

commit b6391ce26b6e5f7360efc7aba0fac8455cba53b4
Merge: 133993b48 ee9de136c
Author: Colin Cross <ccross@android.com>
Date:   Sun Feb 16 19:57:27 2014 +0000

    am ee9de136: am bb2da79f: am 27fd413d: Merge "Start debuggerd64 for 64-bit processes"
    
    * commit 'ee9de136c52555e8775611ad32fc8ee47c75e3d1':
      Start debuggerd64 for 64-bit processes

commit bb2da79fdab68c9643a30f5156e7dcabb379b139
Merge: 6e6140e0a 27fd413d6
Author: Colin Cross <ccross@android.com>
Date:   Sun Feb 16 19:50:59 2014 +0000

    am 27fd413d: Merge "Start debuggerd64 for 64-bit processes"
    
    * commit '27fd413d6d02a53c453cf926717b67e9a8d1eb32':
      Start debuggerd64 for 64-bit processes

commit 78ef91aa5ec29cc45bf3f0d4b32cd92db000a95a
Author: Dan Willemsen <dwillemsen@nvidia.com>
Date:   Sun Feb 16 11:30:27 2014 -0800

    Start debuggerd64 for 64-bit processes
    
    Change-Id: I2fc33d9eb2726b043d2f13bfab0c605dbb6083c7

commit 3e76e0a49760c4970b7cda6153e51026af98e4f3
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Dec 15 11:43:38 2011 -0800

    logd: initial checkin.
    
    * Create a new userspace log daemon for handling logging messages.
    
    Original-Change-Id: I75267df16359684490121e6c31cca48614d79856
    Signed-off-by: Nick Kralevich <nnk@google.com>
    
    * Merge conflicts
    * rename new syslog daemon to logd to prevent confusion with bionic syslog
    * replace racy getGroups call with KISS call to client->getGid()
    * Timestamps are filed at logging source
    * insert entries into list in timestamp order
    * Added LogTimeEntry tail filtration handling
    * Added region locking around LogWriter list
    * separate threads for each writer
    * /dev/socket/logd* permissions
    
    Signed-off-by: Mark Salyzyn <salyzyn@google.com>
    
    Change-Id: Ice88b1412d8f9daa7f9119b2b5aaf684a5e28098

commit b6e3b3cea2c2606fcff0364d680335fc3433247b
Merge: 0f18bb1fe 13d5bb4ba
Author: Paul Lawrence <paullawrence@google.com>
Date:   Fri Feb 14 15:24:40 2014 +0000

    Merge "Mount default encrypted devices at boot"

commit b3739735b84a88cccfe08c0d69b1017a07004470
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Feb 13 13:58:21 2014 -0800

    lowmemorykiller: make perms 0220
    
    Set
    
    * /sys/module/lowmemorykiller/parameters/adj
    * /sys/module/lowmemorykiller/parameters/minfree
    
    to 0220. This better indicates that these files are only intended
    to be written to, never read.
    
    Change-Id: I9ef054f032b3955e04128fc1a472a17c7b1fa792

commit 13d5bb4badf59e22d9d983d104596da3ec4f2753
Author: Paul Lawrence <paullawrence@google.com>
Date:   Thu Jan 30 10:43:52 2014 -0800

    Mount default encrypted devices at boot
    
    If userdata is default encrypted, we should mount it at boot
    to avoid bringing the framework up and then down unnecessarily.
    
    Needs matching vold changes from
     https://googleplex-android-review.googlesource.com/#/c/412649/
    
    Bug: 8769627
    Change-Id: I4b8276befd832cd788e15c36edfbf8f0e18d7e6b

commit f2b7ee765516c84a9995e3acdc8fbcd7dc1b33cc
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Thu Feb 6 13:52:52 2014 -0500

    Apply restorecon_recursive to all of /data.
    
    With the following prior changes:
    I77bf2a0c4c34b1feef6fdf4d6c3bd92dbf32f4a1
    I698b1b2c3f00f31fbb2015edf23d33b51aa5bba1
    I8dd915d9bb80067339621b905ea2b4ea0fa8d71e
    it should now be safe (will correctly label all files)
    and reasonably performant (will skip processing unless
    file_contexts has changed since the last call) to call
    restorecon_recursive /data from init.rc.
    
    The call is placed after the setprop selinux.policy_reload 1 so that
    we use any policy update under /data/security if present.
    
    Change-Id: Ib8d9751a47c8e0238cf499fcec61898937945d9d
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 6edd1bdf53fe6fdeeca3b4031896df4f8007de3e
Merge: 6694b7508 9526202d8
Author: Doug Zongker <dougz@android.com>
Date:   Tue Feb 4 22:01:28 2014 +0000

    Merge "set permissions of recovery install script"

commit 9526202d84387df3950bf526bbbaeac1ede129d2
Author: Doug Zongker <dougz@android.com>
Date:   Tue Feb 4 12:15:14 2014 -0800

    set permissions of recovery install script
    
    The script that writes the recovery partition after a successful
    update of system needs to be made executable.  This change also moves
    it from /system/etc to /system/bin.
    
    Bug: 12893978
    Change-Id: I686e2392a2392515a6859a7381b735de1007b7ea

commit d9d8a60e42b0acc8ad6285fb8d6244d508ad0250
Merge: 5a23144aa fbca9d944
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Feb 4 19:02:48 2014 +0000

    am fbca9d94: am 7e3d72d9: am ba023b06: Merge "Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file."
    
    * commit 'fbca9d9449231839b805ef4b11e4b2d968e601e3':
      Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file.

commit 7e3d72d974d21932c2a6a0323c59fed2f689d323
Merge: 77b230233 ba023b063
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Feb 4 18:37:36 2014 +0000

    am ba023b06: Merge "Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file."
    
    * commit 'ba023b063d25b73923f2df536b6258967f756ff6':
      Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file.

commit 82e87ed4799b12b7bd2e20a6fe5fdc19e0350fc3
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Wed Jan 29 13:53:03 2014 -0500

    Move creation of /data/misc/wifi and /data/misc/dhcp to main init.rc file.
    
    mkdir /data/misc/wifi subdirectories and /data/misc/dhcp is performed
    in the various device-specific init*.rc files but seems generic.
    Move it to the main init.rc file.
    
    Drop the separate chown for /data/misc/dhcp as this is handled by mkdir
    built-in if the directory already exists.
    
    Add a restorecon_recursive /data/misc/wifi/sockets.
    
    Change-Id: I51b09c5e40946673a38732ea9f601b2d047d3b62
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 35ef36456d89b4e823f32c328c4d0e6d15ae41e2
Merge: adc09abb8 c3af60aff
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jan 24 18:14:51 2014 +0000

    am c3af60af: am c7e28899: am 16384312: am 0620e3dd: Merge "adbd: switch to su domain when running as root"
    
    * commit 'c3af60aff5d097c717b19721f143499891d5ca3d':
      adbd: switch to su domain when running as root

commit c7e28899c3917ad6e72d5dc99401bcd133cbd475
Merge: b36cfdb71 163843122
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jan 24 18:09:26 2014 +0000

    am 16384312: am 0620e3dd: Merge "adbd: switch to su domain when running as root"
    
    * commit '16384312244b8dccd53478a7bdeeb9a492821807':
      adbd: switch to su domain when running as root

commit 16384312244b8dccd53478a7bdeeb9a492821807
Merge: 4b53b0147 0620e3ddb
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jan 24 10:06:46 2014 -0800

    am 0620e3dd: Merge "adbd: switch to su domain when running as root"
    
    * commit '0620e3ddb85582f66612d046d1295dc20bf1a4f5':
      adbd: switch to su domain when running as root

commit d49aa2537cf0b454dfaa4b0312a403ebff202d70
Author: Nick Kralevich <nnk@google.com>
Date:   Sat Jan 18 09:25:04 2014 -0800

    adbd: switch to su domain when running as root
    
    When adbd runs as root, it should transition into the
    su domain. This is needed to run the adbd and shell
    domains in enforcing on userdebug / eng devices without
    breaking developer workflows.
    
    Introduce a new device_banner command line option.
    
    Change-Id: Ib33c0dd2dd6172035230514ac84fcaed2ecf44d6

commit d0f2c265d8b7457bbb9b809e00b6e8b18bbef7c9
Merge: 24239a99f 7baebf134
Author: Doug Zongker <dougz@android.com>
Date:   Thu Jan 16 22:41:24 2014 +0000

    Merge "add the pre-recovery service"

commit 7baebf1345ff9e861ea8ccf9712128a3b7cd9fcc
Author: Doug Zongker <dougz@android.com>
Date:   Tue Jan 14 12:30:40 2014 -0800

    add the pre-recovery service
    
    Add a service called "pre-recovery" which is normally stopped but can
    be started by the system server when we want to go into recovery.  It
    will do any preparation needed (currently needed to handle update
    packages that reside on an encrypted /data partition) and then set
    sys.powerctl when it's ready to actually reboot.
    
    Bug: 12188746
    Change-Id: I894a4cb200395a0f6d7fe643ed4c2ac0a45d2052

commit 32a32c9eb2b6975d76dae1dc5a2dbc73bb05f757
Merge: c318fb405 11190d0cc
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jan 15 20:22:16 2014 +0000

    am 11190d0c: am 4552987e: am c93904b4: am e847f429: Merge "restorecon /data/misc/media."
    
    * commit '11190d0ccb1216307043ceecf5360f1a1a946cd1':
      restorecon /data/misc/media.

commit 4552987e6a1338dac26f13f0851657335d998ffb
Merge: aa25204f4 c93904b44
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jan 15 20:15:56 2014 +0000

    am c93904b4: am e847f429: Merge "restorecon /data/misc/media."
    
    * commit 'c93904b445830cd17fd9dd6d4fe236987577a478':
      restorecon /data/misc/media.

commit c93904b445830cd17fd9dd6d4fe236987577a478
Merge: 93557002e e847f429f
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jan 15 12:13:20 2014 -0800

    am e847f429: Merge "restorecon /data/misc/media."
    
    * commit 'e847f429f43ae56aaa406697ca603c8469e2100b':
      restorecon /data/misc/media.

commit 9e9f05e5ebf72a60930a53e5cf45f575534fc29d
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Wed Jan 15 13:19:31 2014 -0500

    restorecon /data/misc/media.
    
    Otherwise it will be mislabeled on upgrades with existing userdata.
    
    Change-Id: Ibde88d5d692ead45b480bb34cfe0831baeffbf94
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 0969ec3a558723ae55f033c163b052e1dbf97669
Merge: ebf1b66c8 218878d44
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jan 8 23:49:18 2014 +0000

    am 218878d4: am df8d0ffd: am 72f269f3: am 8830b53b: Merge "Label existing /data/mediadrm files."
    
    * commit '218878d447b58b357f0dc97bfe6b77196d35a729':
      Label existing /data/mediadrm files.

commit df8d0ffd73f8359def90d2f79d25059023018213
Merge: e61495c9b 72f269f30
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jan 8 17:44:32 2014 +0000

    am 72f269f3: am 8830b53b: Merge "Label existing /data/mediadrm files."
    
    * commit '72f269f3050b3e5b2fd6be7d0a6a485114cc6ee7':
      Label existing /data/mediadrm files.

commit 72f269f3050b3e5b2fd6be7d0a6a485114cc6ee7
Merge: 2ab2e110c 8830b53b7
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Jan 8 09:39:20 2014 -0800

    am 8830b53b: Merge "Label existing /data/mediadrm files."
    
    * commit '8830b53b76c05416c021df3eb0cea1dd541bc3ac':
      Label existing /data/mediadrm files.

commit 2dcbb81d89c86144b38c0f0b56ea7420c74a7f5a
Author: rpcraig <rpcraig rpcraig@tycho.ncsc.mil>
Date:   Tue Jan 7 22:24:22 2014 -0500

    Label existing /data/mediadrm files.
    
    Use restorecon_recursive to label devices
    where the directory and subfiles have
    already been built and labeled.
    
    Change-Id: I0dfe1e542fb153ad20adf7b2b1f1c087b4956a12
    Signed-off-by: rpcraig <rpcraig@tycho.ncsc.mil>

commit 950909c301e316783e5b4687dbc422ed845cb69a
Author: Todd Poynor <toddpoynor@google.com>
Date:   Wed Jul 10 15:19:44 2013 -0700

    init.rc: start lmkd
    
    Change-Id: Ibebab31e1f41a210821834a1d65f196b39bb6601

commit cb1f0147d729d1a3e9b4898ea98de3e6761233e4
Merge: dab375bcb 88d040a32
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jan 2 21:08:36 2014 +0000

    am 88d040a3: am 3df76c0c: am 6bec36ec: am 5b8abdf6: Merge "Apply strict SELinux checking of PROT_EXEC on mmap/mprotect calls."
    
    * commit '88d040a32feac727a7e11658198c32d9cc563d8e':
      Apply strict SELinux checking of PROT_EXEC on mmap/mprotect calls.

commit 6bec36ecc92af488f0193e03c386eaab409ca17c
Merge: bb96da432 5b8abdf62
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jan 2 13:03:03 2014 -0800

    am 5b8abdf6: Merge "Apply strict SELinux checking of PROT_EXEC on mmap/mprotect calls."
    
    * commit '5b8abdf6278a4142736d918d1371d10c54c91db3':
      Apply strict SELinux checking of PROT_EXEC on mmap/mprotect calls.

commit 5b8abdf6278a4142736d918d1371d10c54c91db3
Merge: 268cc5408 5e1461dc9
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Jan 2 20:58:34 2014 +0000

    Merge "Apply strict SELinux checking of PROT_EXEC on mmap/mprotect calls."

commit 3dd470552c6b1c88cd344c3a366666ba464bd994
Merge: 2eab743f6 469035b83
Author: Colin Cross <ccross@android.com>
Date:   Fri Dec 27 20:28:52 2013 +0000

    am 469035b8: am fed48bb6: am 6604f2d1: am 2dcc2759: Merge "Run the console service shell in the shell domain."
    
    * commit '469035b83546a847a1f12c1feca50a1c7e5e1062':
      Run the console service shell in the shell domain.

commit 6604f2d1ef5e78e7f129f94abe7a763dd0e0dd1d
Merge: 3ccdf0bbb 2dcc27593
Author: Colin Cross <ccross@android.com>
Date:   Fri Dec 27 12:21:24 2013 -0800

    am 2dcc2759: Merge "Run the console service shell in the shell domain."
    
    * commit '2dcc275936aefbb5badf3b4822d492260077144d':
      Run the console service shell in the shell domain.

commit 5e1461dc906f68f6590df1c79f2f4d69e0af18c5
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Dec 23 16:26:46 2013 -0500

    Apply strict SELinux checking of PROT_EXEC on mmap/mprotect calls.
    
    If checkreqprot == 1, SELinux only checks the protection flags passed
    by the application, even if the kernel internally adds PROT_EXEC for
    READ_IMPLIES_EXEC personality flags.  Switch to checkreqprot == 0
    to check the final protection flags applied by the kernel.
    
    Change-Id: Ic39242bbbd104fc9a1bcf2cd2ded7ce1aeadfac4
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 610653fe930d016e1d962661c4fcbe2a8747e5ac
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Dec 23 14:11:02 2013 -0500

    Run the console service shell in the shell domain.
    
    This allows it to be permissive in userdebug/eng builds
    but confined/enforcing in user builds.
    
    Change-Id: Ie322eaa0acdbefea2de4e71ae386778c929d042b
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit f7f823e46b285169637c1f1a9c17e16ae1566b92
Merge: f73c009a3 8b0d10c87
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Dec 16 17:12:22 2013 +0000

    am 8b0d10c8: am a24e9a86: am 02ad8700: am e4335483: Merge "Relabel /data/misc/zoneinfo"
    
    * commit '8b0d10c870efbe8254f407e02c406c05bedfa0b5':
      Relabel /data/misc/zoneinfo

commit 02ad8700dd22d5bf5d73c638e3a45c35d5ef3d1d
Merge: feb539b6e e4335483e
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Dec 16 09:04:04 2013 -0800

    am e4335483: Merge "Relabel /data/misc/zoneinfo"
    
    * commit 'e4335483e78292800e27c7bf0a67d23bee47dc84':
      Relabel /data/misc/zoneinfo

commit 354e9edbd73ad9453e6c284c0551105ccf6aac14
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Dec 13 16:00:04 2013 -0800

    Relabel /data/misc/zoneinfo
    
    The files in zoneinfo changed from system_data_file to
    zoneinfo_data_file. Fixup pre-existing files.
    
    Change-Id: Idddbd6c2ecf66cd16b057a9ff288cd586a109949

commit 6b3867fc6b3cb45e6163c15cc831fd150a8b104c
Merge: 5f64d528b 7d1f3a3da
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Dec 9 18:42:14 2013 +0000

    am 7d1f3a3d: am bdf53e2a: Merge "Do not change ownership on /sys/fs/selinux/enforce."
    
    * commit '7d1f3a3daa721892b3247e847f72f1e948a0a68f':
      Do not change ownership on /sys/fs/selinux/enforce.

commit 7d1f3a3daa721892b3247e847f72f1e948a0a68f
Merge: cb7092d9f bdf53e2a5
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Dec 9 10:35:41 2013 -0800

    am bdf53e2a: Merge "Do not change ownership on /sys/fs/selinux/enforce."
    
    * commit 'bdf53e2a59654d2b1e8469616f1b0175b275219d':
      Do not change ownership on /sys/fs/selinux/enforce.

commit 17bec835d5cf1dfd3fa94df3b0da84a1e731e447
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Dec 9 10:23:16 2013 -0500

    Do not change ownership on /sys/fs/selinux/enforce.
    
    There is no longer any reason to permit system UID to set enforcing mode.
    
    Change-Id: Ie28beed1ca2b215c71f2847e2390cee1af1713c3
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 7fc7a07b237e0887f3815822c4551b9968267b37
Merge: 02ac0bfdc 252d9030c
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Thu Dec 5 12:38:34 2013 -0800

    Merge commit '252d9030cd4b2e3e6cf13fa33f328eccedb5e26c' into HEAD

commit 66ed50af6870210ce013a5588a688434a5d48ee9
Merge: dd2ac3de6 536dea9d6
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Fri Nov 22 11:28:10 2013 -0800

    Merge commit '536dea9d61a032e64bbe584a97463c6638ead009' into HEAD
    
    Change-Id: I5c469a4b738629d99d721cad7ded02d6c35f56d5

commit fabe8716f81ec419ec854799d0a63c444e91edd3
Merge: fd91129d5 fd1dd864a
Author: Todd Poynor <toddpoynor@google.com>
Date:   Fri Nov 22 10:45:49 2013 -0800

    am fd1dd864: am 479efb54: init.rc: mount pstore fs, set console-ramoops permissions
    
    * commit 'fd1dd864a896bd6233ee8c75b84d9771148dd9b3':
      init.rc: mount pstore fs, set console-ramoops permissions

commit fd1dd864a896bd6233ee8c75b84d9771148dd9b3
Merge: bbdfc0c41 479efb540
Author: Todd Poynor <toddpoynor@google.com>
Date:   Fri Nov 22 10:42:17 2013 -0800

    am 479efb54: init.rc: mount pstore fs, set console-ramoops permissions
    
    * commit '479efb540a198a9b7cd278387b0d45009a05bb2b':
      init.rc: mount pstore fs, set console-ramoops permissions

commit 9350d80e706f385c8a4dc6bc4fd9be15e6e0a850
Merge: 93b923c34 b6ee39bca
Author: Elliott Hughes <enh@google.com>
Date:   Thu Nov 21 22:59:48 2013 -0800

    am b6ee39bc: am 4a4616f6: am 048bb92f: Merge "split setptop ethernet tcp buffer from wifi"
    
    * commit 'b6ee39bca4b774cf2ffbad8eb12dcfc13b8814c9':
      split setptop ethernet tcp buffer from wifi

commit 479efb540a198a9b7cd278387b0d45009a05bb2b
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu Nov 21 20:23:54 2013 -0800

    init.rc: mount pstore fs, set console-ramoops permissions
    
    Change-Id: I44cb00f9123c6044a03de926b6a616da753bb549

commit b6ee39bca4b774cf2ffbad8eb12dcfc13b8814c9
Merge: 127eab252 4a4616f64
Author: Elliott Hughes <enh@google.com>
Date:   Thu Nov 21 17:15:09 2013 -0800

    am 4a4616f6: am 048bb92f: Merge "split setptop ethernet tcp buffer from wifi"
    
    * commit '4a4616f6450f191faf168a10b6e2ffaba14803bd':
      split setptop ethernet tcp buffer from wifi

commit 4a4616f6450f191faf168a10b6e2ffaba14803bd
Merge: 8ab9ece2e 048bb92f3
Author: Elliott Hughes <enh@google.com>
Date:   Wed Nov 20 18:10:49 2013 -0800

    am 048bb92f: Merge "split setptop ethernet tcp buffer from wifi"
    
    * commit '048bb92f3f33196d96a51b446c73805e208a5333':
      split setptop ethernet tcp buffer from wifi

commit 52ea510f8fa84b634ffff18b75b5a3f95e302ba6
Author: Jianzheng Zhou <jianzheng.zhou@freescale.com>
Date:   Fri Nov 15 13:44:00 2013 +0800

    split setptop ethernet tcp buffer from wifi
    
    Change-Id: I0582ec75fddb904ca14b9cbddf593ddbd4195c41
    Signed-off-by: Jianzheng Zhou <jianzheng.zhou@freescale.com>

commit fb7e395455c9a2acee13aaa527768558d0a58b7c
Merge: 031120e80 9b41f4520
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Oct 17 18:50:43 2013 -0700

    am 9b41f452: am a9e453f1: Merge "vold no longer does MS_MOVE; remove tmpfs." into klp-dev
    
    * commit '9b41f452013123d0a394e696f597467da73108ed':
      vold no longer does MS_MOVE; remove tmpfs.

commit 9b41f452013123d0a394e696f597467da73108ed
Merge: e6cc56599 a9e453f1b
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Oct 17 18:48:45 2013 -0700

    am a9e453f1: Merge "vold no longer does MS_MOVE; remove tmpfs." into klp-dev
    
    * commit 'a9e453f1b552699f69dca19599c7624a581089bd':
      vold no longer does MS_MOVE; remove tmpfs.

commit 00c8e1a2199b2f9c50935bb4ea8bb3b86ba1bbef
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Oct 17 16:25:14 2013 -0700

    vold no longer does MS_MOVE; remove tmpfs.
    
    MS_MOVE was used when staging external storage devices, which no
    longer occurs.  In fact, having a writable tmpfs was masking a vold
    bug around moving apps to SD cards.
    
    Bug: 11175082
    Change-Id: Ib2d7561c3a0b6fde94f651a496cb0c1f12f88d96

commit eef6fca832c7270dfe48a9bb2aad632bba3d0ea8
Merge: 8511a3da0 a5fdea718
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Tue Oct 8 16:02:41 2013 -0700

    am a5fdea71: am e93a0517: Set GID required to write, media_rw mount point.
    
    * commit 'a5fdea7189239d7edeafa528c299306cba55e6c6':
      Set GID required to write, media_rw mount point.

commit a5fdea7189239d7edeafa528c299306cba55e6c6
Merge: 816c9a64f e93a0517f
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Tue Oct 8 14:12:38 2013 -0700

    am e93a0517: Set GID required to write, media_rw mount point.
    
    * commit 'e93a0517f4c88310066ac39c6b268ebfcceef44e':
      Set GID required to write, media_rw mount point.

commit e93a0517f4c88310066ac39c6b268ebfcceef44e
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Tue Oct 8 10:14:24 2013 -0700

    Set GID required to write, media_rw mount point.
    
    Add sdcard FUSE daemon flag to specify the GID required for a package
    to have write access.  Normally sdcard_rw, but it will be media_rw
    for secondary external storage devices, so DefaultContainerService
    can still clean up package directories after uninstall.
    
    Create /mnt/media_rw which is where vold will mount raw secondary
    external storage devices before wrapping them in a FUSE instance.
    
    Bug: 10330128, 10330229
    Change-Id: I4385c36fd9035cdf56892aaf7b36ef4b81f4418a

commit ecb2e3903bf24a511032654532f44486362de765
Merge: dcf2771bb ad2961397
Author: Colin Cross <ccross@android.com>
Date:   Thu Oct 3 15:17:53 2013 -0700

    am ad296139: am 410f8c30: am 79b277ab: Merge "Set security context of /adb_keys and /data/misc/adb/adb_keys."
    
    * commit 'ad2961397f1c7b79b114672108a3bc9b87dc8174':
      Set security context of /adb_keys and /data/misc/adb/adb_keys.

commit ad2961397f1c7b79b114672108a3bc9b87dc8174
Merge: ea1f56e7f 410f8c305
Author: Colin Cross <ccross@android.com>
Date:   Thu Oct 3 15:15:43 2013 -0700

    am 410f8c30: am 79b277ab: Merge "Set security context of /adb_keys and /data/misc/adb/adb_keys."
    
    * commit '410f8c305b416484f17f068c37b785605a2f69eb':
      Set security context of /adb_keys and /data/misc/adb/adb_keys.

commit 410f8c305b416484f17f068c37b785605a2f69eb
Merge: b1dd17652 79b277ab7
Author: Colin Cross <ccross@android.com>
Date:   Thu Oct 3 15:14:14 2013 -0700

    am 79b277ab: Merge "Set security context of /adb_keys and /data/misc/adb/adb_keys."
    
    * commit '79b277ab73711313690d03a9fb2e9cb3f9242b39':
      Set security context of /adb_keys and /data/misc/adb/adb_keys.

commit 41c9fd6480771ec7ab4c160aef046e0d27a085a0
Merge: c123f3ac6 0d3ac55d0
Author: Colin Cross <ccross@android.com>
Date:   Tue Oct 1 20:59:43 2013 -0700

    am 0d3ac55d: am 230252d5: am 61afb07b: Merge "Trigger a policy reload from post-fs-data."
    
    * commit '0d3ac55d0654fe4f6d37923782dcd41f0590c741':
      Trigger a policy reload from post-fs-data.

commit 0d3ac55d0654fe4f6d37923782dcd41f0590c741
Merge: 9293ea4c8 230252d5c
Author: Colin Cross <ccross@android.com>
Date:   Tue Oct 1 18:53:51 2013 -0700

    am 230252d5: am 61afb07b: Merge "Trigger a policy reload from post-fs-data."
    
    * commit '230252d5cd70f5be4c24046c7a409e9498ac97f5':
      Trigger a policy reload from post-fs-data.

commit 230252d5cd70f5be4c24046c7a409e9498ac97f5
Merge: 3f0a5e9c9 61afb07b9
Author: Colin Cross <ccross@android.com>
Date:   Tue Oct 1 18:50:18 2013 -0700

    am 61afb07b: Merge "Trigger a policy reload from post-fs-data."
    
    * commit '61afb07b9b14233f76a969840f74ce1ced22bf58':
      Trigger a policy reload from post-fs-data.

commit deb41e512760f9d18cb718b007ced367018b3667
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Tue Oct 1 09:21:47 2013 -0400

    Set security context of /adb_keys and /data/misc/adb/adb_keys.
    
    I97b3d86a69681330bba549491a2fb39df6cf20ef introduced a separate type
    for the adb_keys file.  Set the security context of the adb_keys file
    accordingly by adding restorecon commands to init.rc.
    
    Change-Id: I30e4d2a1ae223a03eadee58a883c79932fff59fe
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 61afb07b9b14233f76a969840f74ce1ced22bf58
Merge: 71a8aa347 6552f6885
Author: Colin Cross <ccross@android.com>
Date:   Mon Sep 30 20:04:11 2013 +0000

    Merge "Trigger a policy reload from post-fs-data."

commit 63144019468b2043393aabd7cba6f03b2e9a4234
Merge: dbbafa530 dfcbf02bb
Author: Ken Sumrall <ksumrall@android.com>
Date:   Tue Sep 24 10:25:31 2013 -0700

    am dfcbf02b: am 6b1a0272: Merge "Create a separate copy of the fsck logs" into klp-dev
    
    * commit 'dfcbf02bb0a6705e3714a59e42e052fbb0ce8799':
      Create a separate copy of the fsck logs

commit dfcbf02bb0a6705e3714a59e42e052fbb0ce8799
Merge: 12d719258 6b1a02723
Author: Ken Sumrall <ksumrall@android.com>
Date:   Mon Sep 23 18:59:39 2013 -0700

    am 6b1a0272: Merge "Create a separate copy of the fsck logs" into klp-dev
    
    * commit '6b1a027239689a817aa5ca44a2bcbfe48ed21408':
      Create a separate copy of the fsck logs

commit 6b1a027239689a817aa5ca44a2bcbfe48ed21408
Merge: 777a00e3d 4eaf90585
Author: Ken Sumrall <ksumrall@android.com>
Date:   Mon Sep 23 20:06:57 2013 +0000

    Merge "Create a separate copy of the fsck logs" into klp-dev

commit 4676550b5684da8355f9ee0b2db964005ce9ea4f
Author: Todd Poynor <toddpoynor@google.com>
Date:   Mon Sep 16 19:32:03 2013 -0700

    init.rc: use oom_score_adj instead of oom_adj
    
    Use kernel oom_score_adj interface to make init and children unkillable.
    
    Stop using older, deprecated oom_adj interface.
    
    Use OOM_SCORE_ADJ_MIN to make the processes unkillable (previously the processes
    were set to a very low score, but not unkillable).
    
    Change-Id: I680965009585c2a5a580859fb946f2d0caa95d9c

commit 4eaf905858c6a1d7cf0639bed3e8de3bd7987646
Author: Ken Sumrall <ksumrall@android.com>
Date:   Wed Sep 18 17:49:21 2013 -0700

    Create a separate copy of the fsck logs
    
    The log_target parameter of android_fork_execvp_ext() is now a
    bit field, and multiple targets can be set to log to multiple
    places at the same time.
    
    The new target LOG_FILE will log to a file specified by the new
    parameter file_path.
    
    Set LOG_FILE and log to a file in /dev (the only writable filesystem
    avilable when e2fsck runs) when invoking e2fsck in fs_mgr.
    
    Bug: 10021342
    
    Change-Id: I63baf644cc8c3afccc8345df27a74203b44d0400

commit aa4a3228f00fedd870c25dc37a112e439682dbde
Merge: 780e011f0 9729b4157
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Sep 20 15:59:37 2013 -0700

    am 9729b415: am 44d6342c: Remove mkdir() side effect, add .nomedia, utils.
    
    * commit '9729b41574ca5e5e87c86b203a2096cbdc72cfea':
      Remove mkdir() side effect, add .nomedia, utils.

commit 9729b41574ca5e5e87c86b203a2096cbdc72cfea
Merge: 4d5d633bf 44d6342ca
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Sep 20 15:57:58 2013 -0700

    am 44d6342c: Remove mkdir() side effect, add .nomedia, utils.
    
    * commit '44d6342caa0db1f613809e9ba1ea8d9af0183b74':
      Remove mkdir() side effect, add .nomedia, utils.

commit 44d6342caa0db1f613809e9ba1ea8d9af0183b74
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Sep 12 09:44:48 2013 -0700

    Remove mkdir() side effect, add .nomedia, utils.
    
    Before this change, FUSE lookup() would have the side effect of
    creating the directory on behalf of apps.  This resulted in most
    directories being created just by Settings trying to measure disk
    space.  Instead, we're switching to have vold do directory creation
    when an app doesn't have enough permissions.
    
    Create fs_mkdirs() utility to create all parent directories in a
    path as needed.  Allow traversal (+x) into /storage directories.
    
    Fix FUSE derived permissions to be case insensitive.  Mark well-known
    directories as .nomedia when created.
    
    Bug: 10577808, 10330221
    Change-Id: I53114f2e63ffbe6de4ba6a72d94a232523231cad

commit 5660da25b9cd0b2e8d4e5d89de5b1cc281bce9bd
Merge: af781c269 1998e505a
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Sep 19 08:54:12 2013 -0700

    am 1998e505: am 2e940286: am 0f507339: Merge "Do not change ownership of /sys/fs/selinux/load to system UID."
    
    * commit '1998e505a98ad445bead87c2bb047053f1aea648':
      Do not change ownership of /sys/fs/selinux/load to system UID.

commit 1998e505a98ad445bead87c2bb047053f1aea648
Merge: a2a93250f 2e9402863
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Sep 19 08:51:49 2013 -0700

    am 2e940286: am 0f507339: Merge "Do not change ownership of /sys/fs/selinux/load to system UID."
    
    * commit '2e9402863b40fe8bf2ddd8169c62f2419d968ff9':
      Do not change ownership of /sys/fs/selinux/load to system UID.

commit 2e9402863b40fe8bf2ddd8169c62f2419d968ff9
Merge: c67bd8d7c 0f507339e
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Sep 19 08:50:21 2013 -0700

    am 0f507339: Merge "Do not change ownership of /sys/fs/selinux/load to system UID."
    
    * commit '0f507339ec474a2f67227466efc9045630f1f1a4':
      Do not change ownership of /sys/fs/selinux/load to system UID.

commit cc13e8ab87f74143293722e5301480fbe31b788d
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Aug 26 10:53:25 2013 -0400

    Do not change ownership of /sys/fs/selinux/load to system UID.
    
    Policy reload is handled by setting the selinux.reload_policy property
    and letting the init process perform the actual loading of policy into
    the kernel.  Thus, there should be no need for the system UID to directly
    write to /sys/fs/selinux/load.
    
    Change-Id: I240c5bb2deaee757a2e1e396e14dea9e5d9286f5
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 5d4be690935ea7970a53837914f31de0a4f0690d
Merge: 02e20daeb 0e7bd81c9
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Sep 18 12:53:11 2013 -0700

    am 0e7bd81c: am 4f18183b: Merge "Initialize /dev/urandom earlier in boot." into klp-dev
    
    * commit '0e7bd81c938611cfa4ebf44870668300a5bba875':
      Initialize /dev/urandom earlier in boot.

commit 0e7bd81c938611cfa4ebf44870668300a5bba875
Merge: 3929efb9d 4f18183bd
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Sep 18 12:50:32 2013 -0700

    am 4f18183b: Merge "Initialize /dev/urandom earlier in boot." into klp-dev
    
    * commit '4f18183bd6d3d2ed5d698c176ecc239211bdb82e':
      Initialize /dev/urandom earlier in boot.

commit b410eb19130cf1eca158a672bba8f515e7627f11
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Sep 17 16:18:23 2013 -0700

    Initialize /dev/urandom earlier in boot.
    
    It's a security best practice to carry entropy across reboots.
    (see "man 4 random"). Currently, entropy saving and mixing occur
    in the system_server, via the EntropyMixer code. Unfortunately, the
    EntropyMixer code runs fairly late in the boot process, which means
    early boot doesn't have high quality entropy. This has caused security
    problems in the past.
    
    Load entropy data as soon as we can in the early boot process, so that
    we can get /dev/random / /dev/urandom into a "random" state earlier.
    
    Bug: 9983133
    Change-Id: Id4a6f39e9060f30fe7497bd8f8085a9bec851e80

commit 59e51e792a13e017d0f1b85a02fcc56815ea83d6
Author: Todd Poynor <toddpoynor@google.com>
Date:   Tue Sep 10 19:33:34 2013 -0700

    init.rc: no longer start healthd in charger mode
    
    Being moved to healthd/charger mode in board-specific init.rc.
    
    Change-Id: Ie9fc2e5abc1737fbffec8fb071c73f5fd96e4d17

commit 8d0a92ddc568c4fb065d8e9ec098f1ef4ff9e6ac
Merge: 47f284af4 342077e78
Author: Rom Lemarchand <romlem@google.com>
Date:   Tue Sep 10 17:54:57 2013 -0700

    am 342077e7: am 67b00d8b: init.rc: change mem cgroups permissions
    
    * commit '342077e78da9411c252232313bc40fb4ce5f6137':
      init.rc: change mem cgroups permissions

commit 342077e78da9411c252232313bc40fb4ce5f6137
Merge: ee549d256 67b00d8b2
Author: Rom Lemarchand <romlem@google.com>
Date:   Tue Sep 10 17:51:44 2013 -0700

    am 67b00d8b: init.rc: change mem cgroups permissions
    
    * commit '67b00d8b2d96e8133c249bcbc0fb63c49e10e022':
      init.rc: change mem cgroups permissions

commit 67b00d8b2d96e8133c249bcbc0fb63c49e10e022
Author: Rom Lemarchand <romlem@google.com>
Date:   Tue Sep 10 17:39:30 2013 -0700

    init.rc: change mem cgroups permissions
    
    Changing mem cgroups permissions to only be accessible by root and system.
    
    Bug: 10210529
    Bug: 10210900
    Change-Id: Ib4fff6f49b33013b3629d40ae98a5e2464571b2d

commit aacded70196acf958ddd26149dec9709571f1f56
Author: Todd Poynor <toddpoynor@google.com>
Date:   Wed Jul 10 15:19:44 2013 -0700

    init.rc: start lmkd
    
    Change-Id: Ibebab31e1f41a210821834a1d65f196b39bb6601

commit 6552f6885fc2a94501ca064bffc4c18ad40caad8
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Aug 26 10:45:05 2013 -0400

    Trigger a policy reload from post-fs-data.
    
    Once userdata is available and decrypted, trigger a policy reload to pick
    up any policy update files stored under /data/security.
    
    Change-Id: Ic2b3121c3395429b108c40d1d7f5a3124a5896c5
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit a34f1391bd9c368aceecb3f8dec158b2cb8b2dd4
Merge: 51cf3502f 30caffc02
Author: Colin Cross <ccross@android.com>
Date:   Fri Aug 23 14:42:21 2013 -0700

    am 30caffc0: resolved conflicts for merge of a1af5cf6 to klp-dev-plus-aosp
    
    * commit '30caffc025aff450ebb354ee693174cc1732732b':
      Handle policy reloads within ueventd rather than restarting it.

commit 30caffc025aff450ebb354ee693174cc1732732b
Merge: 8ca2bf084 a1af5cf6d
Author: Colin Cross <ccross@android.com>
Date:   Fri Aug 23 14:39:39 2013 -0700

    resolved conflicts for merge of a1af5cf6 to klp-dev-plus-aosp
    
    Change-Id: I08e9898940f7cdd466469b76760807cc5d5c67e4

commit a1af5cf6d1c008dbde2e40121940d65faa0816bf
Merge: 3042c265b d8d99c45b
Author: Colin Cross <ccross@android.com>
Date:   Fri Aug 23 14:33:46 2013 -0700

    am d8d99c45: Merge "Handle policy reloads within ueventd rather than restarting it."
    
    * commit 'd8d99c45b704399d50ae0a5e4df938d825c70cfa':
      Handle policy reloads within ueventd rather than restarting it.

commit 46a24db563f46736f6e02c4d80656ab51d94ff77
Author: Jeff Brown <jeffbrown@google.com>
Date:   Thu Aug 22 18:38:35 2013 -0700

    Remove input flinger stubs.  (DO NOT MERGE)
    
    Bug: 10446930
    Change-Id: I88b926380dbe1e866c0b87ec95b3489d87c5907b

commit 13f4c9fb279f1b34a3b47a6eac80b8a09d2d3a79
Author: Todd Poynor <toddpoynor@google.com>
Date:   Wed Jun 19 15:09:35 2013 -0700

    healthd: normal and charger mode startup
    
    Command line flag -n tells healthd not to use (or wait for) servicemanager
    in charger mode.
    
    Change-Id: I255f9597dff6fc904f5ed20fd02f52c0531d14f8

commit 5ba57f9a951728593aed559ece93ba821c33e45c
Merge: 6bac41f1b 57fdb5cfd
Author: Colin Cross <ccross@android.com>
Date:   Fri Jul 26 23:07:00 2013 +0000

    Merge "add property to adjust extra_free_kbytes kernel vm tunable"

commit e2eb69db6d818b41f5c0f2090cc643f7cff31734
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Tue Apr 16 09:30:30 2013 -0400

    Handle policy reloads within ueventd rather than restarting it.
    
    Restarting ueventd upon policy reloads has reportedly created
    stability problems for some users and could cause events to be lost.
    Stop restarting ueventd and instead handle policy reloads within ueventd.
    
    Also stops restarting installd upon policy reloads.
    
    Change-Id: Ic7f310d69a7c420e48fbc974000cf4a5b9ab4a3b
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 57fdb5cfd2b20f47299a12c2050ff8bb2707c788
Author: Colin Cross <ccross@android.com>
Date:   Thu Jul 25 10:34:30 2013 -0700

    add property to adjust extra_free_kbytes kernel vm tunable
    
    ActivityManager can't directly write to extra_free_kbytes because
    /proc/sys rejects all chown and chmod syscalls.  Proxy the writes
    through init by using the sys.sysctl.extra_free_kbytes property.
    
    Bug: 10024467
    Change-Id: I441e00478421254355fcafb252bc878166483d4c

commit 5748ee972de22e3a53bd3ef7d998ed15ea726a69
Author: Ying Wang <wangying@google.com>
Date:   Tue Jul 23 18:03:37 2013 -0700

    Generate init.environ.rc by populating BOOTCLASSPATH
    
    - BOOTCLASSPATH now is derived from PRODUCT_BOOT_JARS, which is a product
      configuration variable set up by the core build system.
    - Moved files from the legacy ALL_PREBUILT to PRODUCT_COPY_FILES in
      build/target/product/embedded.mk.
    
    Bug: 9990214
    Change-Id: I98bac36c1ca8c779dda572a0a5e0a22b7e4c4a7a

commit f498ec8fafcce6fe30ba3a80bbdbce6577b6b921
Merge: 57fc1ceeb dafa66afd
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Fri Jul 19 16:02:06 2013 -0700

    am dafa66af: am 2aa33a3d: Add writable data space for radio.
    
    * commit 'dafa66afdd3729e2c65ccb8dced8ca3e137db437':
      Add writable data space for radio.

commit dafa66afdd3729e2c65ccb8dced8ca3e137db437
Merge: a570312a5 2aa33a3db
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Fri Jul 19 13:42:54 2013 -0700

    am 2aa33a3d: Add writable data space for radio.
    
    * commit '2aa33a3dbd1147558098d9a2948450d363ffe468':
      Add writable data space for radio.

commit 57fc1ceebc6a8c84fa6e9cbf268b5ffca3052c2d
Author: Jeff Brown <jeffbrown@google.com>
Date:   Wed Jul 17 20:30:12 2013 -0700

    Split framework jar.
    
    Change-Id: I590de05f23669cf625030b479c786423f21c6159

commit 2aa33a3dbd1147558098d9a2948450d363ffe468
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Tue Jul 16 09:46:17 2013 -0700

    Add writable data space for radio.
    
    Storing carrier provisioning urls updates in /data/misc/radio.
    bug:9623159
    
    Change-Id: I8d62d4638229733dea0f11f1729c4d22ae2295d1
    I36697ed341353b7a3dbec5afe20241102e76f6f1

commit 3884a9b252c1852e88a2ad75c22b042d25a633f4
Author: Jeff Brown <jeffbrown@google.com>
Date:   Fri Jul 12 16:52:03 2013 -0700

    init.rc: Add input flinger.
    
    Change-Id: Ibcb1116bdcd9189272db620910b9958c8ffb4552

commit 4a291b339e1ab682609485aef6fbb46b66b0de90
Merge: 56adf9926 435a52ef0
Author: Rom Lemarchand <romlem@google.com>
Date:   Mon Jul 15 21:11:40 2013 +0000

    Merge "init.rc: configure memory cgroups"

commit 56adf992676e39175f227ac1a542d841bb6c0c24
Merge: e1dbdd697 9a4913d42
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Jul 15 13:28:44 2013 -0700

    am 9a4913d4: init.rc: remove "on fs" section
    
    * commit '9a4913d422f4c18033333afe8e2e1d699b112d44':
      init.rc: remove "on fs" section

commit 435a52ef07a5c97bdd717f20cb3115a585eb6d3c
Author: Rom Lemarchand <romlem@google.com>
Date:   Wed Jul 10 13:00:42 2013 -0700

    init.rc: configure memory cgroups
    
    Create the memory cgroups folders and configure them
    
    Change-Id: I06c4bb486b204f7e98b0bc6757deec8bd7f6349e

commit 9a4913d422f4c18033333afe8e2e1d699b112d44
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jul 12 13:48:50 2013 -0700

    init.rc: remove "on fs" section
    
    This was only ever used by the emulator. Now the emulator
    uses an fstab file.
    
    Change-Id: I1a071e567e1f1a379f9c8079cc2dc17660d8455f

commit e1dbdd697894f84e2cb8882160f0e4104f739064
Merge: 81274e9e6 7d6ddc7d3
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jul 12 11:22:00 2013 -0700

    am 7d6ddc7d: am 2713be91: am fb1c9cf6: Merge "use ext4 instead of yaffs"
    
    * commit '7d6ddc7d395e909d841bb7eadfc12a167076aecf':
      use ext4 instead of yaffs

commit 2713be91a84078e8b0b9b755ce17881b750e85a7
Merge: a9396549b fb1c9cf6f
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jul 12 11:18:26 2013 -0700

    am fb1c9cf6: Merge "use ext4 instead of yaffs"
    
    * commit 'fb1c9cf6fa4efafb3e0c6b0bc93c7f087d926a48':
      use ext4 instead of yaffs

commit f4c1512db8f0d2fd19d80487d96db3af7ceaacb5
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Jul 9 18:06:11 2013 -0700

    use ext4 instead of yaffs
    
    This is needed to allow the emulator to use ext4 images.
    
    Bug: https://code.google.com/p/android/issues/detail?id=38561
    Change-Id: I02fde6382ad67cf7f4f3b695396841f70bb9301d

commit 317ec9246b28c8be373d2915be5fbfd85b2854e2
Author: Torne (Richard Coles) <torne@google.com>
Date:   Tue Jun 4 16:31:15 2013 +0100

    Add webviewchromium to BOOTCLASSPATH.
    
    Add /system/framework/webviewchromium.jar to BOOTCLASSPATH. This jar
    contains the implementation classes for the new WebView. It has been
    processed with jarjar to ensure that it doesn't define any classes
    outside of com.android.
    
    Change-Id: If65913638df0088f4dd7d62a087750b90038a7fb

commit 71952461310cff9f35a4852415c608d14c92236a
Merge: a022ce7c8 5f1a938e9
Author: Colin Cross <ccross@android.com>
Date:   Mon May 20 18:26:11 2013 -0700

    am 5f1a938e: am 3d8e8c14: am 9246f8d6: Merge "init.rc: remove duplicated led-related nodes"
    
    * commit '5f1a938e9c65829c3afebb4d92c8e93caecc3e11':
      init.rc: remove duplicated led-related nodes

commit 5f1a938e9c65829c3afebb4d92c8e93caecc3e11
Merge: 8f6adcfcc 3d8e8c147
Author: Colin Cross <ccross@android.com>
Date:   Mon May 20 18:24:21 2013 -0700

    am 3d8e8c14: am 9246f8d6: Merge "init.rc: remove duplicated led-related nodes"
    
    * commit '3d8e8c147b41dbc6a5e4edf6da1610a83623b5b2':
      init.rc: remove duplicated led-related nodes

commit 3d8e8c147b41dbc6a5e4edf6da1610a83623b5b2
Merge: 19ec15b24 9246f8d6d
Author: Colin Cross <ccross@android.com>
Date:   Mon May 20 18:16:45 2013 -0700

    am 9246f8d6: Merge "init.rc: remove duplicated led-related nodes"
    
    * commit '9246f8d6def40a50933a980fac773a909f2138d7':
      init.rc: remove duplicated led-related nodes

commit 1e47a7466868ff90f6afa2d20d1b209b7b8fcfae
Merge: acef650db 253e91b4f
Author: gcondra@google.com <gcondra@google.com>
Date:   Mon May 20 16:35:35 2013 -0700

    am 253e91b4: am 477e35d6: Revert "Add persistent property for SELinux enforcment status."
    
    * commit '253e91b4ffb631b188fdac0c1624786103471f05':
      Revert "Add persistent property for SELinux enforcment status."

commit acef650dbc11355f9792923b69d8277a4ce89fab
Merge: 104c33992 43329bc1c
Author: gcondra@google.com <gcondra@google.com>
Date:   Mon May 20 16:35:34 2013 -0700

    am 43329bc1: am 8a387870: Revert "Reload policy after setting up the data partition."
    
    * commit '43329bc1c99c0f5f3670a8aaab39e54df34819a1':
      Revert "Reload policy after setting up the data partition."

commit 9a8cb3abf8985586172d8f891933b04ff419f81c
Merge: a9228942f b9866649e
Author: gcondra@google.com <gcondra@google.com>
Date:   Mon May 20 16:35:33 2013 -0700

    am b9866649: am 52351300: Revert "Add a version check for SELinux policy on device."
    
    * commit 'b9866649e24d7b6eedcaf2e03ffc605a3417537d':
      Revert "Add a version check for SELinux policy on device."

commit 253e91b4ffb631b188fdac0c1624786103471f05
Merge: 43329bc1c 477e35d6d
Author: gcondra@google.com <gcondra@google.com>
Date:   Mon May 20 15:52:28 2013 -0700

    am 477e35d6: Revert "Add persistent property for SELinux enforcment status."
    
    * commit '477e35d6d56c7fe9b2305becdf3ed4f590ddfbd6':
      Revert "Add persistent property for SELinux enforcment status."

commit 43329bc1c99c0f5f3670a8aaab39e54df34819a1
Merge: f5410f2bd 8a3878700
Author: gcondra@google.com <gcondra@google.com>
Date:   Mon May 20 15:52:27 2013 -0700

    am 8a387870: Revert "Reload policy after setting up the data partition."
    
    * commit '8a3878700eb9cd8ecf495cd01f15face5c3879c8':
      Revert "Reload policy after setting up the data partition."

commit b9866649e24d7b6eedcaf2e03ffc605a3417537d
Merge: 19ec15b24 52351300d
Author: gcondra@google.com <gcondra@google.com>
Date:   Mon May 20 15:52:26 2013 -0700

    am 52351300: Revert "Add a version check for SELinux policy on device."
    
    * commit '52351300d156826bf22c493828571f45a1cea16a':
      Revert "Add a version check for SELinux policy on device."

commit a8d392da915b46a59dc5eab82a2b6cf17a9b3a86
Author: Sungmin Choi <sungmin.choi@lge.com>
Date:   Sun May 19 21:56:36 2013 -0700

    init.rc: remove duplicated led-related nodes
    
    Change-Id: Ibee7ef9137594fc4c30d3ab6ee7bdf3515836c62

commit 477e35d6d56c7fe9b2305becdf3ed4f590ddfbd6
Author: repo sync <gcondra@google.com>
Date:   Fri May 17 12:48:18 2013 -0700

    Revert "Add persistent property for SELinux enforcment status."
    
    This reverts commit b89bdfde422eff751b3f939f10ab57e22af83eaa.

commit 8a3878700eb9cd8ecf495cd01f15face5c3879c8
Author: repo sync <gcondra@google.com>
Date:   Fri May 17 12:47:04 2013 -0700

    Revert "Reload policy after setting up the data partition."
    
    This reverts commit fee250d27a9c03af1ba439047b976d89563b1887.

commit 52351300d156826bf22c493828571f45a1cea16a
Author: repo sync <gcondra@google.com>
Date:   Fri May 17 12:46:00 2013 -0700

    Revert "Add a version check for SELinux policy on device."
    
    This reverts commit 921be8b6568df0057c4eacbac2e1022b71e09620.

commit e45710f19f3843dd0ec02d1a5c7f679f34a33846
Merge: 9186d8502 5a98566d5
Author: gcondra@google.com <gcondra@google.com>
Date:   Tue May 14 23:45:59 2013 -0700

    am 5a98566d: am 921be8b6: Add a version check for SELinux policy on device.
    
    * commit '5a98566d589408c78e35f4476f478a2fa1c13e78':
      Add a version check for SELinux policy on device.

commit 5a98566d589408c78e35f4476f478a2fa1c13e78
Merge: a817ff9cf 921be8b65
Author: gcondra@google.com <gcondra@google.com>
Date:   Tue May 14 23:43:56 2013 -0700

    am 921be8b6: Add a version check for SELinux policy on device.
    
    * commit '921be8b6568df0057c4eacbac2e1022b71e09620':
      Add a version check for SELinux policy on device.

commit 921be8b6568df0057c4eacbac2e1022b71e09620
Author: repo sync <gcondra@google.com>
Date:   Thu May 9 23:04:07 2013 -0700

    Add a version check for SELinux policy on device.
    
    This helps to ensure that when a new system image is installed,
    old userdata policy isn't applied over the top of it.
    
    Bug: 8841348
    Change-Id: I135af32250aa62979763e775842ce0af3c8b6f9f

commit 8577e8649062953a59e0ac652b5ac16c96c1c1f4
Author: Mathias Agopian <mathias@google.com>
Date:   Thu May 9 14:50:42 2013 -0700

    surfaceflinger is now always running in its own process
    
    Change-Id: I1ae63347a8b6d406306ed894665674dd726b7d51

commit 69e9b17fa1a7ac4dea56963008096a4961245277
Merge: 72b1ffd37 cb4b9605c
Author: Colin Cross <ccross@android.com>
Date:   Tue Apr 30 21:13:47 2013 -0700

    am cb4b9605: am 8794b2ee: Merge "Fix perms on /data/security"
    
    * commit 'cb4b9605cb923d071a546b444d10cbe21367d878':
      Fix perms on /data/security

commit cb4b9605cb923d071a546b444d10cbe21367d878
Merge: 803eda6a2 8794b2eeb
Author: Colin Cross <ccross@android.com>
Date:   Tue Apr 30 21:12:29 2013 -0700

    am 8794b2ee: Merge "Fix perms on /data/security"
    
    * commit '8794b2eeb2bbd717ca18b8bef5d853f99334aabc':
      Fix perms on /data/security

commit 8794b2eeb2bbd717ca18b8bef5d853f99334aabc
Merge: f69cc564f d43bab7b9
Author: Colin Cross <ccross@android.com>
Date:   Wed May 1 03:49:47 2013 +0000

    Merge "Fix perms on /data/security"

commit efbe7fc6cc871e95760b9b01d674a09f7e80eb6a
Merge: 152a43215 63577d928
Author: gcondra@google.com <gcondra@google.com>
Date:   Tue Apr 30 17:18:05 2013 -0700

    am 63577d92: am fee250d2: Reload policy after setting up the data partition.
    
    * commit '63577d9280e7919bfb7221030d211b833e66bb1e':
      Reload policy after setting up the data partition.

commit 63577d9280e7919bfb7221030d211b833e66bb1e
Merge: d14586e35 fee250d27
Author: gcondra@google.com <gcondra@google.com>
Date:   Tue Apr 30 17:04:53 2013 -0700

    am fee250d2: Reload policy after setting up the data partition.
    
    * commit 'fee250d27a9c03af1ba439047b976d89563b1887':
      Reload policy after setting up the data partition.

commit fee250d27a9c03af1ba439047b976d89563b1887
Author: repo sync <gcondra@google.com>
Date:   Mon Apr 29 22:21:06 2013 -0700

    Reload policy after setting up the data partition.
    
    This forces a policy reload + fixcon to deal with dynamically
    delivered policy changing labels on device nodes.
    
    It's implemented as a new keyword in init.
    
    Bug: 8702843
    Change-Id: I803cf1ecf6ff8318ce25dcc5cda4f292adc9738c

commit 152a43215143f62ee4bedda96ce73604530a6f1d
Merge: ada3291c8 d14586e35
Author: Kenny Root <kroot@google.com>
Date:   Tue Apr 30 09:01:42 2013 -0700

    am d14586e3: resolved conflicts for merge of a69af5af to jb-mr2-dev-plus-aosp
    
    * commit 'd14586e35a3df39cc3aa6aff6a54463270a5e1a7':
      Track change to JSSE provider

commit d14586e35a3df39cc3aa6aff6a54463270a5e1a7
Merge: 14ad78618 a69af5af3
Author: Kenny Root <kroot@google.com>
Date:   Mon Apr 29 23:20:37 2013 -0700

    resolved conflicts for merge of a69af5af to jb-mr2-dev-plus-aosp
    
    Change-Id: If41560f0fef3103cad2172061a7988ceb5556377

commit ca0404b83e9e5712531e040675212a4bd0d7f6a8
Author: Kenny Root <kroot@google.com>
Date:   Wed Apr 24 07:46:50 2013 -0700

    Track change to JSSE provider
    
    Change-Id: Iff9103fff3591983f2b172f83fd2a6e924986aa7

commit ada3291c8d13a9c3896102932abefed155a5b3fe
Merge: 15e84ad04 14ad78618
Author: gcondra@google.com <gcondra@google.com>
Date:   Fri Apr 26 13:39:40 2013 -0700

    am 14ad7861: am 538b5d4e: Merge "Add persistent property for SELinux enforcment status." into jb-mr2-dev
    
    * commit '14ad786183455ad9c8298e24946d4da0f24458d7':
      Add persistent property for SELinux enforcment status.

commit 14ad786183455ad9c8298e24946d4da0f24458d7
Merge: 9e9ed1b40 538b5d4e8
Author: gcondra@google.com <gcondra@google.com>
Date:   Fri Apr 26 13:37:52 2013 -0700

    am 538b5d4e: Merge "Add persistent property for SELinux enforcment status." into jb-mr2-dev
    
    * commit '538b5d4e8e4c480b2120aa957fe3e11a2836a1b3':
      Add persistent property for SELinux enforcment status.

commit 538b5d4e8e4c480b2120aa957fe3e11a2836a1b3
Merge: 131ee07b7 b89bdfde4
Author: repo sync <gcondra@google.com>
Date:   Fri Apr 26 20:31:21 2013 +0000

    Merge "Add persistent property for SELinux enforcment status." into jb-mr2-dev

commit b89bdfde422eff751b3f939f10ab57e22af83eaa
Author: repo sync <gcondra@google.com>
Date:   Wed Apr 24 11:18:29 2013 -0700

    Add persistent property for SELinux enforcment status.
    
    Also adds triggers for going between enforcing and
    permissive status.
    
    Bug: 8702843
    Change-Id: I841d80999b96acf6b6fd0a5408fb074952d6ae72

commit 7629bf19a139cbc204e8ae78cb82c2faeba6d2f0
Merge: 49edc0acf 9e9ed1b40
Author: Jeff Tinker <jtinker@google.com>
Date:   Wed Apr 24 21:56:49 2013 -0700

    am 9e9ed1b4: am 131ee07b: Merge "Add a new group for MediaDrm engine plugins" into jb-mr2-dev
    
    * commit '9e9ed1b40010745e709157a6977ba6d053d46c49':
      Add a new group for MediaDrm engine plugins

commit 9e9ed1b40010745e709157a6977ba6d053d46c49
Merge: 4c1840e65 131ee07b7
Author: Jeff Tinker <jtinker@google.com>
Date:   Wed Apr 24 21:55:23 2013 -0700

    am 131ee07b: Merge "Add a new group for MediaDrm engine plugins" into jb-mr2-dev
    
    * commit '131ee07b77e0250c16cebe2b0e226c5bff8e9587':
      Add a new group for MediaDrm engine plugins

commit 08d64308b93594c587036cffcd8f6780eaf2c417
Author: Jeff Tinker <jtinker@google.com>
Date:   Tue Apr 23 19:54:17 2013 -0700

    Add a new group for MediaDrm engine plugins
    
    bug: 8702754
    Change-Id: I3b7988b64b1dcf4685624e4c1af938e132b82696

commit ca8e66a8b0f843812014a28d49208f9f6f64ecbc
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Apr 18 12:20:02 2013 -0700

    Make init handle reboots
    
    Move the responsibility for rebooting the system from the
    reboot command to init. Init is in a better position to take
    actions to bring the system down cleanly, including making sure
    filesystems are mounted read-only.
    
    The only UIDs which can perform an init triggered reboot are
    root, system, and shell.
    
    Modify the reboot command so that it calls into init to perform
    the reboot. The reboot command no longer requires CAP_SYS_BOOT.
    
    Remove the -n reboot option and code which supports it.  Anyone needing
    to do an unclean shutdown can just do a 'echo c > /proc/sysrq-trigger'.
    
    Modify adb so that it calls into init to perform a shutdown.
    
    Bug: 8646621
    Change-Id: I84c0513acb549720cb0e8c9fcbda0050f5c396f5

commit d43bab7b98d329ead0b5304be79d430b5a92ad10
Author: William Roberts <w.roberts@sta.samsung.com>
Date:   Mon Apr 15 13:56:22 2013 -0700

    Fix perms on /data/security
    
    installd and zygote need to be able
    to search the directory to access
    the policy files.
    
    Change-Id: I0679fd2084d2664dfb5a594f493317eff058415d

commit 76c674451c831c1e9c3e3ee134ea8af26ae19ac1
Merge: 977e1f263 d3f0e0ae3
Author: Brian Carlstrom <bdc@google.com>
Date:   Wed Apr 3 21:05:34 2013 +0000

    Merge "resolved conflicts for merge of 02e8d730 to jb-mr2-dev-plus-aosp" into jb-mr2-dev-plus-aosp

commit d3f0e0ae379f4420b01bb9de932a764c035ff2a6
Merge: 145d61e0c 02e8d7307
Author: Brian Carlstrom <bdc@google.com>
Date:   Wed Apr 3 14:03:13 2013 -0700

    resolved conflicts for merge of 02e8d730 to jb-mr2-dev-plus-aosp
    
    Change-Id: I63d6a2f975a6c0df5c238a2f7592f357441eb767

commit c2594f36e789bbd49cbeeb9421a7b6a16cd30ba4
Author: Geremy Condra <gcondra@google.com>
Date:   Sat Mar 30 17:27:43 2013 -0700

    Give system ownership of selinux load and enforce files.
    
    This is necessary to enable remote updates.
    
    Change-Id: I05fb979c0360eca4cc6e4add48bb42f712a1ba17

commit 8637e8186ac572df92a34253f93bf405bf634b03
Author: jwilson <jwilson@squareup.com>
Date:   Sat Mar 30 09:04:24 2013 -0400

    Add OkHttp to the boot classpath.
    
    Change-Id: I185b803b5b804ff8680ef928ce5163727adbf0bd

commit 6b5de1cda2e5c4946aa08a11a38ad0a7eee115ce
Author: Todd Poynor <toddpoynor@google.com>
Date:   Mon Mar 25 13:17:13 2013 -0700

    init.rc: Set owner/perm for interactive governor io_is_busy
    
    Change-Id: I7537d56a23ca787daf92a9d91778056f987097bd

commit fb39c0d19860fe48bc598d5d180a8cce9f59e33b
Merge: d0f3e8588 4d71493e7
Author: Geremy Condra <gcondra@google.com>
Date:   Fri Mar 22 20:54:52 2013 -0700

    am 4d71493e: am e849970c: Merge "Fix mode on /data/security."
    
    * commit '4d71493e74ed1ea39e554146351cc39e47cb5d02':
      Fix mode on /data/security.

commit bfd71b489b283fe54669dc5d1ccdc97b453d2fb4
Author: William Roberts <w.roberts@sta.samsung.com>
Date:   Wed Jan 23 14:05:04 2013 -0800

    Create a new location for /data policy files
    
    Adding a new location for policy files under
    /data, the new location is /data/security. The
    new location is used before attempting to use
    any other location.
    This requires a new directory to be created by
    the init script and an update to the location of
    the property_contexts file for property service.
    
    Change-Id: I955a722ac3e51fa6c1b97201b8bdef3f601cf09d

commit c0317a75793ecbcd4a8e19f477458eb677024869
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Jan 28 13:29:38 2013 -0500

    Fix mode on /data/security.
    
    Change-Id: Id97d06a1c360c7871361db147f76b8a2eaceca42
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit 46e1bd89b457713bf91d2dc751795822cc202658
Author: William Roberts <w.roberts@sta.samsung.com>
Date:   Wed Jan 23 14:05:04 2013 -0800

    Create a new location for /data policy files
    
    Adding a new location for policy files under
    /data, the new location is /data/security. The
    new location is used before attempting to use
    any other location.
    This requires a new directory to be created by
    the init script and an update to the location of
    the property_contexts file for property service.
    
    Change-Id: I955a722ac3e51fa6c1b97201b8bdef3f601cf09d

commit fb4f7acefb31a51679cec194562c7aeb3922f728
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Mar 14 14:27:38 2013 -0700

    Add symlink to bugreport storage location.
    
    Change-Id: I16f024c24767cfa1f5800d568d39fb098a408127

commit 65e203070c0cb25f5401502d60e924ff2b5bdae5
Merge: 244814698 b0f908a95
Author: Glenn Kasten <gkasten@google.com>
Date:   Sat Feb 23 01:04:33 2013 +0000

    Merge "Add directory for mediaserver"

commit b0f908a95714fbbfd63ee498e5773c44712b30e2
Author: Glenn Kasten <gkasten@google.com>
Date:   Fri Feb 22 14:54:45 2013 -0800

    Add directory for mediaserver
    
    Bug: 8223560
    Change-Id: Iccc6d439a848445cac0f5b30d1d663aed3f5344e

commit fe8425b5c5156c60691927a982672abd7927b777
Merge: 320abd388 c5ce4108f
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Feb 22 09:44:34 2013 -0800

    am c5ce4108: am 1b64957a: Merge "init.rc: allow IPPROTO_ICMP support"
    
    * commit 'c5ce4108facc5a1b94fcf9469a189b2cbdfd5e76':
      init.rc: allow IPPROTO_ICMP support

commit be341cc348257a07c68bcbfdc526835d49283329
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Feb 21 18:36:43 2013 -0800

    init.rc: allow IPPROTO_ICMP support
    
    Allow userspace programs to create IPPROTO_ICMP sockets.
    
    This socket type allows an unprivileged program to safely
    send ICMP_ECHO messages and receive the corresponding
    ICMP_ECHOREPLY messages, without relying on raw sockets or
    setuid programs.
    
    Please see http://lwn.net/Articles/443051/ for details.
    
    In particular, this allows us to use a version of ping
    which doesn't have any capabilities
    (https://android-review.googlesource.com/52072).
    In addition, this allows us to safely implement an IPv4 ICMP
    based version of InetAddress.isReachable()
    (https://code.google.com/p/android/issues/detail?id=20106)
    
    Change-Id: I876718151efa8219c4f34f573e35e21256fe2316

commit c0d399df697850712432cb6092d63669ffa0fc23
Author: Wink Saville <wink@google.com>
Date:   Mon Jan 28 15:28:20 2013 -0800

    Delete frameworks/base/voip use voip-common from frameworks/opt/net/voip
    
    Add voip-common to BOOTCLASSPATH
    
    Change-Id: Ieaba759a0f69b45c4b8839cbed1fe757cdf190c5

commit a44404154730e54615d44c389b11cec9dd86c001
Merge: c2b19de2e ba900f2e7
Author: JP Abgrall <jpa@google.com>
Date:   Fri Jan 4 18:12:56 2013 -0800

    am ba900f2e: am fb69c2e2: Merge "init.rc: setup qtaguid group ownership of ctrl and stat files"
    
    * commit 'ba900f2e708f0b654cdaa827804cbb21af4e4fb4':
      init.rc: setup qtaguid group ownership of ctrl and stat files

commit ba900f2e708f0b654cdaa827804cbb21af4e4fb4
Merge: 3f8d6cded fb69c2e25
Author: JP Abgrall <jpa@google.com>
Date:   Fri Jan 4 18:08:24 2013 -0800

    am fb69c2e2: Merge "init.rc: setup qtaguid group ownership of ctrl and stat files"
    
    * commit 'fb69c2e2577e056bb7a054343a9f6d781cedbf3d':
      init.rc: setup qtaguid group ownership of ctrl and stat files

commit 3e54aabc63535572242477fadbf13ec42b06649e
Author: JP Abgrall <jpa@google.com>
Date:   Fri Jan 4 14:34:58 2013 -0800

    init.rc: setup qtaguid group ownership of ctrl and stat files
    
    This will help get rid of android_aid.h in the kernel.
    The group of the proc entries will be used in place of the default
    values picked up by the xt_qtaguid netfilter module
    (AID_NET_BW_STATS, AID_NET_BW_ACCT).
    This change has no effect until the matching kernel changes are submitted.
    
    Change-Id: I3c177e7b5caf9c59300eba6bd4a976634b333674

commit 2b5b3bb103f59d9d3bf25c0c1f8035db036917da
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu Dec 20 18:52:03 2012 -0800

    rootdir: init.rc: set perms for new interactive governor attrs
    
    /sys/devices/system/cpu/cpufreq/interactive/timer_slack
    /sys/devices/system/cpu/cpufreq/interactive/target_loads
    
    Change-Id: Ia5d5c3d615ad64bab3a1317e5de2ac9a6d61679e

commit 191af2f2c3effc5a60f1643dd6283ecc5a521603
Merge: 7ec62dbd9 367f1e4b0
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu Dec 20 15:42:59 2012 -0800

    am 367f1e4b: am 4f247d75: rootdir: init.rc: set perms for cpufreq governor boostpulse_duration
    
    * commit '367f1e4b0aaaf7f725e686b5b40845cbb5c07a42':
      rootdir: init.rc: set perms for cpufreq governor boostpulse_duration

commit 4f247d753a8865cd16292ff0b720b72c28049786
Author: Todd Poynor <toddpoynor@google.com>
Date:   Wed Dec 19 17:43:06 2012 -0800

    rootdir: init.rc: set perms for cpufreq governor boostpulse_duration
    
    Change-Id: I09b9a1ed548e4ffe1232f583e8ff5f026760f616

commit 92781808bab8f045752aa1824a57956ddd52fcbd
Author: Kenny Root <kroot@google.com>
Date:   Mon Nov 12 16:36:15 2012 -0800

    Switch keystore to binder
    
    Change-Id: I1607bc1f14af5115cefd6727be3815cdcce670a8

commit 066d3f9b3bd77df71542b132adda8eb25bc013c0
Merge: a40f5e662 3e5e9e9ee
Author: Elliott Hughes <enh@google.com>
Date:   Mon Oct 22 14:35:12 2012 -0700

    resolved conflicts for merge of 3e5e9e9e to jb-mr1-dev-plus-aosp
    
    Change-Id: I621d0e984a266478b4297a25afd164c1275e30f9

commit f820e85164a1863e4384f5e1ca8b6f46902bd74e
Author: Elliott Hughes <enh@google.com>
Date:   Fri Oct 19 18:10:05 2012 -0700

    Add a directory for tzdata updates.
    
    Bug: 7012465
    Change-Id: I7e2c9965a4bcad125ca4fb788b842bd114b5619c

commit c6f8bd396614d422d80ac9f24c91fa44a713894a
Merge: d282dfc4e ece565cca
Author: Dima Zavin <dima@android.com>
Date:   Mon Oct 8 11:30:35 2012 -0700

    Merge "rootdir: init.rc: add drmrpc to surfaceflinger supplemental groups" into jb-mr1-dev

commit ece565cca2a4babe897f5fd68ab14a7af5071b30
Author: Dima Zavin <dima@android.com>
Date:   Thu Oct 4 17:02:26 2012 -0700

    rootdir: init.rc: add drmrpc to surfaceflinger supplemental groups
    
    This is necessary for some HWC hals to be able to communicate with
    secure side to grant protected access to hardware owned by the
    hwc. This is necessary on some architectures to grant access to
    secure buffers to overlay/csc hardware
    
    Change-Id: I4e4becba5b4a80310ce8932edea5d0d046fa9b00
    Signed-off-by: Dima Zavin <dima@android.com>

commit 971153aa4a65c4fbc8d916c619a17d3912b2cb02
Author: Matthew Xie <mattx@google.com>
Date:   Thu Oct 4 12:35:27 2012 -0700

    Create bluetooth stack aid for sharing gid between all bluetooth processes
    
    bug 6925422
    
    Change-Id: I8d371f8307dd6bea3909a56643819413ea829a98

commit d6d478058fc201bfc70f353019477e17c71a29d4
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Wed Sep 26 16:04:27 2012 -0700

    Add writable data space for radio.
    
    Storing Premium SMS regex's in /data/misc/sms.
    bug:7221402
    
    Change-Id: Ica8ba7be8aa5321f3e6ed820a0dddc01f77d2cfb

commit 9481266ea360e0a8f326fec1106ea445f2ef883c
Author: Dima Zavin <dima@android.com>
Date:   Tue Sep 25 14:22:02 2012 -0700

    init.rc: chmod slabinfo to 440 to capture slabinfo in BRs
    
    Bug: 7232205
    Change-Id: I0d785302818a37b722e79bf740644ede52c60148
    Signed-off-by: Dima Zavin <dima@android.com>

commit f1c50bf63857b9cdabcf930363c372defc6383a8
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu Sep 20 20:10:53 2012 -0700

    init: import init.trace.rc after h/w-specific rc
    
    Board-specific .rc file mounts debugfs, then fixup perms on tracing
    sysfs files for systrace.
    
    Change-Id: Ifbedb4ecdb543cd6c48df00b1a34415349951b6f

commit 5054417c1025b0f3f36f4b537e51ddd3eea981c8
Author: Kenny Root <kroot@google.com>
Date:   Sat Sep 8 22:39:25 2012 -0700

    Add /data/app-lib for native library sharing
    
    Change-Id: I7419676d987178fd2422c50d74f966e27af9f62e

commit 58d3980f314d08f86347ba83db85c2d4c6066599
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Thu Sep 6 14:15:46 2012 -0700

    Keep /mnt/secure private to default namespace.
    
    When vold mounts things in /mnt/secure/staging, it expects to MS_MOVE
    those mountpoints when vetting is finished.  However, the kernel
    doesn't allow MS_MOVE when the source is shared to child namespaces.
    
    To work around this, create a tmpfs at /mnt/secure and mark it as
    private (not shared).  Verified that vold can now successfully move
    from the staging area.
    
    Bug: 7094858
    Change-Id: I5e05b1005c63efa277935c9bbd18cbf3ffdd47a3

commit 35ea5e4f2365ad791824ee49d1c999be81b705c5
Author: Mike Lockwood <lockwood@google.com>
Date:   Tue Aug 28 10:25:13 2012 -0700

    import init.${ro.hardware}.rc last to allow overriding default USB configuration
    
    Change-Id: I2194466fb7cf7ff5313d146601155ebe6043fd42

commit f824ad7b35c3bf866d60662404be0d55fe753e3d
Merge: 2bf953a9b 582b11527
Author: Wink Saville <wink@google.com>
Date:   Thu Aug 23 14:11:35 2012 -0700

    am 582b1152: am baba9984: Merge "Define TCP buffer sizes for HSPAP, HSDPA, HSUPA and EVDO"
    
    * commit '582b11527cd6d968f163fbee73f92d82b679e330':
      Define TCP buffer sizes for HSPAP, HSDPA, HSUPA and EVDO

commit 42a1e6c9d827fc3d64ad3b0750b87de1f4c436e7
Merge: f70c6da41 bfcd810b7
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Wed Aug 22 18:17:23 2012 -0700

    Merge "Iteration on multi-user external storage." into jb-mr1-dev

commit 582b11527cd6d968f163fbee73f92d82b679e330
Merge: a6405e9da baba99840
Author: Wink Saville <wink@google.com>
Date:   Wed Aug 22 15:32:17 2012 -0700

    am baba9984: Merge "Define TCP buffer sizes for HSPAP, HSDPA, HSUPA and EVDO"
    
    * commit 'baba99840400f5b835d44b6d91e2190136277988':
      Define TCP buffer sizes for HSPAP, HSDPA, HSUPA and EVDO

commit baba99840400f5b835d44b6d91e2190136277988
Merge: db56bb4ae e8b76a36b
Author: Wink Saville <wink@google.com>
Date:   Wed Aug 22 15:00:00 2012 -0700

    Merge "Define TCP buffer sizes for HSPAP, HSDPA, HSUPA and EVDO"

commit bfcd810b792f7ffbb2ec1360c0c2662725fd0362
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Wed Aug 22 13:57:25 2012 -0700

    Iteration on multi-user external storage.
    
    Define /storage as top-level concept, so that we enforce permissions
    uniformly.  Moves external storage paths from headers to per-device
    environment variables.  Added missing mount flags, and we no longer
    have adb-specific external storage.
    
    Bug: 6925012
    Change-Id: Ic7ca953be2f552d3f0ec9e69f89fef751daa1b29

commit 61f1359486e578bc0fc12bc4f42c7cd65991fc5c
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Mon Aug 20 14:31:47 2012 -0700

    Remove sdcard groups from services.
    
    Even with the groups, services no longer have access.
    
    Change-Id: I2b4871b276ffd309c08c404b1211b33406dbebd5

commit 5dd0f86fbfed631b31c9055109889f1d9559a3ea
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Aug 17 16:01:16 2012 -0700

    Migrate sdcard0 to shell-accessible location.
    
    Also remove mount() from adb, since it can come online long before
    data partition is ready.  Set EXTERNAL_STORAGE environment variable
    to point to owner for backwards compatibility.
    
    Bug: 7005701
    Change-Id: I63444f6636624eb7ad89f053daa289663424639e

commit 885342a0f2c834a6b680284047c47c9d04b32565
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Tue Aug 14 21:00:22 2012 -0700

    Multi-user external storage support.
    
    Remount rootfs as recursively shared, so that mount changes are
    propagated into child namespaces.  Mount external storage for access
    from adb.
    
    Clean multi-user dependencies for use in Dalvik.  Also define
    external storage paths.
    
    Bug: 6925012
    Change-Id: I375de581a63f4f36667894c56a34a9dd45361e8f

commit 605103fb553a8b872aa8dd0aef76ae8b3bfe47fa
Merge: 98ebf1975 4dcd52ab1
Author: Kenny Root <kroot@google.com>
Date:   Mon Aug 13 10:21:35 2012 -0700

    resolved conflicts for merge of 4dcd52ab to jb-mr1-dev
    
    Change-Id: Ibd0c03a7883a2e31adab18543c016776b7b36866

commit 4dcd52ab11d25fe3d53aab52b6c233e692da4eae
Merge: 2ff609985 297f802f2
Author: Kenny Root <kroot@android.com>
Date:   Mon Aug 13 09:50:00 2012 -0700

    am 297f802f: Merge "Add support for reloading policy from /data/system."
    
    * commit '297f802f25d093274c1f5fb890ee8dfacfbf159e':
      Add support for reloading policy from /data/system.

commit ae6f3d7c05070f7e0e56fe0056c8923c6ee2f473
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Tue May 1 15:02:53 2012 -0400

    Add support for reloading policy from /data/system.
    
    To support runtime policy management, add support for reloading
    policy from /data/system.  This can be triggered by setting the
    selinux.loadpolicy property to 1, whether from init.rc after
    mounting /data or from the system_server (e.g. upon invocation of
    a new device admin API for provisioning policy). ueventd and
    installd are restarted upon policy reloads to pick up the new
    policy configurations relevant to their operation.
    
    Change-Id: I97479aecef8cec23b32f60e09cc778cc5520b691
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit b35e36e5a92ac984a57ec15b14dc6ad3b0ecf1c5
Author: Colin Cross <ccross@android.com>
Date:   Thu Aug 2 18:14:33 2012 -0700

    init.rc: make last_kmsg readable only by user system and group log
    
    chown /proc/last_kmsg to user system group log during init, and
    chmod it to readable only by user and group.
    
    Bug: 6925227
    Change-Id: I645b6a2d4fecc01a2bd4b7fa7ed6aae3ef638cb9

commit 35fc46d8e338181ee3caedc30f3627bad2ffe35e
Merge: 3cac204d3 018227f53
Author: Dima Zavin <dima@android.com>
Date:   Wed Aug 1 09:52:28 2012 -0700

    am 018227f5: am ce76e2d0: Merge "Modify init.rc and init.goldfish.rc for SE Android."
    
    * commit '018227f5394c3126f4a858596cb85dee1893b895':
      Modify init.rc and init.goldfish.rc for SE Android.

commit 018227f5394c3126f4a858596cb85dee1893b895
Merge: aeec25dab ce76e2d00
Author: Dima Zavin <dima@android.com>
Date:   Wed Aug 1 09:49:59 2012 -0700

    am ce76e2d0: Merge "Modify init.rc and init.goldfish.rc for SE Android."
    
    * commit 'ce76e2d00e63339083ea693db33de05cbba5600e':
      Modify init.rc and init.goldfish.rc for SE Android.

commit ce76e2d00e63339083ea693db33de05cbba5600e
Merge: 23ee469c4 1eee419e7
Author: Dima Zavin <dima@android.com>
Date:   Wed Aug 1 09:14:41 2012 -0700

    Merge "Modify init.rc and init.goldfish.rc for SE Android."

commit 0245e15bb78cf08b3225b31c77bda77d43995bd4
Author: Benoit Goby <benoit@android.com>
Date:   Wed May 9 17:27:53 2012 -0700

    rootdir: Create /data/misc/adb on boot
    
    Change-Id: I0f8d11391cdcfbaa50f87f637a2962c6663b2767

commit 0574d6b07711e90547d8166c222e09d80f702620
Author: Benoit Goby <benoit@android.com>
Date:   Tue Apr 24 15:07:12 2012 -0700

    init.rc: Add socket for adbd
    
    Change-Id: Ic97fd464440ff4a29fc9da7ad15949ac5215ade3

commit 1eee419e7a1c5789f81e1e3a19693403495e70f1
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Fri Jan 13 08:54:34 2012 -0500

    Modify init.rc and init.goldfish.rc for SE Android.
    
    Set the security context for the init process.
    Restore the security contexts of /cache and /data in case they were reset.
    Specify the security context for services launched from the rootfs since
    we cannot label their executables.
    If on the emulator, set a policy boolean and restore the context of
    /sys/qemu_trace to allow accesses not normally permitted on a device.
    
    Change-Id: I166ffc267e8e0543732e7118eb0fd4b031efac3b
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>

commit e8b76a36bacd11ab54332ba5a25d8593d9c3f57f
Author: Naveen Kalla <nkalla@codeaurora.org>
Date:   Thu Jul 26 00:26:13 2012 -0700

    Define TCP buffer sizes for HSPAP, HSDPA, HSUPA and EVDO
    
    Change-Id: I0fbd76aca69059917d363b2dcbfc843bbf4386f8

commit b3a679386d26677290a09fdf4e3406c57e835fd0
Author: Wink Saville <wink@google.com>
Date:   Wed Jun 13 13:06:33 2012 -0700

    Add telephony-common and mms-common to BOOTCLASSPATH - DO NOT MERGE
    
    Change-Id: Ib113b8147d20fee1ec69d68cf6a7a02d59ff4df6

commit 4c3ac516ff391d9fc93ec997ce254f83af722a1a
Author: Matthew Xie <mattx@google.com>
Date:   Sat Apr 7 22:03:30 2012 -0700

    remove dbus and bluetoothd, create bluedroid data dirs
    
    Change-Id: Ifacd570dbadc075e498a626935e035c76a0d83c4

commit 5acf1d6625e3e45ccdc29fd49222defc2788ada0
Merge: 14c14bfb7 873140368
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Jul 13 12:18:34 2012 -0700

    am 87314036: am 55b763ff: Grant sdcard_r to ril-daemon.
    
    * commit '873140368613af2d1c06e18ac2fd6fe24623b9bb':
      Grant sdcard_r to ril-daemon.

commit 873140368613af2d1c06e18ac2fd6fe24623b9bb
Merge: de016eef3 55b763ff7
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Jul 13 12:16:44 2012 -0700

    am 55b763ff: Grant sdcard_r to ril-daemon.
    
    * commit '55b763ff7b779d7ee91f245e0887332db8782afe':
      Grant sdcard_r to ril-daemon.

commit 55b763ff7b779d7ee91f245e0887332db8782afe
Author: Jeff Sharkey <jsharkey@android.com>
Date:   Fri Jul 13 11:21:14 2012 -0700

    Grant sdcard_r to ril-daemon.
    
    Bug: 6793799
    Change-Id: Ife23c98c30d7b08479d75798c7075005bf281119

commit 557ed7a487795b2b3ac441bbbbe619788c93b78f
Merge: 2d9a6281c de016eef3
Author: Wink Saville <wink@google.com>
Date:   Wed Jul 11 17:54:19 2012 -0700

    Merge commit 'de016eef' into mit
    
    * commit 'de016eef':
      Add telephony-common and mms-common to BOOTCLASSPATH

commit de016eef3366739d69d7908e4e6dbd54785632ab
Author: Wink Saville <wink@google.com>
Date:   Wed Jun 13 13:06:33 2012 -0700

    Add telephony-common and mms-common to BOOTCLASSPATH
    
    Change-Id: Ib113b8147d20fee1ec69d68cf6a7a02d59ff4df6

commit c06be8a15d8d89bcc8ac505b25b5e828e90a5be6
Merge: 60f3d65c8 1e96e16f8
Author: Jamie Gennis <jgennis@google.com>
Date:   Tue Jun 12 13:05:49 2012 -0700

    am 1e96e16f: am 0f3974c3: Merge "Enable tracing on user builds" into jb-dev
    
    * commit '1e96e16f81ce46adf5329b1db4662b53b927d4e2':
      Enable tracing on user builds

commit 0f3974c3d0ee2ffe5e0cb9a56658ba18d511f6ea
Merge: 9cec175c6 1279013de
Author: Jamie Gennis <jgennis@google.com>
Date:   Mon Jun 11 12:04:27 2012 -0700

    Merge "Enable tracing on user builds" into jb-dev

commit 1279013dee790c84758e5fc5bed33b5c9df2af9b
Author: Jamie Gennis <jgennis@google.com>
Date:   Wed Jun 6 18:12:48 2012 -0700

    Enable tracing on user builds
    
    This change adds init.rc steps to:
     * allow kernel tracing to be enabled via adb
     * allow a limited set of kernel trace events to be enabled via adb
     * allow the kernel trace to be read via adb
     * allow all users to write to the kernel trace from userland
    
    Bug: 6513400
    Change-Id: Ic3c189b5697aa5edf88d2f507c932971bed6caff

commit 6ba76f019040a0445575deb6995cd32ea72903dd
Merge: c29569c5d 70a163f51
Author: Arve Hjønnevåg <arve@android.com>
Date:   Wed Jun 6 16:42:07 2012 -0700

    Merge "init.rc: Set owner for /sys/power/autosleep"

commit 5f2d00b0677cbe9ad42ea0394def0a51aef7bdda
Author: Dima Zavin <dima@android.com>
Date:   Mon Jun 4 13:15:01 2012 -0700

    rootdir: init.rc: remove audio app/sys groups, merge to fg
    
    With this change, the audio rr/fifo threads will just run in
    the fg cgroup.
    
    Also, the RR budget for the apps fg/bg threads has been bumped
    to 80%. Ideally, the bg budget would be much smaller but there
    are legacy libraries that seem to be very sensitive to this so
    for now keep it at this value.
    
    Bug: 6528015
    Change-Id: I08f295e7ba195a449b96cd79d954b0529cee8636
    Signed-off-by: Dima Zavin <dima@android.com>

commit df44b88621f60e933d7d31090bf0bb892e88142c
Author: Dima Zavin <dima@android.com>
Date:   Mon Jun 4 10:45:15 2012 -0700

    core: init.rc: create apps cgroup for fg tasks, move bg under it
    
    Bug: 6538553
    Change-Id: I7c29975aa376bcdda9d6bbd1fd3e04fdb1c1b1fe
    Signed-off-by: Dima Zavin <dima@android.com>

commit 4c48025c484e9fb0e10bb9c6a1b9bbd5a2def555
Author: Colin Cross <ccross@android.com>
Date:   Wed May 16 13:49:30 2012 -0700

    Increase cpu.rt_runtime_us to 10% for fg and bg groups
    
    GPS on yakju puts SCHED_RR threads in the fg and bg groups, and
    is unhappy with 0.1% limits.  Increase the limits to 10%.
    
    Change-Id: I971c9b0a815890d41694b965fdd2b023937a4411

commit 50efaf2f7fc87692649497dba5615e54efd9c637
Merge: c1f881069 4ff10e63c
Author: Todd Poynor <toddpoynor@google.com>
Date:   Fri May 11 15:54:13 2012 -0700

    Merge "init: Set perms for interactive cpufreq governor boostpulse" into jb-dev

commit 367e7b195b144772464e560352caa2017a53058c
Author: Colin Cross <ccross@android.com>
Date:   Thu May 10 13:55:25 2012 -0700

    Increase rt_runtime_us to 1000 for foreground and bg_non_interactive
    
    rt_runtime_us=0 can cause deadlocks if a SCHED_FIFO/SCHED_RR thread
    is moved into the wrong cgroup.
    
    Change-Id: I4633392fb529039dff6ba5d3a6b672e0de9fc2d9

commit 4ff10e63c3814f7b40c6e4e672c895135a1b1a3d
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu May 3 15:20:48 2012 -0700

    init: Set perms for interactive cpufreq governor boostpulse
    
    Change-Id: Ia4b028f58f9d48bad2525744497f10884d11c5d6

commit 70a163f519db14532b7dcde4bc65d1d658a760e4
Author: Arve Hjønnevåg <arve@android.com>
Date:   Wed May 2 17:57:50 2012 -0700

    init.rc: Set owner for /sys/power/autosleep
    
    Change-Id: Ia18cce973c71e7561ca84b23e37b0b8e056a7143

commit 7e057eb0047819ee4d8af52d2747a7bf29b0cc56
Merge: e5d32128b 59e6eb099
Author: Glenn Kasten <gkasten@google.com>
Date:   Tue May 1 16:18:15 2012 -0700

    Merge "Increase budget" into jb-dev

commit 94a55df34d917492cb3613b9445ffb1659459186
Merge: 0e9dd90ac 65f1fbcad
Author: Jeff Tinker <jtinker@google.com>
Date:   Tue May 1 15:11:47 2012 -0700

    Merge "Fix failure to play pinned movies" into jb-dev

commit 59e6eb09997125aecc122c7d7d9a6e3ec00be4c4
Author: Glenn Kasten <gkasten@google.com>
Date:   Tue May 1 13:36:32 2012 -0700

    Increase budget
    
    Change-Id: I6706a408990abf8d420db73280df2818b8827140

commit 65f1fbcad3247997cf0f0eca54b88f0692781109
Author: Jeff Tinker <jtinker@google.com>
Date:   Mon Apr 30 22:03:14 2012 -0700

    Fix failure to play pinned movies
    
    DRM server process needs to be able to access movies on sdcard
    to acquire rights.
    
    related-to-bug: 6414503
    
    Change-Id: If90404e32fd437b8fb7d5a6ec8dfb30a499ef733

commit 33045a627d4dac8c4c8a910241298ca5da02f87b
Author: Todd Poynor <toddpoynor@google.com>
Date:   Fri Apr 27 20:21:18 2012 -0700

    init: Set perms for cpufreq interactive governor input boost sysfs
    
    Change-Id: Ie475c95d81635a068db11e7018895024247878b4

commit 25dd43a9a5073f0e59102750cb0410b8e9bc9847
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jan 27 13:06:53 2012 -0800

    Restrict zygote to system user.
    
    CVE-2011-3918: Address denial of service attack against Android's
    zygote process. This change enforces that only UID=system can
    directly connect to zygote to spawn processes.
    
    Change-Id: I89f5f05fa44ba8582920b66854df3e79527ae067

commit 8d3ea1d1e198e71ca3f856c6f397faf40922f562
Author: Todd Poynor <toddpoynor@google.com>
Date:   Tue Apr 24 15:37:13 2012 -0700

    init: set perms for cpufreq interactive governor boost -- DO NOT MERGE
    
    Change-Id: I6509cda358b4a75706afd01a5b5a36eabe492554
    Signed-off-by: Todd Poynor <toddpoynor@google.com>

commit f8bbaba57bf309fec83dc9842176d996831e6db1
Author: Kenny Root <kroot@google.com>
Date:   Thu Apr 12 15:01:52 2012 -0700

    Add directory for forward locked apps in ASECs
    
    Forward locked apps on internal storage will be stored in ASEC
    containers using ext4. This way permissions can be preserved whether on
    internal or external storage.
    
    Change-Id: I942f8f0743c210330a11e2b1d0204df7a5ddb2ae

commit b91bd9f599c43b602eac334244173000a6ce011a
Author: Glenn Kasten <gkasten@google.com>
Date:   Thu Apr 19 16:18:37 2012 -0700

    Update cgroups
    
    Change-Id: If4488944e8a1c8af7b13847069d03b7ea4a30785

commit f35c203558b0648c351a5262568b383d41639a8b
Author: Todd Poynor <toddpoynor@google.com>
Date:   Thu Apr 19 13:17:24 2012 -0700

    init.rc: Set perms for cpufreq interactive governor above_hispeed_delay
    
    Change-Id: Ib9c3fb4e43759af590a6e033b8ba04c0023d5f07

commit b47cd10acf6eb9449fc12a93f17f720b21e998c8
Merge: cc6e34e62 4f5d5176a
Author: Mike Lockwood <lockwood@google.com>
Date:   Tue Apr 17 10:40:09 2012 -0700

    Merge "init.rc: Add support for new USB accessory configurations"

commit 5fa860dea3618d5397bb580645f057a6e975786e
Merge: f5f9dad0c 1d91fcf7c
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Thu Apr 12 16:48:11 2012 -0700

    Merge "Add MDNS service"

commit 6a35bb3529520dd1a47a5d0f58abf91d38eb0222
Merge: 720d59828 0653b97b2
Author: Todd Poynor <toddpoynor@google.com>
Date:   Wed Apr 11 15:28:57 2012 -0700

    Merge "init.rc: Set owner and permissions for cpufreq files"

commit 0653b97b2594d5e3f21c6326fb121741bfbf65f7
Author: Todd Poynor <toddpoynor@google.com>
Date:   Wed Apr 11 14:48:51 2012 -0700

    init.rc: Set owner and permissions for cpufreq files
    
    Change-Id: Iaaf8491915567dbe22cab1798081a00fed4fb2e2

commit 4f5d5176a3d732baebe92ab3748a12166406a198
Author: Mike Lockwood <lockwood@google.com>
Date:   Wed Apr 4 11:26:59 2012 -0700

    init.rc: Add support for new USB accessory configurations
    
    Also moved USB scripts to new file init.usb.rc
    
    Change-Id: I98e099fbd8de3eb3e1e18c9ef69312608033a50c
    Signed-off-by: Mike Lockwood <lockwood@google.com>

commit db49739f390992a3d68303765ac36f14ed09b68a
Author: Jamie Gennis <jgennis@google.com>
Date:   Mon Apr 9 16:01:30 2012 -0700

    Add tracing initialization to init.rc.
    
    This change adds init.rc steps to allow kernel tracing to support inserting
    messages from any userland process.
    
    Change-Id: I01970728d7132a25408fed09a213a015ac05ccaf

commit 1d91fcf7c0a31d27097b196579a37873ba1c0934
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Tue Mar 27 16:59:27 2012 -0700

    Add MDNS service
    
    Adds both the new service and another socket for netd.
    
    Change-Id: Ie0271a2c48aa55217ae3fcdcc8e121b86b5a589b

commit 71513567dc0249af1b304e458ceac391ffcbeff5
Author: Marius Renn <renn@google.com>
Date:   Tue Mar 27 10:56:06 2012 -0700

    Multi-Project Commit: Move of filterfw out of system/media (6 of 7)
    
    This is part of the multi-project commit to move the filter-framework
    from system/media/mca to frameworks/base/media/mca.
    
    Note that the filter-framework will soon be replaced with a refactored
    version currently under API review (also to go under frameworks/base).
    This move is done now to unblock the PDK efforts.
    
    Change-Id: I87d034a30bb4b98a85a028cb728e37fb97256039

commit 31fb85865431f98008608b62964cb1c975ca4b71
Merge: 4d668e013 3c9eed88c
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Mar 26 13:06:12 2012 -0700

    Merge "drmserver: add group drm"

commit 62e5cbaebc29d83148dd1ce30a620a37dcdbe7ed
Merge: 8ee361cb0 7941cf87f
Author: Benoit Goby <benoit@android.com>
Date:   Mon Mar 26 12:56:49 2012 -0700

    Merge "Revert "Reimplement the "adb root" command to more closely match its previous behavior""

commit 3c9eed88c529374c8d80e1daa62ad9bf25c9670e
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Mar 26 11:13:17 2012 -0700

    drmserver: add group drm
    
    Make the drm server run as UID=drm, GID=drm. This ensures that
    any files created by the drmserver app do not have GID=system.
    
    Bug: 5834297
    Change-Id: I3409ad350e9cc82bb0982cdbe470ec1f10b1ca67

commit 2affe824ba249b532c5b39941bcdc15800900f6c
Merge: a4d9828ae ad5b9c720
Author: Kenny Root <kroot@google.com>
Date:   Wed Mar 21 17:54:16 2012 -0700

    Merge "Put keystore into the drmrpc group"

commit 9865be95cf60848d91364b42c2cadd90e63fec66
Merge: ddd48d1c0 19155b5cd
Author: Mike Lockwood <lockwood@google.com>
Date:   Wed Mar 21 16:30:49 2012 -0700

    Merge commit '19155b5'
    
    Do not start sshd by default
    
    Change-Id: I22e6dbb6834321709e9b7c5ae49846d7f9f7c67a

commit a9bb7261b4db2372ee0f339d250079c967262758
Merge: 0e5667c18 9dd2eef07
Author: Mike Lockwood <lockwood@google.com>
Date:   Wed Mar 21 16:27:57 2012 -0700

    Merge commit '9dd2eef'
    
    sshd to init.rc
    
    Change-Id: I8eedc3b47f1260502034067d9006cac827cb1089

commit 19155b5cd3ee8674a13f7bf111e06b05f0114433
Author: Mike Lockwood <lockwood@google.com>
Date:   Wed Mar 21 11:58:05 2012 -0700

    init.rc: Do not start sshd by default
    
    Change-Id: Ieacd4e8fbfcd91ed2342b7a104a9b1f4114fc6d5
    Signed-off-by: Mike Lockwood <lockwood@google.com>

commit 1670f831a56f7232f337407c746e97c5929ee417
Author: Arve Hjønnevåg <arve@android.com>
Date:   Tue Mar 20 20:33:09 2012 -0700

    init.rc: Fix permissions on /sys/power/state and /sys/power/wakeup_count
    
    Change-Id: I06a1a2affebdf64f008eaa61a0851f1e832059c5

commit 7941cf87f624e7747b5bb868a27904c7a3be0ca4
Author: Benoit Goby <benoit@android.com>
Date:   Fri Mar 16 14:44:17 2012 -0700

    Revert "Reimplement the "adb root" command to more closely match its previous behavior"
    
    This reverts commit 535164e9d9649a83d4d63829f3389f2bea339fe1.

commit f3ef1271f225d9f00bb4ebb0573eb3e03829f9a8
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Mar 14 15:22:54 2012 -0700

    init.rc: Add documentation
    
    Android developers should never place files in /data/local/tmp.
    Files or directories in /data/local/tmp can be minipulated by the
    shell user.
    
    Android developers should never create world-writable files
    or directories. This is a common source of security vulnerabilities.
    
    Change-Id: I6d2cd620ab49d8ca3f39282f7d2ed682a9ba91c3

commit ad5b9c7205ac2a9ac500c6d455bf46f8ab3aafe0
Author: Kenny Root <kroot@google.com>
Date:   Thu Feb 23 16:31:10 2012 -0800

    Put keystore into the drmrpc group
    
    The keystore service needs to access hardware crypto devices to
    fulfill its function on devices with hardware crypto. This role
    was assigned to the (now misnamed) drmrpc group.
    
    Change-Id: Ia32f9e96b4372f0974984451680f9a0f6157aa01

commit 89c5926f08fdf551c33ccbfbec5d6bb7d911f067
Merge: 7bf4c45f8 0b32a75b7
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Thu Mar 8 14:31:23 2012 -0800

    am 0b32a75b: am c8d1a0e1: am 5ebced39: init.rc: update the permission of /data/local.
    
    * commit '0b32a75b7c7f25bd9ab325f44626c402fd9b9b23':
      init.rc: update the permission of /data/local.

commit c8d1a0e18e008009fe75aa2cc7d3deace0479fce
Merge: d39f9d937 5ebced390
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Thu Mar 8 14:27:08 2012 -0800

    am 5ebced39: init.rc: update the permission of /data/local.
    
    * commit '5ebced39093d1223566166b8cc6abfe6729c487d':
      init.rc: update the permission of /data/local.

commit 5383476727659544875b90d49a5371886a31c1fe
Merge: 714052ba4 5ebced390
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Thu Mar 8 14:26:47 2012 -0800

    am 5ebced39: init.rc: update the permission of /data/local.
    
    * commit '5ebced39093d1223566166b8cc6abfe6729c487d':
      init.rc: update the permission of /data/local.

commit 5ebced39093d1223566166b8cc6abfe6729c487d
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Wed Mar 7 14:52:10 2012 -0800

    init.rc: update the permission of /data/local.
    
    Bug: 6131945
    Change-Id: I3094a471dcfb02b786f47b6778c8fed3726325ec

commit e7fd911fd42b1f8bea6a004e2bcc1d2dda4ec718
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Jan 27 13:06:53 2012 -0800

    Restrict zygote to system user.
    
    CVE-2011-3918: Address denial of service attack against Android's
    zygote process. This change enforces that only UID=system can
    directly connect to zygote to spawn processes.
    
    Change-Id: I89f5f05fa44ba8582920b66854df3e79527ae067

commit dae26c6ac44e9c47cc60fcaa3d04c54d68d66760
Merge: a33c6ee92 3e9c9ac5e
Author: James Dong <jdong@google.com>
Date:   Wed Jan 11 16:19:37 2012 -0800

    am 3e9c9ac5: am 032afc1d: Merge "Close a security hole - do not give world readable/writable access to /data/drm" into ics-mr1
    
    * commit '3e9c9ac5ee7a36653b90cb86eb6445496b536c16':
      Close a security hole - do not give world readable/writable access to /data/drm

commit d95c6152197cf3976797267ad40e61b7344933de
Merge: 95ec1ca90 032afc1d5
Author: James Dong <jdong@google.com>
Date:   Wed Jan 11 16:18:16 2012 -0800

    am 032afc1d: Merge "Close a security hole - do not give world readable/writable access to /data/drm" into ics-mr1
    
    * commit '032afc1d52289f486538c9ed53f17b9889ea94df':
      Close a security hole - do not give world readable/writable access to /data/drm

commit 3e9c9ac5ee7a36653b90cb86eb6445496b536c16
Merge: e0b557915 032afc1d5
Author: James Dong <jdong@google.com>
Date:   Wed Jan 11 16:18:11 2012 -0800

    am 032afc1d: Merge "Close a security hole - do not give world readable/writable access to /data/drm" into ics-mr1
    
    * commit '032afc1d52289f486538c9ed53f17b9889ea94df':
      Close a security hole - do not give world readable/writable access to /data/drm

commit f90b0e04a61ab3bf5239afb2f7157aabe5fbca8f
Author: Dima Zavin <dima@android.com>
Date:   Tue Jan 10 09:37:35 2012 -0800

    rootdir: convert all usages of $prop to ${prop}
    
    Change-Id: Ic2472606e869d23c0f499a192cd7bb21ca3cf5b5
    Signed-off-by: Dima Zavin <dima@android.com>

commit 3e7b7739e3d4d7aaaa363645501036dafcc30ed3
Author: Dima Zavin <dima@android.com>
Date:   Fri Dec 16 14:23:22 2011 -0800

    init: import the hardware specific init file in init.rc
    
    This removes the hardcoding of the file import in init and instead
    allows the init.rc file to fully control what is loaded.
    
    Change-Id: I933e5bbab57f1e8705a370d660f92c6508da94d2
    Signed-off-by: Dima Zavin <dima@android.com>

commit 683a09352a0adf8924d67c9aa80bce244592aa25
Author: Dima Zavin <dima@android.com>
Date:   Tue Jan 10 09:37:35 2012 -0800

    rootdir: convert all usages of $prop to ${prop}
    
    Change-Id: Ic2472606e869d23c0f499a192cd7bb21ca3cf5b5
    Signed-off-by: Dima Zavin <dima@android.com>

commit 09cdc0ea12598651d1c074974c9b593fd1c0e4ba
Author: James Dong <jdong@google.com>
Date:   Fri Jan 6 15:19:26 2012 -0800

    Close a security hole - do not give world readable/writable access to /data/drm
    
    o related-to-bug: 5834297
    
    Change-Id: I8e459610b4f69999be37364c2359b2bac82d4a2a

commit 7634bf87cf6490e5544f040fb403eb164cf0ee5f
Author: Dima Zavin <dima@android.com>
Date:   Fri Dec 16 14:23:22 2011 -0800

    init: import the hardware specific init file in init.rc
    
    This removes the hardcoding of the file import in init and instead
    allows the init.rc file to fully control what is loaded.
    
    Change-Id: I933e5bbab57f1e8705a370d660f92c6508da94d2
    Signed-off-by: Dima Zavin <dima@android.com>

commit 9dd2eef07bbee6ff5b1d1a9ccda6e3499391ecb6
Author: Mike Lockwood <lockwood@google.com>
Date:   Sun Dec 11 20:25:16 2011 -0800

    add sshd to init.rc
    
    Change-Id: Ide6e8cca58f090e84d85d0298058c523863d1c43
    Signed-off-by: Mike Lockwood <lockwood@google.com>

commit 27cca21a5d0a6beff31d2f9ff1441afc1271a346
Author: Nick Kralevich <nnk@google.com>
Date:   Mon Dec 5 14:48:08 2011 -0800

    set mmap_min_addr to 32768
    
    Bug: 5712789
    Change-Id: I586a99cd63d8fba06bc2562b1cfce531ee4f554c

commit f9557fba347bcb837892458fabd7454e1a1a4d6a
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Nov 8 14:38:53 2011 -0800

    Set /proc/sys/kernel/dmesg_restrict to 1
    
    Set dmesg_restrict to 1 to help limit inadvertent information leaks
    from the kernel to non-privileged programs.  Root and programs with
    CAP_SYSLOG will continue to have access to dmesg output.
    
    See "dmesg_restrict" in Documentation/sysctl/kernel.txt from the
    Linux kernel source code.
    
    Bug: 5585365
    Change-Id: Iffcf060ea4bd446ab9acf62b8b61d315d4ec4633

commit 1e339a710e0993c18c8b96f9224ebd3aa29cf8cd
Merge: 67d53e21f 2e7c83327
Author: Nick Kralevich <nnk@google.com>
Date:   Tue Nov 8 11:39:43 2011 -0800

    Merge "Set kptr_restrict to 2."

commit 3c58933aa785ab26f77284f6a1a4e93d2ebfcf04
Merge: 6182d031d 4a2539085
Author: Dima Zavin <dima@android.com>
Date:   Mon Nov 7 17:32:02 2011 +0000

    am 4a253908: rootdir: init.rc: write default oom_adj before starting ueventd
    
    * commit '4a2539085062a715b0d345eb50ea48738423c909':
      rootdir: init.rc: write default oom_adj before starting ueventd

commit 4a2539085062a715b0d345eb50ea48738423c909
Author: Dima Zavin <dima@android.com>
Date:   Fri Nov 4 12:45:52 2011 -0700

    rootdir: init.rc: write default oom_adj before starting ueventd
    
    Otherwise, ueventd's oom_adj value would have been 0 and it could
    easily get killed early during low memory events
    
    Change-Id: I1adbd18c37215b26ae77e70f7b8dbd1e143fc2d4
    Signed-off-by: Dima Zavin <dima@android.com>

commit 2e7c833279349a694af15f2447cc214dc30bcc01
Author: Nick Kralevich <nnk@google.com>
Date:   Wed Nov 2 08:51:37 2011 -0700

    Set kptr_restrict to 2.
    
    To make writing kernel exploits harder, set /proc/sys/kernel/kptr_restrict
    to "2". This prohibits users from accessing kernel symbols via /proc/kallsyms
    
    Bug: 5555668
    Change-Id: Ib31cb6fcb4d212a0b570ce9e73ae31f721ed801b

commit 04a875902ece07769101a5202e3af554af31a911
Author: Mathias Agopian <mathias@google.com>
Date:   Mon Oct 31 14:27:36 2011 -0700

    restart surfaceflinger and drmserver when servicemanager dies
    
    Bug: 5450389
    
    Change-Id: Ib4e73836721e25e2a88185167b030ea75e0d74e3

commit 8cdd4c335f0d6e35e6def5ea73dcefb9687071b0
Merge: 50f128a39 aa75df74d
Author: sinikang <sinikang@samsung.com>
Date:   Mon Oct 17 17:03:15 2011 -0700

    am aa75df74: [maguro] : add setprop net.tcp.buffersize.hspa
    
    * commit 'aa75df74db5beffd25821ed6c360c36197d7bac1':
      [maguro] : add setprop net.tcp.buffersize.hspa

commit aa75df74db5beffd25821ed6c360c36197d7bac1
Author: sinikang <sinikang@samsung.com>
Date:   Sun Oct 16 12:32:13 2011 -0700

    [maguro] : add setprop net.tcp.buffersize.hspa
    
    -window size optimized for hspa
    -Patchset2 : space removed
    
    Change-Id: Ia4d1043d1a93c929721a4d7cca60ce9ff8bbf67a
    Signed-off-by: sinikang <sinikang@samsung.com>

commit d707fb3fb6448be04d6e14f7e478df7e298ebf35
Author: Nick Kralevich <nnk@google.com>
Date:   Thu Oct 6 11:47:11 2011 -0700

    enable heap randomization.
    
    Bug: 5250555
    
    Change-Id: I7acb0645402611875c481aec33ece85fced7a336

commit 4e803c3c18ad6a0cebbb16e2cf623a174f5201e1
Merge: f791e17bc e65e94638
Author: Wink Saville <wink@google.com>
Date:   Mon Oct 10 12:24:48 2011 -0700

    Merge "Add log group to rild to improve log collection on modem issue"

commit 65c4df51f895b79fc599d3bfa796ddfc660d47e4
Author: Jeffrey Tinker <jtinker@google.com>
Date:   Thu Oct 6 18:19:46 2011 -0700

    Add drmrpc group to mediaserver and drmserver so they can make the drm rpc calls
    
    Bug 4598045 Implementing secure video path on TI OMAP4 chip for ICS
    
    Change-Id: Iacfe3e79f067172085b96bb4cd4484101aa5be1e

commit e65e946382033a94f99f0f05678bb1e6329e3182
Author: Kazuhiro Ondo <kazuhiro.ondo@motorola.com>
Date:   Thu Sep 29 10:50:43 2011 -0500

    Add log group to rild to improve log collection on modem issue
    
    Add log group to ril-daemon service. rild is the best place to
    know the issue on the modem in many time. It would be helpful
    if rild alone can capture the snapshot of logcat buffers at
    the moment of problem.
    
    Change-Id: Ie0dcda126fb748a00e650427de35541672359287

commit 8e3ff70444ac919d0b70eaa1fbe97a3ef5bdb9ef
Author: JP Abgrall <jpa@google.com>
Date:   Sun Sep 11 16:12:27 2011 -0700

    init.rc: allow all users to open the qtaguid misc dev
    
    The netfilter xt_qtaguid module uses a misc dev so that processes
    that use the module can be tracked.
    Every process that does socket tagging must open that dev.
    
    Change-Id: I6af3e0f0180637b14455dd9607724523f142c402

commit 1ac40f4ef18799e252115d9c9ad17396ffb68f3d
Author: Robert Greenwalt <rgreenwalt@google.com>
Date:   Wed Sep 7 15:40:26 2011 -0700

    Increase the window sizes on wifi and lte.
    
    Set to 524288,1048576,2097152, 262144,524288,1048576.
    
    bug:5226360
    Change-Id: Id9d4257c51a355d78246b4ca59ab462fbe5b72be

commit ca47cef7491caf6072984d9d64c768717baad09a
Author: Dima Zavin <dima@android.com>
Date:   Wed Aug 24 15:28:23 2011 -0700

    init: add charge mode handling
    
    Introduces a 'charger' section that is processed when androidboot.mode
    supplied on the kernel commandline is "charger".
    
    In this mode, sections such as fs, post-fs, etc are skipped. Only the
    'early-init' and 'init' sections of the init rc files are processed before
    processing the 'charger' section.
    
    Change-Id: If9eb6334de18f04cbcf2aab784578e2993615242
    Signed-off-by: Dima Zavin <dima@android.com>

commit 85e37b0a81f2f24f223c8917db69221779f0d2b0
Author: JP Abgrall <jpa@google.com>
Date:   Thu Aug 18 00:08:11 2011 -0700

    init: allow mediaserver to tag socket (group net_bw_acct)
    
    The mediaserver needs to do communication on behalf of other apps
    (browser, ...).
    It needs to be able to tag sockets. The kernel will check for net_bw_acct
    group membership.
    
    Change-Id: I7fb063fdb7d9435d7f979df6622ff17f34049cbc

commit d09196d00cb5bf3bffb22d3aae45c8797f1ddf4c
Merge: a24687197 06787f408
Author: Dianne Hackborn <hackbod@google.com>
Date:   Mon Aug 8 14:55:14 2011 -0700

    Merge "Activity Manager now takes care of setting OOM values."

commit a24687197d69ac677d176dbc41d5cfd65d1afc44
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Mon Aug 8 10:11:40 2011 -0700

    init.rc: add inet permission to VPN daemons explicitly.
    
    Racoon still needs it after dropping root privilege, or pure IPSec VPN
    will fail. Mtpd works without it because net_raw implies inet. However
    it would be better to set all of them clearly without the assumption.
    
    Change-Id: I50762af2c25ec9cc559e528c7b14f469494fd553

commit 06787f4089093fed8a01ec3a3d2092e10919b77e
Author: Dianne Hackborn <hackbod@google.com>
Date:   Sun Aug 7 16:30:24 2011 -0700

    Activity Manager now takes care of setting OOM values.
    
    All init needs to do is make these files writeable so that the
    activity manager can set them.
    
    Change-Id: Ieea43208fadc01504d813be379aecbafcadf0d34

commit 7804cbf4833cba82bd38f6adaf567bcb8262c3ad
Author: Mike Lockwood <lockwood@android.com>
Date:   Fri Jul 29 12:59:32 2011 -0400

    Move some common USB configuration logic to init.rc
    
    Change-Id: Ib75ccfd9c4aa8aace936370c33f33a922ca3c51f
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit 3507616870acd71bbd26e045528b0cfe716d37cd
Author: Eric Laurent <elaurent@google.com>
Date:   Sun Jul 24 10:16:47 2011 -0700

    Fix issue 4604090: notification sound interrupted.
    
    Removed system from mediaserver groups. Not needed anymore
    now that AudioFlinger acquires wake locks via PowerManagerService.
    
    Change-Id: I177b968a0a30557d871188bf3991b96d9b391d3c

commit 4a2b0fcd6e166499fe51e920aca5f9640dd05939
Merge: 81231596c aa4a66a16
Author: Conley Owens <cco3@android.com>
Date:   Fri Jul 15 14:12:23 2011 -0700

    am aa4a66a1: am 1e5e2d76: am af6e3266: am d0b93f43: Merge "Create world readable, system writeable /data/resource-cache."
    
    * commit 'aa4a66a16dd9b97fb876bb296366442b8745a10b':
      Create world readable, system writeable /data/resource-cache.

commit aa4a66a16dd9b97fb876bb296366442b8745a10b
Merge: 070ec8e02 1e5e2d767
Author: Conley Owens <cco3@android.com>
Date:   Fri Jul 15 11:30:44 2011 -0700

    am 1e5e2d76: am af6e3266: am d0b93f43: Merge "Create world readable, system writeable /data/resource-cache."
    
    * commit '1e5e2d7673a9ea915283f6626fa692cc169b0e67':
      Create world readable, system writeable /data/resource-cache.

commit 56286d6fdb07d8b1310c27eeb59bdf05500f166e
Merge: 1ac6ddeba 9bb4d411e
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Sun Jul 10 16:16:06 2011 -0700

    Merge "init: update permissions for VPN."

commit 9bb4d411e01c8e6330b5c27c489485592360576b
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Fri Jul 8 20:03:03 2011 -0700

    init: update permissions for VPN.
    
    VPN no longer uses system properties to keep network parameters.
    Besides, profiles are now stored and encrypted by keystore.
    
    Change-Id: I7575f04f350b7d8d5ba7008eb874a72180d057e8

commit 50d9819ef49c2d557ad0b33a7880a7a3b72e3fb8
Merge: 8a330bc53 ea7441415
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Fri Jul 8 19:26:45 2011 -0700

    Merge "init: clean up init.rc as now mkdir handles EEXIST."

commit ea7441415997faf34f7ae44f462f916f5f7ea0df
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Fri Jul 8 16:52:18 2011 -0700

    init: clean up init.rc as now mkdir handles EEXIST.
    
    Change-Id: I3fa2a618ef27197315fc128738a284ac644e86c0

commit f48fd5d403d77c4586ad0e715affd601a0934334
Author: Eric Laurent <elaurent@google.com>
Date:   Wed Jul 6 18:45:16 2011 -0700

    Temporary workaround for issue 4604090
    
    There was a regression caused by a change in Honeycomb that removed
    mediaserver process from system group to improve security: This prevents
    the audio HAL (which runs in mediaserver process) from taking wake locks
    while audio is playing thus causing the pcm stream to get unexpectedly
    suspended.
    
    This temporary workaround is just to allow ICS dogfood in better conditions until
    a real fix taking into account the security issue is implemented.
    
    Change-Id: Ic19a23da4b4383559188b6f5c3a82604c3d95d74

commit e89675584df1f02dd4642585493a19ac3e691bc5
Merge: 64416c816 9350a00ce
Author: Mike Lockwood <lockwood@android.com>
Date:   Wed Jul 6 17:53:56 2011 -0700

    Merge "init.rc: Allow system process to configure RNDIS USB ethernet address"

commit 64416c816cbe1161a09d6e6a65732399fac4e3ca
Merge: 5744d312c b4daef453
Author: Mathias Agopian <mathias@google.com>
Date:   Wed Jul 6 11:10:41 2011 -0700

    Merge "don't restart surfaceflinger when the window manager dies"

commit 9350a00ce65a6425ba4566fe943c954373240f6c
Author: Mike Lockwood <lockwood@android.com>
Date:   Wed Jul 6 12:45:49 2011 -0400

    init.rc: Allow system process to configure RNDIS USB ethernet address
    
    Change-Id: Id339d8359e592dbc1279e423d9a5adc3a775949d
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit b4daef45310891d550ea9cfb89ab4bf5b3e15ef5
Author: Mathias Agopian <mathias@google.com>
Date:   Fri Jul 1 17:11:51 2011 -0700

    don't restart surfaceflinger when the window manager dies
    
    Change-Id: Ia3c60e6c5471e2b72d53c936de44b730c68095e0

commit 856f63c0df9cd4e8783ca65140fe386e3a98a274
Merge: 8648c3797 049189302
Author: Brian Carlstrom <bdc@google.com>
Date:   Fri Jul 1 13:43:33 2011 -0700

    Merge "Revert "Add keychain user""

commit 1c9a996c50e096eb9f54dc806aae6d82fa3cc2e8
Author: Eino-Ville Talvala <etalvala@google.com>
Date:   Mon Jun 20 12:16:52 2011 -0700

    Add mobile filter framework library into the bootclasspath.
    
    Change-Id: Ia9ae45de5d58ba5e98821fd04add96c6062c1a18

commit 04918930236981a6d2a096a73854caa96cb94bda
Author: Brian Carlstrom <bdc@google.com>
Date:   Thu Jun 30 22:50:29 2011 -0700

    Revert "Add keychain user"
    
    This reverts commit 6541ef1562ccf93e498d653598330a7fc80ad2b2.
    
    Bug:4970237
    Change-Id: I23a90eb89c1d19893d2ba7065fc624c0521cb06e

commit 9d94942bcd6347d6ee8524b23bc94b95ba32d8e0
Merge: f04836318 6a18a0777
Author: vidya rao <vidya.rao@motorola.com>
Date:   Mon Jun 27 14:15:33 2011 -0700

    am 6a18a077: am 04cf629b: Move RILD to class main
    
    * commit '6a18a07774123c409cefd9a92f1c4c6504f4edfd':
      Move RILD to class main

commit 04cf629be5e99a3a920aecc0b059444bd07e9d84
Author: vidya rao <vidya.rao@motorola.com>
Date:   Fri Jun 24 12:15:20 2011 -0700

    Move RILD to class main
    
    -- This is needed so the modems (LTE & CDMA) are powered on and running
       before unlocking encrypted devices
    
    Change-Id: I842f5286499fd76abc554ded550fb837d12b324e

commit 535164e9d9649a83d4d63829f3389f2bea339fe1
Author: Mike Lockwood <lockwood@android.com>
Date:   Wed Jun 22 08:36:53 2011 -0400

    Reimplement the "adb root" command to more closely match its previous behavior
    
    The adb gadget driver used to reset the USB bus when the adbd daemon exited,
    and the host side adb relied on this behavior to force it to reconnect
    with the new adbd instance after init relaunches it.  The new gadget
    drivers no longer automatically reset the USB bus when adbd is restarted
    which caused adb to hang since it was no longer forced to reconnect with the
    device.  We attempted to work around this on the host side adb, but that
    work around has not been reliable.
    
    This change adds a property trigger on the service.adb.root system property
    which will reset the USB bus and restart the adbd daemon when adbd sets
    the property to 1.  This should be much closer to the previous behavior
    and will hopefully fix some problems with automated testing.
    
    Change-Id: I177c37400009a3d83f21a5f9431f94fd1cc19b9b
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit 352dfdfaea55601f2c36fe7286a158e84028bcf3
Author: Mike Lockwood <lockwood@android.com>
Date:   Wed Jun 8 17:40:00 2011 -0700

    init.rc: Changes for new USB gadget drivers
    
    Change-Id: I68fcf167c9fc71bb5f44793648a35d3181fd36d7
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit b45280d259c5036dd066782d725c55284c7dae90
Author: Mårten Kongstad <marten.kongstad@sonyericsson.com>
Date:   Mon May 30 10:24:54 2011 +0200

    Create world readable, system writeable /data/resource-cache.
    
    /data/resource-cache is used to store idmap files.
    
    Change-Id: I9b1dbc8d607333b71c05f55a4a402ae92193c36c

commit 2b8f76cdbb254ac1170087a40dbf30b7627f3516
Author: jeffhao <jeffhao@google.com>
Date:   Thu May 5 14:25:36 2011 -0700

    Tracking merge of dalvik-dev to master
    
    Reordered bootclasspath to allow verification of all framework methods.
      git cherry-pick --no-commit  ec164a0170955fe63106c2576a65bc4ffb1df425
    
    Address CVE-2011-1090.
      git cherry-pick --no-commit  3365288d3c00072689cd9d733e055561cadc87b5
    
    Change-Id: I6a89bc600ced06a0cb84ae1670cb7a6ea39de9c8

commit a31a3511825375177d26ab27067352c2c8f42038
Author: Brian Carlstrom <bdc@google.com>
Date:   Wed May 4 18:33:27 2011 -0700

    Make CertInstaller installed CA certs trusted by applications via default TrustManager (6 of 6)
    
        frameworks/base
    
            Adding IKeyChainService APIs for CertInstaller and Settings use
            keystore/java/android/security/IKeyChainService.aidl
    
        libcore
    
            Improve exceptions to include more information
            luni/src/main/java/javax/security/auth/x500/X500Principal.java
    
            Move guts of RootKeyStoreSpi to TrustedCertificateStore, leaving only KeyStoreSpi methods.
            Added support for adding user CAs in a separate directory for system.
            Added support for removing system CAs by placing a copy in a sytem directory
            luni/src/main/java/org/apache/harmony/xnet/provider/jsse/RootKeyStoreSpi.java
            luni/src/main/java/org/apache/harmony/xnet/provider/jsse/TrustedCertificateStore.java
    
            Formerly static methods on RootKeyStoreSpi are now instance methods on TrustedCertificateStore
            luni/src/main/java/org/apache/harmony/xnet/provider/jsse/TrustManagerImpl.java
    
            Added test for NativeCrypto.X509_NAME_hash_old and X509_NAME_hash
            to make sure the implementing algorithms doe not change since
            TrustedCertificateStore depend on X509_NAME_hash_old (OpenSSL
            changed the algorithm from MD5 to SHA1 when moving from 0.9.8 to
            1.0.0)
    
            luni/src/test/java/org/apache/harmony/xnet/provider/jsse/NativeCryptoTest.java
    
            Extensive test of new TrustedCertificateStore behavior
            luni/src/test/java/org/apache/harmony/xnet/provider/jsse/TrustedCertificateStoreTest.java
    
            TestKeyStore improvements
            - Refactored TestKeyStore to provide simpler createCA method (and
              internal createCertificate)
            - Cleaned up to remove use of BouncyCastle specific X509Principal
              in the TestKeyStore API when the public X500Principal would do.
            - Cleaned up TestKeyStore support methods to not throw Exception
              to remove need for static blocks for catch clauses in tests.
    
            support/src/test/java/libcore/java/security/TestKeyStore.java
            luni/src/test/java/libcore/java/security/KeyStoreTest.java
            luni/src/test/java/org/apache/harmony/xnet/provider/jsse/NativeCryptoTest.java
    
            Added private PKIXParameters contructor for use by
            IndexedPKIXParameters to avoid wart of having to lookup and pass
            a TrustAnchor to satisfy the super-class sanity check.
    
            luni/src/main/java/org/apache/harmony/xnet/provider/jsse/TrustManagerImpl.java
            luni/src/main/java/org/apache/harmony/xnet/provider/jsse/IndexedPKIXParameters.java
            luni/src/main/java/java/security/cert/PKIXParameters.java
    
        packages/apps/CertInstaller
    
            Change CertInstaller to call IKeyChainService.installCertificate
            for CA certs to pass them to the KeyChainServiceTest which will
            make them available to all apps through the
            TrustedCertificateStore. Change PKCS12 extraction to use AsyncTask.
    
            src/com/android/certinstaller/CertInstaller.java
    
            Added installCaCertsToKeyChain and hasCaCerts accessor for use by
            CertInstaller. Use hasUserCertificate() internally. Cleanup coding
            style.
    
            src/com/android/certinstaller/CredentialHelper.java
    
        packages/apps/KeyChain
    
            Added MANAGE_ACCOUNTS so that IKeyChainService.reset
            implementation can remove KeyChain accounts.
    
            AndroidManifest.xml
    
            Implement new IKeyChainService methods:
            - Added IKeyChainService.installCaCertificate to install certs
              provided by CertInstaller using the TrustedCertificateStore.
            - Added IKeyChainService.reset to allow Settings to remove the
              KeyChain accounts so that any app granted access to keystore
              credentials are revoked when the keystore is reset.
    
            src/com/android/keychain/KeyChainService.java
    
        packages/apps/Settings
    
            Changed com.android.credentials.RESET credential reset action to
            also call IKeyChainService.reset to remove any installed user CAs
            and remove KeyChain accounts to have AccountManager revoke
            credential granted to private keys removed during the RESET.
    
            src/com/android/settings/CredentialStorage.java
    
            Added toast text value for failure case
    
            res/values/strings.xml
    
        system/core
    
            Have init create world readable /data/misc/keychain to allow apps
            to access user added CA certificates installed by the CertInstaller.
    
            rootdir/init.rc
    
    Change-Id: I768ca8e8e990ff333ce0f7069a0935173498c5ed

commit f642c3d12f4cffdc349b9ebfc4107de254ad8db9
Author: Jeffrey Tinker <jtinker@google.com>
Date:   Thu Mar 17 10:55:05 2011 -0700

    Make drmserver's primary group be system, so setgid is not required in ueventd.stingray.rc
    
    Change-Id: Ie8a287620d22b5c1bdc459fb288b7403589ab474

commit cfce2826780dc1c4811619b89ba8d358e3f30f11
Author: Glenn Kasten <gkasten@google.com>
Date:   Mon Mar 14 11:43:45 2011 -0700

    Bug 4089635 mediaserver fewer supplementary groups
    
    Change-Id: I90111567564397ca08e87dcfcbdf23337bf79ae6

commit b7b770dd76d664b1e44adb2f98b8caf594f6d3c8
Author: Glenn Kasten <gkasten@google.com>
Date:   Fri Mar 11 14:33:11 2011 -0800

    Bug 4086255 drmserver process needs system group
    
    Change-Id: If9a325b9e716abe00f3ad6f20b012861308abd2d

commit 5db0897c6530502e1343a75b258868122030e4a5
Merge: 709871080 c5c51033c
Author: Ken Sumrall <ksumrall@android.com>
Date:   Thu Mar 10 19:32:27 2011 -0800

    Merge "Load the persistent properties after decrypting the /data partition" into honeycomb-mr1

commit c5c51033c86353d1a448c72e0e9388906eed7114
Author: Ken Sumrall <ksumrall@android.com>
Date:   Tue Mar 8 17:01:29 2011 -0800

    Load the persistent properties after decrypting the /data partition
    
    Fix for bug 3415286.  The persistent properties are normally read early
    in the boot process after /data is mounted.  However, for an encrypted
    system, at that point /data is a tmpfs ramdisk.  This change adds a new
    command to init (load_persist_props) to read the persistent properties,
    and adds an action to init.rc to load the persistent properties.  This
    action is triggered by setting a property in vold, but that's in a
    different CL.
    
    Change-Id: I74b3057974ee6029c29d956b76fef5566700d471

commit a40481b2cc604b8b278d509f120cf496c4c318f2
Author: Mathias Agopian <mathias@google.com>
Date:   Thu Mar 3 18:48:30 2011 -0800

    Run surfaceflinger in its own process. [DO NOT MERGE]
    
    This is to allow OpenGL ES rendering from the system process,
    and help with debugging.
    
    Bug: 4086003
    Change-Id: I732e95f4fcaa358f430cc195d8e63a69263bffdc

commit 9ac8484e0b677802474e2fd73edb9cbac02d98a6
Merge: 4fe0bc5cf 04e5232ac
Author: Ying Wang <wangying@google.com>
Date:   Tue Feb 8 09:59:10 2011 -0800

    Merge "Reorder BOOTCLASSPATH to match change 7eff81df2a"

commit 04e5232ac2b3fc87596c6d82c07c667e52e2d7c2
Author: Ying Wang <wangying@google.com>
Date:   Mon Feb 7 20:04:31 2011 -0800

    Reorder BOOTCLASSPATH to match change 7eff81df2a
    
    Bug: 3385161
    Change-Id: I8bb91753c02c031c32ab0070dd424a6ac859311a

commit b03afaafb542e84a6ae9b09d89f7eb3a9d1ccf7a
Merge: 305b4b0f6 b81dfcb4f
Author: Glenn Kasten <gkasten@google.com>
Date:   Wed Feb 2 15:58:08 2011 -0800

    Merge "Bug 3381298 Remove old /data/drm/plugins/native"

commit 63e99f447fed821b57f3f13e33abd740b3b04c03
Merge: 24823cfa8 e442cff05
Author: Rebecca Schultz Zavin <rebecca@android.com>
Date:   Sun Jan 30 12:53:21 2011 -0800

    am e442cff0: am 58fb8220: Raise the viking killer min free values to match the system properties
    
    * commit 'e442cff05ff9f083c91caa3bed74e37318a69fda':
      Raise the viking killer min free values to match the system properties

commit 58fb822024a04641d5ca1d0341456a2706aee853
Author: Rebecca Schultz Zavin <rebecca@android.com>
Date:   Fri Jan 28 22:51:37 2011 -0800

    Raise the viking killer min free values to match the system properties
    
    Change-Id: Idcbdb106d704ef63c9a44e635b6e995e0e5f6479
    Signed-off-by: Rebecca Schultz Zavin <rebecca@android.com>

commit 24823cfa84d1a4dcb719c1949092facf8c92804a
Merge: 120b57a3d fee2cfb01
Author: Dianne Hackborn <hackbod@google.com>
Date:   Fri Jan 28 16:40:26 2011 -0800

    am fee2cfb0: am 9efdcd96: Fix issue #3401380: Raise OOM killer limits
    
    * commit 'fee2cfb01165f6797d783c6a8c0b1fba4f591355':
      Fix issue #3401380: Raise OOM killer limits

commit 9efdcd969ed03cfbe8cfa692b8adcc46d954914a
Author: Dianne Hackborn <hackbod@google.com>
Date:   Fri Jan 28 15:33:13 2011 -0800

    Fix issue #3401380: Raise OOM killer limits
    
    Change-Id: Ia9c82e7d31b7f1b89bf9650ebea697d9b3a64506

commit b81dfcb4f6275bf675e7afe64ccecc29c1b8c3ae
Author: Glenn Kasten <gkasten@google.com>
Date:   Sun Jan 23 12:37:03 2011 -0800

    Bug 3381298 Remove old /data/drm/plugins/native
    
    Change-Id: Ic299d328f2e04a65a9dce68909c7b83f3ac03b20

commit 328c0d4a89d7c04c829c587657b95b3241f64f60
Merge: ec9e7b1c1 b29b33841
Author: Glenn Kasten <gkasten@google.com>
Date:   Sun Jan 23 09:45:24 2011 -0800

    Merge "Bug 3361124 Remove drmioserver"

commit b29b33841bd2f5143e2705525bfc4f8a2d2b6316
Author: Glenn Kasten <gkasten@google.com>
Date:   Thu Jan 20 07:45:27 2011 -0800

    Bug 3361124 Remove drmioserver
    
    Change-Id: Ie3b20b487c1466737921567ab2d043e230356bf4
    Note: safe to re-use the drmio uid/gid as no files were ever created.

commit 852c13d1b2404e5a360375ae75291ac1a9dae026
Merge: 0f951a4fb afa099a19
Author: Ken Sumrall <ksumrall@android.com>
Date:   Wed Jan 19 23:14:43 2011 -0800

    am afa099a1: am 3a159d62: Move rild to the late_start class
    
    * commit 'afa099a1909c02196574d125d735adb0c8918392':
      Move rild to the late_start class

commit 3a159d62a9d771f2a2d38129f1db56d873598696
Author: Ken Sumrall <ksumrall@android.com>
Date:   Wed Jan 19 23:06:12 2011 -0800

    Move rild to the late_start class
    
    Now that rild can be killed in a reasonable amount of time, move it
    from the core class to late_start.  I was going to move it to main,
    but it would get killed and restarted right after the disk crypto
    password was entered, which is when the late_start class is started,
    and I was seeing issues with rild not re-connecting to the network
    when it was killed and restarted.
    
    Change-Id: I60479ddb853953029890fc816538d615ef5a96ab

commit 701d40f721573c5c9e0b45b59a383e04c582f6d0
Merge: c633356e8 383b76f86
Author: Ken Sumrall <ksumrall@android.com>
Date:   Mon Jan 17 15:00:09 2011 -0800

    am 383b76f8: am e4349157: Add a new trigger to support a progress bar UI for encrypt in place.
    
    * commit '383b76f86af48d4a1a502d7767ab79f024483864':
      Add a new trigger to support a progress bar UI for encrypt in place.

commit e434915787c38a6d84e1058044fed3be2ed02235
Author: Ken Sumrall <ksumrall@android.com>
Date:   Mon Jan 17 14:26:34 2011 -0800

    Add a new trigger to support a progress bar UI for encrypt in place.
    
    Change-Id: I6a14eb43462505cb7fecfee9fd1ecdea50065963

commit 30d5d038a94b09bd906d8a07a9c4b79640d36c2e
Author: Jesse Wilson <jessewilson@google.com>
Date:   Thu Jan 13 17:22:50 2011 -0800

    Move apache-xml to external. (project 4 of 4)
    
    Change-Id: I8e1ea723481ae6d8e609563331c187576f306bce
    http://b/3351604

commit 63990cf56fc64033c0382ac19a3ffba7f525fb30
Merge: 1bedb73f9 a02714bd3
Author: Ken Sumrall <ksumrall@android.com>
Date:   Thu Jan 13 13:42:17 2011 -0800

    Merge "Move rild to the core class." into honeycomb

commit a02714bd3e8e75298c6e684ef375407fe02dd9b0
Author: Ken Sumrall <ksumrall@android.com>
Date:   Mon Jan 10 18:58:28 2011 -0800

    Move rild to the core class.
    
    Changes in init.stingray.rc now prevent rild from making sockets
    or named pipes on /data.  Now that rild no longer prevents /data
    from being unmounted, we can put it in the core class, which doesn't
    restart when we enable encryption.  This speeds up the boot by 20+
    seconds.
    
    Change-Id: I737baf804e089f4ddbd664eaa1e675a7bd62e699

commit f3c42b6ee4f0bb042cf93e1ac6c9c4d72e1558fa
Author: Ken Sumrall <ksumrall@android.com>
Date:   Mon Jan 10 18:58:28 2011 -0800

    Move rild to the core class.
    
    Changes in init.stingray.rc now prevent rild from making sockets
    or named pipes on /data.  Now that rild no longer prevents /data
    from being unmounted, we can put it in the core class, which doesn't
    restart when we enable encryption.  This speeds up the boot by 20+
    seconds.
    
    Change-Id: I71c426dab1b725e401116234167d41c7ccd958c1

commit a44aca6580b6f39459195275f4631682410aae4b
Author: Gloria Wang <gwang@google.com>
Date:   Mon Jan 10 17:33:25 2011 -0800

    Temporarily disable the drm service. do not merge
    
    Change-Id: I5cb04a9c2cc5b95443c6c0ea77132a4102ca47fc

commit 60b5b408cfcac450ce0cc56952d3b1c087b25428
Author: Gloria Wang <gwang@google.com>
Date:   Fri Jan 7 10:51:30 2011 -0800

    To remove drm service from groups of "system" and "root".
    
    Change-Id: Ieac11c667c72465f7082baab0787dc740797049f

commit a2a1f3149fb32d95bc81ddfd713d5bba9d6cbc61
Author: Brad Fitzpatrick <bradfitz@android.com>
Date:   Wed Oct 27 10:23:16 2010 -0700

    Let SocketClient users write binary data to clients.
    
    This is a dependency for the DNS proxy CLs.
    
    This CL also adds a new socket for the netd process to inherit which
    is owned by the inet group.  (so only apps with the INTERNET
    permission can use the DNS proxy...)
    
    Change-Id: I8a51924e0ed56c6066f77e6f1b02d39bdadac51e

commit 752923c168009d03e9e00e590155fbd0a2880ccb
Author: Ken Sumrall <ksumrall@android.com>
Date:   Fri Dec 3 16:33:31 2010 -0800

    Changes to init to support encrypted filesystems.
    
    These are the changes to init and init.rc necessary to
    support booting with and encrypted /data filesystem.
    A corresponding change to init.<device>.rc goes along
    with this change.
    
    Change-Id: I0c7e2cc39568358014a82e317735c0eae14dd683

commit 333f24bfbd9eea1347f20c2e88c5c1565b84aafe
Author: Nick Kralevich <nnk@google.com>
Date:   Fri Dec 10 14:10:16 2010 -0800

    don't run services with gid=0
    
    Ensure that we drop privileges for servicemanager
    and drmioserver.  These should not be running with
    gid=0.
    
    Bug: 3275526
    Testing: Applied change and successfully rebooted
    the device.  No obvious bugs.
    
    Change-Id: I782fbda812cb88e0a365788b45b3b32894623177

commit 1612425c50d2728542cac607fc71a4c8781bf1df
Author: Jaikumar Ganesh <jaikumar@google.com>
Date:   Mon Dec 13 13:46:53 2010 -0800

    Remove services for adding SDP records.
    
    This was an inefficient way of doing things and was
    temporary. There are now direct calls to Bluez to add reserved
    SDP records.
    
    This improves connection time after turning on BT by 6-8 secs.
    
    Change-Id: I8750f44e1de73c9cc935d68710b8964e3f50c3a6

commit 6388cfe03c1d5695d7cabe244b031af02ef686a8
Author: Iliyan Malchev <malchev@google.com>
Date:   Tue Dec 7 17:33:50 2010 -0800

    Revert "HACK: slow_start for mediaserver to prevent restart race condition"
    
    This reverts commit 9db7945ed2f9eb5756aa0c1e5e72fa6240f74847.

commit 9db7945ed2f9eb5756aa0c1e5e72fa6240f74847
Author: Paul Eastham <eastham@google.com>
Date:   Sat Dec 4 17:34:01 2010 -0800

    HACK: slow_start for mediaserver to prevent restart race condition
    
    Change-Id: Ia76385612fd127c5f11b3d64205e350f27acfd82

commit d49b4ef51eeba026e77f51e9c454464d0c5b9cd9
Author: Mike Lockwood <lockwood@android.com>
Date:   Fri Nov 19 09:12:27 2010 -0500

    init.rc: Allow console in userdebug builds
    
    Change-Id: Ib5734c6d3e2bf5a9da3d44721c529971f2345120
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit 4640fc0504ec69446b00dfb7ffcca48b085bf916
Author: Gloria Wang <gwang@google.com>
Date:   Tue Oct 26 14:10:22 2010 -0700

    Create directory for DRM plug-ins.
    
    Change-Id: I1bfef96b1949f288852cd88222e0ce2bbb186f40

commit a215823fc92d6c0f8623fe18a407d9853aef87cf
Merge: 8c5669f9f b71719873
Author: Brian Swetland <swetland@google.com>
Date:   Wed Oct 27 15:47:16 2010 -0700

    am b7171987: am b4d65399: disable console in user builds

commit b7171987382b768466a472c4c5f84cc496c95aea
Merge: 60afdedc4 b4d65399f
Author: Brian Swetland <swetland@google.com>
Date:   Wed Oct 27 15:45:26 2010 -0700

    am b4d65399: disable console in user builds

commit b4d65399fde02280b718e3b5b5cb1464a885c4b0
Author: Brian Swetland <swetland@google.com>
Date:   Wed Oct 27 15:40:23 2010 -0700

    disable console in user builds
    
    Also, run console as shell/log instead of root/root.
    
    Change-Id: I6104f1edddfd5e11843ff41d7839d0c296e6a6f9

commit 8c5669f9f9a228efebf4059fd4ceace5cece578b
Author: Brad Fitzpatrick <bradfitz@android.com>
Date:   Wed Oct 27 10:23:16 2010 -0700

    Let SocketClient users write binary data to clients.
    
    This is a dependency for the DNS proxy CLs.
    
    This CL also adds a new socket for the netd process to inherit which
    is owned by the inet group.  (so only apps with the INTERNET
    permission can use the DNS proxy...)
    
    Change-Id: Ic3475c697913ba85805b4e49801b65e7a1d59289

commit 98b1378606780c28501708ca02560c82bb1fda53
Merge: 43e21849d f3c29f0cf
Author: Brian Swetland <swetland@google.com>
Date:   Fri Oct 22 22:48:02 2010 -0700

    am f3c29f0c: am 5988ea72: add sdcard access permission to ril daemon
    
    Merge commit 'f3c29f0cf287ec3d329b012a2d48808b064632f6'
    
    * commit 'f3c29f0cf287ec3d329b012a2d48808b064632f6':
      add sdcard access permission to ril daemon

commit f3c29f0cf287ec3d329b012a2d48808b064632f6
Merge: ec70a9e1b 5988ea726
Author: Brian Swetland <swetland@google.com>
Date:   Fri Oct 22 22:34:46 2010 -0700

    am 5988ea72: add sdcard access permission to ril daemon
    
    Merge commit '5988ea726e91fbdc69485b729ea2f532fedfa1d6' into gingerbread-plus-aosp
    
    * commit '5988ea726e91fbdc69485b729ea2f532fedfa1d6':
      add sdcard access permission to ril daemon

commit 5988ea726e91fbdc69485b729ea2f532fedfa1d6
Author: Brian Swetland <swetland@google.com>
Date:   Fri Oct 22 22:17:17 2010 -0700

    add sdcard access permission to ril daemon
    
    Some RIL daemons write crashdumps to sdcard.
    
    Change-Id: I49a8d2cb342fd7f8bd23dbb1bcc378726e10a579

commit d7482b2f4cdd6a35f8707d94536801a958120b6b
Merge: d06df51bc 33357f547
Author: Brad Fitzpatrick <bradfitz@android.com>
Date:   Tue Sep 21 17:44:45 2010 -0700

    am 33357f54: am 6490257d: Make netd restart when system server hangs on it.
    
    Merge commit '33357f5477a24cb16bd3dd692fe5ca14755ab033'
    
    * commit '33357f5477a24cb16bd3dd692fe5ca14755ab033':
      Make netd restart when system server hangs on it.

commit 33357f5477a24cb16bd3dd692fe5ca14755ab033
Merge: 3b5214a67 6490257d1
Author: Brad Fitzpatrick <bradfitz@android.com>
Date:   Tue Sep 21 16:27:25 2010 -0700

    am 6490257d: Make netd restart when system server hangs on it.
    
    Merge commit '6490257d116c35d3da927ee7b91179dde64ef713' into gingerbread-plus-aosp
    
    * commit '6490257d116c35d3da927ee7b91179dde64ef713':
      Make netd restart when system server hangs on it.

commit 6490257d116c35d3da927ee7b91179dde64ef713
Author: Brad Fitzpatrick <bradfitz@android.com>
Date:   Tue Sep 21 15:49:06 2010 -0700

    Make netd restart when system server hangs on it.
    
    netd has been seen hanging (cause suspected but unconfirmed)
    which then brings down the system server which blocks forever
    on its main thread trying to connect to netd with its hung
    event loop.
    
    This then results in an infinite watchdog runtime restart loop
    because the situation never improves:  netd is still borked.
    
    Instead, we should kill netd and give it another chance when
    the system server dies.
    
    Bug: 3018996
    Bug: 3017876
    Change-Id: Ibf9ecf0ffcb78e48c38e5167f21cbeefe0e2a47f

commit d06df51bcd7bcc2656089a529fa6a455bad00d37
Merge: 1f7bc6d1a 3b5214a67
Author: Brian Swetland <swetland@google.com>
Date:   Sun Sep 19 04:35:19 2010 -0700

    resolved conflicts for merge of 3b5214a6 to master
    
    Change-Id: Id73c53c6c2e9c21eb9b1d1e624aaeb25097ea7a4

commit 3b5214a67f43e2e4f69428e98d3a2c130c7c87d8
Merge: 06b21887e 02863b957
Author: Brian Swetland <swetland@google.com>
Date:   Sun Sep 19 03:49:43 2010 -0700

    am 02863b95: add /vendor support
    
    Merge commit '02863b957cfbfc302d3136ed78c0cba86accacd8' into gingerbread-plus-aosp
    
    * commit '02863b957cfbfc302d3136ed78c0cba86accacd8':
      add /vendor support

commit 02863b957cfbfc302d3136ed78c0cba86accacd8
Author: Brian Swetland <swetland@google.com>
Date:   Sun Sep 19 03:36:39 2010 -0700

    add /vendor support
    
    - look in /vendor/firmware/... in addition to /system/etc/firmware/... for firmware loading
    - add /vendor/bin to path before /system/bin
    - add /vendor/lib to ldpath before /system/lib
    - configure appropriate permissions for /system/vendor/bin
    - symlink /vendor -> /system/vendor
    
    Change-Id: I0c06ca1e38a44f0c7024cee6cea8907aa93a4532

commit a5220b24d1b17b142e373aacbadf79a00effbbf0
Merge: e6d8a5f1d 26ce6e0e1
Author: Jean-Baptiste Queru <jbq@google.com>
Date:   Fri Sep 10 11:30:33 2010 -0700

    am 26ce6e0e: manual merge from readonly-korg-master
    
    Merge commit '26ce6e0e1608a9e804fa9721cc6326cdbaa5b7c1'
    
    * commit '26ce6e0e1608a9e804fa9721cc6326cdbaa5b7c1':
      - Add drm and drmio service

commit 26ce6e0e1608a9e804fa9721cc6326cdbaa5b7c1
Merge: 8df3a4a55 bb130ba79
Author: Jean-Baptiste Queru <jbq@google.com>
Date:   Fri Sep 10 10:42:02 2010 -0700

    manual merge from readonly-korg-master
    
    Change-Id: Id17f69d22fbbc84578be5aadd5e8e906ff0eb548

commit e6d8a5f1dfb81113b9421ea353915cde426023ed
Merge: 0159abaf0 8df3a4a55
Author: Brian Swetland <swetland@google.com>
Date:   Wed Sep 8 15:51:10 2010 -0700

    am 8df3a4a5: am 4012c0a4: Merge "remount / as read-only only on post-fs to allow per-target config of /" into gingerbread
    
    Merge commit '8df3a4a554184afba71887995c5f0983ce81196f'
    
    * commit '8df3a4a554184afba71887995c5f0983ce81196f':
      remount / as read-only only on post-fs to allow per-target config of /

commit 56de7a1263431819ff9a53dcd9e8e3306149ed99
Author: Brian Swetland <swetland@google.com>
Date:   Wed Sep 8 15:06:45 2010 -0700

    remount / as read-only only on post-fs to allow per-target config of /
    
    Change-Id: Ia89dd2021e0f960201b4cee573227f0addd48431

commit f2af88e81af5efb2d585963507f798d5a8b93d67
Author: Brian Carlstrom <bdc@google.com>
Date:   Wed Aug 4 15:45:52 2010 -0700

    Tracking merge of dalvik-dev to gingerbread
    
    git cherry-pick --no-commit b99a099c
    git cherry-pick --no-commit 9811671e023ceb82029040f7acf599013c773e6b
    git cherry-pick --no-commit d0645bf0cc76ef7be11cf77a8e1995233a1972e4
    
    Change-Id: Ie70fecaeaba97a25f114cd2717e381b5107533b1

commit e572d596b3715198fb48b3d8cef4939a71d58db2
Author: aimitakeshi <aimitakeshi@gmail.com>
Date:   Tue Jul 27 08:38:35 2010 +0900

    - Add drm and drmio service
    - Add /data/drm directory for storing DRM related data
    
    Change-Id: Ifd8922a3de109dbf5cd3f9cabbf4e5689b16c1d7

commit f848a429dde741742988e2365d257058d57acbf8
Merge: f4f7697f6 3cac9cb39
Author: Kenny Root <kroot@google.com>
Date:   Thu Jul 15 14:01:01 2010 -0700

    resolved conflicts for merge of 3cac9cb3 to master
    
    Change-Id: I86b5173ad49522eae082bf2a3d096dbfb5240129

commit c7858a3dde9db1c4cf2563a4388f422ff1bcb334
Author: Kenny Root <kroot@google.com>
Date:   Thu Jul 15 12:14:44 2010 -0700

    Add directories for OBB mounting
    
    Change-Id: Ib73e9bca50fb168ab5d147cc260666a770092961

commit d0645bf0cc76ef7be11cf77a8e1995233a1972e4
Author: Brian Carlstrom <bdc@google.com>
Date:   Wed Jun 30 00:56:35 2010 -0700

    updated BOOTCLASSPATH to track merge from dalvik-dev
    
    Change-Id: I10e6895ad3647dd789fe5fc7a7d37c4b71c61717

commit a2dffa9db6c08c240e9511faee1c16fea535ef3e
Author: Mike Lockwood <lockwood@android.com>
Date:   Tue Jun 15 20:57:59 2010 -0700

    init.rc: Move SD card support to device specific init.rc files
    
    Change-Id: I5745e91df2b7c5722bd6e650931d3d2d7d0eadcb
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit c5947806740172e66c1fd5259e86bc5543d873ac
Merge: 7ad012bde 0c6672c66
Author: Dianne Hackborn <hackbod@google.com>
Date:   Fri Jun 11 11:00:40 2010 -0700

    am 0c6672c6: am 8b0ec20d: Update OOM adj levels.
    
    Merge commit '0c6672c66a93f7a81d07ff3f59eee87ddb16db3c'
    
    * commit '0c6672c66a93f7a81d07ff3f59eee87ddb16db3c':
      Update OOM adj levels.

commit 8b0ec20d6f9636def6740085b203302c1680fa81
Author: Dianne Hackborn <hackbod@google.com>
Date:   Thu Jun 10 17:52:37 2010 -0700

    Update OOM adj levels.
    
    This introduces some new buckets that will be used by the activity
    manager, and adjusts the default levels to match what we had been
    setting for Droid.
    
    It turns out Passion has been using the old levels, which makes no
    sense for how much memory it has.  Also it is a problem with these
    definitions spreading to other projects for different devices, so
    I am going to update the defaults to be appropriate for our newer
    devices, and put here a file to tune them down for something like
    the sapphire.
    
    Change-Id: Ia4f33c4c3b94aeb3656f60b9222072a1d11e9e68

commit f96e700b338e9a0edee6c2114cc7310f7be48bc4
Merge: b0e270fd2 25e7b8fcc
Author: Christopher Tate <ctate@google.com>
Date:   Wed Jun 2 22:23:25 2010 -0700

    am 25e7b8fc: am b1fb3bd1: am 230cb33f: Make /proc/kmsg and /proc/sysrq-trigger system-process-readable

commit 25e7b8fcc3708b58736c7825ecf612d04020716e
Merge: 5458065fb b1fb3bd13
Author: Christopher Tate <ctate@google.com>
Date:   Wed Jun 2 11:20:39 2010 -0700

    am b1fb3bd1: am 230cb33f: Make /proc/kmsg and /proc/sysrq-trigger system-process-readable
    
    Merge commit 'b1fb3bd13a4da8bc46a44ec5eef6de9cb952f163' into kraken
    
    * commit 'b1fb3bd13a4da8bc46a44ec5eef6de9cb952f163':
      Make /proc/kmsg and /proc/sysrq-trigger system-process-readable

commit 230cb33fd1ab335c6f808c72db891993b00110a0
Author: Christopher Tate <ctate@google.com>
Date:   Tue Jun 1 17:46:09 2010 -0700

    Make /proc/kmsg and /proc/sysrq-trigger system-process-readable
    
    This is so that the system process can capture kernel thread stacks when the
    watchdog detects a deadlock.  Previously, /proc/kmsg was root/root and mode
    0400, and /proc/sysrq-trigger was root/root and mode 0200.  With this
    change, /proc/kmsg becomes root/system and 0440, and /proc/sysrq-trigger
    becomes root/system and 0220.
    
    Change-Id: Iac46bd10bd11d495024afeb5d693107ce5074791

commit 9811671e023ceb82029040f7acf599013c773e6b
Author: Jesse Wilson <jessewilson@google.com>
Date:   Tue May 4 16:32:37 2010 -0700

    Moving junit out of core.jar and into core-junit.jar.
    
    Change-Id: I603cba084c06ddbec21fc88bbaab7cde96952cb1

commit f83d0b9af5cbe4440cc41ceaa8a7806a13c86282
Author: Colin Cross <ccross@android.com>
Date:   Wed Apr 21 12:04:20 2010 -0700

    init: Move uevent handling to an external ueventd process
    
    Change-Id: Iea6c56013062ade633a1754f7bcf8cf09b3dedc1

commit 31712beaf7de127a1249b909cdefffbc25fff076
Author: Colin Cross <ccross@android.com>
Date:   Fri Apr 9 12:26:06 2010 -0700

    Move filesystem mounting into a new "fs" init level
    
    Devices with non-MTD storage need to override the filesystem mounting
    commands in init.rc.  Moving them to a new "fs" init level allows a
    custom init.<device>.rc to handle the mounting.
    
    Change-Id: If0e655139b9734650fb798b6eb0a90e2241fc29b

commit c741f22d8533226ce60903649a7a57b3f05a65af
Author: Nick Pelly <npelly@google.com>
Date:   Tue Mar 23 17:38:12 2010 -0700

    Add NET_RAW to mediaserver so that it can open a raw HCI socket to configure
    BT chip.
    
    Change-Id: I22065b313c7af28b4791c74ea3d403a628738102

commit bbf3ea46fb6df3b666cb66a09104d3a7694926dc
Author: Jean-Baptiste Queru <jbq@google.com>
Date:   Fri Mar 12 16:36:41 2010 -0800

    cleanup init.rc
    
    Change-Id: I7f7fefd61c6032c84fa63e597ea0e6bbe66d2e79

commit 89f235c5e028466bb273dbaacb3346f1f0ba9f1e
Author: Mike Chan <mike@android.com>
Date:   Mon Mar 1 11:36:10 2010 -0800

    init.rc: Add cpuacct to cgroup mount for cpu statistic
    
    Cpu accounting statistics expored in /acct
    
    Change-Id: I8a35816e94b69d9e67a3dd65aae16520864777d7
    Signed-off-by: Mike Chan <mike@android.com>

commit b91bf4ba864a392412397913ee09a8c1f2e7cc87
Author: San Mehat <san@google.com>
Date:   Sat Feb 27 08:20:11 2010 -0800

    Revert "init.rc: Add cpuacct to cgroup mount for cpu statistics"
    
    This reverts commit a7d88224ff7283c210c25ce6d57239b4053b5f14.
    
    This cgroup subsys should be mounted on it's own mount-point, since it's
    addition to /dev/cpuctl causes the cpu subsys to EPERM

commit a7d88224ff7283c210c25ce6d57239b4053b5f14
Author: Mike Chan <mike@android.com>
Date:   Thu Feb 25 17:12:48 2010 -0800

    init.rc: Add cpuacct to cgroup mount for cpu statistics
    
    Change-Id: Ic1893e1bf7b2c45659419b0bc55d42f50d030c9f
    Signed-off-by: Mike Chan <mike@android.com>

commit f0cb74e3b07d5de49dc875f8405e21d2a102e749
Author: San Mehat <san@google.com>
Date:   Fri Feb 26 10:01:14 2010 -0800

    rootdir: init.rc: Enable I/O priorities for media server and vold
    
    Sets the media-server to class 'real-time' pri 4, and vold to class 'best effort'
    pri 2
    
    Signed-off-by: San Mehat <san@google.com>

commit eafdd86f4d8f4ccc69f0c16550c65aa392f678d6
Author: Jaikumar Ganesh <jaikumar@google.com>
Date:   Thu Jan 7 20:24:55 2010 -0800

    Update bluetooth data files path.

commit a9db22f1228996d8f81e4f4903fa5c598a606fbd
Author: San Mehat <san@google.com>
Date:   Wed Feb 24 10:17:32 2010 -0800

    rootdir: init.rc: Add 'ASEC_MOUNTPOINT' environment variable.
    
    Signed-off-by: San Mehat <san@google.com>

commit bbfe1368d909be470f919b2349a974bee8dd0a9c
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Thu Feb 18 12:22:24 2010 +0800

    Remove dead services from init.rc.

commit 6ea3cc6089393286ab8b6cc459cfa9d7e58fc203
Author: San Mehat <san@google.com>
Date:   Fri Feb 19 18:25:22 2010 -0800

    rootdir: init.rc: Create secure staging directories, and a compat symlink
    
    Signed-off-by: San Mehat <san@google.com>

commit 55a1f0827be9920b093152cffb6eddd613d04bc9
Author: Vasu Nori <vnori@google.com>
Date:   Tue Jan 26 23:12:37 2010 -0800

    dont create sqlite_stmt_journals dir.
    
    this shoudl not be required any longer. in fact, some test-writers are
    abusing this dir.

commit 92175e04a56db804d4dae75fc49fdd5edc6a2968
Author: San Mehat <san@google.com>
Date:   Sun Jan 17 12:21:42 2010 -0800

    rootdir: init.rc: Fix typo in chown of /dev/cpuctl
    
    Signed-off-by: San Mehat <san@google.com>

commit 192277c0154eff542ddbce27d7c35995c0671748
Author: San Mehat <san@google.com>
Date:   Fri Jan 15 07:48:35 2010 -0800

    rootdir: init.rc: Add netd to startup services list
    
    Signed-off-by: San Mehat <san@google.com>

commit 1851d80959bd314af730451ebfb2a5e00bb0a83a
Author: San Mehat <san@google.com>
Date:   Wed Jan 6 16:59:17 2010 -0800

    init.rc: Adjust perms on /asec
    
    Signed-off-by: San Mehat <san@google.com>

commit d0aa32c3d99aeb0e6949ab1c4fae83283a946567
Author: Oscar Montemayor <oam@google.com>
Date:   Wed Jan 6 13:18:12 2010 -0800

    Apps on SD project. Small change to support apps on SD file system key storage.

commit 900570e2a833bde0683cce5254d9dc102509cabc
Author: San Mehat <san@google.com>
Date:   Wed Jan 6 10:38:49 2010 -0800

    init.rc: Create a small tmpfs on /asec so we can create mountpoints
    
    Signed-off-by: San Mehat <san@google.com>

commit 37c71dd9a7f488563c97fdca88cca701e2962e45
Author: San Mehat <san@google.com>
Date:   Mon Jan 4 09:41:52 2010 -0800

    init.rc: Add new /asec mount point
    
    Signed-off-by: San Mehat <san@google.com>

commit 37c586e6b11138beab400d1208183d49c12a9ef2
Author: Oscar Montemayor <oam@google.com>
Date:   Wed Dec 2 16:43:52 2009 -0800

    Encrypted File Systems Project.
    
    Temporarily creating emulated encrypted directories manually.
    Will remove those lines once a true encrypted FS is mounted, and proper
    framework chanfes have been made. This is required for the feature to
    work with the other changes.

commit 7359c16a852c23740ef2874aa6b66f629d1473b7
Author: Dan Egnor <egnor@google.com>
Date:   Mon Nov 23 19:25:44 2009 -0800

    Don't copy /proc/last_kmsg to /data/dontpanic/last_kmsg --
    it gets generated on every boot, so this is a bunch of writing
    for no particularly good reason.

commit eb67fac4723892ac8ae3fae87c05e776c49029c5
Author: Doug Zongker <dougz@android.com>
Date:   Thu Nov 19 16:52:02 2009 -0800

    change /cache/recovery group to cache
    
    To unbundle system update, we need users other than system to be able
    to write the /cache/recovery directory.

commit 5e7db233004a0869125d0f2d64a9e747faf252da
Author: Jean-Michel Trivi <jmtrivi@google.com>
Date:   Mon Nov 2 15:22:18 2009 -0800

    Make the RIL daemon part of the audio group so it can load region-specific
    acoustic parameters.

commit 831d8e1e3a08520369561087112ebf898e31704c
Author: San Mehat <san@google.com>
Date:   Tue Oct 13 12:24:47 2009 -0700

    rootdir: init.rc: Adjust background dirty writeout policy
    
    Signed-off-by: San Mehat <san@google.com>

commit 1dec5032cfadc1a3d7687ce5b6cd322e4151ce9d
Author: Dan Bornstein <danfuzz@android.com>
Date:   Fri Oct 9 14:24:51 2009 -0700

    Force the mediaserver process to restart whenever the zygote or system
    server do.
    
    Change-Id: I16ce4ae656473055e7e244ccd4af7055959e3c1c

commit 14d898e0141287cd9d8991bea5b63650bb8f5145
Author: Rebecca Schultz Zavin <rebecca@android.com>
Date:   Thu Oct 8 15:25:52 2009 -0700

    Make vmallocinfo readable by group log so we can put it in bugreports
    
    Change-Id: I7b04795c029c51108132e7a9eaf46b97de06de6f
    Signed-off-by: Rebecca Schultz Zavin <rebecca@android.com>

commit aa7d97106abf8c390e1aed71f7c175fb77fead38
Author: Brian Swetland <swetland@google.com>
Date:   Wed Oct 7 12:28:44 2009 -0700

    init.rc: don't mount debugfs
    
    We'll do this in the product-specific init files.

commit 529520e8240e6865aca77ae9abf78dacbaa72e2c
Author: San Mehat <san@google.com>
Date:   Tue Oct 6 11:22:55 2009 -0700

    Revert "rootdir: init.rc: *LATENCY EXPERIMENT* - Disable cgroups in favor of new scheduler policy support"
    
    This reverts commit 35ad5f41c39c5f3af7a8f00185a13366f4901e69.

commit 9b4f1ff210c449920890581b191da3568c10fbd1
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Fri Sep 18 10:35:26 2009 +0800

    init.rc: specify keystore directory and fix permissions.

commit 1320687bdb6df2de1c27fb03c827b69384d26f87
Author: Jaikumar Ganesh <jaikumar@google.com>
Date:   Fri Sep 18 15:45:43 2009 -0700

    Remove logwrapper for Bluetoothd.
    
    Change-Id: I6d16bc0dbdf9f3aff2080f8c7968ff3cb592811e

commit bb6f68c63d79bf58bd53f463de1bd23d49e5b8a4
Author: Brian Swetland <swetland@google.com>
Date:   Fri Sep 18 15:31:23 2009 -0700

    init.rc: mount debugfs for debugging
    
    - put it at /sys/kernel/debug so Arve will be happy
    - symlink /d to /sys/kernel/debug so Brian will be happy.

commit 35ad5f41c39c5f3af7a8f00185a13366f4901e69
Author: San Mehat <san@google.com>
Date:   Wed Sep 16 14:13:14 2009 -0700

    rootdir: init.rc: *LATENCY EXPERIMENT* - Disable cgroups in favor of new scheduler policy support
    
    Signed-off-by: San Mehat <san@google.com>

commit 7baff71b0d8fe320df9143b2fa59db0af1b7aa96
Author: San Mehat <san@google.com>
Date:   Wed Sep 16 13:32:23 2009 -0700

    rootdir: init.rc: tweak cfs scheduler - disable child_runs_first
    
    Signed-off-by: San Mehat <san@google.com>

commit 25f1a5aaffd1ef6e87d53d4fd3c14ea1b6c5b940
Author: Mike Lockwood <lockwood@android.com>
Date:   Fri Sep 11 17:13:28 2009 -0400

    init.rc: Adjust permissions on /data/dontpanic/ so dumpstate will not need root
    
    Change-Id: Iff83310f9411c39e1833b3d710b029b12f702993
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit 9332482ed2945174d94615f0720f88702cb92667
Author: Mike Lockwood <lockwood@android.com>
Date:   Tue Sep 8 22:55:59 2009 -0400

    init.rc: Make /data/dontpanic files readable only by the system process.
    
    Change-Id: If87470b7bcbb1c0774d10296ac82605db3dd9bf0
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit 82a6014d90c94a2032e014901917e1d503475d5e
Author: San Mehat <san@google.com>
Date:   Sat Sep 5 15:00:42 2009 -0700

    rootdir: init.rc: Allow all processes access to /data/dontpanic
    
       ***STOPSHIP***
    
    Signed-off-by: San Mehat <san@google.com>

commit abe3a9c30595846b7e3d705dd4b0aca37fb2f748
Author: Mike Lockwood <lockwood@android.com>
Date:   Wed Sep 2 18:09:26 2009 -0400

    init.rc: Add dumpstate service
    
    Change-Id: Iaf7094dd4693c47566c1acf860b750b762af840c
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit 020f35f274594f55eec956fdcfec90ad3d7a5c65
Author: San Mehat <san@google.com>
Date:   Tue Sep 1 15:38:18 2009 -0700

    rootdir: init.rc: Allow all processes access to apanic/ramconsole crash data.
    
        This is a temporary measure until bugreports are taken as root.
    
    *****STOPSHIP*****
    Signed-off-by: San Mehat <san@google.com>

commit f26d6cea4cda7b959491f26ab5f67b8ca99ea7fa
Author: San Mehat <san@google.com>
Date:   Tue Sep 1 09:11:04 2009 -0700

    rootdir: init.rc: Clean up dump collection
    
    Signed-off-by: San Mehat <san@google.com>

commit 21541872c3cdc93e60e18ba496715f8307f990b2
Author: San Mehat <san@google.com>
Date:   Wed Aug 26 16:38:51 2009 -0700

    rootdir: init.rc: Copy kernel crash dumps to /data and free kernel resources
    
    Signed-off-by: San Mehat <san@google.com>

commit 6bc6794f97aa4368237f23c3d3f7cafd6a796bf3
Merge: 781d04189 ee40fc4e6
Author: San Mehat <san@google.com>
Date:   Thu Aug 6 15:02:33 2009 -0700

    am ee40fc4e: rootdir: init.rc: Bump up background cpu shares to 5.0%
    
    Merge commit 'ee40fc4e64e1656a16603778bee895ea389ec7d5'
    
    * commit 'ee40fc4e64e1656a16603778bee895ea389ec7d5':
      rootdir: init.rc: Bump up background cpu shares to 5.0%

commit ee40fc4e64e1656a16603778bee895ea389ec7d5
Author: San Mehat <san@google.com>
Date:   Thu Aug 6 14:13:35 2009 -0700

    rootdir: init.rc: Bump up background cpu shares to 5.0%
    
    Signed-off-by: San Mehat <san@google.com>

commit 630f5f049b53c8586cca5a1acb928f83332baef5
Author: Jaikumar Ganesh <jaikumar@google.com>
Date:   Thu Jul 23 21:19:04 2009 -0700

    Add Bluetooth PBAP service.

commit d39e972831d45d4f8f8effd11691fd2c52d235c6
Merge: 2ff5c22e9 d52f54c45
Author: Doug Zongker <dougz@android.com>
Date:   Thu Jul 23 23:59:16 2009 -0700

    am d52f54c4: install recovery image using patch mechanism
    
    Merge commit 'd52f54c4552d2f35b3c2c2ac60350ac83760222f'
    
    * commit 'd52f54c4552d2f35b3c2c2ac60350ac83760222f':
      install recovery image using patch mechanism

commit d52f54c4552d2f35b3c2c2ac60350ac83760222f
Author: Doug Zongker <dougz@android.com>
Date:   Thu Jul 23 15:18:34 2009 -0700

    install recovery image using patch mechanism
    
    With the corresponding change in build/tools, the recovery image is
    installed via a shell script that is emitted by the OTA builder.

commit b44aeb7b6ad8799c31d87a6304d20f41387081a7
Author: Nick Pelly <npelly@google.com>
Date:   Tue Jul 14 21:29:15 2009 -0700

    Add OPUSH to register obex server.

commit 3338e5511402c395d0f771e16f92a7a95c0cab82
Merge: eea5ae9ce 48d116edf
Author: Mike Lockwood <lockwood@android.com>
Date:   Wed Jul 8 18:07:46 2009 -0700

    am 48d116ed: init.rc: Fix commands for allowing the system_server to access wpa_supplicant.conf
    
    Merge commit '48d116edf9c785ed284626cbe0bbf5c958cf5e67'
    
    * commit '48d116edf9c785ed284626cbe0bbf5c958cf5e67':
      init.rc: Fix commands for allowing the system_server to access wpa_supplicant.conf

commit 48d116edf9c785ed284626cbe0bbf5c958cf5e67
Author: Mike Lockwood <lockwood@android.com>
Date:   Wed Jul 8 18:42:08 2009 -0400

    init.rc: Fix commands for allowing the system_server to access wpa_supplicant.conf
    
    The touch command does not exist, and the chown commands are unnecessary because
    the system_server is in the WIFI group.
    
    Signed-off-by: Mike Lockwood <lockwood@android.com>

commit 3bbaec5a7b7aea8a4e1bb5bde3e0b1d2bbc461c1
Merge: 91217ca5c eefef3234
Author: Amith Yamasani <yamasani@google.com>
Date:   Mon Jul 6 11:03:02 2009 -0700

    am eefef323: Set the permissions of wifi supplicant file so that system can access it.
    
    Merge commit 'eefef3234ae1e3b0f2db71415f134c7ec49899fa'
    
    * commit 'eefef3234ae1e3b0f2db71415f134c7ec49899fa':
      Set the permissions of wifi supplicant file so that system can access it.

commit 91217ca5cbbf3ca2a96d596713e79f072da2c491
Merge: 79258b8b5 5c49135b0
Author: Android (Google) Code Review <android-gerrit@google.com>
Date:   Thu Jul 2 14:24:58 2009 -0700

    am 5c49135b: Merge change 5852 into donut
    
    Merge commit '5c49135b032235f82560d5e55b0e4c547506516b'
    
    * commit '5c49135b032235f82560d5e55b0e4c547506516b':
      rootdir: Modify init.rc to run mtpd/racoon as a non-root user.

commit eefef3234ae1e3b0f2db71415f134c7ec49899fa
Author: Amith Yamasani <yamasani@google.com>
Date:   Thu Jul 2 12:08:13 2009 -0700

    Set the permissions of wifi supplicant file so that system can access it.
    
    Create the required directories and set the correct owner and permissions.

commit 51afbf583819f3bdfc96f3c66c9c3444803e792a
Author: Chia-chi Yeh <chiachi@android.com>
Date:   Wed Jul 1 07:06:47 2009 +0800

    rootdir: Modify init.rc to run mtpd/racoon as a non-root user.
    
    Note that this change requires a new prebuilt kernel for AID_NET_ADMIN.

commit acc9a25ef745fce040e2e4e7adfa3d9e200aee99
Merge: f2a8d0a52 4322f2d74
Author: San Mehat <san@google.com>
Date:   Tue Jun 30 14:49:00 2009 -0700

    am 4322f2d7: init: Enable sched_yield() compatability mode on boot.
    
    Merge commit '4322f2d74f625a0e8275ea1d2fa0d78bfc5c3029'
    
    * commit '4322f2d74f625a0e8275ea1d2fa0d78bfc5c3029':
      init: Enable sched_yield() compatability mode on boot.

commit 4322f2d74f625a0e8275ea1d2fa0d78bfc5c3029
Author: San Mehat <san@google.com>
Date:   Mon Jun 29 08:47:43 2009 -0700

    init: Enable sched_yield() compatability mode on boot.
    
        In CFS, the (somewhat undefined) behavior of sched_yield() changed.
    
        See: http://kerneltrap.org/Linux/CFS_and_sched_yield
    
        This change enables 'compat' mode for sched_yield()
    
    Signed-off-by: San Mehat <san@google.com>

commit f1d63f3751ca787b2ebe76b6680342aa1ff3ca49
Merge: d7166ede3 bfa2f8e9b
Author: San Mehat <san@google.com>
Date:   Wed Jun 17 15:37:55 2009 -0700

    am bfa2f8e9: init: Bump up the max cpu bandwidth shares ratio for background.
    
    Merge commit 'bfa2f8e9b506a4b710ebcefa7c1e324609b8ca34'
    
    * commit 'bfa2f8e9b506a4b710ebcefa7c1e324609b8ca34':
      init: Bump up the max cpu bandwidth shares ratio for background.

commit bfa2f8e9b506a4b710ebcefa7c1e324609b8ca34
Author: San Mehat <san@google.com>
Date:   Tue Jun 16 17:23:22 2009 -0700

    init: Bump up the max cpu bandwidth shares ratio for background.
    
      New ratio is 1024/16 (1.5625% for background when cpu is under load)
    
    Signed-off-by: San Mehat <san@google.com>

commit 6df2e9fc2e04fc1e908935190837675d6f7599a6
Merge: ba4dea812 d709b5826
Author: Mike Chan <mike@android.com>
Date:   Sun Jun 14 21:12:35 2009 -0700

    am d709b582: remove 3G timeout values from init.rc, this should be device specific
    
    Merge commit 'd709b582604e7f9d53b97f9ae13c5e12b2466c56'
    
    * commit 'd709b582604e7f9d53b97f9ae13c5e12b2466c56':
      remove 3G timeout values from init.rc, this should be device specific

commit d709b582604e7f9d53b97f9ae13c5e12b2466c56
Author: Mike Chan <mike@android.com>
Date:   Fri Jun 12 13:55:15 2009 -0700

    remove 3G timeout values from init.rc, this should be device specific
    
    Signed-off-by: Mike Chan <mike@android.com>

commit 6f5fb6fda101cac4208e4caecee0f70680e2d996
Merge: 1d3669682 3d6f16e5e
Author: San Mehat <san@google.com>
Date:   Wed Jun 10 11:15:30 2009 -0700

    am 3d6f16e5: init.rc: Set default cpu shares for background scheduler group to < 1%
    
    Merge commit '3d6f16e5edc9834b13a0bcc8a33c98e25518d919'
    
    * commit '3d6f16e5edc9834b13a0bcc8a33c98e25518d919':
      init.rc: Set default cpu shares for background scheduler group to < 1%

commit 3d6f16e5edc9834b13a0bcc8a33c98e25518d919
Author: San Mehat <san@google.com>
Date:   Wed Jun 10 10:49:57 2009 -0700

    init.rc: Set default cpu shares for background scheduler group to < 1%
    
    Signed-off-by: San Mehat <san@google.com>

commit 1d36696821cd81ed7b668bb9d2b0b8a43540ccd2
Author: Jaikumar Ganesh <jaikumar@google.com>
Date:   Tue May 5 22:28:54 2009 -0700

    Bluez4 changes
    
    Rename hcid to bluetoothd and change permissions.

commit 720f08f3ffb27084f2a9c98d661dae53d7191ebf
Author: Dmitry Shmidt <dimitrysh@google.com>
Date:   Tue Jun 9 14:38:56 2009 -0700

    Add /config mounting point
    
    Signed-off-by: Dmitry Shmidt <dimitrysh@google.com>

commit 1f75d709c10f49d2e2390b888e766bcfd17da860
Author: Chung-yih Wang <cywang@google.com>
Date:   Mon Jun 1 19:04:05 2009 +0800

    Add VPN and Keystore services and data directories.
    
    -- changed the default mode to 0770 for keystore with the new user 'keystore'.
    -- add the keystore service providing the basic key lookup/install/remove, but
      only keystore user can access the key content.

commit 17df71e0b277372de1d915c168c07c8877e82395
Author: Christopher Tate <ctate@google.com>
Date:   Fri Jun 5 18:20:08 2009 -0700

    Add an OOM adjustment category for apps undergoing backup
    
    In this initial commit, apps undergoing backup are treated equivalently
    to apps hosting services:  more important than anything other than the
    foreground app.

commit 8b2cf9f04b924f299d2d250ae4d6826627847842
Author: Mathias Agopian <mathias@google.com>
Date:   Wed May 20 18:09:51 2009 -0700

    add bootanimation service to init.rc

commit 269946c09faaff88403289bcfa2519e994f75c21
Author: San Mehat <san@google.com>
Date:   Wed May 6 11:18:43 2009 -0700

    init.rc: Add Nexus to services (disabled for now)
    
    Signed-off-by: San Mehat <san@google.com>

commit 4933098e22747a9066b5352273c38856b0203931
Author: San Mehat <san@google.com>
Date:   Tue Apr 21 14:34:19 2009 -0700

    cgroups: Initialize cgroups at startup.
    
    Signed-off-by: San Mehat <san@google.com>

commit 01161168aa87ea9f1513d2b7b1232521c84e1ea4
Author: Nick Pelly <>
Date:   Wed Mar 25 18:00:56 2009 -0700

    Automated import from //branches/donutburger/...@142809,142809

commit f614d64d4b4dfcd20c77ac3ccf2d9c9090a49303
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Wed Mar 18 17:39:49 2009 -0700

    auto import from //branches/cupcake_rel/...@140373

commit e037fd7e193ecccbb5c0888e49f6d58c224bc11d
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Fri Mar 13 13:04:37 2009 -0700

    auto import from //branches/cupcake_rel/...@138607

commit 2015549667fb77706a9879e974a3875ebccd8198
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Wed Mar 11 12:12:01 2009 -0700

    auto import from //branches/cupcake/...@137873

commit e4749f30e5bd8cec727a6d7504b10fc80426316a
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Mon Mar 9 11:52:15 2009 -0700

    auto import from //branches/cupcake/...@137197

commit dd7bc3319deb2b77c5d07a51b7d6cd7e11b5beb0
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Tue Mar 3 19:32:55 2009 -0800

    auto import from //depot/cupcake/@135843

commit e54eebbf1a908d65ee8cf80bab62821c05666d70
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Tue Mar 3 18:29:04 2009 -0800

    auto import from //depot/cupcake/@135843

commit 35237d135807af84bf9b0e5b8d7f8633e58db6f5
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Wed Dec 17 18:08:08 2008 -0800

    Code drop from //branches/cupcake/...@124589

commit 4f6e8d7a00cbeda1e70cc15be9c4af1018bdad53
Author: The Android Open Source Project <initial-contribution@android.com>
Date:   Tue Oct 21 07:00:00 2008 -0700

    Initial Contribution
